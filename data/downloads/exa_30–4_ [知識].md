# 30â€“4: [çŸ¥è­˜] LangChain X LangGraph ä¹‹è¦å¦‚ä½•è¨˜å¾—ä½ ? ( Memory )

**URL**:
https://medium.com/@marklin.coffee.pro/30-4-%E7%9F%A5%E8%AD%98-langchain-x-langgraph-%E4%B9%8B%E8%A6%81%E5%A6%82%E4%BD%95%E8%A8%98%E5%BE%97%E4%BD%A0-memory-b58014f42b1d

## å…ƒæ•°æ®
- å‘å¸ƒæ—¥æœŸ: 2025-09-19T00:00:00+00:00

## å®Œæ•´å†…å®¹
---
30â€“4: [çŸ¥è­˜] LangChain X LangGraph ä¹‹è¦å¦‚ä½•è¨˜å¾—ä½ ? ( Memory ) | by é¦¬å…‹| Medium
[Sitemap] 
[Open in app] 
Sign up
[Sign in] 
[Medium Logo] 
[
Write
] 
[
Search
] 
Sign up
[Sign in] 
![] 
[Mastodon] 
# 30â€“4: [çŸ¥è­˜] LangChain X LangGraph ä¹‹è¦å¦‚ä½•è¨˜å¾—ä½ ? ( Memory )
[
![é¦¬å…‹] 
] 
[é¦¬å…‹] 
17 min read
Â·Sep 19, 2025
[
] 
--
[] 
Share
Press enter or click to view image in full size
![] 
åœ¨å‰å…©ç¯‡æ–‡ç« ä¸­ï¼Œå’±å€‘å¤§æ¦‚ç†è§£äº†LangChain èˆ‡LangGraph çš„åŠŸç”¨ï¼Œä½†æˆ‘å€‘ä»–å€‘çš„æ–‡ä»¶ä¸­ï¼Œç™¼ç¾å…©å€‹éƒ½æœ‰æ‰€è¬‚çš„Memory åŠŸèƒ½ï¼Œæ‰€ä»¥é€™ç¯‡æ–‡ç« å°‡æœƒä¾†è«‡è«‡ä»¥ä¸‹ä¸‰å€‹ä¸»é¡Œ:
* LangChain çš„Memory
* LangGraph çš„Memory
* å…©è€…çš„åˆ†å·¥æ˜¯å¦‚ä½•å‘¢?
## ğŸš€LangChain çš„Memory
åœ¨LangChain 1.0.0 ç¸½å…±æœ‰å…©ç¯‡æ–‡ä»¶å°ˆé–€åœ¨è¨è«–é€™å€‹ä¸»é¡Œ:
* [short-term-memory] 
* [long-term-memory] 
**ğŸ¤” åœ¨LangChain ä¸­å¦‚ä½•è®“AI Agent è¨˜å¾—äº‹æƒ…å‘¢?**
å°±åƒå¦‚ä¸‹çš„ç¯„ä¾‹ä¸€æ¨£ï¼Œä¸»è¦å°±æ˜¯æœƒç”¨checkpointer é€™å€‹æ¦‚å¿µï¼Œä¾†å„²æ”¾ï¼Œç„¶å¾Œæœ‰å€‹é‡é»:
*> å®ƒæ˜¯ä»¥thread_id ç‚ºè¨˜æ†¶å–®ä½*
æ‰€ä»¥æˆ‘å€‘åœ¨å¯¦å‹™ä¸Šæ™‚ï¼Œæœƒæ ¹æ“šéœ€æ±‚ä¾†æ±ºå®šå¦‚ä½•ç”¢ç”Ÿé€™å€‹thread\_idï¼Œä¾‹å¦‚æ˜¯è¦è¨˜å¾—é€™å€‹äººä»Šå¤©éçš„è©±ï¼Œé‚£å°±æœƒæ˜¯ä»¥ã€ user\_id + date ã€ä¾†ç”¢ç”Ÿå€‹thread\_id ä¹‹é¡çš„ï¼Œåæ­£å°±æ˜¯ä»¥éœ€æ±‚ç‚ºä¸»ã€‚ä¸‹é¢çš„ç¯„ä¾‹æˆ‘å€‘å°±æ˜¯ç°¡å–®ç”¨è¨˜æ†¶åŠŸèƒ½ï¼Œä¾†è®“ä»–è¨˜å¾—æˆ‘æ˜¯èª°ã€‚```
import { createAgent, MemorySaver } from &quot;langchain&quot;;
t
const checkpointer = new MemorySaver();
const agent = createAgent({
model: &quot;openai:gpt-5-nano&quot;,
tools: [],
checkpointer,
});
const systemMessage = { role: &quot;system&quot;, content: &quot;ä½ æ˜¯ä¸€å€‹åŠ©ç†ï¼Œè«‹ç”¨ç°¡å–®çš„æ–¹å¼å›ç­”å•é¡Œï¼Œç”¨ç¹é«”ä¸­æ–‡å›ç­”&quot; };
const threadId = &quot;1&quot;;
const result1 = await agent.invoke(
{ messages: [systemMessage, { role: &quot;user&quot;, content: &quot;ä½ å¥½æˆ‘æ˜¯é¦¬å…‹&quot; }] },
{ configurable: { thread\_id: threadId } }
);
const result2 = await agent.invoke(
{ messages: [systemMessage, { role: &quot;user&quot;, content: &quot;æˆ‘æ˜¯èª°&quot; }] },
{ configurable: { thread\_id: threadId } }
);
// 1. &quot;å—¨ï¼Œé¦¬å…‹ï¼å¾ˆé«˜èˆˆèªè­˜ä½ ã€‚éœ€è¦æˆ‘å¹«å¿™åšä»€éº¼å‘¢ï¼Ÿå‘Šè¨´æˆ‘ä½ æƒ³åšçš„äº‹å°±å¥½ã€‚
// 2. &quot;ä½ æ˜¯é¦¬å…‹ã€‚å¾ˆé«˜èˆˆèªè­˜ä½ ã€‚éœ€è¦æˆ‘å¹«å¿™åšä»€éº¼å—ï¼Ÿ&quot;
```
**ğŸ¤” è¦æ³¨æ„ä¸Šé¢çš„ç¯„ä¾‹ä¸é©åˆä¸€äº›æƒ…æ³ï¼Œå› ç‚ºæ˜¯å„²åœ¨Memory ä¸­**
å¤§éƒ¨ä»½çš„å·¥ç¨‹å¸«æ‡‰è©²éƒ½çŸ¥é“é€™æ¨£æœƒç™¼ç”Ÿå¹¾å€‹å•é¡Œ:
1. å¦‚æœæ˜¯å„²æ”¾æœå‹™çš„memory ä¸­ï¼Œåªè¦æœå‹™é‡å•Ÿå¾Œï¼Œé‚£é€™äº›è¨˜æ†¶éƒ½æœƒæ¶ˆå¤±ã€‚2. å¦‚æœä½ æ˜¯æœ‰å¤šå€‹process æœå‹™ï¼Œæˆ–æ˜¯ä½ æ˜¯ç”¨k8s æœ‰å¤šå€‹pod æƒ…æ³ä¸‹ï¼Œä½ ç¬¬ä¸€æ¬¡èŠå¤©æ˜¯è¨˜åœ¨ç¬¬1 å°ï¼Œé™¤éä½ èƒ½ç¢ºä¿ä½ ä¸‹1 æ¬¡å¯ä»¥èµ°åˆ°ç¬¬1 å°ï¼Œä¸ç„¶è¨˜æ†¶ä¹Ÿæœƒæ¶ˆå¤±ï¼Œç•¶ç„¶ä¹Ÿå¯ä»¥æƒ³è¾¦æ³•æ‰“åˆ°åŒä¸€å°ï¼Œä½†å•é¡Œå°±æœƒå‡ºåœ¨å£“åŠ›å¯èƒ½æœƒç„¡æ³•åˆ†æ•£ã€‚( å°è£œå……: å³æ™‚é€šè¨Šçš„ç³»çµ±æ¶æ§‹ä¹Ÿæœ‰åŒæ¨£å•é¡Œ)
æ‰€ä»¥ç•¶ç„¶LangChain ä¹Ÿæœ‰æåˆ°å„²æ”¾åœ¨è³‡æ–™åº«ä¸­çš„æ–¹æ¡ˆ:
ä¾‹å¦‚postgres å¦‚ä¸‹ç¯„ä¾‹:
```
import { createAgent } from &quot;langchain&quot;;
import { PostgresSaver } from &quot;@langchain/langgraph-checkpoint-postgres&quot;;
const DB\_URI = &quot;&quot;postgresql://postgres:postgres@localhost:5442/postgres?sslmode=disable&quot;&quot;;
const checkpointer = PostgresSaver.fromConnString(DB\_URI);
const agent = createAgent({
model: &quot;openai:gpt-5-nano&quot;,
tools: [],
checkpointer,
});
```
å®ƒé‚„æœ‰ä»¥ä¸‹å¹¾ç¨®Saver ç„¶å¾Œæˆ‘æ˜¯åœ¨é€™ä¸‹é¢æ‰¾åˆ°çš„ï¼Œä½ åœ¨LangChain çš„æ–‡ä»¶æ‰¾ä¸åˆ°ï¼Œçœ‹èµ·ä¾†å®ƒæ˜¯å¯«åœ¨LangGraph ä½†å¥½åƒä¹Ÿæœ‰ç¼ºï¼Œç„¶å¾Œç›´æ¥å»LangGraph çš„repo çœ‹æœ‰ä»¥ä¸‹å¹¾å€‹:
[https://github.com/langchain-ai/langgraphjs/tree/main/libs] 
* checkpoint-mongodb
* checkpoint-postgres
* checkpoint-redis
* checkpoint-sqlite
ç„¶å¾ŒLangGraph çš„æ–‡ä»¶é€£çµåœ¨é€™è£¡ï¼Œä½†æ˜¯å®ƒåªåˆ—äº†ä»¥ä¸‹å¹¾å€‹:[https://docs.langchain.com/oss/javascript/langgraph/persistence#checkpointer-libraries] 
* @langchain/langgraph-checkpoint-sqlite
* @langchain/langgraph-checkpoint-postgres
çœ‹èµ·ä¾†repo ä¸­æœ‰mongodb èˆ‡redisï¼Œä½†æ˜¯æ–‡ä»¶ä¹Ÿæ²’æœ‰ï¼ŒçœŸæœ‰é»æä¸å¤ªæ‡‚å®ƒå€‘çš„æ–‡ä»¶åŒæ­¥æ©Ÿåˆ¶ï¼Œä¸éä¹Ÿæœ‰å¯èƒ½é€™å…©å€‹çš„ç‰ˆæœ¬é‚„åœ¨æ—©æœŸ 0.1 ç‰ˆæ‰€ä»¥æ‰æ²’æ›´æ–°åˆ°æ–‡ä»¶ä¸Šï¼Œå¤§æ¦‚ã€‚**ğŸ¤” å¥‡æ€ªï¼Œçœ‹èµ·ä¾†ä¸Šé¢å°±æœ‰é•·æœŸè¨˜æ†¶çš„æ©Ÿåˆ¶äº†ï¼Œé‚£LangChain æ–‡ä»¶çš„é•·æœŸè¨˜æ†¶ç« ç¯€æ˜¯åœ¨èªªå•¥**
[https://docs.langchain.com/oss/javascript/langchain/long-term-memory] 
å—¯å—¯å—¯â€¦æˆ‘å®Œå…¨çœ‹ä¸å¤ªæ‡‚ä»–åœ¨åšä»€éº¼ï¼ŒåªçŸ¥é“ä»¥ä¸‹å¹¾ä»¶äº‹æƒ…:
* å®ƒæ˜¯ç”¨LangGraph æä¾›çš„æ±è¥¿ä¾†è™•ç†ã€‚* é•·å‡ºäº†ä¸€å€‹å«Store çš„æ±è¥¿ï¼Œä½†çœ‹èµ·ä¾†å°±æ˜¯å°‡è¨˜æ†¶åŠŸèƒ½æŠ½è±¡æˆStore ç„¶å¾Œå¯ä»¥åƒæ“ä½œ?
é€™å€‹Store ä¸»è¦æ˜¯ç”¨åœ¨è·¨thread\_id ä¸Šï¼Œä½†æˆ‘çœ‹åˆ°çš„æ™‚å¾Œåœ¨æƒ³ï¼Œé‚£é€™å€‹ç”¨æˆ‘å€‘å¹³å¸¸å¸¸ç”¨çš„è³‡æ–™åº«ä¸å°±è¡Œäº†? æˆ‘ç¾åœ¨ä¹Ÿé‚„æ²’æ‚Ÿå‡ºä»–çš„çœŸå¯¦ç”¨æ³•ã€‚## ğŸš€LangGraph çš„Memory
[https://docs.langchain.com/oss/javascript/langgraph/persistence] 
Press enter or click to view image in full size
![] 
[åœ–ç‰‡ä¾†æº: LangGraph å®˜ç¶²] 
ä»¥ä¸‹ç‚ºå®˜ç¶²çš„ä½¿ç”¨ç¯„ä¾‹ï¼Œäº‹å¯¦ä¸Šå°±å’Œä¸Šé¢LangChain çš„ç¯„ä¾‹æœ‰90 % åƒï¼Œå°±åªæ˜¯:
* LangChain çš„ç¯„ä¾‹çš„checkoutpointer æ˜¯è¨­åœ¨createAgent ä¸­ã€‚* LangGraph çš„ç¯„ä¾‹çš„checkoutpointer æ˜¯è¨­åœ¨workflow ( graph ) ä¸­ã€‚æ‰€ä»¥LangGraph æ•´å€‹Memory æ©Ÿåˆ¶æ˜¯ä»¥workflow ç‚ºå–®ä½ã€‚```
import { StateGraph, START, END, MemorySaver } from &quot;@langchain/langgraph&quot;;
import { registry } from &quot;@langchain/langgraph/zod&quot;;
import \* as z from &quot;&quot;zod&quot;&quot;;
const State = z.object({
foo: z.string(),
bar: z.array(z.string()),
});
const workflow = new StateGraph(State)
.addNode(&quot;nodeA&quot;, (state) =&gt; {
return { foo: &quot;a&quot;, bar: [&quot;a&quot;] };
})
.addNode(&quot;nodeB&quot;, (state) =&gt; {
return { foo: &quot;b&quot;, bar: [&quot;b&quot;] };
})
.addEdge(START, &quot;nodeA&quot;)
.addEdge(&quot;nodeA&quot;, &quot;nodeB&quot;)
.addEdge(&quot;nodeB&quot;, END);
const checkpointer = new MemorySaver();
const graph = workflow.compile({ checkpointer });
const config = { configurable: { thread\_id: &quot;&quot;1&quot;&quot; } };
const result = await graph.invoke({ foo: &quot;&quot; }, config);
console.log(result);
```
**ğŸ¤” åœ¨LangGraph ä¸Šç”¨é€™å€‹å¯¦éš›å¯ä»¥å¹¹éº»? LangChain ç”¨çš„å¯ä»¥è®“Agent è¨˜å¾—ä¸Šä¸‹æ–‡ï¼Œé‚£é€™å€‹å‘¢?**
å°\~ LangGraph é€™è£¡ä¸»è¦çš„ç›®çš„ä¸æ˜¯ç‚ºäº†Agentï¼Œè€Œæ˜¯ç‚ºäº†è®“ Workflow åšåˆ°ä»¥ä¸‹å¹¾å€‹äº‹æƒ…:
* Human-in-the-loop : å°±æ˜¯æˆ‘å€‘ä¸Šä¸€ç¯‡æœ‰æåˆ°çš„ï¼Œå¯ä»¥åœ¨æ•´å€‹Workflow åŠ å…¥äººé¡çš„åˆ¤æ–·ç¢ºèªã€‚* Time Travel : é€šå¸¸æ˜¯ç‚ºäº†Debug èˆ‡åˆ†æè®“ä½ å¯ä»¥å›ééå»æŸå€‹æ™‚é–“é»çš„Node ç„¶å¾Œå†é–‹å§‹èµ°ã€‚* Fault-tolerance : å°±æ˜¯ç‚¸äº†ï¼Œå¯ä»¥å¾ç‚¸çš„é‚£å€‹ç¯€é»é‡è·‘ã€‚ã€‚**ğŸ¤” é‚£å®ƒæœ‰åˆ†é•·æœŸæ¨¡å¼å—?**
ç•¶ç„¶ï¼Œè€Œä¸”LangGraph çš„æ–‡ä»¶ç¸½æ–¼ä¸åƒLangChain åˆ†é–‹ä¾†é‚„æ²’å¯«ä»€éº¼ã€‚```
import { PostgresStore } from &quot;@langchain/langgraph-checkpoint-postgres&quot;;
const DB\_URI = &quot;&quot;postgresql://postgres:postgres@localhost:5442/postgres?sslmode=disable&quot;&quot;;
const store = PostgresStore.fromConnString(DB\_URI);
const builder = new StateGraph(...);
const graph = builder.compile({ store });
```
## ğŸš€åœ¨Agentic AI ä¸­å…©è€…çš„åˆ†å·¥æ˜¯å¦‚ä½•å‘¢?
ç°¡å–®çš„èªªåˆ†é¡å¦‚ä¸‹:
**ğŸ¤” LangChainï¼ˆAgent å±¤ï¼‰**
* ç›®æ¨™: è®“ä¸€å€‹Agent åœ¨ä¸€æ¢å°è©±ï¼ˆthreadï¼‰ä¸­è¨˜å¾—å…ˆå‰çš„å°è©±ã€‚
* å–®ä½: Agent
* å·¥å…·: checkpointerï¼ˆ MemorySaver / Postgres / Redis )ã€store ( è·¨thread å ´åˆå…±äº«ç”¨)
**ğŸ¤” LangGraphï¼ˆ Workflow å±¤ï¼‰**
* ç›®æ¨™: è®“æ•´æ¢workflo èƒ½ä¸­æ–·ã€é‡æ’­ã€å¤±æ•—æ¢å¾©ã€äººé¡ä»‹å…¥ï¼Œä¸¦åœ¨è·¨thread å ´åˆå…±äº«é—œéµçŸ¥è­˜ã€‚* å–®ä½: Workflowã€‚
* æ­¦å™¨: checkpointerï¼ˆ MemorySaver / Postgres / Redis )ã€store ( è·¨thread å ´åˆå…±äº«ç”¨)
**ğŸ¤” é‚£é©åˆæ‰€æœ‰åŒ…å«Workflow èˆ‡Agent éƒ½ç”¨åŒä¸€å€‹checkpointer å—?**
*> å¯ä»¥ï¼Œè¦æ³¨æ„å¤ªé•·çš„å•é¡Œï¼Œå¦‚æœåœ¨agent ç”¨checkpointer æœƒè‡ªå‹•è¨˜å¾—ä¹‹å‰æ•´å€‹workflow èªªéçš„è©±å–”ï¼Œé€™ä¹Ÿä»£è¡¨æœƒé€çµ¦LLMã€‚
*
å¦‚ä¸‹ç¯„ä¾‹ï¼Œæˆ‘çš„createAgent èˆ‡workflow éƒ½æ˜¯åŒä¸€å€‹checkpointer èˆ‡ç›¸åŒçš„thread\_idï¼Œæ‰€ä»¥ä¸‹é¢é€™å€‹ç¯„ä¾‹çš„åŸ·è¡Œçµæœå°±æœƒè¨˜å¾—æˆ‘æ˜¯èª°ã€‚
```
import { StateGraph, START, END, MemorySaver } from &quot;@langchain/langgraph&quot;;
import \* as z from &quot;&quot;zod&quot;&quot;;
import { createAgent } from &quot;langchain&quot;;
const checkpointer = new MemorySaver();
const config = { configurable: { thread\_id: &quot;&quot;1&quot;&quot; } };
const State = z.object({
messages: z.array(z.object({ role: z.string(), content: z.string() })),
});
const agent = createAgent({
model: &quot;openai:gpt-5-nano&quot;, // å¯æ›ä½ å¯¦éš›å¯ç”¨çš„æ¨¡å‹tools: [],
checkpointer,
});
const workflow = new StateGraph(State)
.addNode(&quot;nodeA&quot;, (state) =&gt; {
return {
messages: [
...(state.messages ?? []),
{ role: &quot;user&quot;, content: &quot;æˆ‘æ˜¯é¦¬å…‹&quot; },
],
};
})
.addNode(&quot;nodeB&quot;, async (state) =&gt; {
const res = await agent.invoke(
{
messages: [
{ role: &quot;system&quot;, content: &quot;è«‹ç”¨ç¹é«”ä¸­æ–‡ã€ç°¡æ½”å›ç­”ã€‚&quot; },
{
role: &quot;user&quot;,
content: `æˆ‘æ˜¯èª°`,
},
],
},
config
);
return {
messages: res.messages,
};
})
.addEdge(START, &quot;nodeA&quot;)
.addEdge(&quot;nodeA&quot;, &quot;nodeB&quot;)
.addEdge(&quot;nodeB&quot;, END);
const graph = workflow.compile({ checkpointer });
const result = await graph.invoke({ messages: [] }, config);
console.log(result);
```
é€™æ˜¯console çµæœã€‚```
{
messages: [
HumanMessage {
&quot;id&quot;: &quot;4939039d-7141-4a6c-a974-035654d20897&quot;,
&quot;content&quot;: &quot;æˆ‘æ˜¯é¦¬å…‹&quot;,
&quot;&quot;additional\_kwargs&quot;&quot;: {},
&quot;&quot;response\_metadata&quot;&quot;: {}
},
SystemMessage {
&quot;id&quot;: &quot;39cde393-6fe4-4f5d-bdfa-2c72d3fc49bf&quot;,
&quot;content&quot;: &quot;è«‹ç”¨ç¹é«”ä¸­æ–‡ã€ç°¡æ½”å›ç­”ã€‚&quot;,
&quot;&quot;additional\_kwargs&quot;&quot;: {},
&quot;&quot;response\_metadata&quot;&quot;: {}
},
HumanMessage {
&quot;id&quot;: &quot;1981b111-4fcd-45c1-8402-a96ccc18dbaf&quot;,
&quot;content&quot;: &quot;æˆ‘æ˜¯èª°&quot;,
&quot;&quot;additional\_kwargs&quot;&quot;: {},
&quot;&quot;response\_metadata&quot;&quot;: {}
},
AIMessage {
&quot;id&quot;: &quot;chatcmpl-CH3S8jYUCMPUSHYMoTeRTpzhopiM4&quot;,
&quot;content&quot;: &quot;ä½ æ˜¯é¦¬å…‹ã€‚&quot;,
&quot;name&quot;: &quot;model&quot;,
&quot;&quot;additional\_kwargs&quot;&quot;: {},
&quot;&quot;response\_metadata&quot;&quot;: {
&quot;tokenUsage&quot;: {
&quot;promptTokens&quot;: 29,
&quot;completionTokens&quot;: 270,
&quot;totalTokens&quot;: 299
},
&quot;&quot;finish\_reason&quot;&quot;: &quot;&quot;stop&quot;&quot;,
&quot;&quot;model\_provider&quot;&quot;: &quot;&quot;openai&quot;&quot;,
&quot;&quot;model\_name&quot;&quot;: &quot;&quot;gpt-5-nano-2025-08-07&quot;&quot;
},
&quot;&quot;tool\_calls&quot;&quot;: [],
&quot;&quot;invalid\_tool\_calls&quot;&quot;: [],
&quot;&quot;usage\_metadata&quot;&quot;: {
&quot;&quot;output\_tokens&quot;&quot;: 270,
&quot;&quot;input\_tokens&quot;&quot;: 29,
&quot;&quot;total\_tokens&quot;&quot;: 299,
&quot;&quot;input\_token\_details&quot;&quot;: {
&quot;audio&quot;: 0,
&quot;&quot;cache\_read&quot;&quot;: 0
},
&quot;&quot;output\_token\_details&quot;&quot;: {
&quot;audio&quot;: 0,
&quot;reasoning&quot;: 256
}
}
}
]
}
```
**ğŸ¤” ç”±æ–¼Token è¦éŒ¢ï¼Œæ‰€ä»¥ç†æƒ³ä¸Šé‚„æ˜¯æœƒå¸Œæœ›å°‡worfklow èˆ‡agent çš„åˆ†é–‹ï¼Œç„¶å¾Œèµ°åˆ°agent æ™‚ï¼Œå†è‡ªå·²åˆ¤æ–·è¦ä¸è¦æŠ“æ•´å€‹workflow çš„è³‡æ–™é€²å…¥åˆ°è‡ªå·²çš„agent**
æ‰€ä»¥å¤§æ¦‚æœƒæ”¹æˆå¦‚ä¸‹ï¼Œæœƒå°‡checkpointer åˆ†é–‹ä¾†ï¼Œç„¶å¾Œåœ¨nodeB ä¸­è‡ªå·²åˆ¤æ–·è¦ä¸è¦å¾state æŠ“æ•´å€‹workflow çš„è³‡æ–™å¾Œï¼Œå†å¸¶å…¥åˆ°è‡ªå·²çš„agent ä¸­ã€‚åŸ·è¡Œå¾Œå¾—åˆ°çš„çµæœå’Œä¸Šé¢ä¸€æ¨£ã€‚```
import { StateGraph, START, END, MemorySaver } from &quot;@langchain/langgraph&quot;;
import \* as z from &quot;&quot;zod&quot;&quot;;
import { createAgent } from &quot;langchain&quot;;
const workflowCheckpointer = new MemorySaver();
const agentCheckpointer = new MemorySaver();
const config = { configurable: { thread\_id: &quot;&quot;1&quot;&quot; } };
const State = z.object({
messages: z.array(z.object({ role: z.string(), content: z.string() })),
});
const agent = createAgent({
model: &quot;openai:gpt-5-nano&quot;, // å¯æ›ä½ å¯¦éš›å¯ç”¨çš„æ¨¡å‹tools: [],
checkpointer: agentCheckpointer, // &lt;---------- é‡é»æ˜¯é€™è£¡!!!!!!
});
const workflow = new StateGraph(State)
.addNode(&quot;nodeA&quot;, (state) =&gt; {
return {
messages: [
...(state.messages ?? []),
{ role: &quot;user&quot;, content: &quot;æˆ‘æ˜¯é¦¬å…‹&quot; },
],
};
})
.addNode(&quot;nodeB&quot;, async (state) =&gt; {
const needMessages = state.messages ?? []; // &lt;---------- é‡é»æ˜¯é€™è£¡!!!!!!
const res = await agent.invoke(
{
messages: [
...needMessages,


---
*æ•°æ®æ¥æº: Exaæœç´¢ | è·å–æ—¶é—´: 2026-02-10 21:59:05*