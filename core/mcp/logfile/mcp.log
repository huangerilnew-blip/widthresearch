2026-02-21 19:55:48,387 - __main__ - INFO - call_tool: name=tavily_search, args={'query': 'LangGraph æ¡ä»¶è¾¹(Conditional Edges)å’ŒåŠ¨æ€è·¯ç”±çš„å®ç°æ–¹æ³•'}
2026-02-21 19:55:48,387 - __main__ - INFO - handle_search: searcher=TavilySearch, query=LangGraph æ¡ä»¶è¾¹(Conditional Edges)å’ŒåŠ¨æ€è·¯ç”±çš„å®ç°æ–¹æ³•, search_type=None
2026-02-21 19:55:48,467 - __main__ - INFO - call_tool: name=wikipedia_search, args={'query': 'LangGraph ä¸­çŠ¶æ€(State)å¯¹è±¡çš„é«˜çº§å®šä¹‰å’Œæ›´æ–°æ¨¡å¼æœ‰å“ªäº›'}
2026-02-21 19:55:48,467 - __main__ - INFO - handle_search: searcher=WikipediaSearcher, query=LangGraph ä¸­çŠ¶æ€(State)å¯¹è±¡çš„é«˜çº§å®šä¹‰å’Œæ›´æ–°æ¨¡å¼æœ‰å“ªäº›, search_type=None
2026-02-21 19:55:48,602 - __main__ - INFO - call_tool: name=exa_context_search, args={'query': 'LangGraph ä¸­çŠ¶æ€(State)å¯¹è±¡çš„é«˜çº§å®šä¹‰å’Œæ›´æ–°æ¨¡å¼æœ‰å“ªäº›'}
2026-02-21 19:55:48,602 - __main__ - INFO - handle_search: searcher=ExaSearcherContext, query=LangGraph ä¸­çŠ¶æ€(State)å¯¹è±¡çš„é«˜çº§å®šä¹‰å’Œæ›´æ–°æ¨¡å¼æœ‰å“ªäº›, search_type=None
2026-02-21 19:55:48,628 - __main__ - INFO - call_tool: name=exa_context_search, args={'query': 'LangGraph å­å›¾(Subgraph)å’ŒåµŒå¥—å›¾çš„æ„å»ºä¸é€šä¿¡æœºåˆ¶'}
2026-02-21 19:55:48,628 - __main__ - INFO - handle_search: searcher=ExaSearcherContext, query=LangGraph å­å›¾(Subgraph)å’ŒåµŒå¥—å›¾çš„æ„å»ºä¸é€šä¿¡æœºåˆ¶, search_type=None
2026-02-21 19:55:48,881 - __main__ - INFO - call_tool: name=exa_context_search, args={'query': 'LangGraph æ¡ä»¶è¾¹(Conditional Edges)å’ŒåŠ¨æ€è·¯ç”±çš„å®ç°æ–¹æ³•'}
2026-02-21 19:55:48,881 - __main__ - INFO - handle_search: searcher=ExaSearcherContext, query=LangGraph æ¡ä»¶è¾¹(Conditional Edges)å’ŒåŠ¨æ€è·¯ç”±çš„å®ç°æ–¹æ³•, search_type=None
2026-02-21 19:55:48,884 - __main__ - INFO - call_tool: name=wikipedia_search, args={'query': 'LangGraph æ¡ä»¶è¾¹(Conditional Edges)å’ŒåŠ¨æ€è·¯ç”±çš„å®ç°æ–¹æ³•'}
2026-02-21 19:55:48,885 - __main__ - INFO - handle_search: searcher=WikipediaSearcher, query=LangGraph æ¡ä»¶è¾¹(Conditional Edges)å’ŒåŠ¨æ€è·¯ç”±çš„å®ç°æ–¹æ³•, search_type=None
2026-02-21 19:55:48,910 - __main__ - INFO - call_tool: name=tavily_search, args={'query': 'LangGraph ä¸­çŠ¶æ€(State)å¯¹è±¡çš„é«˜çº§å®šä¹‰å’Œæ›´æ–°æ¨¡å¼æœ‰å“ªäº›'}
2026-02-21 19:55:48,911 - __main__ - INFO - handle_search: searcher=TavilySearch, query=LangGraph ä¸­çŠ¶æ€(State)å¯¹è±¡çš„é«˜çº§å®šä¹‰å’Œæ›´æ–°æ¨¡å¼æœ‰å“ªäº›, search_type=None
2026-02-21 19:55:48,920 - __main__ - INFO - call_tool: name=wikipedia_search, args={'query': 'LangGraph å­å›¾(Subgraph)å’ŒåµŒå¥—å›¾çš„æ„å»ºä¸é€šä¿¡æœºåˆ¶'}
2026-02-21 19:55:48,920 - __main__ - INFO - handle_search: searcher=WikipediaSearcher, query=LangGraph å­å›¾(Subgraph)å’ŒåµŒå¥—å›¾çš„æ„å»ºä¸é€šä¿¡æœºåˆ¶, search_type=None
2026-02-21 19:55:48,962 - __main__ - INFO - call_tool: name=tavily_search, args={'query': 'LangGraph å­å›¾(Subgraph)å’ŒåµŒå¥—å›¾çš„æ„å»ºä¸é€šä¿¡æœºåˆ¶'}
2026-02-21 19:55:48,963 - __main__ - INFO - handle_search: searcher=TavilySearch, query=LangGraph å­å›¾(Subgraph)å’ŒåµŒå¥—å›¾çš„æ„å»ºä¸é€šä¿¡æœºåˆ¶, search_type=None
2026-02-21 19:55:49,565 - __main__ - WARNING - handle_search: returned=0 for query=LangGraph ä¸­çŠ¶æ€(State)å¯¹è±¡çš„é«˜çº§å®šä¹‰å’Œæ›´æ–°æ¨¡å¼æœ‰å“ªäº›
2026-02-21 19:55:49,565 - __main__ - INFO - call_tool payload: source_tool=wikipedia_search, result_type=papers, count=0
2026-02-21 19:55:49,565 - __main__ - INFO - call_tool: name=wikipedia_search, result_type=papers, count=0
2026-02-21 19:55:50,026 - __main__ - WARNING - handle_search: returned=0 for query=LangGraph æ¡ä»¶è¾¹(Conditional Edges)å’ŒåŠ¨æ€è·¯ç”±çš„å®ç°æ–¹æ³•
2026-02-21 19:55:50,026 - __main__ - INFO - call_tool payload: source_tool=wikipedia_search, result_type=papers, count=0
2026-02-21 19:55:50,026 - __main__ - INFO - call_tool: name=wikipedia_search, result_type=papers, count=0
2026-02-21 19:55:50,043 - __main__ - WARNING - handle_search: returned=0 for query=LangGraph å­å›¾(Subgraph)å’ŒåµŒå¥—å›¾çš„æ„å»ºä¸é€šä¿¡æœºåˆ¶
2026-02-21 19:55:50,043 - __main__ - INFO - call_tool payload: source_tool=wikipedia_search, result_type=papers, count=0
2026-02-21 19:55:50,043 - __main__ - INFO - call_tool: name=wikipedia_search, result_type=papers, count=0
2026-02-21 19:55:54,857 - __main__ - INFO - handle_search: returned=1
2026-02-21 19:55:54,858 - __main__ - INFO - call_tool payload: source_tool=exa_context_search, result_type=papers, count=1
2026-02-21 19:55:54,858 - __main__ - INFO - call_tool: name=exa_context_search, result_type=papers, count=1
2026-02-21 19:55:54,858 - __main__ - DEBUG - call_tool payload sample: {'paper_id': '', 'title': 'Conditional Workflow in LangGraph: A Complete Developer Guide | by Akash Shinde | Jan, 2026 | Medium', 'authors': [], 'abstract': 'Conditional Workflow in LangGraph: A Complete Developer Guide | by Akash Shinde | Jan, 2026 | Medium\n[Sitemap] \n[Open in app] \nSign up\n[Sign in] \n[Medium Logo] \n[\nWrite\n] \n[\nSearch\n] \nSign up\n[Sign in] \n![] \n# Conditional Workflow in LangGraph: A Complete Developer Guide\n[\n![Akash Shinde] \n] \n[Akash Shinde] \n5 min read\nÂ·Jan 25, 2026\n[\n] \n--\n[] \nListen\nShare\nBuilding intelligent AI agents requires more than just a linear â€œinput-to-outputâ€ chain. To create truly autonomous systems, you need a way for the workflow to make decisions, handle errors, and route queries dynamically.\nIn**LangGraph**, this is achieved through**Conditional Edges**. Unlike standard edges in[**Sequential workflow**] **(we learned in our previous blog)**that connect**Node A**to**Node B**directly, conditional edges act as the â€œbrainâ€ of your graph, deciding which path to take at runtime based on the current state.\n## What Is a Conditional Workflow in LangGraph?\n> A **> conditional workflow\n**> is a workflow where the next step is chosen **> based on a condition or decision\n**> .\nPress enter or click to view image in full size\n![] \n## Components :\nThere are three components which required to build a conditional workflow.\n1. **Nodes**: Python functions that perform tasks (e.g., calling an LLM or a tool).\n2. **State**: A shared memory object (usually a`TypedDict`) that stores the data flowing through the graph.\n3. **The Routing Function**: A function that inspects the state or check the condition and returns a string representing the next node to visit.### How Conditional Workflows Differ from Sequential Ones\n**Sequential Workflow**\n```\nSTART â†’Step A â†’Step B â†’END\n```\n**Conditional Workflow**\n```\nâ”Œâ”€â†’Step A\nSTART â†’Router â”¤â””â”€â†’Step B\nâ†“END\n```\n## Examples\n### 1. Letâ€™s look at our first example of a Conditional workflow without using LLM.\nWe will be checking a simple loan status on the basis of the salary of the loan applicant.\n***If the loan applicantâ€™s salary is less than 25k then loan status should be â€œrejectedâ€. If the salary is greater than 25k and less than 50k then it should be â€œManual review requiredâ€ and if the salary is more than 50k then status should be â€œapprovedâ€.***\n```\nfrom langgraph.graph import StateGraph, START, END\nfrom typing import TypedDict\nclass LoanState(TypedDict):\nsalary: int\ndecision: str\ndef evaluate\\_loan\\_requirement(state: LoanState):\nprint(&quot;Evaluating requirement.....&quot;)\nsalary = state[&#x27;salary&#x27;]\nreturn {&#x27;salary&#x27;: salary}\ndef check\\_loan\\_decision(state: LoanState):\nprint(&#x27;salary&#x27;, state[&#x27;salary&#x27;])\nsalary = state[&#x27;salary&#x27;]\nif salary &lt; 25000:\nreturn &quot;reject&quot;\nelif salary &lt; 50000:\nreturn &quot;review&quot;\nelse:\nreturn &quot;approve&quot;\ndef approve\\_loan(state: LoanState):\nreturn {&quot;decision&quot;: &quot;Loan approved&quot;}\ndef review\\_loan(state: LoanState):\nreturn {&quot;decision&quot;: &quot;Manual Review Required&quot;}\ndef reject\\_loan(state: LoanState):\nreturn {&quot;decision&quot;: &quot;Loan Rejected&quot;}\ngraph = StateGraph(LoanState)\ngraph.add\\_node(&#x27;&#x27;evaluate\\_loan\\_requirement&#x27;&#x27;,evaluate\\_loan\\_requirement),\ngraph.add\\_node(&#x27;&#x27;approve&#x27;&#x27;, approve\\_loan)\ngraph.add\\_node(&#x27;&#x27;review&#x27;&#x27;, review\\_loan)\ngraph.add\\_node(&#x27;&#x27;reject&#x27;&#x27;, reject\\_loan)\ngraph.add\\_edge(START, &#x27;&#x27;evaluate\\_loan\\_requirement&#x27;&#x27;)\ngraph.add\\_conditional\\_edges(\n&#x27;&#x27;evaluate\\_loan\\_requirement&#x27;&#x27;,\ncheck\\_loan\\_decision,\n{\n&#x27;approve&#x27;: &#x27;approve&#x27;,\n&#x27;review&#x27;: &#x27;review&#x27;,\n&#x27;reject&#x27;: &#x27;reject&#x27;\n}\n)\ngraph.add\\_edge(&#x27;&#x27;approve&#x27;&#x27;, END)\ngraph.add\\_edge(&#x27;&#x27;review&#x27;&#x27;, END)\ngraph.add\\_edge(&#x27;&#x27;reject&#x27;&#x27;, END)\nworkflow = graph.compile()\nworkflow\ninitial\\_state = {&#x27;&#x27;salary&#x27;&#x27;: 49000}\nresult = workflow.invoke(initial\\_state)\nprint(result)\n```\n**Output:**\nPress enter or click to view image in full size\n![] \n**Workflow:**\n![] \n### 2. Letâ€™s look at the second example of a conditional workflow with using LLM.\nLetâ€™s assume you have a product that is featured online. Users are writing feedback to the product. Our workflow will check the sentiment of the userâ€™s feedback. If the feedback is â€˜**positive**â€™ then workflow will end and if the feedback is**â€˜negativeâ€™,**we will run the diagnosis on the review and check the**tone**,**type**of the issue and**urgency**of the issue.\n```\nfrom langgraph.graph import StateGraph, START, END\nfrom typing import TypedDict, Literal\nfrom langchain\\_groq import ChatGroq\nfrom dotenv import load\\_dotenv\nfrom pydantic import BaseModel, Field\nimport os\nload\\_dotenv()\nmodel = ChatGroq(api\\_key=os.getenv(&quot;&quot;GROQ\\_API\\_KEY&quot;&quot;), model=&quot;&quot;qwen/qwen3-32b&quot;&quot;, temperature=0)\nclass SentimentSchema(BaseModel):\nsentiment: Literal[&quot;positive&quot;, &quot;negative&quot;] = Field(description=&quot;sentiment of the review&quot;)\nclass DiagnosisSchema(BaseModel):\nissue\\_type: Literal[&quot;&quot;UX&quot;&quot;, &quot;&quot;Performance&quot;&quot;, &quot;&quot;Bug&quot;&quot;, &quot;&quot;Support&quot;&quot;, &quot;&quot;Other&quot;&quot;] = Field(description=&#x27;&#x27;The category of issue mentioned in the review&#x27;&#x27;)\ntone: Literal[&quot;angry&quot;, &quot;frustrated&quot;, &quot;disappointed&quot;, &quot;calm&quot;] = Field(description=&#x27;The emotional tone expressed by the user&#x27;)\nurgency: Literal[&quot;low&quot;, &quot;medium&quot;, &quot;high&quot;] = Field(description=&#x27;How urgent or critical the issue appears to be&#x27;)\nstructured\\_model = model.with\\_structured\\_output(SentimentSchema)\ndignosisStructured\\_model = model.with\\_structured\\_output(DiagnosisSchema)\nclass ReviewState(TypedDict):\nreview: str\nsentiment: Literal[&quot;positive&quot;, &quot;negative&quot;]\ndiagnosis: dict\nresponse: str\ndef find\\_sentiment(state: ReviewState):\nreview = state[&#x27;review&#x27;]\nprompt = f&quot;&quot;For the following review find out the sentiment \\\\n {review}&quot;&quot;\nsentiment = structured\\_model.invoke(prompt).sentiment\nreturn {&#x27;sentiment&#x27;: sentiment}\ndef check\\_sentiment(state: ReviewState) -&gt;&gt; Literal[&quot;&quot;positive\\_response&quot;&quot;, &quot;&quot;run\\_diagnosis&quot;&quot;]:\nsentiment = state[&#x27;sentiment&#x27;]\nif sentiment == &#x27;positive&#x27;:\nreturn &quot;&quot;positive\\_response&quot;&quot;\nelse:\nreturn &quot;&quot;run\\_diagnosis&quot;&quot;\ndef positive\\_response(state: ReviewState):\nreview = state[&#x27;review&#x27;]\nprompt = f&quot;&quot;&quot;&quot;&quot;&quot;Write a warm thank you message in response to this review: \\\\n\\\\n &quot;&quot;{review}\\\\&quot;&quot;\\\\n\nAlso, Kindly ask the user to the leave the feedback on the website.\n&quot;&quot;&quot;\nresponse = model.invoke(prompt).content\nreturn {&quot;response&quot;: response}\ndef run\\_diagnosis(state: ReviewState):\nreview = state[&#x27;review&#x27;]\nprompt = f&quot;&quot;&quot;&quot;&quot;&quot;Diagnose this negative review:\\\\n\\\\n{review}\\\\n&quot;&quot;\n&quot;&quot;Return issue\\_type, tone, and urgency. &quot;&quot;&quot;&quot;&quot;&quot;\nresponse = dignosisStructured\\_model.invoke(prompt)\nreturn {&quot;&quot;diagnosis&quot;&quot;: response.model\\_dump()}\ndef negative\\_response(state: ReviewState):\ndiagnosis = state[&#x27;diagnosis&#x27;]\nprompt = f&quot;&quot;&quot;You are a support assistant.\nThe user had a &#x27;&#x27;{diagnosis[&#x27;&#x27;issue\\_type&#x27;&#x27;]}&#x27;&#x27; issue, sounded &#x27;&#x27;{diagnosis[&#x27;&#x27;tone&#x27;&#x27;]}&#x27;&#x27;, and marked urgency as &#x27;&#x27;{diagnosis[&#x27;&#x27;urgency&#x27;&#x27;]}&#x27;&#x27;.\nWrite an empathetic, helpful resolution message.\n&quot;&quot;&quot;\nresponse = model.invoke(prompt).content\nreturn {&quot;response&quot;: response}\ngraph = StateGraph(ReviewState)\ngraph.add\\_node(&#x27;&#x27;find\\_sentiment&#x27;&#x27;, find\\_sentiment)\ngraph.add\\_node(&#x27;&#x27;positive\\_response&#x27;&#x27;, positive\\_response)\ngraph.add\\_node(&#x27;&#x27;run\\_diagnosis&#x27;&#x27;, run\\_diagnosis)\ngraph.add\\_node(&#x27;&#x27;negative\\_response&#x27;&#x27;, negative\\_response)\ngraph.add\\_edge(START, &#x27;&#x27;find\\_sentiment&#x27;&#x27;)\ngraph.add\\_conditional\\_edges(&#x27;&#x27;find\\_sentiment&#x27;&#x27;, check\\_sentiment)\ngraph.add\\_edge(&#x27;&#x27;positive\\_response&#x27;&#x27;, END)\ngraph.add\\_edge(&#x27;&#x27;run\\_diagnosis&#x27;&#x27;, &#x27;&#x27;negative\\_response&#x27;&#x27;)\ngraph.add\\_edge(&#x27;&#x27;negative\\_response&#x27;&#x27;, END)\nworkflow = graph.compile()\nintial\\_state={\n&#x27;review&#x27;: &quot;The product is not good at all&quot;\n}\nworkflow.invoke(intial\\_state)\n```\n**Output:**\nPress enter or click to view image in full size\n![] \n**Workflow:**\n![] \n**Note: In standard LLM calls, you get back a string of text. For a workflow to make decisions (like routing to a â€œNegativeâ€ or â€œPositiveâ€ path), the code needs data it can rely on.**\n**Usage of Schema**: It transforms unstructured human language into structured machine data.\n`*DiagnosisSchema*`*or*`*SentimentSchema*`*ensures the LLM doesn&#x27;t just &quot;talk&quot; about the problem, but extracts specific metadata (*`*issue\\_type*`*,*`*tone*`*,*`*urgency*`*) or (*`*positive*`*,*`*negative*`*) that the system can actually use in downstream logic.*\n**Usage of model.with\\_structured\\_output :**This tells the LLM, â€œYou must respond**only**in this exact structure.â€\nThe line`model.with\\_structured\\_output(SentimentSchema)`is where the magic happens. This forces the LLM to skip the long text answers and return a Python object. eg: {â€œsentimentâ€: â€œpositiveâ€}\n## ğŸ’¡Why This Matters for Agentic AI\n### Conditional workflows are essential when:\n* **Different inputs need different handling:**Conditional', 'doi': '', 'published_date': '2026-01-25T00:00:00+00:00', 'pdf_url': '', 'url': 'https://medium.com/%40shindeakash412/conditional-workflow-in-langgraph-a-complete-developer-guide-5483f05c221e', 'source': 'exa_context', 'categories': [], 'keywords': [], 'citations': 0, 'references': [], 'extra': {}}
2026-02-21 19:55:55,140 - __main__ - INFO - handle_search: returned=1
2026-02-21 19:55:55,141 - __main__ - INFO - call_tool payload: source_tool=exa_context_search, result_type=papers, count=1
2026-02-21 19:55:55,141 - __main__ - INFO - call_tool: name=exa_context_search, result_type=papers, count=1
2026-02-21 19:55:55,141 - __main__ - DEBUG - call_tool payload sample: {'paper_id': '', 'title': 'æ¦‚è¿° - LangChain æ¡†æ¶', 'authors': [], 'abstract': 'æ¦‚è¿° - LangChain æ•™ç¨‹[è·³åˆ°å†…å®¹] \n**LangGraph å¹³å°æ–‡æ¡£å·²è¿ç§»ï¼**è¯·åœ¨æ–°çš„[LangChain æ–‡æ¡£] ç½‘ç«™ä¸ŠæŸ¥æ‰¾ LangGraph å¹³å°æ–‡æ¡£ã€‚[] # å­å›¾[Â¶] \nå­å›¾ï¼ˆsubgraphï¼‰æ˜¯ä¸€ä¸ªåœ¨å¦ä¸€ä¸ªå›¾ä¸­ä½œä¸º[èŠ‚ç‚¹] ä½¿ç”¨çš„[å›¾] â€”â€”è¿™æ˜¯å°è£…æ¦‚å¿µåœ¨ LangGraph ä¸­çš„åº”ç”¨ã€‚å­å›¾å…è®¸æ‚¨æ„å»ºåŒ…å«å¤šä¸ªç»„ä»¶çš„å¤æ‚ç³»ç»Ÿï¼Œè€Œè¿™äº›ç»„ä»¶æœ¬èº«å°±æ˜¯å›¾ã€‚![Subgraph] \nä½¿ç”¨å­å›¾çš„ä¸€äº›åŸå› åŒ…æ‹¬ï¼š* æ„å»º[å¤šæ™ºèƒ½ä½“ç³»ç»Ÿ] \n* å½“æ‚¨æƒ³åœ¨å¤šä¸ªå›¾ä¸­é‡ç”¨ä¸€ç»„èŠ‚ç‚¹æ—¶* å½“æ‚¨å¸Œæœ›ä¸åŒçš„å›¢é˜Ÿç‹¬ç«‹å¼€å‘å›¾çš„ä¸åŒéƒ¨åˆ†æ—¶ï¼Œæ‚¨å¯ä»¥å°†æ¯ä¸ªéƒ¨åˆ†å®šä¹‰ä¸ºä¸€ä¸ªå­å›¾ã€‚åªè¦éµå®ˆå­å›¾çš„æ¥å£ï¼ˆè¾“å…¥å’Œè¾“å‡ºæ¨¡å¼ï¼‰ï¼Œçˆ¶å›¾å°±å¯ä»¥åœ¨ä¸äº†è§£å­å›¾ä»»ä½•ç»†èŠ‚çš„æƒ…å†µä¸‹è¿›è¡Œæ„å»ºã€‚æ·»åŠ å­å›¾æ—¶ï¼Œä¸»è¦çš„é—®é¢˜æ˜¯çˆ¶å›¾å’Œå­å›¾å¦‚ä½•é€šä¿¡ï¼Œå³å®ƒä»¬åœ¨å›¾æ‰§è¡ŒæœŸé—´å¦‚ä½•ç›¸äº’ä¼ é€’[çŠ¶æ€] ã€‚æœ‰ä¸¤ç§æƒ…å†µï¼š\n* çˆ¶å›¾å’Œå­å›¾çš„çŠ¶æ€[æ¨¡å¼] ä¸­æœ‰**å…±äº«çš„çŠ¶æ€é”®**ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ‚¨å¯ä»¥[å°†å­å›¾ä½œä¸ºçˆ¶å›¾ä¸­çš„ä¸€ä¸ªèŠ‚ç‚¹åŒ…å«è¿›æ¥] ã€‚\n```\n`[]<web_link>fromlanggraph.graphimportStateGraph,MessagesState,START[]<web_link>[]<web_link># Subgraph[]<web_link>[]<web_link>defcall\\_model(state:MessagesState):[]<web_link>response=model.invoke(state["messages"])[]<web_link>return{"messages":response}[]<web_link>[]<web_link>subgraph\\_builder=StateGraph(State)[]<web_link>subgraph\\_builder.add\\_node(call\\_model)[]<web_link>...[]<web_link>subgraph=subgraph\\_builder.compile()[]<web_link>[]<web_link># Parent graph[]<web_link>[]<web_link>builder=StateGraph(State)[]<web_link>builder.add\\_node("subgraph\\_node",subgraph)[]<web_link>builder.add\\_edge(START,"subgraph\\_node")[]<web_link>graph=builder.compile()[]<web_link>...[]<web_link>graph.invoke({"messages":[{"role":"user","content":"hi!"}]})`\n```\n* çˆ¶å›¾å’Œå­å›¾æœ‰**ä¸åŒçš„æ¨¡å¼**ï¼ˆå®ƒä»¬çš„çŠ¶æ€[æ¨¡å¼] ä¸­æ²¡æœ‰å…±äº«çš„çŠ¶æ€é”®ï¼‰ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ‚¨å¿…é¡»[ä»çˆ¶å›¾çš„ä¸€ä¸ªèŠ‚ç‚¹å†…éƒ¨è°ƒç”¨å­å›¾] ï¼šå½“çˆ¶å›¾å’Œå­å›¾å…·æœ‰ä¸åŒçš„çŠ¶æ€æ¨¡å¼ï¼Œå¹¶ä¸”æ‚¨éœ€è¦åœ¨è°ƒç”¨å­å›¾ä¹‹å‰æˆ–ä¹‹åè½¬æ¢çŠ¶æ€æ—¶ï¼Œè¿™ç§æ–¹æ³•å¾ˆæœ‰ç”¨ã€‚\n```\n`[]<web_link>fromtyping\\_extensionsimportTypedDict,Annotated[]<web_link>fromlangchain\\_core.messagesimportAnyMessage[]<web_link>fromlanggraph.graphimportStateGraph,MessagesState,START[]<web_link>fromlanggraph.graph.messageimportadd\\_messages[]<web_link>[]<web_link>classSubgraphMessagesState(TypedDict):[]<web_link>subgraph\\_messages:Annotated[list[AnyMessage],add\\_messages][]<web_link>[]<web_link># Subgraph[]<web_link>[]<web_link>defcall\\_model(state:SubgraphMessagesState):[]<web_link>response=model.invoke(state["subgraph\\_messages"])[]<web_link>return{"subgraph\\_messages":response}[]<web_link>[]<web_link>subgraph\\_builder=StateGraph(SubgraphMessagesState)[]<web_link>subgraph\\_builder.add\\_node("call\\_model\\_from\\_subgraph",call\\_model)[]<web_link>subgraph\\_builder.add\\_edge(START,"call\\_model\\_from\\_subgraph")[]<web_link>...[]<web_link>subgraph=subgraph\\_builder.compile()[]<web_link>[]<web_link># Parent graph[]<web_link>[]<web_link>defcall\\_subgraph(state:MessagesState):[]<web_link>response=subgraph.invoke({"subgraph\\_messages":state["messages"]})[]<web_link>return{"messages":response["subgraph\\_messages"]}[]<web_link>[]<web_link>builder=StateGraph(State)[]<web_link>builder.add\\_node("subgraph\\_node",call\\_subgraph)[]<web_link>builder.add\\_edge(START,"subgraph\\_node")[]<web_link>graph=builder.compile()[]<web_link>...[]<web_link>graph.invoke({"messages":[{"role":"user","content":"hi!"}]})`\n```\nå›åˆ°é¡¶', 'doi': '', 'published_date': '2025-01-01T00:00:00+00:00', 'pdf_url': '', 'url': 'https://github.langchain.ac.cn/langgraph/concepts/subgraphs', 'source': 'exa_context', 'categories': [], 'keywords': [], 'citations': 0, 'references': [], 'extra': {}}
2026-02-21 19:55:55,178 - __main__ - INFO - handle_search: returned=1
2026-02-21 19:55:55,179 - __main__ - INFO - call_tool payload: source_tool=exa_context_search, result_type=papers, count=1
2026-02-21 19:55:55,179 - __main__ - INFO - call_tool: name=exa_context_search, result_type=papers, count=1
2026-02-21 19:55:55,179 - __main__ - DEBUG - call_tool payload sample: {'paper_id': '', 'title': 'LangGraphdçš„ç»†èŠ‚å¤§å…¨â€”â€”å¦‚ä½•å®šä¹‰æˆ–è€…æ›´æ–°çŠ¶æ€åŸåˆ› - CSDNåšå®¢', 'authors': [], 'abstract': '\n \n æˆ‘ä»¬è¿™èŠ‚æ¥æ¢è®¨ä¸€ä¸‹å¦‚ä½•ä»èŠ‚ç‚¹æ›´æ–°å›¾çŠ¶æ€ä¸€äº›åŸºæœ¬çš„æ–¹å¼å’Œéœ€è¦æ³¨æ„çš„ç»†èŠ‚ï¼ŒåŒå­¦ä»¬è·Ÿéšæˆ‘ä¸€èµ·è¿›å…¥ Graph çš„ä¸–ç•Œã€‚ \nåœ¨ LangGraph ä¸­ï¼ŒState å¯ä»¥æ˜¯ TypedDictã€Pydantic æ¨¡å‹æˆ– dataclassã€‚è¿™äº›ç»“æ„ä¸»è¦ç”¨äºæè¿°çŠ¶æ€çš„ç±»å‹ï¼Œå¹¶ä½¿å¾—çŠ¶æ€çš„ç®¡ç†æ›´åŠ æ¸…æ™°å’Œæœ‰åºã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸åŒçš„æ–¹å¼æ¥å®šä¹‰çŠ¶æ€ã€‚ \nä¸‹é¢æˆ‘åˆ†åˆ«ä¸¾ä¸€ä¸ª TypedDictã€Pydantic æ¨¡å‹å’Œ dataclass çš„ä¾‹å­æ¥è¯´æ˜ï¼š \nTypedDict æ˜¯ Python ä¸­çš„ä¸€ç§ç±»å‹ï¼Œç”¨äºè¡¨ç¤ºå­—å…¸ç»“æ„ï¼Œå¹¶èƒ½æŒ‡å®šå­—å…¸ä¸­æ¯ä¸ªé”®çš„ç±»å‹ \n from typing import TypedDict\n class State ( TypedDict): \n name: str \n age: int \n active: bool \n # åˆ›å»ºçŠ¶æ€å®ä¾‹ \nstate: State = { \n "name": "Alice", \n "age": 30, \n "active": True \n} \n print ( state) \n \n Pydantic æ˜¯ä¸€ä¸ªéå¸¸å¼ºå¤§çš„æ•°æ®éªŒè¯å’Œè§£æåº“ï¼Œå¯ä»¥å°†æ•°æ®è½¬æ¢æˆ Pydantic æ¨¡å‹å®ä¾‹ï¼Œå¹¶è¿›è¡Œç±»å‹æ£€æŸ¥å’ŒéªŒè¯ \n from pydantic import BaseModel\n class State ( BaseModel): \n name: str \n age: int \n active: bool \n # åˆ›å»ºçŠ¶æ€å®ä¾‹ \nstate = State ( name = "Bob", age = 25, active = False) \n print ( state) \n \n åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼ŒState æ˜¯ä¸€ä¸ªç»§æ‰¿è‡ª BaseModel çš„ Pydantic æ¨¡å‹ã€‚Pydantic è‡ªåŠ¨ä¸ºæ¨¡å‹å­—æ®µæä¾›äº†ç±»å‹éªŒè¯ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ State(name=â€œBobâ€, age=25, active=False) æ¥åˆ›å»ºä¸€ä¸ªå®ä¾‹ï¼ŒPydantic ä¼šç¡®ä¿ç±»å‹æ­£ç¡®ã€‚ \ndataclass æ˜¯ Python 3.7 å¼•å…¥çš„æ ‡å‡†åº“ï¼Œæä¾›äº†ä¸€ç§ç®€å•çš„æ–¹å¼æ¥å®šä¹‰ç±»ï¼Œå¹¶è‡ªåŠ¨ç”Ÿæˆå¸¸ç”¨çš„æ–¹æ³•ï¼ˆå¦‚ init ã€ repr ç­‰ï¼‰ \n from dataclasses import dataclass\n @dataclass \n class State: \n name: str \n age: int \n active: bool \n # åˆ›å»ºçŠ¶æ€å®ä¾‹ \nstate = State ( name = "Charlie", age = 40, active = True) \n print ( state) \n \n åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼ŒState æ˜¯ä¸€ä¸ªç®€å•çš„ dataclassï¼Œå®ƒå…·æœ‰ä¸‰ä¸ªå­—æ®µï¼šnameã€age å’Œ activeã€‚dataclass ä¼šè‡ªåŠ¨ç”Ÿæˆ init æ–¹æ³•ï¼Œæ‰€ä»¥ä½ å¯ä»¥ç›´æ¥é€šè¿‡ State(name=â€œCharlieâ€, age=40, active=True) æ¥åˆ›å»ºå®ä¾‹ã€‚ \nåœ¨æˆ‘ä»¬langraphä¸­ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œå›¾çš„è¾“å…¥å’Œè¾“å‡ºç»“æ„å°†æ˜¯ç›¸åŒçš„ï¼Œä¸”çŠ¶æ€å†³å®šäº†è¯¥ç»“æ„ã€‚ \næˆ‘ä»¬å®šä¹‰ä¸€ä¸ªç®€å•çš„ State ä¾‹å­ï¼š \n from langchain_core. messages import AnyMessage\n from typing_extensions import TypedDict\n class State ( TypedDict): \n messages: list [ AnyMessage] \n extra_field: int \n \n è¿™ä¸ªçŠ¶æ€ä¿å­˜è·Ÿè¸ªäº†ä¸€ç³»åˆ—æ¶ˆæ¯å¯¹è±¡ï¼Œå¹¶ä¸”è¿˜æœ‰ä¸€ä¸ªé¢å¤–çš„æ•´æ•°å­—æ®µã€‚ \n å®šä¹‰å›¾å½¢ç»“æ„ \n è®©æˆ‘ä»¬æ„å»ºä¸€ä¸ªåŒ…å«å•ä¸ªèŠ‚ç‚¹çš„å›¾ã€‚æˆ‘ä»¬çš„èŠ‚ç‚¹åªæ˜¯ä¸€ä¸ª Python å‡½æ•°ï¼Œå®ƒè¯»å–å›¾çš„çŠ¶æ€å¹¶å¯¹å…¶è¿›è¡Œæ›´æ–°ã€‚è¿™ä¸ªå‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°å°†å§‹ç»ˆæ˜¯çŠ¶æ€ï¼š \n from langchain_core. messages import AIMessage\n def node ( state: State): \n messages = state [ "messages"] \n new_message = AIMessage ( "Hello!") \n return { "messages": messages + [ new_message], "extra_field": 10} \n \n å®šä¹‰èŠ‚ç‚¹åªæ˜¯å°†æ¶ˆæ¯é™„åŠ åˆ°æˆ‘ä»¬çš„æ¶ˆæ¯åˆ—è¡¨ä¸­ï¼Œç„¶åå¡«å……ä¸€ä¸ªé¢å¤–çš„å­—æ®µã€‚ \næ¥ä¸‹æ¥ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°†å®šä¹‰ä¸€ä¸ªç®€å•çš„å›¾ï¼Œå…¶ä¸­åŒ…å«æˆ‘ä»¬ä¹‹å‰åˆ›å»ºçš„èŠ‚ç‚¹ã€‚æˆ‘ä»¬å°†ä½¿ç”¨ StateGraph æ¥å®šä¹‰ä¸€ä¸ªæ“ä½œè¯¥çŠ¶æ€çš„å›¾ï¼Œå¹¶ä½¿ç”¨ add_node å°†æˆ‘ä»¬çš„èŠ‚ç‚¹æ·»åŠ åˆ°å›¾ä¸­ã€‚ \n from langgraph. graph import StateGraph\ngraph_builder = StateGraph ( State) \ngraph_builder. add_node ( node) \ngraph_builder. set_entry_point ( "node") \ngraph = graph_builder. compile () \n \n æ‰§è¡Œä¸‹é¢å¯è§†åŒ–ï¼š \n from IPython. display import Image, display\ndisplay ( Image ( graph. get_graph (). draw_mermaid_png ())) \n \n \nåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬çš„å›¾åªæ˜¯æ‰§è¡Œä¸€ä¸ªèŠ‚ç‚¹ã€‚ \n ä½¿ç”¨å›¾ \n æˆ‘ä»¬æ¥è°ƒç”¨å®ƒï¼ŒåŒå­¦ä»¬è¿˜è®°å¾—ä¸ï¼š \n from langchain_core. messages import HumanMessage\nresult = graph. invoke ( { "messages": [ HumanMessage ( "Hi")]}) \n // æ‰“å° result\n \n å¾—åˆ°ï¼š \n { \'messages\': [ HumanMessage ( content = \'Hi\', additional_kwargs = {}, response_metadata = {}), \n AIMessage ( content = \'Hello!\', additional_kwargs = {}, response_metadata = {})], \n \'extra_field\': 10} \n \n è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæˆ‘ä»¬æ‰§è¡Œä¸Šé¢å®šä¹‰çš„ graph ï¼Œæˆ‘ä»¬æ˜¯é€šè¿‡æ›´æ–°çŠ¶æ€çš„å•ä¸ªå­—æ®µå¯åŠ¨äº†è°ƒç”¨ã€‚åœ¨è°ƒç”¨ç»“æœä¸­ï¼Œæˆ‘ä»¬æ¥æ”¶åˆ°æ•´ä¸ªçŠ¶æ€ã€‚ \nä¸ºäº†æ–¹ä¾¿æˆ‘ä»¬æŸ¥çœ‹ï¼Œæˆ‘ä»¬æ¢ä¸€ç§æ‰“å°æ–¹å¼ï¼š \n for message in result [ "messages"]: \n message. pretty_print () \n \n å¾—åˆ°ä¸‹é¢ç»“æœ \n ================================[1m Human Message [0m=================================\nHi\n==================================[1m Ai Message [0m==================================\nHello!\n \n é€šè¿‡ reducer å¤„ç†çŠ¶æ€æ›´æ–°ã€‚ \n åœ¨çŠ¶æ€ä¸­çš„æ¯ä¸ªé”®å¯ä»¥æœ‰è‡ªå·±çš„ç‹¬ç«‹ reducer å‡½æ•°ï¼Œç”¨äºæ§åˆ¶èŠ‚ç‚¹çš„æ›´æ–°å¦‚ä½•åº”ç”¨ã€‚å¦‚æœæ²¡æœ‰æ˜¾å¼æŒ‡å®š reducer å‡½æ•°ï¼Œåˆ™é»˜è®¤å‡è®¾æ‰€æœ‰å¯¹è¯¥é”®çš„æ›´æ–°éƒ½ä¼šè¦†ç›–å…¶å½“å‰å€¼ã€‚å¯¹äº TypedDict çŠ¶æ€æ¶æ„ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡åœ¨çŠ¶æ€çš„ç›¸åº”å­—æ®µä¸Šä½¿ç”¨ reducer å‡½æ•°æ³¨è§£æ¥å®šä¹‰ reducersã€‚ \nåœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬çš„èŠ‚ç‚¹é€šè¿‡å‘ messages é”®é™„åŠ ä¸€æ¡æ¶ˆæ¯æ¥æ›´æ–°çŠ¶æ€ã€‚åœ¨ä¸‹é¢çš„ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬ä¸ºè¿™ä¸ªé”®æ·»åŠ äº†ä¸€ä¸ª reducerï¼Œä½¿å¾—æ›´æ–°ä¼šè‡ªåŠ¨åœ°é™„åŠ æ¶ˆæ¯ï¼š \n from typing_extensions import Annotated\n def add ( left, right): \n """Can also import `add` from the `operator` built-in.""" \n return left + right\n class State ( TypedDict): \n messages: Annotated [ list [ AnyMessage], add] \n extra_field: int \n \n æˆ‘ä»¬çš„èŠ‚ç‚¹å¯ä»¥ç®€åŒ–æˆï¼š \n def node ( state: State): \n new_message = AIMessage ( "Hello!") \n return { "messages": [ new_message], "extra_field": 10} \n \n ç„¶åå®šä¹‰å¹¶æ‰§è¡Œæˆ‘ä»¬çš„graphï¼š \n from langgraph. graph import START\ngraph = StateGraph ( State). add_node ( node). add_edge ( START, "node"). compile () \nresult = graph. invoke ( { "messages": [ HumanMessage ( "Hi")]}) \n for message in result [ "messages"]: \n message. pretty_print () \n \n å¾—åˆ°ç»“æœ \n ================================[1m Human Message [0m=================================\nHi\n==================================[1m Ai Message [0m==================================\nHello!\n \n æ›´æ–°çš„æ¶ˆæ¯å°±è‡ªåŠ¨çš„é™„åŠ åˆ°åé¢äº†ã€‚ \n MessagesState \n å¦‚æœæˆ‘ä»¬å¸Œæœ›æ›´æ–°çŠ¶æ€ä¸­å·²æœ‰çš„æ¶ˆæ¯ã€‚å¹¶ä¸”è¿˜æƒ³æ¥å—æ¶ˆæ¯æ ¼å¼çš„ç®€å†™ï¼Œä¾‹å¦‚ OpenAI æ ¼å¼ã€‚è¯¥æ€ä¹ˆåšå‘¢ï¼Ÿ \nLangGraph åŒ…å«ä¸€ä¸ªå†…ç½®çš„ reducer add_messagesï¼Œå®ƒå¤„ç†äº†è¿™äº›è€ƒè™‘äº‹é¡¹ï¼š \n from langgraph. graph. message import add_messages\n class State ( TypedDict): \n messages: Annotated [ list [ AnyMessage], add_messages] \n extra_field: int \n def node ( state: State): \n new_message = AIMessage ( "Hello!") \n return { "messages": [ new_message], "extra_field": 10} \ngraph = StateGraph ( State). add_node ( node). set_entry_point ( "node"). compile () \n \n æˆ‘ä»¬æ¥æ‰§è¡Œå®ƒï¼š \n input_message = { "role": "user", "content": "Hi"} \nresult = graph. invoke ( { <', 'doi': '', 'published_date': '2025-02-06T00:00:00+00:00', 'pdf_url': '', 'url': 'https://blog.csdn.net/weixin_40143861/article/details/145483735', 'source': 'exa_context', 'categories': [], 'keywords': [], 'citations': 0, 'references': [], 'extra': {}}
2026-02-21 19:55:56,084 - __main__ - INFO - handle_search: returned=1
2026-02-21 19:55:56,085 - __main__ - INFO - call_tool payload: source_tool=tavily_search, result_type=papers, count=1
2026-02-21 19:55:56,085 - __main__ - INFO - call_tool: name=tavily_search, result_type=papers, count=1
2026-02-21 19:55:56,085 - __main__ - DEBUG - call_tool payload sample: {'paper_id': '', 'title': 'ä½¿ç”¨å­å›¾ - LangChain æ–‡æ¡£', 'authors': [], 'abstract': '* [è®¾ç½®](#setup)\n* [å…±äº«çŠ¶æ€æ¨¡å¼](#shared-state-schemas)\n* [ä¸åŒçŠ¶æ€æ¨¡å¼](#different-state-schemas)\n* [æ·»åŠ æŒä¹…åŒ–](#add-persistence)\n* [æŸ¥çœ‹å­å›¾çŠ¶æ€](#view-subgraph-state)\n* [æµå¼ä¼ è¾“å­å›¾è¾“å‡º](#stream-subgraph-outputs)\n\n# ä½¿ç”¨å­å›¾[Â¶](#use-subgraphs "Permanent link")\n\næœ¬æŒ‡å—ä»‹ç»äº†ä½¿ç”¨[å­å›¾](../../concepts/subgraphs/)çš„æœºåˆ¶ã€‚å­å›¾çš„ä¸€ä¸ªå¸¸è§åº”ç”¨æ˜¯æ„å»º[å¤šæ™ºèƒ½ä½“](../../concepts/multi_agent/)ç³»ç»Ÿã€‚\n\næ·»åŠ å­å›¾æ—¶ï¼Œæ‚¨éœ€è¦å®šä¹‰çˆ¶å›¾å’Œå­å›¾å¦‚ä½•é€šä¿¡\n\n* [å…±äº«çŠ¶æ€æ¨¡å¼](#shared-state-schemas) â€” çˆ¶å›¾å’Œå­å›¾åœ¨å…¶çŠ¶æ€[æ¨¡å¼](../../concepts/low_level/#state)ä¸­æ‹¥æœ‰**å…±äº«çš„çŠ¶æ€é”®**\n* [ä¸åŒçŠ¶æ€æ¨¡å¼](#different-state-schemas) â€” çˆ¶å›¾å’Œå­å›¾çš„[æ¨¡å¼](../../concepts/low_level/#state)ä¸­**æ²¡æœ‰å…±äº«çš„çŠ¶æ€é”®**\n\n## è®¾ç½®[Â¶](#setup "æ°¸ä¹…é“¾æ¥")\n\n```\npip install -U langgraph    \n```\n\nä¸º LangGraph å¼€å‘è®¾ç½® LangSmith\n\næ³¨å†Œ [LangSmith](https://smith.langchain.com) ä»¥å¿«é€Ÿå‘ç°é—®é¢˜å¹¶æé«˜æ‚¨çš„ LangGraph é¡¹ç›®çš„æ€§èƒ½ã€‚LangSmith å…è®¸æ‚¨ä½¿ç”¨è·Ÿè¸ªæ•°æ®æ¥è°ƒè¯•ã€æµ‹è¯•å’Œç›‘æ§æ‚¨ä½¿ç”¨ LangGraph æ„å»ºçš„ LLM åº”ç”¨ â€” åœ¨[æ­¤å¤„](https://langsmith.langchain.ac.cn)é˜…è¯»æ›´å¤šå…³äºå¦‚ä½•å…¥é—¨çš„ä¿¡æ¯ã€‚\n\n## å…±äº«çŠ¶æ€æ¨¡å¼[Â¶](#shared-state-schemas "Permanent link")\n\nä¸€ç§å¸¸è§æƒ…å†µæ˜¯çˆ¶å›¾å’Œå­å›¾é€šè¿‡[æ¨¡å¼](../../concepts/low_level/#state)ä¸­çš„å…±äº«çŠ¶æ€é”®ï¼ˆé€šé“ï¼‰è¿›è¡Œé€šä¿¡ã€‚ä¾‹å¦‚ï¼Œåœ¨[å¤šæ™ºèƒ½ä½“](../../concepts/multi_agent/)ç³»ç»Ÿä¸­ï¼Œæ™ºèƒ½ä½“é€šå¸¸é€šè¿‡å…±äº«çš„ [messages](https://github.langchain.ac.cn/langgraph/concepts/low_level.md#why-use-messages) é”®è¿›è¡Œé€šä¿¡ã€‚\n\nå¦‚æœæ‚¨çš„å­å›¾ä¸çˆ¶å›¾å…±äº«çŠ¶æ€é”®ï¼Œæ‚¨å¯ä»¥æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤å°†å…¶æ·»åŠ åˆ°æ‚¨çš„å›¾ä¸­\n\n1. å®šä¹‰å­å›¾å·¥ä½œæµï¼ˆåœ¨ä¸‹é¢çš„ç¤ºä¾‹ä¸­ä¸º `subgraph_builder`ï¼‰å¹¶ç¼–è¯‘å®ƒ\n2. åœ¨å®šä¹‰çˆ¶å›¾å·¥ä½œæµæ—¶ï¼Œå°†ç¼–è¯‘åçš„å­å›¾ä¼ é€’ç»™ `.add_node` æ–¹æ³•\n\n*API å‚è€ƒï¼š[StateGraph](https://github.langchain.ac.cn/langgraph/reference/graphs/#langgraph.graph.state.StateGraph)*\n\n```\n from typing_extensions import TypedDict from  typing_extensions  import TypedDictfrom langgraph.graph.state import StateGraph, START from  langgraph.graph.state  import StateGraph, START  class State(TypedDict): class  State(TypedDict): foo: str foo: str  # Subgraph # Subgraph  def subgraph_node_1(state: State): def  subgraph_node_1(state: State): return {"foo": "hi! " + state["foo"]} return{"foo":"hi! " + state["foo"]}  subgraph_builder = StateGraph(State) subgraph_builder = StateGraph(State)subgraph_builder.add_node(subgraph_node_1) subgraph_builder. add_node(subgraph_node_1)subgraph_builder.add_edge(START, "subgraph_node_1") subgraph_builder. add_edge(START, "subgraph_node_1")subgraph = subgraph_builder.compile() subgraph = subgraph_builder. compile()  # Parent graph # Parent graph  builder = StateGraph(State) builder = StateGraph(State)builder.add_node("node_1", subgraph) builder. add_node("node_1", subgraph)builder.add_edge(START, "node_1") builder. add_edge(START, "node_1")graph = builder.compile() graph = builder. compile()\n```\n\n å®Œæ•´ç¤ºä¾‹ï¼šå…±äº«çŠ¶æ€æ¨¡å¼\n\n```\n from typing_extensions import TypedDict from  typing_extensions  import TypedDictfrom langgraph.graph.state import StateGraph, START from  langgraph.graph.state  import StateGraph, START  # Define subgraph # Define subgraphclass SubgraphState(TypedDict): class  SubgraphState(TypedDict): foo: str # (1)!  foo: str# (1)!  bar: str # (2)! bar: str# (2)!  def subgraph_node_1(state: SubgraphState): def  subgraph_node_1(state: SubgraphState): return {"bar": "bar"} return{"bar": "bar"}  def subgraph_node_2(state: SubgraphState): def  subgraph_node_2(state: SubgraphState): # note that this node is using a state key (\'bar\') that is only available in the subgraph # note that this node is using a state key (\'bar\') that is only available in the subgraph # and is sending update on the shared state key (\'foo\') # and is sending update on the shared state key (\'foo\') return {"foo": state["foo"] + state["bar"]} return{"foo": state["foo"] + state["bar"]}  subgraph_builder = StateGraph(SubgraphState) subgraph_builder = StateGraph(SubgraphState)subgraph_builder.add_node(subgraph_node_1) subgraph_builder. add_node(subgraph_node_1)subgraph_builder.add_node(subgraph_node_2) subgraph_builder. add_node(subgraph_node_2)subgraph_builder.add_edge(START, "subgraph_node_1") subgraph_builder. add_edge(START, "subgraph_node_1")subgraph_builder.add_edge("subgraph_node_1", "subgraph_node_2") subgraph_builder. add_edge("subgraph_node_1", "subgraph_node_2")subgraph = subgraph_builder.compile() subgraph = subgraph_builder. compile()  # Define parent graph # Define parent graphclass ParentState(TypedDict): class  ParentState(TypedDict): foo: str foo: str  def node_1(state: ParentState): def  node_1(state: ParentState): return {"foo": "hi! " + state["foo"]} return{"foo":"hi! " + state["foo"]}  builder = StateGraph(ParentState) builder = StateGraph(ParentState)builder.add_node("node_1", node_1) builder. add_node("node_1", node_1)builder.add_node("node_2", subgraph) builder. add_node("node_2", subgraph)builder.add_edge(START, "node_1") builder. add_edge(START, "node_1")builder.add_edge("node_1", "node_2") builder. add_edge("node_1", "node_2")graph = builder.compile() graph = builder. compile()  for chunk in graph.stream({"foo": "foo"}): for chunk in graph. stream({"foo": "foo"}): print(chunk) print(chunk)\n```\n\n1. æ­¤é”®ä¸çˆ¶å›¾çŠ¶æ€å…±äº«\n2. æ­¤é”®æ˜¯ `SubgraphState` ç§æœ‰çš„ï¼Œå¯¹çˆ¶å›¾ä¸å¯è§\n\n```\n{\'node_1\': {\'foo\': \'hi! foo\'}} {\'node_2\': {\'foo\': \'hi! foobar\'}} \n```\n\n## ä¸åŒçŠ¶æ€æ¨¡å¼[Â¶](#different-state-schemas "Permanent link")\n\nå¯¹äºæ›´å¤æ‚çš„ç³»ç»Ÿï¼Œæ‚¨å¯èƒ½å¸Œæœ›å®šä¹‰ä¸çˆ¶å›¾å…·æœ‰**å®Œå…¨ä¸åŒæ¨¡å¼**ï¼ˆæ²¡æœ‰å…±äº«é”®ï¼‰çš„å­å›¾ã€‚ä¾‹å¦‚ï¼Œæ‚¨å¯èƒ½å¸Œæœ›ä¸º[å¤šæ™ºèƒ½ä½“](../../concepts/multi_agent/)ç³»ç»Ÿä¸­çš„æ¯ä¸ªæ™ºèƒ½ä½“ä¿ç•™ç§æœ‰çš„æ¶ˆæ¯å†å²è®°å½•ã€‚\n\nå¦‚æœæ‚¨çš„åº”ç”¨ç¨‹åºå±äºè¿™ç§æƒ…å†µï¼Œæ‚¨éœ€è¦å®šä¹‰ä¸€ä¸ª**è°ƒç”¨å­å›¾çš„èŠ‚ç‚¹å‡½æ•°**ã€‚æ­¤å‡½æ•°éœ€è¦åœ¨è°ƒç”¨å­å›¾ä¹‹å‰å°†è¾“å…¥ï¼ˆçˆ¶ï¼‰çŠ¶æ€è½¬æ¢ä¸ºå­å›¾çŠ¶æ€ï¼Œå¹¶åœ¨ä»èŠ‚ç‚¹è¿”å›çŠ¶æ€æ›´æ–°ä¹‹å‰å°†ç»“æœè½¬æ¢å›çˆ¶çŠ¶æ€ã€‚\n\n*API å‚è€ƒï¼š[StateGraph](https://github.langchain.ac.cn/langgraph/reference/graphs/#langgraph.graph.state.StateGraph)*\n\n```\n from typing_extensions import TypedDict from  typing_extensions  import TypedDictfrom langgraph.graph.state import StateGraph, START from  langgraph.graph.state  import StateGraph, START  class SubgraphState(TypedDict): class  SubgraphState(TypedDict): bar: str bar: str  # Subgraph # Subgraph  def subgraph_node_1(state: SubgraphState): def  subgraph_node_1(state: SubgraphState): return {"bar": "hi! " + state["bar"]} return{"bar":"hi! " + state["bar"]}  subgraph_builder = StateGraph(SubgraphState) subgraph_builder = StateGraph(SubgraphState)subgraph_builder.add_node(subgraph_node_1) subgraph_builder. add_node(subgraph_node_1)subgraph_builder.add_edge(START, "subgraph_node_1") subgraph_builder. add_edge(START, "subgraph_node_1")subgraph = subgraph_builder.compile() subgraph = subgraph_builder. compile()  # Parent graph # Parent graph  class State(TypedDict): class  State(TypedDict): foo: str foo: str  def call_subgraph(state: State): def  call_subgraph(state: State): subgraph_output = subgraph.invoke({"bar": state["foo"]}) # (1)! subgraph_output = subgraph. invoke({"bar": state["foo"]})# (1)! return {"foo": subgraph_output["bar"]} # (2)! return{"foo": subgraph_output["bar"]}# (2)!  builder = StateGraph(State) builder = StateGraph(State)builder.add_node("node_1", call_subgraph) builder. add_node("node_1", call_subgraph)builder.add_edge(START, "node_1") builder. add_edge(START, "node_1")graph = builder.compile() graph = builder. compile()\n```\n\n1. å°†çŠ¶æ€è½¬æ¢ä¸ºå­å›¾çŠ¶æ€\n2. å°†å“åº”è½¬æ¢å›çˆ¶çŠ¶æ€\n\n å®Œæ•´ç¤ºä¾‹ï¼šä¸åŒçŠ¶æ€æ¨¡å¼\n\n```\n from typing_extensions import TypedDict from  typing_extensions  import TypedDictfrom langgraph.graph.state import StateGraph, START from  langgraph.graph.state  import StateGraph, START  # Define subgraph # Define subgraphclass SubgraphState(TypedDict): class  SubgraphState(TypedDict):  # note that none of these keys are shared with the parent graph state # note that none of these keys are shared with the parent graph state bar: str bar: str baz: str baz: str  def subgraph_node_1(state: SubgraphState): def  subgraph_node_1(state: SubgraphState): return {"baz": "baz"} return{"baz": "baz"}  def subgraph_node_2(state: SubgraphState): def  subgraph_node_2(state: SubgraphState): return {"bar": state["bar"] + state["baz"]} return{"bar": state["bar"] + state["baz"]}  subgraph_builder = StateGraph(SubgraphState) subgraph_builder = StateGraph(SubgraphState)subgraph_builder.add_node(subgraph_node_1) subgraph_builder. add_node(subgraph_node_1)subgraph_builder.add_node(subgraph_node_2) subgraph_builder. add_node(subgraph_node_2)subgraph_builder.add_edge(START, "subgraph_node_1") subgraph_builder. add_edge(START, "subgraph_node_1")subgraph_builder.add_edge("subgraph_node_1", "subgraph_node_2") subgraph_builder. add_edge("subgraph_node_1", "subgraph_node_2")subgraph = subgraph_builder.compile() subgraph = subgraph_builder. compile()  # Define parent graph # Define parent graphclass ParentState(TypedDict): class  ParentState(TypedDict): foo: str foo: str  def node_1(state: ParentState): def  node_1(state: ParentState): return {"foo": "hi! " + state["foo"]} return{"foo":"hi! " + state["foo"]}  def node_2(state: ParentState): def  node_2(state: ParentState): response = subgraph.invoke({"bar": state["foo"]}) # (1)! response = subgraph. invoke({"bar": state["foo"]})# (1)! return {"foo": response["bar"]} # (2)! return{"foo": response["bar"]}# (2)!   builder = StateGraph(ParentState) builder = StateGraph(ParentState)builder.add_node("node_1", node_1) builder. add_node("node_1", node_1)builder.add_node("node_2", node_2) builder. add_node("node_2", node_2)builder.add_edge(START, "node_1") builder. add_edge(START, "node_1")builder.add_edge("node_1", "node_2") builder. add_edge("node_1", "node_2")graph = builder.compile() graph = builder. compile()  for chunk in graph.stream({"foo": "foo"}, subgraphs=True): for chunk in graph. stream({"foo": "foo"}, subgraphs = True): print(chunk) print(chunk)\n```\n\n1. å°†çŠ¶æ€è½¬æ¢ä¸ºå­å›¾çŠ¶æ€\n2. å°†å“åº”è½¬æ¢å›çˆ¶çŠ¶æ€\n\n```\n((), {\'node_1\': {\'foo\': \'hi! foo\'}}) ((\'node_2:9c36dd0f-151a-cb42-cbad-fa2f851f9ab7\',), {\'grandchild_1\': {\'my_grandchild_key\': \'hi Bob, how are you\'}}) ((\'node_2:9c36dd0f-151a-cb42-cbad-fa2f851f9ab7\',), {\'grandchild_2\': {\'bar\': \'hi! foobaz\'}}) ((), {\'node_2\': {\'foo\': \'hi! foobaz\'}}) \n```\n\n  å®Œæ•´ç¤ºä¾‹ï¼šä¸åŒçŠ¶æ€æ¨¡å¼ï¼ˆä¸¤çº§å­å›¾ï¼‰\n\nè¿™æ˜¯ä¸€ä¸ªå…·æœ‰ä¸¤çº§å­å›¾çš„ç¤ºä¾‹ï¼šçˆ¶çº§ -> å­çº§ -> å­™çº§ã€‚\n\n```\n # Grandchild graph # Grandchild graph from typing_extensions import TypedDict from  typing_extensions  import TypedDictfrom langgraph.graph.state import StateGraph, START, END from  langgraph.graph.state  import StateGraph, START, END  class GrandChildState(TypedDict): class  GrandChildState(TypedDict): my_grandchild_key: str my_grandchild_key: str  def grandchild_1(state: GrandChildState) -> GrandChildState: def  grandchild_1(state: GrandChildState) -> GrandChildState: # NOTE: child or parent keys will not be accessible here # NOTE: child or parent keys will not be accessible here return {"my_grandchild_key": state["my_grandchild_key"] + ", how are you"} return{"my_grandchild_key": state["my_grandchild_key"] +", how are you"}   grandchild = StateGraph(GrandChildState) grandchild = StateGraph(GrandChildState)grandchild.add_node("grandchild_1", grandchild_1) grandchild. add_node("grandchild_1", grandchild_1)  grandchild.add_edge(START, "grandchild_1") grandchild. add_edge(START, "grandchild_1")grandchild.add_edge("grandchild_1", END) grandchild. add_edge("grandchild_1", END)  grandchild_graph = grandchild.compile() grandchild_graph = grandchild. compile()  # Child graph # Child graphclass ChildState(TypedDict): class  ChildState(TypedDict): my_child_key: str my_child_key: str  def call_grandchild_graph(state: ChildState) -> ChildState: def  call_grandchild_graph(state: ChildState) -> ChildState: # NOTE: parent or grandchild keys won\'t be accessible here # NOTE: parent or grandchild keys won\'t be accessible here grandchild_graph_input = {"my_grandchild_key": state["my_child_key"]} # (1)! grandchild_graph_input ={"my_grandchild_key": state["my_child_key"]}# (1)! grandchild_graph_output = grandchild_graph.invoke(grandchild_graph_input) grandchild_graph_output = grandchild_graph. invoke(grandchild_graph_input) return {"my_child_key": grandchild_graph_output["my_grandchild_key"] + " today?"} # (2)! return{"my_child_key": grandchild_graph_output["my_grandchild_key"] + " today?"}# (2)!  child = StateGraph(ChildState) child = StateGraph(ChildState)child.add_node("child_1", call_grandchild_graph) # (3)! child. add_node("child_1", call_grandchild_graph)# (3)!child.add_edge(START, "child_1") child. add_edge(START, "child_1")child.add_edge("child_1", END) child. add_edge("child_1", END)child_graph = child.compile() child_graph = child. compile()  # Parent graph # Parent graphclass ParentState(TypedDict): class  ParentState(TypedDict): my_key: str my_key: str  def parent_1(state: ParentState) -> ParentState: def  parent_1(state: ParentState) -> ParentState: # NOTE: child or grandchild keys won\'t be accessible here # NOTE: child or grandchild keys won\'t be accessible here return {"my_key": "hi " + state["my_key"]} return{"my_key": "hi " + state["my_key"]}  def parent_2(state: ParentState) -> ParentState: def  parent_2(state: ParentState) -> ParentState: return {"my_key": state["my_key"] + " bye!"} return{"my_key": state["my_key"] +" bye!"}  def call_child_graph(state: ParentState) -> ParentState: def  call_child_graph(state: ParentState) -> ParentState: child_graph_input = {"my_child_key": state["my_key"]} # (4)! child_graph_input ={"my_child_key": state["my_key"]}# (4)! child_graph_output = child_graph.invoke(child_graph_input) child_graph_output = child_graph. invoke(child_graph_input) return {"my_key": child_graph_output["my_child_key"]} # (5)! return{"my_key": child_graph_output["my_child_key"]}# (5)!  parent = StateGraph(ParentState) parent = StateGraph(ParentState)parent.add_node("parent_1", parent_1) parent. add_node("parent_1", parent_1)parent.add_node("child", call_child_graph) # (6)! parent. add_node("child", call_child_graph)# (6)!parent.add_node("parent_2", parent_2) parent. add_node("parent_2", parent_2)  parent.add_edge(START, "parent_1") parent. add_edge(START, "parent_1")parent.add_edge("parent_1", "child") parent. add_edge("parent_1", "child")parent.add_edge("child", "parent_2") parent. add_edge("child", "parent_2")parent.add_edge("parent_2", END) parent. add_edge("parent_2", END)  parent_graph = parent.compile() parent_graph = parent. compile()  for chunk in parent_graph.stream({"my_key": "Bob"}, subgraphs=True): for chunk in parent_graph. stream({"my_key": "Bob"}, subgraphs = True): print(chunk) print(chunk)\n```\n\n1. æˆ‘ä»¬æ­£åœ¨å°†çŠ¶æ€ä»å­çŠ¶æ€é€šé“ï¼ˆ`my_child_key`ï¼‰è½¬æ¢ä¸ºå­™çŠ¶æ€é€šé“ï¼ˆ`my_grandchild_key`ï¼‰\n2. æˆ‘ä»¬æ­£åœ¨å°†çŠ¶æ€ä»å­™çŠ¶æ€é€šé“ï¼ˆ`my_grandchild_key`ï¼‰è½¬æ¢å›å­çŠ¶æ€é€šé“ï¼ˆ`my_child_key`ï¼‰\n3. æˆ‘ä»¬åœ¨è¿™é‡Œä¼ é€’ä¸€ä¸ªå‡½æ•°ï¼Œè€Œä¸ä»…ä»…æ˜¯ç¼–è¯‘åçš„å›¾ï¼ˆ`grandchild_graph`ï¼‰\n4. æˆ‘ä»¬æ­£åœ¨å°†çŠ¶æ€ä»çˆ¶çŠ¶æ€é€šé“ï¼ˆ`my_key`ï¼‰è½¬æ¢ä¸ºå­çŠ¶æ€é€šé“ï¼ˆ`my_child_key`ï¼‰\n5. æˆ‘ä»¬æ­£åœ¨å°†çŠ¶æ€ä»å­çŠ¶æ€é€šé“ï¼ˆ`my_child_key`ï¼‰è½¬æ¢å›çˆ¶çŠ¶æ€é€šé“ï¼ˆ`my_key`ï¼‰\n6. æˆ‘ä»¬åœ¨è¿™é‡Œä¼ é€’ä¸€ä¸ªå‡½æ•°ï¼Œè€Œä¸ä»…ä»…æ˜¯ç¼–è¯‘åçš„å›¾ï¼ˆ`child_graph`ï¼‰\n\n```\n((), {\'parent_1\': {\'my_key\': \'hi Bob\'}}) ((\'child:2e26e9ce-602f-862c-aa66-1ea5a4655e3b\', \'child_1:781bb3b1-3971-84ce-810b-acf819a03f9c\'), {\'grandchild_1\': {\'my_grandchild_key\': \'hi Bob, how are you\'}}) ((\'child:2e26e9ce-602f-862c-aa66-1ea5a4655e3b\',), {\'child_1\': {\'my_child_key\': \'hi Bob, how are you today?\'}}) ((), {\'child\': {\'my_key\': \'hi Bob, how are you today?\'}}) ((), {\'parent_2\': {\'my_key\': \'hi Bob, how are you today? bye!\'}}) \n```\n\n## æ·»åŠ æŒä¹…åŒ–[Â¶](#add-persistence "Permanent link")\n\næ‚¨åªéœ€è¦**åœ¨ç¼–è¯‘çˆ¶å›¾æ—¶æä¾›æ£€æŸ¥ç‚¹ï¼ˆcheckpointerï¼‰**ã€‚LangGraph å°†è‡ªåŠ¨å°†æ£€æŸ¥ç‚¹ä¼ æ’­åˆ°å­å›¾ã€‚\n\n*API å‚è€ƒï¼š [START](https://github.langchain.ac.cn/langgraph/reference/constants/#langgraph.constants.START) | [StateGraph](https://github.langchain.ac.cn/langgraph/reference/graphs/#langgraph.graph.state.StateGraph) | [InMemorySaver](https://github.langchain.ac.cn/langgraph/reference/checkpoints/#langgraph.checkpoint.memory.InMemorySaver)*\n\n```\nfrom langgraph.graph import START, StateGraph from  langgraph.graph  import START, StateGraphfrom langgraph.checkpoint.memory import InMemorySaver from  langgraph.checkpoint.memory  import InMemorySaver from typing_extensions import TypedDict from  typing_extensions  import TypedDict  class State(TypedDict): class  State(TypedDict): foo: str foo: str  # Subgraph # Subgraph  def subgraph_node_1(state: State): def  subgraph_node_1(state: State): return {"foo": state["foo"] + "bar"} return{"foo": state["foo"] + "bar"}  subgraph_builder = StateGraph(State) subgraph_builder = StateGraph(State)subgraph_builder.add_node(subgraph_node_1) subgraph_builder. add_node(subgraph_node_1)subgraph_builder.add_edge(START, "subgraph_node_1") subgraph_builder. add_edge(START, "subgraph_node_1")subgraph = subgraph_builder.compile() subgraph = subgraph_builder. compile()  # Parent graph # Parent graph  builder = StateGraph(State) builder = StateGraph(State)builder.add_node("node_1", subgraph) builder. add_node("node_1", subgraph)builder.add_edge(START, "node_1") builder. add_edge(START, "node_1")  checkpointer = InMemorySaver() checkpointer = InMemorySaver()graph = builder.compile(checkpointer=checkpointer) graph = builder. compile(checkpointer = checkpointer)\n```\n\nå¦‚æœæ‚¨å¸Œæœ›å­å›¾**æ‹¥æœ‰è‡ªå·±çš„å†…å­˜**ï¼Œæ‚¨å¯ä»¥åœ¨ç¼–è¯‘æ—¶è®¾ç½® `with checkpointer=True`ã€‚è¿™åœ¨[å¤šæ™ºèƒ½ä½“](../../concepts/multi_agent/)ç³»ç»Ÿä¸­å¾ˆæœ‰ç”¨ï¼Œå¦‚æœæ‚¨å¸Œæœ›æ™ºèƒ½ä½“èƒ½å¤Ÿè·Ÿè¸ªå…¶å†…éƒ¨æ¶ˆæ¯å†å²è®°å½•ã€‚\n\n```\nsubgraph_builder = StateGraph(...) subgraph_builder = StateGraph(...)subgraph = subgraph_builder.compile(checkpointer=True) subgraph = subgraph_builder. compile(checkpointer = True)\n```\n\n## æŸ¥çœ‹å­å›¾çŠ¶æ€[Â¶](#view-subgraph-state "Permanent link")\n\nå½“æ‚¨å¯ç”¨[æŒä¹…åŒ–](../../concepts/persistence/)åï¼Œæ‚¨å¯ä»¥é€šè¿‡ `graph.get_state(config)` [æ£€æŸ¥å›¾çš„çŠ¶æ€](../../concepts/persistence/#checkpoints)ï¼ˆæ£€æŸ¥ç‚¹ï¼‰ã€‚è¦æŸ¥çœ‹å­å›¾çš„çŠ¶æ€ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ `graph.get_state(config, subgraphs=True)`ã€‚\n\n**ä»…**åœ¨ä¸­æ–­æ—¶å¯ç”¨\n\nå­å›¾çŠ¶æ€åªèƒ½åœ¨**å­å›¾è¢«ä¸­æ–­æ—¶**æŸ¥çœ‹ã€‚ä¸€æ—¦æ‚¨æ¢å¤å›¾çš„è¿è¡Œï¼Œæ‚¨å°†æ— æ³•è®¿é—®å­å›¾çŠ¶æ€ã€‚\n\n æŸ¥çœ‹ä¸­æ–­çš„å­å›¾çŠ¶æ€\n\n```\nfrom langgraph.graph import START, StateGraph from  langgraph.graph  import START, StateGraphfrom langgraph.checkpoint.memory import InMemorySaver from  langgraph.checkpoint.memory  import InMemorySaverfrom langgraph.types import interrupt, Command from  langgraph.types  import interrupt, Command from typing_extensions import TypedDict from  typing_extensions  import TypedDict  class State(TypedDict): class  State(TypedDict): foo: str foo: str  # Subgraph # Subgraph  def subgraph_node_1(state: State): def  subgraph_node_1(state: State): value = interrupt("Provide value:") value = interrupt("Provide value:") return {"foo": state["foo"] + value} return{"foo": state["foo"] + value}  subgraph_builder = StateGraph(State) subgraph_builder = StateGraph(State)subgraph_builder.add_node(subgraph_node_1) subgraph_builder. add_node(subgraph_node_1)subgraph_builder.add_edge(START, "subgraph_node_1") subgraph_builder. add_edge(START, "subgraph_node_1")  subgraph = subgraph_builder.compile() subgraph = subgraph_builder. compile()  # Parent graph # Parent graph  builder = StateGraph(State) builder = StateGraph(State)builder.add_node("node_1", subgraph) builder. add_node("node_1", subgraph)builder.add_edge(START, "node_1") builder. add_edge(START, "node_1")  checkpointer = InMemorySaver() checkpointer = InMemorySaver()graph = builder.compile(checkpointer=checkpointer) graph = builder. compile(checkpointer = checkpointer)  config = {"configurable": {"thread_id": "1"}} config ={"configurable":{"thread_id": "1"}}  graph.invoke({"foo": ""}, config) graph. invoke({"foo": ""}, config)parent_state = graph.get_state(config) parent_state = graph. get_state(config)subgraph_state = graph.get_state(config, subgraphs=True).tasks[0].state # (1)! subgraph_state = graph. get_state(config, subgraphs = True). tasks[0]. state# (1)!  # resume the subgraph # resume the subgraphgraph.invoke(Command(resume="bar"), config) graph. invoke(Command(resume = "bar"), config)\n```\n\n1. è¿™ä»…åœ¨å­å›¾è¢«ä¸­æ–­æ—¶å¯ç”¨ã€‚ä¸€æ—¦æ‚¨æ¢å¤å›¾çš„è¿è¡Œï¼Œæ‚¨å°†æ— æ³•è®¿é—®å­å›¾çŠ¶æ€ã€‚\n\n## æµå¼ä¼ è¾“å­å›¾è¾“å‡º[Â¶](#stream-subgraph-outputs "Permanent link")\n\nè¦å°†å­å›¾çš„è¾“å‡ºåŒ…å«åœ¨æµå¼è¾“å‡ºä¸­ï¼Œæ‚¨å¯ä»¥åœ¨çˆ¶å›¾çš„ `.stream()` æ–¹æ³•ä¸­è®¾ç½® `subgraphs=True`ã€‚è¿™å°†ä»çˆ¶å›¾å’Œä»»ä½•å­å›¾ä¸­æµå¼ä¼ è¾“è¾“å‡ºã€‚\n\n```\nfor chunk in graph.stream( for chunk in graph. stream( {"foo": "foo"}, {"foo": "foo"}, subgraphs=True, # (1)! subgraphs = True,# (1)! stream_mode="updates", stream_mode = "updates",): ): print(chunk) print(chunk)\n```\n\n1. è®¾ç½® `subgraphs=True` ä»¥ä»å­å›¾ä¸­æµå¼ä¼ è¾“è¾“å‡ºã€‚\n\n ä»å­å›¾æµå¼ä¼ è¾“\n\n```\n from typing_extensions import TypedDict from  typing_extensions  import TypedDictfrom langgraph.graph.state import StateGraph, START from  langgraph.graph.state  import StateGraph, START  # Define subgraph # Define subgraphclass SubgraphState(TypedDict): class  SubgraphState(TypedDict): foo: str foo: str bar: str bar: str  def subgraph_node_1(state: SubgraphState): def  subgraph_node_1(state: SubgraphState): return {"bar": "bar"} return{"bar": "bar"}  def subgraph_node_2(state: SubgraphState): def  subgraph_node_2(state: SubgraphState): # note that this node is using a state key (\'bar\') that is only available in the subgraph # note that this node is using a state key (\'bar\') that is only available in the subgraph # and is sending update on the shared state key (\'foo\') # and is sending update on the shared state key (\'foo\') return {"foo": state["foo"] + state["bar"]} return{"foo": state["foo"] + state["bar"]}  subgraph_builder = StateGraph(SubgraphState) subgraph_builder = StateGraph(SubgraphState)subgraph_builder.add_node(subgraph_node_1) subgraph_builder. add_node(subgraph_node_1)subgraph_builder.add_node(subgraph_node_2) subgraph_builder. add_node(subgraph_node_2)subgraph_builder.add_edge(START, "subgraph_node_1") subgraph_builder. add_edge(START, "subgraph_node_1")subgraph_builder.add_edge("subgraph_node_1", "subgraph_node_2") subgraph_builder. add_edge("subgraph_node_1", "subgraph_node_2")subgraph = subgraph_builder.compile() subgraph = subgraph_builder. compile()  # Define parent graph # Define parent graphclass ParentState(TypedDict): class  ParentState(TypedDict): foo: str foo: str  def node_1(state: ParentState): def  node_1(state: ParentState): return {"foo": "hi! " + state["foo"]} return{"foo":"hi! " + state["foo"]}  builder = StateGraph(ParentState) builder = StateGraph(ParentState)builder.add_node("node_1", node_1) builder. add_node("node_1", node_1)builder.add_node("node_2", subgraph) builder. add_node("node_2", subgraph)builder.add_edge(START, "node_1") builder. add_edge(START, "node_1")builder.add_edge("node_1", "node_2") builder. add_edge("node_1", "node_2")graph = builder.compile() graph = builder. compile()  for chunk in graph.stream( for chunk in graph. stream( {"foo": "foo"}, {"foo": "foo"}, stream_mode="updates", stream_mode = "updates", subgraphs=True, # (1)! subgraphs = True,# (1)!): ): print(chunk) print(chunk)\n```\n\n1. è®¾ç½® `subgraphs=True` ä»¥ä»å­å›¾ä¸­æµå¼ä¼ è¾“è¾“å‡ºã€‚\n\n``` ((), {\'node\\_1\': {\'foo\': \'hi! foo\'}}) ((\'node\\_2:e58e5673-a661-ebb0-70d4-e298a7fc28b7\',), {\'subgraph\\_node\\_1\': {\'bar\': \'bar\'}}) ((\'node\\_2:e58e5673-a661-ebb0-70d4-e298a7fc28b7\',), {\'subgraph\\_node\\_2\': {\'foo\': \'hi! foobar\'}}) ((), {\'node\\_2\': {\'foo\': \'hi! foobar\'}})', 'doi': '', 'published_date': None, 'pdf_url': '', 'url': 'https://github.langchain.ac.cn/langgraph/how-tos/subgraph/', 'source': 'tavily', 'categories': ['web_search'], 'keywords': [], 'citations': 0, 'references': [], 'extra': {'score': 0.99998534, 'saved_path': None}}
2026-02-21 19:55:56,148 - __main__ - INFO - handle_search: returned=1
2026-02-21 19:55:56,148 - __main__ - INFO - call_tool payload: source_tool=tavily_search, result_type=papers, count=1
2026-02-21 19:55:56,148 - __main__ - INFO - call_tool: name=tavily_search, result_type=papers, count=1
2026-02-21 19:55:56,149 - __main__ - DEBUG - call_tool payload sample: {'paper_id': '', 'title': 'LangGraphä¸­Stateçš„å®šä¹‰æ¨¡å¼ - CSDNåšå®¢', 'authors': [], 'abstract': 'LangGraphä¸­Stateçš„å®šä¹‰æ¨¡å¼_langgraphè·å–state-CSDNåšå®¢\n===============\n\n[![Image 1: CSDNé¦–é¡µ](https://img-home.csdnimg.cn/images/20201124032511.png)](https://www.csdn.net/)\n\n*   [åšå®¢](https://blog.csdn.net/)\n*   [ä¸‹è½½](https://download.csdn.net/)\n*   [ç¤¾åŒº](https://devpress.csdn.net/)\n*   [![Image 2](https://img-home.csdnimg.cn/images/20240829093757.png)GitCode](https://link.csdn.net/?target=https%3A%2F%2Fgitcode.com%3Futm_source%3Dcsdn_toolbar)\n*   [![Image 3](https://i-operation.csdnimg.cn/images/3c66245675ae423e9cc897dc790b8ac9.png)GPUç®—åŠ› ![Image 4](https://i-operation.csdnimg.cn/images/d8d2f104eeeb4a428045d2b34d72ed13.png)](https://ai.csdn.net/)\n*   [æ›´å¤š](https://blog.csdn.net/qq_43588095/article/details/147479946)[ä¼šè®®](https://www.bagevent.com/event/9117243 "ä¼šè®®")[å­¦ä¹ ](https://edu.csdn.net/?utm_source=zhuzhantoolbar "é«˜è´¨é‡è¯¾ç¨‹Â·å¤§ä¼šäº‘ä¼šå‘˜")[![Image 5](https://i-operation.csdnimg.cn/images/77c4dd7a760a493498bee1d336b064c0.png)InsCode](https://inscode.net/?utm_source=csdn_blog_top_bar "InsCode") \n\næœç´¢\nAI æœç´¢\n\n[ç™»å½•](https://blog.csdn.net/qq_43588095/article/details/147479946)\n\nç™»å½•åæ‚¨å¯ä»¥ï¼š\n\n*   å¤åˆ¶ä»£ç å’Œä¸€é”®è¿è¡Œ\n*   ä¸åšä¸»å¤§Væ·±åº¦äº’åŠ¨\n*   è§£é”æµ·é‡ç²¾é€‰èµ„æº\n*   è·å–å‰æ²¿æŠ€æœ¯èµ„è®¯\n\n[ç«‹å³ç™»å½•](https://blog.csdn.net/qq_43588095/article/details/147479946)\n\n[![Image 6](https://i-operation.csdnimg.cn/images/f9098e9320264ddc85f274234b2f0c6a.png)æ–°å®¢å¼€é€šä¼šå‘˜ ç«‹å‡60![Image 7](https://i-operation.csdnimg.cn/images/97f199b02b604390ab516e4897fb5bfe.png)](https://mall.csdn.net/vip?utm_source=dl_hover)\n\n[ä¼šå‘˜Â·æ–°äººç¤¼åŒ… ![Image 8](https://i-operation.csdnimg.cn/images/105eda9d414f4250a7c3fe45be3cd15f.png)](https://mall.csdn.net/vip?utm_source=260206_vip_toolbarhyzx_hy)\n\n[æ¶ˆæ¯](https://i.csdn.net/#/msg/index)\n\n[åˆ›ä½œä¸­å¿ƒ](https://mp.csdn.net/ "åˆ›ä½œä¸­å¿ƒ")\n\n[åˆ›ä½œ](https://mp.csdn.net/edit)\n\n[![Image 9](https://i-operation.csdnimg.cn/images/6e41bd372d1f4ec39b3cd36ab95046c4.png)](https://mp.csdn.net/edit)![Image 10](https://i-operation.csdnimg.cn/images/43349e98a45341699652b0b6fa4ea541.png)![Image 11](https://i-operation.csdnimg.cn/images/0f13ec529b6b4195ad99894f76653e56.png)\n\nLangGraphä¸­Stateçš„å®šä¹‰æ¨¡å¼\n====================\n\næœ€æ–°æ¨èæ–‡ç« äº 2025-12-01 20:03:17 å‘å¸ƒ\n\nåŸåˆ› äº 2025-04-24 15:32:41 å‘å¸ƒÂ·897 é˜…è¯»\n\nÂ·![Image 12](https://csdnimg.cn/release/blogv2/dist/pc/img/newHeart2023Active.png)![Image 13](https://csdnimg.cn/release/blogv2/dist/pc/img/newHeart2023Black.png) 5 \n\nÂ·[![Image 14](https://csdnimg.cn/release/blogv2/dist/pc/img/tobarCollect2.png)![Image 15](https://csdnimg.cn/release/blogv2/dist/pc/img/tobarCollectionActive2.png) 5](https://blog.csdn.net/qq_43588095/article/details/147479946)Â·\n\nCC 4.0 BY-SAç‰ˆæƒ\n\n ç‰ˆæƒå£°æ˜ï¼šæœ¬æ–‡ä¸ºåšä¸»åŸåˆ›æ–‡ç« ï¼Œéµå¾ª[CC 4.0 BY-SA](http://creativecommons.org/licenses/by-sa/4.0/)ç‰ˆæƒåè®®ï¼Œè½¬è½½è¯·é™„ä¸ŠåŸæ–‡å‡ºå¤„é“¾æ¥å’Œæœ¬å£°æ˜ã€‚ \n\næ–‡ç« æ ‡ç­¾ï¼š\n[#äººå·¥æ™ºèƒ½](https://so.csdn.net/so/search/s.do?q=%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD&t=all&o=vip&s=&l=&f=&viparticle=&from_tracking_code=tag_word&from_code=app_blog_art)[#å¤§æ¨¡å‹](https://so.csdn.net/so/search/s.do?q=%E5%A4%A7%E6%A8%A1%E5%9E%8B&t=all&o=vip&s=&l=&f=&viparticle=&from_tracking_code=tag_word&from_code=app_blog_art)[#Agent](https://so.csdn.net/so/search/s.do?q=Agent&t=all&o=vip&s=&l=&f=&viparticle=&from_tracking_code=tag_word&from_code=app_blog_art)[#LangGraph](https://so.csdn.net/so/search/s.do?q=LangGraph&t=all&o=vip&s=&l=&f=&viparticle=&from_tracking_code=tag_word&from_code=app_blog_art)\n\n[![Image 16](https://i-blog.csdnimg.cn/columns/default/20201014180756724.png?x-oss-process=image/resize,m_fixed,h_224,w_224)å¤§æ¨¡å‹Agentå¼€å‘ ä¸“æ æ”¶å½•è¯¥å†…å®¹](https://blog.csdn.net/qq_43588095/category_12933023.html "å¤§æ¨¡å‹Agentå¼€å‘")\n\n53 ç¯‡æ–‡ç« \n\n[è®¢é˜…ä¸“æ ](https://blog.csdn.net/qq_43588095/article/details/147479946)\n\n#### [](https://blog.csdn.net/qq_43588095/article/details/147479946)[](https://blog.csdn.net/qq_43588095/article/details/147479946)ä¸€ã€LangGraph æ¡†æ¶æ ¸å¿ƒè¦ç‚¹å›é¡¾\n\n1.   **åº•å±‚åŸç†ä¸ä¼˜åŠ¿**\n    *   LangGraphé‡‡ç”¨å›¾ç»“æ„æ›¿ä»£LangChainæ„å»ºAI Agentè¿è¡ŒçŠ¶æ€ï¼Œå¥‘åˆå¤§æ¨¡å‹æŠ€æœ¯å‘å±•è¶‹åŠ¿ã€‚\n    *   å‡­å€Ÿå¾ªç¯å›¾å’Œåˆ†æ”¯çŠ¶æ€ï¼Œèƒ½çµæ´»æ„å»ºagentå†…éƒ¨æµè½¬è¿‡ç¨‹ï¼Œé€‚ç”¨äºå¤æ‚AI Agentåº”ç”¨å¼€å‘ã€‚\n\n2.   **æ ¸å¿ƒç»„ä»¶è§£æ**\n    *   **èŠ‚ç‚¹ï¼ˆNodeï¼‰**ï¼šä½œä¸ºç‹¬ç«‹å‡½æ•°ï¼Œå¯æ ¹æ®ä¸šåŠ¡éœ€æ±‚è°ƒç”¨å¤§æ¨¡å‹æˆ–å…¶ä»–é€»è¾‘ï¼Œå°è£…å…·ä½“æ‰§è¡Œé€»è¾‘ã€‚\n    *   **è¾¹ï¼ˆEdgeï¼‰**ï¼šç”¨äºè¿æ¥å„ä¸ªèŠ‚ç‚¹ï¼Œæ˜ç¡®ä¸šåŠ¡æµçš„æ‰§è¡Œé¡ºåºã€‚\n    *   **çŠ¶æ€ï¼ˆStateï¼‰**ï¼šè´Ÿè´£åœ¨èŠ‚ç‚¹é—´ä¼ é€’ä¿¡æ¯ï¼Œå¯¹ç»´æŒå›¾çš„æŒç»­è¿è¡Œèµ·ç€å…³é”®ä½œç”¨ ã€‚\n\n3.   **åº”ç”¨åœºæ™¯å¤æ‚åº¦å·®å¼‚**\n    *   **ç®€å•åœºæ™¯**ï¼šå¦‚å¤§æ¨¡å‹é—®ç­”æµç¨‹ï¼Œå¯ç”±START - Node - ENDæ„æˆï¼Œåœ¨Nodeä¸­å°è£…å¤§æ¨¡å‹æ¥å…¥é€»è¾‘å³å¯ã€‚\n    *   **å¤æ‚åœºæ™¯**ï¼šæ¶‰åŠå¤šä»»åŠ¡å¤„ç†ã€å¤šæ•°æ®æµç¨‹ä»¥åŠå¤šagentååŒå·¥ä½œï¼Œå€ŸåŠ©åˆ†æ”¯å’Œå¾ªç¯å®ç°ã€‚åˆ†æ”¯ä¾æ®ç”¨æˆ·è¾“å…¥é€‰æ‹©ä¸åŒå¤„ç†é€»è¾‘ï¼Œå¾ªç¯åˆ™åœ¨èŠ‚ç‚¹è¾“å‡ºä¸é¢„æœŸæ—¶ï¼Œä½¿èŠ‚ç‚¹è¿”å›é‡æ–°å¤„ç†ã€‚\n\n#### [](https://blog.csdn.net/qq_43588095/article/details/147479946)[](https://blog.csdn.net/qq_43588095/article/details/147479946)äºŒã€Stateçš„å…³é”®ä½œç”¨åŠ[æ¶ˆæ¯ä¼ é€’](https://so.csdn.net/so/search?q=%E6%B6%88%E6%81%AF%E4%BC%A0%E9%80%92&spm=1001.2101.3001.7020)æœºåˆ¶\n\n1.   **æ ¸å¿ƒåœ°ä½å‡¸æ˜¾**\n\n    *   LangGraphåº•å±‚å›¾ç®—æ³•ä¾é æ¶ˆæ¯ä¼ é€’æœºåˆ¶å®šä¹‰å’Œæ‰§è¡Œå›¾çš„äº¤äº’æµç¨‹ï¼ŒStateä½œä¸ºæ¶ˆæ¯ä¼ é€’çš„è½½ä½“ï¼Œç›´æ¥å†³å®šå›¾èƒ½å¦æŒç»­è¿è¡Œã€‚\n    *   Stateä¸å·¥å…·è°ƒç”¨ã€äººæœºäº¤äº’ã€ä¸Šä¸‹æ–‡å†å²ä¿¡æ¯ç®¡ç†ç­‰é«˜çº§åŠŸèƒ½å¯†åˆ‡ç›¸å…³ã€‚\n\n2.   **æ¶ˆæ¯ä¼ é€’è¯¦ç»†è¿‡ç¨‹**ï¼šä»¥ç®€å•å›¾çŠ¶æ€ä¸ºä¾‹ï¼ŒSTARTèŠ‚ç‚¹æ¥æ”¶ç”¨æˆ·è¾“å…¥ã€‚![Image 17: åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/direct/34c5cd13225746f28209b80e750f3d85.png#pic_center)\n\n    *   åˆå§‹çŠ¶æ€å‡è®¾ä¸º`{"message":[{"x":10}]}`,æ¶ˆæ¯ç»è¾¹ä¼ é€’è‡³Node 1ã€‚\n    *   Node 1å¯¹`x`è¿›è¡ŒåŠ ä¸€æ“ä½œï¼ŒçŠ¶æ€æ›´æ–°ä¸º`{"message":[{"x":10},{"x":11}]}`,éšåä¼ é€’åˆ°Node 2ã€‚\n    *   Node 2æ¥æ”¶åˆ°æ›´æ–°åçš„çŠ¶æ€ï¼Œå¯¹`x`æ‰§è¡Œå‡äºŒæ“ä½œå¾—åˆ°`y=9` ï¼Œæœ€ç»ˆçŠ¶æ€å˜ä¸º`{"message":[{"x":10},{"x":11},{"y":9}]}`,é€šè¿‡ENDèŠ‚ç‚¹è¾“å‡ºç»™ç”¨æˆ·ç«¯ã€‚\n\n3.   **å¹¿æ’­æœºåˆ¶è§£æ**\n\n    *   LangGraphçš„çŠ¶æ€ä¸ºå…±äº«çŠ¶æ€ï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½å…·å¤‡è¯»å–å’Œå†™å…¥æƒé™ã€‚\n    *   å½“æŸä¸ªèŠ‚ç‚¹æ›´æ–°çŠ¶æ€æ—¶ï¼Œä¼šé€šè¿‡å¹¿æ’­æœºåˆ¶é€šçŸ¥å…¶ä»–èŠ‚ç‚¹ï¼Œä½¿å…¶ä»–èŠ‚ç‚¹èƒ½å¤Ÿæ®æ­¤è°ƒæ•´è‡ªèº«è¡Œä¸ºã€‚\n\n#### [](https://blog.csdn.net/qq_43588095/article/details/147479946)[](https://blog.csdn.net/qq_43588095/article/details/147479946)ä¸‰ã€Stateçš„å®šä¹‰æ¨¡å¼ä¸ä»£ç å®ç°ç¤ºä¾‹\n\n1.   **åŸºäºå­—å…¸ç±»å‹çš„å®šä¹‰æ¨¡å¼**ï¼šä»å¼€å‘è€…è§†è§’çœ‹ï¼ŒStateæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªå­—å…¸ï¼Œå…¶é”®å€¼ä¸ºåˆ—è¡¨ã€‚æ¯æ¬¡æ›´æ–°æ—¶ï¼Œä¼šå‘åˆ—è¡¨ä¸­æ·»åŠ æ–°å€¼ï¼Œä»¥æ­¤æ”¯æ’‘åç»­èŠ‚ç‚¹çš„è¿è¡Œã€‚\n2.   **ä»£ç å®ç°æ­¥éª¤**\n    *   ä½¿ç”¨`StateGraph`ç±»å®šä¹‰çŠ¶æ€ï¼Œåˆ›å»º`StateGraph`å®ä¾‹ã€‚\n\n    *   å®šä¹‰`addition`å’Œ`subtraction`å‡½æ•°ï¼Œåˆ†åˆ«å®ç°å¯¹çŠ¶æ€çš„åŠ ä¸€å’Œå‡äºŒæ“ä½œã€‚\n\n    *   é€šè¿‡`add_node`æ–¹æ³•æ·»åŠ èŠ‚ç‚¹ï¼Œåˆ©ç”¨`add_edge`æ–¹æ³•è¿æ¥èŠ‚ç‚¹ã€‚\n\n    *   æœ€åè°ƒç”¨`compile`æ–¹æ³•ï¼Œå°†`StateGraph`è½¬æ¢ä¸ºå¯è¿è¡Œçš„å›¾ç»“æ„ã€‚\n\n[å…³æ³¨åšä¸»å³å¯é˜…è¯»å…¨æ–‡![Image 18](https://csdnimg.cn/release/blogv2/dist/pc/img/arrowDownAttend.png)](https://blog.csdn.net/qq_43588095/article/details/147479946)\n\n![Image 19](https://csdnimg.cn/release/blogv2/dist/pc/img/vip-limited-close-newWhite.png)\n\n ç¡®å®šè¦æ”¾å¼ƒæœ¬æ¬¡æœºä¼šï¼Ÿ \n\nç¦åˆ©å€’è®¡æ—¶\n\n_:_ _:_\n\n![Image 20](https://csdnimg.cn/release/blogv2/dist/pc/img/vip-limited-close-roup.png)ç«‹å‡ Â¥\n\næ™®é€šVIPå¹´å¡å¯ç”¨\n\n[ç«‹å³ä½¿ç”¨](https://mall.csdn.net/vip)\n\n[![Image 21](https://profile-avatar.csdnimg.cn/12627a5b12dd4935a293f4608c5806d4_qq_43588095.jpg!1) ä¸Šæœ‰æ™¨å…‰](https://blog.csdn.net/qq_43588095)\n\n[å…³æ³¨](javascript:;)[å…³æ³¨](https://blog.csdn.net/qq_43588095/article/details/147479946)\n\n*   [![Image 22](https://csdnimg.cn/release/blogv2/dist/pc/img/tobarThumbUpactive.png)![Image 23](https://csdnimg.cn/release/blogv2/dist/pc/img/toolbar/like-active.png)![Image 24](https://csdnimg.cn/release/blogv2/dist/pc/img/toolbar/like.png) 5](https://blog.csdn.net/qq_43588095/article/details/147479946)ç‚¹èµ \n*   [![Image 25](https://csdnimg.cn/release/blogv2/dist/pc/img/toolbar/unlike-active.png)![Image 26](https://csdnimg.cn/release/blogv2/dist/pc/img/toolbar/unlike.png)](https://blog.csdn.net/qq_43588095/article/details/147479946)è¸© \n*   [![Image 27](https://csdnimg.cn/release/blogv2/dist/pc/img/toolbar/collect-active.png)![Image 28](https://csdnimg.cn/release/blogv2/dist/pc/img/toolbar/collect.png)![Image 29](https://csdnimg.cn/release/blogv2/dist/pc/img/newCollectActive.png) 5](javascript:;) æ”¶è—    è§‰å¾—è¿˜ä¸é”™?  ä¸€é”®æ”¶è— ![Image 30](https://csdnimg.cn/release/blogv2/dist/pc/img/collectionCloseWhite.png)  \n*   [![Image 31](https://csdnimg.cn/release/blogv2/dist/pc/img/toolbar/comment.png) 0](https://blog.csdn.net/qq_43588095/article/details/147479946#commentBox)è¯„è®º \n*   [![Image 32](https://csdnimg.cn/release/blogv2/dist/pc/img/toolbar/share.png)åˆ†äº«](javascript:;)[å¤åˆ¶é“¾æ¥](https://blog.csdn.net/qq_43588095/article/details/147479946) [åˆ†äº«åˆ° QQ](https://blog.csdn.net/qq_43588095/article/details/147479946) [åˆ†äº«åˆ°æ–°æµªå¾®åš](https://blog.csdn.net/qq_43588095/article/details/147479946) ![Image 33](https://blog.csdn.net/qq_43588095/article/details/147479946) ![Image 34](https://csdnimg.cn/release/blogv2/dist/pc/img/share/icon-wechat.png)æ‰«ä¸€æ‰«     \n*   [![Image 35](https://csdnimg.cn/release/blogv2/dist/pc/img/toolbar/more.png)](https://blog.csdn.net/qq_43588095/article/details/147479946)[![Image 36](https://csdnimg.cn/release/blogv2/dist/pc/img/toolbar/report.png)ä¸¾æŠ¥](https://blog.csdn.net/qq_43588095/article/details/147479946) [![Image 37](https://csdnimg.cn/release/blogv2/dist/pc/img/toolbar/report.png)ä¸¾æŠ¥](https://blog.csdn.net/qq_43588095/article/details/147479946)  \n\n[ä¸“æ ç›®å½•](https://blog.csdn.net/qq_43588095/article/details/147479946)\n\n![Image 38](https://kunyu.csdn.net/1.png?p=58&adBlockFlag=0&adId=1083251&a=1083251&c=3768339&k=LangGraph%E4%B8%ADState%E7%9A%84%E5%AE%9A%E4%B9%89%E6%A8%A1%E5%BC%8F&spm=1001.2101.3001.5002&articleId=147479946&d=1&t=3&u=3b9ed406de834dd990615eddf4447285)\n\n[_LangGraph_ ä¸­ _State_ çŠ¶æ€ _æ¨¡å¼_ è¯¦è§£](https://blog.csdn.net/qq_52053775/article/details/154745080)\n\n[qq_52053775çš„åšå®¢](https://blog.csdn.net/qq_52053775)\n\n11-12![Image 39](https://csdnimg.cn/release/blogv2/dist/pc/img/readCountWhite.png) 219 \n\n[_LangGraph_ æ¡†æ¶é€šè¿‡èŠ‚ç‚¹ã€è¾¹å’ŒçŠ¶æ€çš„ç»„åˆæ„å»ºAIä»£ç†ï¼Œå…¶ä¸­çŠ¶æ€ï¼ˆ_State_ï¼‰ä½œä¸ºæ ¸å¿ƒè½½ä½“å®ç°ä¿¡æ¯ä¼ é€’å’ŒåŠŸèƒ½æ”¯æ’‘ã€‚çŠ¶æ€é‡‡ç”¨å…±äº«å­—å…¸æ•°æ®ç»“æ„ï¼ŒèŠ‚ç‚¹å¯è¯»å†™çŠ¶æ€å¹¶å¹¿æ’­æ›´æ–°ï¼Œç¡®ä¿æ•°æ®æµåŠ¨ã€‚æ¡†æ¶æ”¯æŒå¤šç§å¯è§†åŒ–æ–¹æ³•ï¼ˆMermaid/Graphviz/Pyppeteerï¼‰å±•ç°èŠ‚ç‚¹å…³ç³»ã€‚Reducerå‡½æ•°æœºåˆ¶å…è®¸ä¸ºçŠ¶æ€é”® _å®šä¹‰_ ç‹¬ç«‹æ›´æ–°é€»è¾‘ï¼ˆè¦†ç›–/ç´¯åŠ ç­‰ï¼‰ï¼Œç»“åˆTypedDictä¿éšœç±»å‹å®‰å…¨ï¼Œé€‚ç”¨äºå¯¹è¯å†å²ç®¡ç†ç­‰åœºæ™¯ã€‚ä¸“ç”¨MessageGraphå­ç±»é€šè¿‡add_messages Reduceræ™ºèƒ½åˆå¹¶æ¶ˆæ¯åˆ—è¡¨ï¼Œä¼˜åŒ–å¯¹è¯åº”ç”¨](https://blog.csdn.net/qq_52053775/article/details/154745080)\n\n[](https://blog.csdn.net/qq_43588095/article/details/147479946)\n\nå‚ä¸è¯„è®º æ‚¨è¿˜æœªç™»å½•ï¼Œè¯·å…ˆ ç™»å½• åå‘è¡¨æˆ–æŸ¥çœ‹è¯„è®º\n\n[_LangGraph_ ç®€å•è®²è§£ç¤ºä¾‹â€”â€”_State_ã€Nodeã€Edge_ _langgraph_ ç¤ºä¾‹](https://blog.csdn.net/m0_50481455/article/details/156418156)\n\n2-11\n\n[_LangGraph_ ç®€å•è®²è§£ç¤ºä¾‹â€”â€”_State_ã€Nodeã€Edge _LangGraph_ çš„æ ¸å¿ƒä¸»è¦æ˜¯Graph,å®ƒæ˜¯â¼€ä¸ªæœ‰å‘â½†ç¯å›¾,â½¤äºæè¿°ä»»åŠ¡ä¹‹é—´çš„ä¾èµ–å…³ç³»ã€‚ ä¸»è¦åŒ…å«ä¸‰ä¸ªåŸºæœ¬å…ƒç´ : Â· _State_:ä¸€ç§æ•°æ®ç»“æ„ Â·Node:å¤„ç†æ•°æ®çš„èŠ‚ç‚¹,_LangGraph_ ä¸­é€šå¸¸æ˜¯ä¸€ä¸ªpythonå‡½æ•°,ä»¥ _State_ ä¸ºè¾“å…¥,ç»è¿‡ä¸€äº›æ“ä½œå¤„ç†å,è¿”å›æ›´æ–°åçš„ _State_](https://blog.csdn.net/m0_50481455/article/details/156418156)\n\n[æ”¶è—å¤‡ç”¨!_LangGraph_ æ ¸å¿ƒä¹‹ _State_ çŠ¶æ€ç®¡ç†å…¨è§£æ,å°ç™½ä¹Ÿèƒ½ä¸Šæ‰‹ _å¤§æ¨¡å‹_ å¼€å‘...](https://blog.csdn.net/m0_57081622/article/details/156422976)\n\n2-1\n\n[from _langgraph_.graph import _State_ Graph, START, END # _å®šä¹‰_ ç¬¬ä¸€ä¸ªèŠ‚ç‚¹:åŠ æ³• def addition(_state_): """ è¿™ä¸ªå‡½æ•°ä¼šæ”¶åˆ°å½“å‰çš„ _state_(ä¸€ä¸ªå­—å…¸)ä»é‡Œé¢å–å‡ºxçš„å€¼,åŠ 1åè¿”å› """ print(f"åŠ æ³•èŠ‚ç‚¹æ”¶åˆ°çš„ _state_: {_state_}") current_x = _state_["x"] new_x = current_x + 1 # åªè¿”å›æ›´æ–°çš„éƒ¨åˆ†,ä¸ç”¨...](https://blog.csdn.net/m0_57081622/article/details/156422976)\n\n[_LangGraph_ å­¦ä¹ ç¬”è®° â€” _LangGraph_ ä¸­ _State_ çŠ¶æ€ _æ¨¡å¼_](https://blog.csdn.net/Lucky_mzc/article/details/149914049)\n\n[Lucky_mzcçš„åšå®¢](https://blog.csdn.net/Lucky_mzc)\n\n08-05![Image 40](https://csdnimg.cn/release/blogv2/dist/pc/img/readCountWhite.png) 2064 \n\n[æœ¬æ–‡æ·±å…¥è§£æäº† _LangGraph_ æ¡†æ¶ä¸­çš„çŠ¶æ€ç®¡ç†æœºåˆ¶ï¼Œé‡ç‚¹æ¢è®¨äº† _State_ å’ŒReducerå‡½æ•°çš„æ ¸å¿ƒä½œç”¨ã€‚_LangGraph_ é€šè¿‡èŠ‚ç‚¹(Node)å’Œè¾¹(Edge)æ„å»ºå·¥ä½œæµï¼Œå…¶ä¸­çŠ¶æ€(_State_)ä½œä¸ºå…³é”®è½½ä½“åœ¨èŠ‚ç‚¹é—´ä¼ é€’ä¿¡æ¯ã€‚æ–‡ç« è¯¦ç»†ä»‹ç»äº†ä¸‰ç§çŠ¶æ€ _å®šä¹‰_ æ–¹å¼ï¼šå­—å…¸ç±»å‹ã€TypedDictç±»å‹å’ŒMessageGraphä¸“ç”¨ç±»å‹ï¼Œå¹¶åˆ†æäº†Reducerå‡½æ•°å¦‚ä½•æ§åˆ¶çŠ¶æ€æ›´æ–°é€»è¾‘ã€‚ç‰¹åˆ«é˜è¿°äº†add_messagesè¿™ä¸€é«˜çº§Reducerå‡½æ•°çš„å®ç°åŸç†ï¼Œå®ƒèƒ½æ™ºèƒ½å¤„ç†æ¶ˆæ¯çš„è¿½åŠ å’Œæ›´æ–°ã€‚é€šè¿‡å¤šä¸ªä»£ç ç¤ºä¾‹å±•ç¤ºäº†ä¸åŒåœºæ™¯ä¸‹çš„çŠ¶æ€](https://blog.csdn.net/Lucky_mzc/article/details/149914049)\n\n[_LangGraph_ èŠ‚ç‚¹è¿”å› _State_ ï¼Œ æ•°æ®è‡ªåŠ¨æ‹¼æ¥åŸç†](https://blog.csdn.net/weixin_44705554/article/details/147470995)\n\n[AI Agent é¦–å¸­ä½“éªŒå®˜](https://blog.csdn.net/weixin_44705554)\n\n04-24![Image 41](https://csdnimg.cn/release/blogv2/dist/pc/img/readCountWhite.png) 1251 \n\n[_å®šä¹‰_ çŠ¶æ€åˆå¹¶å‡½æ•°# _å®šä¹‰_ çŠ¶æ€ç±»å‹messages: Annotated[List[BaseMessage], add_messages] # ä½¿ç”¨æ³¨è§£æŒ‡å®šåˆå¹¶ç­–ç•¥# èŠ‚ç‚¹å‡½æ•° _å®šä¹‰_"""åˆ†ç±»ç”¨æˆ·è¯·æ±‚çš„ç±»å‹"""# æç¤ºæ¨¡æ¿ç”¨äºåˆ†ç±»ä»»åŠ¡("system", "ä½ æ˜¯ä¸€ä¸ªä»»åŠ¡åˆ†ç±»å™¨ã€‚æ ¹æ®ç”¨æˆ·çš„è¯·æ±‚ï¼Œç¡®å®šå®ƒæ˜¯å“ªç§ç±»å‹çš„ä»»åŠ¡ã€‚\\nè¾“å‡ºæ ¼å¼å¿…é¡»æ˜¯JSONï¼ŒåŒ…å«å­—æ®µ\'task_type\'ï¼Œå€¼ä¸º\'search\'(æœç´¢ç±»)ã€\'calculation\'(è®¡ç®—ç±»)æˆ–\'general\'(ä¸€èˆ¬é—®ç­”)ã€‚"),](https://blog.csdn.net/weixin_44705554/article/details/147470995)\n\n[_LangGraph_ ç³»åˆ—3ï¼š_State_ ä¸GraphåŸºç¡€â€”â€”_LangGraph_ çš„æ™ºèƒ½å·¥ä½œæµå¼•æ“ æœ€æ–°å‘å¸ƒ](https://devpress.csdn.net/v1/article/detail/155461000)\n\n[æ²›å“¥å„¿çš„ä¸“æ ](https://blog.csdn.net/m290345792)\n\n12-01![Image 42](https://csdnimg.cn/release/blogv2/dist/pc/img/readCountWhite.png) 1274 \n\n[åœ¨ _LangGraph_ ä¸­ï¼Œ**çŠ¶æ€ï¼ˆ_State_ï¼‰** å’Œ **å›¾ï¼ˆGraphï¼‰** ä¸æ˜¯è¾…åŠ©æ¦‚å¿µï¼Œè€Œæ˜¯æ•´ä¸ªæ™ºèƒ½ä½“ç³»ç»Ÿçš„â€œéª¨æ¶â€ä¸â€œç¥ç»ç³»ç»Ÿâ€ã€‚è®¸å¤šå¼€å‘è€…è¯¯ä»¥ä¸º _LangGraph_ åªæ˜¯â€œæŠŠå‡½æ•°è¿èµ·æ¥â€ï¼Œç»“æœåœ¨å¤æ‚åœºæ™¯ä¸­é­é‡çŠ¶æ€æ··ä¹±ã€æµç¨‹å¤±æ§ã€è°ƒè¯•æ— é—¨ã€‚å®é™…ä¸Šï¼Œ_LangGraph_ çš„æ ¸å¿ƒä¼˜åŠ¿åœ¨äºï¼š**é€šè¿‡å¼ºç±»å‹çŠ¶æ€ + æ˜¾å¼å›¾ç»“æ„ï¼Œå°† LLM çš„ä¸ç¡®å®šæ€§è¡Œä¸ºçº¦æŸåœ¨å¯éªŒè¯ã€å¯ä¸­æ–­ã€å¯é‡æ”¾çš„ç¡®å®šæ€§æ¡†æ¶å†…**ã€‚æœ¬æ–‡å°†å¸¦ä½ ç©¿é€ API è¡¨å±‚ï¼Œç†è§£ _State_ ä¸ Graph çš„è®¾è®¡å“²å­¦ï¼Œå¹¶æŒæ¡æ„å»ºå¥å£® AI å·¥ä½œæµ](https://devpress.csdn.net/v1/article/detail/155461000)\n\n[ã€_LangGraph_ã€‘ä»€ä¹ˆæ˜¯ _State_ Graph](https://devpress.csdn.net/v1/article/detail/147962997)\n\n[å½¬å½¬ä¾ çš„åšå®¢](https://blog.csdn.net/u013172930)\n\n05-14![Image 43](https://csdnimg.cn/release/blogv2/dist/pc/img/readCountWhite.png) 2237 \n\n[_langgraph_.graph._State_ Graph æ˜¯ _LangGraph_ åº“ä¸­çš„æ ¸å¿ƒç±»ï¼Œç”¨äº _å®šä¹‰_ å’Œç®¡ç†åŸºäºçŠ¶æ€çš„æœ‰å‘å›¾å·¥ä½œæµã€‚å®ƒæ˜¯ _LangGraph_ çš„ä¸»è¦æ„å»ºå—ï¼Œå…è®¸å¼€å‘è€…é€šè¿‡èŠ‚ç‚¹ï¼ˆNodesï¼‰ã€è¾¹ï¼ˆEdgesï¼‰å’ŒçŠ¶æ€ï¼ˆ_State_ï¼‰æ„é€ å¤æ‚çš„å·¥ä½œæµï¼Œç‰¹åˆ«é€‚åˆä¸å¤§å‹è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰ç»“åˆçš„åœºæ™¯ã€‚å…³é”®ç‚¹åŒ…æ‹¬ï¼šä½¿ç”¨ TypedDict æˆ–ç±» _å®šä¹‰_ çŠ¶æ€ã€‚é€šè¿‡ add_node å’Œ add_edge æ„å»ºå›¾ã€‚æ”¯æŒæ¡ä»¶è¾¹å’Œå¾ªç¯ï¼Œé€‚åº”åŠ¨æ€é€»è¾‘ã€‚ç¼–è¯‘åé€šè¿‡ invoke æˆ– stream æ‰§è¡Œã€‚é€šè¿‡ä»£ç ç¤ºä¾‹ï¼Œå¯ä»¥çœ‹åˆ°](https://devpress.csdn.net/v1/article/detail/147962997)\n\n[ã€å°ç™½æ•™ç¨‹ã€‘ä»é›¶å¼€å§‹å­¦ Dify - ä¸‡å­—è¯¦è§£ Dify å¾ªç¯å’Œè¿­ä»£çš„å®ç°æœºåˆ¶ï¼Œå»ºè®®æ”¶è—ï¼ï¼ï¼](https://devpress.csdn.net/v1/article/detail/149931957)\n\n[bugyinyinçš„åšå®¢](https://blog.csdn.net/bugyinyin)\n\n08-05![Image 44](https://csdnimg.cn/release/blogv2/dist/pc/img/readCountWhite.png) 2660 \n\n[Dify æ˜¯ä¸€ä¸ªå¼ºå¤§çš„ AI åº”ç”¨å¼€å‘å¹³å°ï¼Œå…¶å·¥ä½œæµå¼•æ“æ”¯æŒå¤æ‚çš„å¾ªç¯å’Œè¿­ä»£æ“ä½œã€‚æ¥ä¸‹æ¥å°†æ·±å…¥åˆ†æ Dify ä¸­å¾ªç¯å’Œè¿­ä»£çš„å®ç°æœºåˆ¶ã€‚](https://devpress.csdn.net/v1/article/detail/149931957)\n\n[ã€_LangGraph_ã€‘_langgraph_.graph._State_ Graph ç±»çš„å±æ€§å’Œæ–¹æ³•](https://devpress.csdn.net/v1/article/detail/147963138)\n\n[å½¬å½¬ä¾ çš„åšå®¢](https://blog.csdn.net/u013172930)\n\n05-14![Image 45](https://csdnimg.cn/release/blogv2/dist/pc/img/readCountWhite.png) 2158 \n\n[_langgraph_.graph._State_ Graph æ˜¯ _LangGraph_ çš„æ ¸å¿ƒç±»ï¼Œç”¨äº _å®šä¹‰_ åŸºäºçŠ¶æ€çš„å·¥ä½œæµå›¾ã€‚å…¶ä¸»è¦åŠŸèƒ½åŒ…æ‹¬ï¼šé€šè¿‡ add_node å’Œ add_edge æ„å»ºå›¾ç»“æ„ã€‚é€šè¿‡ add_conditional_edges å®ç°åŠ¨æ€åˆ†æ”¯ã€‚é€šè¿‡ set_entry_point å’Œ set_finish_point æŒ‡å®šæ‰§è¡Œè·¯å¾„ã€‚é€šè¿‡ compile ç”Ÿæˆå¯æ‰§è¡Œçš„ CompiledGraphã€‚](https://devpress.csdn.net/v1/article/detail/147963138)\n\n[_LangGraph_ ä¸­çš„ _State_ ç®¡ç†](https://blog.csdn.net/qq_41472205/article/details/144097203)\n\n[The cure for boredom is curiosity. This is the log of its adventures.](https://blog.csdn.net/qq_41472205)\n\n11-27![Image 46](https://csdnimg.cn/release/blogv2/dist/pc/img/readCountWhite.png) 3266 \n\n[_å®šä¹‰_ æ•´ä¸ªå›¾çš„çŠ¶æ€ï¼ˆè¿™æ˜¯åœ¨èŠ‚ç‚¹é—´å…±äº«çš„å…¬å…±çŠ¶æ€ï¼‰a: strreturn {"a": 123 # æ— æ•ˆ# _å®šä¹‰_ è¾“å…¥çŠ¶æ€çš„æ¶æ„# _å®šä¹‰_ è¾“å‡ºçŠ¶æ€çš„æ¶æ„# _å®šä¹‰_ æ•´ä½“æ¶æ„ï¼Œç»“åˆè¾“å…¥å’Œè¾“å‡ºpass# ç¤ºä¾‹ç­”æ¡ˆå’Œä¸€ä¸ªé¢å¤–çš„é”®# æ•´ä¸ªå›¾çš„çŠ¶æ€ï¼ˆè¿™æ˜¯åœ¨èŠ‚ç‚¹é—´å…±äº«çš„å…¬å…±çŠ¶æ€ï¼‰a: str# node_1çš„è¾“å‡ºåŒ…å«ç§æœ‰æ•°æ®ï¼Œä¸å±äºæ•´ä½“çŠ¶æ€ã€‚](https://blog.csdn.net/qq_41472205/article/details/144097203)\n\n[_LangGraph_ æ¡†æ¶ä¸­æ€æ · _å®šä¹‰_ å·¥å…·tools](https://blog.csdn.net/qq_41185191/article/details/147717846)\n\n[ai agentçŸ¥è¯†](https://blog.csdn.net/qq_41185191)\n\n05-05![Image 47](https://csdnimg.cn/release/blogv2/dist/pc/img/readCountWhite.png) 1446 \n\n[å·¥å…·æ˜¯ä¸€ç§å°è£…å‡½æ•°åŠå…¶è¾“å…¥ _æ¨¡å¼_ çš„æ–¹æ³•ï¼Œå¯ä»¥å°†å…¶ä¼ é€’ç»™æ”¯æŒå·¥å…·è°ƒç”¨çš„èŠå¤©æ¨¡å‹ã€‚è¿™ä½¿å¾—æ¨¡å‹èƒ½å¤Ÿé€šè¿‡ç‰¹å®šçš„è¾“å…¥è¯·æ±‚æ‰§è¡Œè¯¥å‡½æ•°ã€‚](https://blog.csdn.net/qq_41185191/article/details/147717846)\n\n[ã€_langgraph_ ç³»åˆ—-1---æ¦‚å¿µè¯¦è§£ã€‘ä»€ä¹ˆæ˜¯ _State_|Nodes|EdgesNode|Reducers](https://blog.csdn.net/weixin_45222582/article/details/143637608)\n\n[weixin_45222582çš„åšå®¢](https://blog.csdn.net/weixin_45222582)\n\n11-09![Image 48](https://csdnimg.cn/release/blogv2/dist/pc/img/readCountWhite.png) 971 \n\n[ã€ä»£ç ã€‘ã€_langgraph_ åè¯è¯¦ç»†è§£é‡Šã€‘ä»€ä¹ˆæ˜¯ _State_|Nodes|EdgesNode|_State_|Reducersã€‚](https://blog.csdn.net/weixin_45222582/article/details/143637608)\n\n[_LangGraph_ çˆ¶å­å›¾ _æ¨¡å¼_ è¯¦è§£](https://blog.csdn.net/Cheer_RIO/article/details/151192412)\n\n[Cheer_RIOçš„åšå®¢](https://blog.csdn.net/Cheer_RIO)\n\n09-04![Image 49](https://csdnimg.cn/release/blogv2/dist/pc/img/readCountWhite.png) 637 \n\n[_LangGraph_ çˆ¶å­å›¾ _æ¨¡å¼_ æ˜¯ä¸€ç§æ¨¡å—åŒ–æ¶æ„ï¼Œå…è®¸çˆ¶å›¾å’Œå­å›¾æ‹¥æœ‰ä¸åŒçš„çŠ¶æ€ç»“æ„ã€‚å…³é”®ç‚¹åŒ…æ‹¬ï¼š çŠ¶æ€éš”ç¦»ï¼šçˆ¶å›¾å’Œå­å›¾å„è‡ª _å®šä¹‰_ çŠ¶æ€ _æ¨¡å¼_ï¼ˆå¦‚Parent _State_ å’ŒSubgraphMessages _State_ï¼‰ èŠ‚ç‚¹è°ƒç”¨ï¼šçˆ¶å›¾ä¸­ä¸“é—¨èŠ‚ç‚¹ï¼ˆcall_subgraphï¼‰è´Ÿè´£ï¼š è½¬æ¢çˆ¶å›¾çŠ¶æ€ä¸ºå­å›¾æ ¼å¼ è°ƒç”¨å­å›¾å¤„ç† å°†å­å›¾è¾“å‡ºè½¬å›çˆ¶å›¾æ ¼å¼ æ ¸å¿ƒä¼˜åŠ¿ï¼š æ¨¡å—åŒ–è®¾è®¡ï¼Œå­å›¾å¯å¤ç”¨ çŠ¶æ€ç»“æ„è§£è€¦ æ”¯æŒå¤æ‚å¤„ç†æµç¨‹ å…¸å‹åº”ç”¨åœºæ™¯ï¼šå¤šä»£ç†ç³»ç»Ÿã€åˆ†é˜¶æ®µå·¥ä½œæµã€æ•°æ®å¤„ç†ç®¡é“ç­‰ è¯¥ _æ¨¡å¼_ é€šè¿‡çŠ¶æ€è½¬æ¢å®ç°çµæ´»é›†æˆï¼Œæ˜¯æ„å»ºå¤æ‚ _LangGraph_](https://blog.csdn.net/Cheer_RIO/article/details/151192412)\n\n[[_LangGraph_ æ•™ç¨‹]_LangGraph_ 05â€”â€”_LangGraph_ çŠ¶æ€ _æ¨¡å¼_ _State_ è¯¦è§£](https://blog.csdn.net/m0_69281817/article/details/147600438)\n\n[m0_69281817çš„åšå®¢](https://blog.csdn.net/m0_69281817)\n\n04-29![Image 50](https://csdnimg.cn/release/blogv2/dist/pc/img/readCountWhite.png) 2565 \n\n[åœ¨ _LangGraph_ æ¡†æ¶é‡Œï¼Œä¸ç®¡æ„å»ºçš„ä»£ç†æ˜¯ç®€å•è¿˜æ˜¯å¤æ‚ï¼Œå½’æ ¹ç»“åº•éƒ½æ˜¯å€ŸåŠ©èŠ‚ç‚¹ï¼ˆNodeï¼‰å’Œè¾¹ï¼ˆEdgeï¼‰æ¥æ„å»ºä¸€ä¸ªå®Œæ•´çš„å›¾ï¼ˆGraphï¼‰ã€‚ä½† _LangGraph_ çš„æ ¸å¿ƒä»æ¥ä¸åœ¨äºå¦‚ä½•å»ç•Œå®šèŠ‚ç‚¹ä¸è¾¹ï¼Œè€Œæ˜¯åœ¨äºã€‚_LangGraph_ çš„åº•å±‚å›¾ç®—æ³•ä¾æ‰˜æœºåˆ¶æ¥ _å®šä¹‰_ å’Œæ‰§è¡Œå›¾ä¸­çš„äº¤äº’æµç¨‹ï¼Œåœ¨è¿™ä¸€è¿‡ç¨‹ä¸­ï¼ŒçŠ¶æ€ï¼ˆ_State_ï¼‰ç»„ä»¶æ‹…å½“ç€å…³é”®çš„è½½ä½“è§’è‰²ï¼Œä¸»è¦è´Ÿè´£åœ¨å›¾çš„å„ä¸ªèŠ‚ç‚¹ä¹‹é—´ä¼ é€’ä¿¡æ¯ï¼Œåƒæ ¸å¿ƒåŠŸèƒ½ä¸­çš„å·¥å…·ä½¿ç”¨ã€è®°å¿†èƒ½åŠ›ä»¥åŠäººæœºäº¤äº’ç­‰ï¼Œéƒ½å¾—ä¾ä»— _State_ æ¥è¾¾æˆå¹¶åŠ ä»¥ç»´æŠ¤ã€‚](https://blog.csdn.net/m0_69281817/article/details/147600438)\n\n[ã€AIå¼€å‘ã€‘_LangGraph_ åŸºç¡€](https://blog.csdn.net/qq_44899247/article/details/139657152)\n\n[qq_44899247çš„åšå®¢](https://blog.csdn.net/qq_44899247)\n\n06-14![Image 51](https://csdnimg.cn/release/blogv2/dist/pc/img/readCountWhite.png) 3287 \n\n[åœ¨ _LangGraph_ ä¸­æœ‰ä¸‰ä¸ªé‡è¦å…ƒç´ ã€‚](https://blog.csdn.net/qq_44899247/article/details/139657152)\n\n[æ·±å…¥è§£æ _LangGraph_ æ ¸å¿ƒæŠ€æœ¯ï¼šçŠ¶æ€ï¼ˆ_State_ï¼‰](https://jigang.blog.csdn.net/article/details/152449616)\n\n[æ²¡äº‹å­¦AIçš„åšå®¢](https://blog.csdn.net/ZuanShi1111)\n\n10-04![Image 52](https://csdnimg.cn/release/blogv2/dist/pc/img/readCountWhite.png) 956 \n\n[æ‘˜è¦ï¼š _LangGraph_ æ¡†æ¶ä¸­çš„â€œçŠ¶æ€ï¼ˆ_State_ï¼‰â€æ˜¯å·¥ä½œæµçš„æ ¸å¿ƒæ•°æ®æ¢çº½ï¼Œæ‰¿æ‹…åŠ¨æ€è®°å¿†ã€æ•°æ®æµè½¬å’Œä¸€è‡´æ€§ä¿éšœçš„å…³é”®è§’è‰²ã€‚å…¶ç»“æ„åŒ–é”®å€¼å¯¹è®¾è®¡æ”¯æŒå¤šç§æ•°æ®ç±»å‹ï¼Œå¹¶é€šè¿‡é¢„ _å®šä¹‰_ ä¸è‡ª _å®šä¹‰_ å­—æ®µé€‚åº”ä¸åŒåœºæ™¯ã€‚çŠ¶æ€å…·å¤‡åŠ¨æ€æ›´æ–°ã€ç‰ˆæœ¬è¿½æº¯å’Œçµæ´»æ‰©å±•ä¸‰å¤§ç‰¹æ€§ï¼Œç¡®ä¿èŠ‚ç‚¹é—´æ•°æ®å®æ—¶åŒæ­¥ï¼Œæ”¯æŒå†å²çŠ¶æ€å›æº¯ï¼Œå¹¶èƒ½éšä¸šåŠ¡éœ€æ±‚æ‰©å±•å­—æ®µã€‚ç†è§£çŠ¶æ€çš„ _å®šä¹‰_ã€ç»“æ„ä¸ç®¡ç†æœºåˆ¶ï¼Œæ˜¯ä¼˜åŒ– _LangGraph_ å·¥ä½œæµè®¾è®¡ä¸æ•…éšœæ’æŸ¥çš„åŸºç¡€ã€‚](https://jigang.blog.csdn.net/article/details/152449616)\n\n[æ·±å…¥ç†è§£ _LangGraph_ï¼šæ™ºèƒ½ä½“å·¥ä½œæµçš„å›¾æ¨¡å‹è®¾è®¡ä¸å®è·µ](https://devpress.csdn.net/v1/article/detail/148798103)\n\n[ä½‘ç»çš„åšå®¢](https://blog.csdn.net/The_Thieves)\n\n06-20![Image 53](https://csdnimg.cn/release/blogv2/dist/pc/img/readCountWhite.png) 1611 \n\n[è¾¹æ˜¯æµç¨‹çš„ "å¯¼èˆªç³»ç»Ÿ"ï¼Œæ ¹æ®çŠ¶æ€å†³å®šä¸‹ä¸€ä¸ªæ‰§è¡Œçš„èŠ‚ç‚¹ï¼špythonè¿è¡Œ# æ ¹æ®å¤„ç†é˜¶æ®µé€‰æ‹©ä¸‹ä¸€ä¸ªèŠ‚ç‚¹else:è¾¹å¯ä»¥æ˜¯å›ºå®šè½¬ç§»æˆ–æ¡ä»¶åˆ†æ”¯ï¼Œå†³å®šäº†èŠ‚ç‚¹é—´çš„æ‰§è¡Œé¡ºåºã€‚æ ¸å¿ƒå…³ç³»æ€»ç»“ï¼šèŠ‚ç‚¹è´Ÿè´£å¤„ç†ä¸šåŠ¡é€»è¾‘ï¼Œè¾¹æ§åˆ¶æµç¨‹èµ°å‘ï¼ŒçŠ¶æ€åˆ™æ˜¯è´¯ç©¿å§‹ç»ˆçš„ä¿¡æ¯è½½ä½“ã€‚è¿™ç§è®¾è®¡è®©å¤æ‚å¾ªç¯æµç¨‹å˜å¾—å¯æ§ï¼Œå°±åƒç”¨ç”µè·¯å›¾è§„åˆ’ç”µæµè·¯å¾„ã€‚ä½¿ç”¨ Annotated ä¸ºå­—æ®µæŒ‡å®š Reducer å‡½æ•°ï¼Œä¾‹å¦‚åˆ—è¡¨è¿½åŠ ï¼špythonè¿è¡Œ# ä½¿ç”¨addå‡½æ•°å®ç°åˆ—è¡¨åˆå¹¶# åˆå§‹çŠ¶æ€ _state_ = {"logs": ["ç³»ç»Ÿå¯åŠ¨"]}](https://devpress.csdn.net/v1/article/detail/148798103)\n\n[LangChain æœ€è¿‘å‘å¸ƒçš„ä¸€ä¸ªé‡è¦åŠŸèƒ½ï¼š_LangGraph_](https://blog.csdn.net/2301_78285120/article/details/136028408)\n\n[2301_78285120çš„åšå®¢](https://blog.csdn.net/2301_78285120)\n\n02-04![Image 54](https://csdnimg.cn/release/blogv2/dist/pc/img/readCountWhite.png) 3599 \n\n[next: strã€‚](https://blog.csdn.net/2301_78285120/article/details/136028408)\n\n[_LangGraph_ï¼šæ„å»ºå¤æ‚æ™ºèƒ½ä½“åº”ç”¨çš„å…¨é¢æŒ‡å—](https://devpress.csdn.net/v1/article/detail/139862000)\n\n[å…¨ä¸–ç•Œçš„åšå®¢](https://blog.csdn.net/qq_40999403)\n\n06-21![Image 55](https://csdnimg.cn/release/blogv2/dist/pc/img/readCountWhite.png) 6790 \n\n[å›¾ï¼ˆGraphï¼‰æ˜¯ä¸€ç§æ•°æ®ç»“æ„ï¼Œç”±èŠ‚ç‚¹ï¼ˆNodeï¼‰å’Œè¾¹ï¼ˆEdgeï¼‰ç»„æˆã€‚èŠ‚ç‚¹è¡¨ç¤ºå®ä½“æˆ–å¯¹è±¡ï¼Œè¾¹è¡¨ç¤ºèŠ‚ç‚¹ä¹‹é—´çš„å…³ç³»ã€‚å›¾å¯ä»¥ç”¨äºè¡¨ç¤ºå¤æ‚çš„å…³ç³»å’Œæµç¨‹ï¼Œå¹¿æ³›åº”ç”¨äºè®¡ç®—æœºç§‘å­¦å’Œ _äººå·¥æ™ºèƒ½_ é¢†åŸŸã€‚åœ¨ _LangGraph_ ä¸­ï¼Œå›¾è¢«ç”¨äºè¡¨ç¤ºå’Œæ„å»ºå¤æ‚çš„æ™ºèƒ½ä½“åº”ç”¨ã€‚æ¯ä¸ªèŠ‚ç‚¹ä»£è¡¨ä¸€ä¸ªæ“ä½œæˆ–æ­¥éª¤ï¼Œè¾¹è¡¨ç¤ºèŠ‚ç‚¹ä¹‹é—´çš„ä¾èµ–å…³ç³»ã€‚é€šè¿‡ _å®šä¹‰_ èŠ‚ç‚¹å’Œè¾¹ï¼Œå¼€å‘è€…å¯ä»¥æ„å»ºå¤æ‚çš„æµç¨‹å’Œé€»è¾‘ã€‚# _å®šä¹‰_ ä¸€ä¸ªå›¾# æ·»åŠ èŠ‚ç‚¹# æ·»åŠ è¾¹# è¿è¡Œå›¾åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ _å®šä¹‰_ äº†ä¸€ä¸ªç®€å•çš„å›¾ï¼Œå®ƒåŒ…å«ä¸‰ä¸ªèŠ‚ç‚¹å’Œä¸¤æ¡è¾¹ã€‚](https://devpress.csdn.net/v1/article/detail/139862000)\n\n[ã€LLM _å¤§æ¨¡å‹_ã€‘LangChainæ¡†æ¶ï¼š_Agent_ ä¹‹ _LangGraph_ çš„ä½¿ç”¨](https://devpress.csdn.net/v1/article/detail/140799030)\n\n[DEVELOPERAAçš„åšå®¢](https://blog.csdn.net/DEVELOPERAA)\n\n07-30![Image 56](https://csdnimg.cn/release/blogv2/dist/pc/img/readCountWhite.png) 3402 \n\n[LangChainçš„æ ¸å¿ƒä¼˜åŠ¿åœ¨äºå…¶èƒ½å¤Ÿè½»æ¾æ„å»ºè‡ª _å®šä¹‰_ é“¾ï¼Œè¿™äº›é“¾é€šå¸¸æ˜¯çº¿æ€§çš„ï¼Œç±»ä¼¼äºæœ‰å‘æ— ç¯å›¾ï¼ˆDAGï¼‰ï¼Œæ¯ä¸ªæ­¥éª¤éƒ½ä¸¥æ ¼æŒ‰é¡ºåºæ‰§è¡Œï¼Œæ¯ä¸ªä»»åŠ¡åªæœ‰ä¸€ä¸ªè¾“å‡ºå’Œä¸€ä¸ªåç»­ä»»åŠ¡ï¼Œå½¢æˆä¸€ä¸ªæ²¡æœ‰å¾ªç¯çš„çº¿æ€§æµç¨‹ã€‚](https://devpress.csdn.net/v1/article/detail/140799030)\n\n[_langGraph_ _state_ æ„å»º](https://wenku.csdn.net/answer/6jxfhfex3v)\n\n08-27\n\n[<think>æˆ‘ä»¬æ­£åœ¨è®¨è®ºå¦‚ä½•æ„å»º _LangGraph_ çš„çŠ¶æ€ã€‚æ ¹æ®å¼•ç”¨å†…å®¹ï¼Œ_LangGraph_ ç”¨äºæ„å»ºæœ‰çŠ¶æ€çš„å¤šæ™ºèƒ½ä½“åº”ç”¨ç¨‹åºï¼Œå…¶æ ¸å¿ƒæ¦‚å¿µä¹‹ä¸€æ˜¯çŠ¶æ€å›¾(_State_ Graph)ã€‚çŠ¶æ€å›¾éœ€è¦ _å®šä¹‰_ ä¸€ä¸ªçŠ¶æ€å¯¹è±¡ï¼Œè¯¥å¯¹è±¡ä¼šåœ¨å›¾çš„å„ä¸ªèŠ‚ç‚¹ä¹‹é—´ä¼ é€’å’Œæ›´æ–°ã€‚ åœ¨ _LangGraph_ ä¸­ï¼Œæ„å»ºçŠ¶æ€é€šå¸¸æ¶‰åŠä»¥ä¸‹æ­¥éª¤ï¼š 1. _å®šä¹‰_ çŠ¶æ€ _æ¨¡å¼_ï¼ˆ_State_ Schemaï¼‰ï¼šä¸€ä¸ªè‡ª _å®šä¹‰_ çš„ç±»ï¼Œç”¨äºæè¿°çŠ¶æ€ä¸­åŒ…å«å“ªäº›å­—æ®µã€‚æ¯ä¸ªå­—æ®µè¡¨ç¤ºæ™ºèƒ½ä½“å·¥ä½œæµä¸­çš„ä¸€éƒ¨åˆ†æ•°æ®ã€‚ 2. åˆå§‹åŒ–çŠ¶æ€å›¾ï¼šä½¿ç”¨ _å®šä¹‰_ çš„çŠ¶æ€ _æ¨¡å¼_ åˆ›å»ºä¸€ä¸ª _State_ Graphå®ä¾‹ã€‚ 3. æ·»åŠ èŠ‚ç‚¹ï¼šèŠ‚ç‚¹æ˜¯å¤„ç†çŠ¶æ€çš„å‡½æ•°ï¼Œæ¯ä¸ªèŠ‚ç‚¹å¯ä»¥è¯»å–å’Œä¿®æ”¹çŠ¶æ€ä¸­çš„ç‰¹å®šå­—æ®µã€‚ 4. _å®šä¹‰_ è¾¹ï¼šåŒ…æ‹¬æ¡ä»¶è¾¹ï¼ˆconditional edgesï¼‰å’Œæ™®é€šè¾¹ï¼Œç”¨äºæ§åˆ¶æµç¨‹çš„èµ°å‘ã€‚ ä¸‹é¢æˆ‘ä»¬è¯¦ç»†è¯´æ˜å¦‚ä½•æ„å»ºçŠ¶æ€ã€‚ ### 1. _å®šä¹‰_ çŠ¶æ€ _æ¨¡å¼_ çŠ¶æ€ _æ¨¡å¼_ æ˜¯ä¸€ä¸ªç±»ï¼Œé€šå¸¸ä½¿ç”¨`TypedDict`æˆ–æ™®é€šçš„ç±»ï¼ˆä½†éœ€è¦ç»§æ‰¿è‡ª`typing.TypedDict`ï¼‰æ¥ _å®šä¹‰_ã€‚åœ¨ _LangGraph_ ä¸­ï¼ŒçŠ¶æ€æ˜¯ä¸€ä¸ªå­—å…¸èˆ¬çš„å¯¹è±¡ï¼Œå…¶é”®æ˜¯å­—ç¬¦ä¸²ï¼Œå€¼å¯ä»¥æ˜¯ä»»æ„ç±»å‹ï¼Œä½†é€šå¸¸æˆ‘ä»¬ä¼šæ˜ç¡®æŒ‡å®šæ¯ä¸ªå­—æ®µçš„ç±»å‹ã€‚ ä¾‹å¦‚ï¼Œå‡è®¾æˆ‘ä»¬æ­£åœ¨æ„å»ºä¸€ä¸ªç®€å•çš„èŠå¤©æœºå™¨äººï¼ŒçŠ¶æ€å¯èƒ½åŒ…å«ç”¨æˆ·è¾“å…¥å’ŒèŠå¤©å†å²ã€‚æˆ‘ä»¬å¯ä»¥è¿™æ · _å®šä¹‰_ çŠ¶æ€ï¼š ```python from typing import TypedDict, List, Annotated from _langgraph_.graph.message import add_messages class _State_(TypedDict): user_input: str chat_history: Annotated[List[str], add_messages] ``` æ³¨æ„ï¼šè¿™é‡Œä½¿ç”¨äº†`Annotated`ç±»å‹ï¼Œè¿™æ˜¯ä¸ºäº†åœ¨çŠ¶æ€æ›´æ–°æ—¶ä½¿ç”¨ç‰¹å®šçš„æ›´æ–°ç­–ç•¥ã€‚`add_messages`æ˜¯ _LangGraph_ æä¾›çš„ä¸€ç§æ›´æ–°ç­–ç•¥ï¼Œç”¨äºåœ¨åˆ—è¡¨ä¸­è¿½åŠ æ¶ˆæ¯ï¼ˆè€Œä¸æ˜¯è¦†ç›–ï¼‰ã€‚_LangGraph_ æ”¯æŒå¤šç§æ›´æ–°ç­–ç•¥ï¼Œå¦‚è¦†ç›–ã€è¿½åŠ ç­‰ã€‚ ### 2. åˆå§‹åŒ–çŠ¶æ€å›¾ åˆ›å»ºçŠ¶æ€å›¾å®ä¾‹ï¼Œå¹¶ä¼ å…¥çŠ¶æ€ç±»ä½œä¸ºå‚æ•°ï¼š ```python from _langgraph_.graph import _State_ Graph graph = _State_ Graph(_State_) ``` ### 3. æ·»åŠ èŠ‚ç‚¹ èŠ‚ç‚¹æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒæ¥æ”¶å½“å‰çŠ¶æ€ï¼ˆä¸€ä¸ªå­—å…¸ï¼ŒåŒ…å«çŠ¶æ€ _æ¨¡å¼_ ä¸­ _å®šä¹‰_ çš„å­—æ®µï¼‰ä½œä¸ºè¾“å…¥ï¼Œå¹¶è¿”å›ä¸€ä¸ªåŒ…å«æ›´æ–°åçŠ¶æ€å­—æ®µçš„å­—å…¸ï¼ˆæˆ–ç›´æ¥è¿”å›æ›´æ–°åçš„çŠ¶æ€å¯¹è±¡ï¼‰ã€‚è¿™ä¸ªè¿”å›çš„å­—å…¸å°†ç”¨äºæ›´æ–°æ•´ä¸ªçŠ¶æ€ï¼ˆæ ¹æ®æ›´æ–°ç­–ç•¥ï¼‰ã€‚ ä¾‹å¦‚ï¼Œæˆ‘ä»¬æ·»åŠ ä¸€ä¸ªèŠ‚ç‚¹æ¥å¤„ç†ç”¨æˆ·è¾“å…¥ï¼š ```python def process_input(_state_: _State_) -> dict: # è¿™é‡Œå¯ä»¥å¤„ç†ç”¨æˆ·è¾“å…¥ï¼Œä¾‹å¦‚è°ƒç”¨LLMç­‰ processed = _state_[\'user_input\'].upper() # ç®€å•ç¤ºä¾‹ï¼šå°†è¾“å…¥è½¬ä¸ºå¤§å†™ return {\'processed_input\': processed} # æ³¨æ„ï¼šè¿™é‡Œè¿”å›çš„å­—æ®µéœ€è¦ä¸çŠ¶æ€ _æ¨¡å¼_ åŒ¹é…ï¼Ÿä½†æ³¨æ„ï¼Œæˆ‘ä»¬ _å®šä¹‰_ çš„çŠ¶æ€ _æ¨¡å¼_ ä¸­å¹¶æ²¡æœ‰\'processed_input\'ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦è°ƒæ•´çŠ¶æ€ _æ¨¡å¼_ æˆ–èŠ‚ç‚¹è¡Œä¸ºã€‚ # è°ƒæ•´çŠ¶æ€ _æ¨¡å¼_ï¼šå¦‚æœæˆ‘ä»¬å¸Œæœ›çŠ¶æ€ä¸­åŒ…å«å¤„ç†åçš„è¾“å…¥ï¼Œæˆ‘ä»¬éœ€è¦åœ¨çŠ¶æ€ _æ¨¡å¼_ ä¸­å¢åŠ å­—æ®µã€‚ ``` å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦é‡æ–°è€ƒè™‘çŠ¶æ€ _æ¨¡å¼_ çš„è®¾è®¡ã€‚é€šå¸¸ï¼ŒçŠ¶æ€ _æ¨¡å¼_ åº”è¯¥åŒ…å«å·¥ä½œæµä¸­æ‰€æœ‰èŠ‚ç‚¹å¯èƒ½è¯»å†™çš„æ•°æ®ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬ä¿®æ”¹çŠ¶æ€ _æ¨¡å¼_ï¼š ```python class _State_(TypedDict): user_input: str chat_history: Annotated[List[str], add_messages] processed_input: str # æ–°å¢å­—æ®µ ``` ç„¶åè°ƒæ•´èŠ‚ç‚¹å‡½æ•°ï¼š ```python def process_input(_state_: _State_) -> dict: processed = _state_[\'user_input\'].upper() return {\'processed_input\': processed} # è¿”å›è¦æ›´æ–°çš„å­—æ®µ ``` ç„¶åå°†èŠ‚ç‚¹æ·»åŠ åˆ°å›¾ä¸­ï¼š ```python graph.add_node("process_input", process_input) ``` ### 4. _å®šä¹‰_ è¾¹ æˆ‘ä»¬éœ€è¦è®¾ç½®èµ·å§‹èŠ‚ç‚¹å’Œè¾¹ï¼Œä»¥åŠæ¡ä»¶è¾¹ï¼ˆå¦‚æœéœ€è¦å¾ªç¯ï¼‰ã€‚ä¾‹å¦‚ï¼š ```python graph.set_entry_point("process_input") # è®¾ç½®å…¥å£èŠ‚ç‚¹ graph.set_finish_point("process_input") # å¦‚æœåªæœ‰ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå¯ä»¥ç›´æ¥è®¾ç½®ä¸ºç»“æŸç‚¹ # å¦‚æœæœ‰å¤šä¸ªèŠ‚ç‚¹ï¼Œæˆ‘ä»¬éœ€è¦æ·»åŠ è¾¹æ¥è¿æ¥å®ƒä»¬ï¼Œä¾‹å¦‚ï¼š # graph.add_edge(\'node1\', \'node2\') ``` ### 5. ç¼–è¯‘å›¾ æœ€åï¼Œç¼–è¯‘å›¾ä»¥åˆ›å»ºå¯æ‰§è¡Œçš„å·¥ä½œæµï¼š ```python app = graph.compile() ``` ### 6. æ‰§è¡Œå›¾ ä½¿ç”¨åˆå§‹çŠ¶æ€è°ƒç”¨å›¾ï¼š ```python initial_ _state_ = _State_(user_input="hello", chat_history=[], processed_input="") result = app.invoke(initial_ _state_) ``` ### æ³¨æ„äº‹é¡¹ - çŠ¶æ€æ›´æ–°ç­–ç•¥ï¼šåœ¨ _å®šä¹‰_ çŠ¶æ€å­—æ®µæ—¶ï¼Œä½¿ç”¨`Annotated`å¯ä»¥æŒ‡å®šæ›´æ–°ç­–ç•¥ã€‚ä¾‹å¦‚ï¼Œ`add_messages`è¡¨ç¤ºè¿½åŠ æ¶ˆæ¯ï¼Œè€Œé»˜è®¤ç­–ç•¥æ˜¯è¦†ç›–ï¼ˆå¦‚æœä¸ç”¨`Annotated`ï¼Œåˆ™ç›´æ¥è¦†ç›–ï¼‰ã€‚ - èŠ‚ç‚¹å‡½æ•°è¿”å›çš„å­—å…¸ä¸­çš„æ¯ä¸ªé”®å¿…é¡»ä¸çŠ¶æ€ _æ¨¡å¼_ ä¸­çš„æŸä¸ªå­—æ®µåå¯¹åº”ï¼Œå¹¶ä¸”å€¼ç±»å‹è¦åŒ¹é…ã€‚è¿”å›çš„å­—å…¸ä¸­åªéœ€è¦åŒ…å«éœ€è¦æ›´æ–°çš„å­—æ®µï¼Œä¸éœ€è¦è¿”å›æ•´ä¸ªçŠ¶æ€ã€‚ ### ç¤ºä¾‹ï¼šå¸¦æ¡ä»¶è¾¹çš„å¾ªç¯ å‡è®¾æˆ‘ä»¬æƒ³è®©æ™ºèƒ½ä½“åœ¨æ»¡è¶³æ¡ä»¶æ—¶å¾ªç¯æ‰§è¡Œã€‚æˆ‘ä»¬å¯ä»¥æ·»åŠ ä¸€ä¸ªæ¡ä»¶è¾¹ã€‚ é¦–å…ˆï¼Œ_å®šä¹‰_ ä¸¤ä¸ªèŠ‚ç‚¹ï¼šä¸€ä¸ªå¤„ç†èŠ‚ç‚¹ï¼Œä¸€ä¸ªåˆ¤æ–­æ˜¯å¦ç»“æŸçš„èŠ‚ç‚¹ã€‚ ```python def should_continue(_state_: _State_) -> str: # æ ¹æ®çŠ¶æ€åˆ¤æ–­æ˜¯å¦ç»§ç»­ if _state_[\'processed_input\'] == "QUIT": return "end" else: return "continue" def process_node(_state_: _State_) -> dict: # è¿™é‡Œæ¨¡æ‹Ÿå¤„ç†ï¼Œæ¯æ¬¡å°†processed_inputåŠ ä¸Šä¸€ä¸ªæ„Ÿå¹å·ï¼Œç›´åˆ°é‡åˆ°QUIT new_processed = _state_[\'processed_input\'] + "!" return {\'processed_input\': new_processed} # æ·»åŠ èŠ‚ç‚¹ graph.add_node("process", process_node) graph.add_node("check_end", should_continue) # æ³¨æ„ï¼šè¿™ä¸ªèŠ‚ç‚¹å®é™…ä¸Šæ˜¯ä¸€ä¸ªæ¡ä»¶å‡½æ•°ï¼Œä½†ä¹Ÿå¯ä»¥ä½œä¸ºèŠ‚ç‚¹æ·»åŠ  # è®¾ç½®å…¥å£ graph.set_entry_point("process") # æ·»åŠ è¾¹ï¼šä»processåˆ°check_end graph.add_edge("process", "check_end") # æ·»åŠ æ¡ä»¶è¾¹ï¼šæ ¹æ®check_endèŠ‚ç‚¹çš„è¿”å›å€¼å†³å®šä¸‹ä¸€æ­¥ graph.add_conditional_edges( "check_end", should_continue, # è¿™ä¸ªå‡½æ•°è¿”å›å­—ç¬¦ä¸²ï¼Œè¡¨ç¤ºä¸‹ä¸€ä¸ªèŠ‚ç‚¹æˆ–ç»“æŸ { "continue": "process", # å¦‚æœè¿”å›"continue"ï¼Œåˆ™å›åˆ°processèŠ‚ç‚¹ "end": END # ç»“æŸ } ) ``` æ³¨æ„ï¼šæ¡ä»¶è¾¹å‡½æ•°ï¼ˆ`should_continue`ï¼‰çš„è¿”å›å€¼æ˜¯å­—ç¬¦ä¸²ï¼Œè¿™äº›å­—ç¬¦ä¸²æ˜ å°„åˆ°ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„åç§°æˆ–`END`ï¼ˆè¡¨ç¤ºç»“æŸï¼‰ã€‚ ### æ€»ç»“ æ„å»º _LangGraph_ çŠ¶æ€çš„å…³é”®æ­¥éª¤ï¼š 1. è®¾è®¡çŠ¶æ€ _æ¨¡å¼_ï¼ˆTypedDictï¼‰ï¼ŒåŒ…å«æ‰€æœ‰éœ€è¦ä¼ é€’çš„æ•°æ®å­—æ®µã€‚ 2. åˆ›å»ºçŠ¶æ€å›¾å®ä¾‹ã€‚ 3. æ·»åŠ èŠ‚ç‚¹ï¼ˆå¤„ç†å‡½æ•°ï¼‰ï¼Œæ¯ä¸ªèŠ‚ç‚¹è´Ÿè´£æ›´æ–°çŠ¶æ€çš„ä¸€éƒ¨åˆ†ã€‚ 4. è®¾ç½®è¾¹ï¼ˆåŒ…æ‹¬æ¡ä»¶è¾¹ï¼‰ä»¥æ§åˆ¶æµç¨‹ã€‚ 5. ç¼–è¯‘å¹¶æ‰§è¡Œã€‚ ä»¥ä¸Šæ­¥éª¤å¯ä»¥å¸®åŠ©ä½ æ„å»º _LangGraph_ çš„çŠ¶æ€å›¾ã€‚ Â§Â§ç›¸å…³é—®é¢˜Â§Â§ 1. _LangGraph_ çŠ¶æ€ _æ¨¡å¼_ ä¸­å¦‚ä½• _å®šä¹‰_ å­—æ®µçš„æ›´æ–°ç­–ç•¥ï¼Ÿ 2. åœ¨ _LangGraph_ ä¸­ï¼Œå¦‚ä½•å®ç°å¤šä¸ªæ™ºèƒ½ä½“ä¹‹é—´çš„çŠ¶æ€å…±äº«ï¼Ÿ 3. _LangGraph_ çš„çŠ¶æ€å›¾ä¸ä¼ ç»Ÿçš„æœ‰é™çŠ¶æ€æœº(FSM)æœ‰ä½•åŒºåˆ«ï¼Ÿ 4. åœ¨ _LangGraph_ ä¸­ï¼Œå¦‚ä½•å¤„ç†çŠ¶æ€æ›´æ–°æ—¶çš„å¹¶å‘å†²çªï¼Ÿ</think>### _LangGraph_ çŠ¶æ€æ„å»ºæŒ‡å— åœ¨ _LangGraph_ ä¸­æ„å»ºçŠ¶æ€æ˜¯å®ç°æœ‰çŠ¶æ€å¤šæ™ºèƒ½ä½“ç³»ç»Ÿçš„æ ¸å¿ƒï¼Œä»¥ä¸‹æ˜¯æ„å»ºæ­¥éª¤å’Œå…³é”®æ¦‚å¿µï¼š #### 1. **_å®šä¹‰_ çŠ¶æ€ _æ¨¡å¼_ï¼ˆ_State_ Schemaï¼‰** çŠ¶æ€ _æ¨¡å¼_ æ˜¯ä¸€ä¸ªè‡ª _å®šä¹‰_ ç±»ï¼Œç”¨äºæè¿°æ™ºèƒ½ä½“å·¥ä½œæµä¸­çš„æ•°æ®ç»“æ„å’Œç±»å‹ï¼š ```python from typing import TypedDict, Annotated, Sequence from _langgraph_.graph.message import add_messages class _Agent_ _State_(TypedDict): user_query: str _agent_ _response: Annotated[str, lambda x, y: y] # è¦†ç›–å¼æ›´æ–° chat_history: Annotated[Sequence[str], add_messages] # è¿½åŠ å¼æ›´æ–° tools_used: list ``` **å…³é”®ç‰¹æ€§**ï¼š - **å­—æ®µç±»å‹å£°æ˜**ï¼šæ¯ä¸ªå­—æ®µ _å®šä¹‰_ æ•°æ®ç±»å‹ï¼ˆå¦‚`str`, `list`ç­‰ï¼‰ - **æ›´æ–°ç­–ç•¥**ï¼ˆé€šè¿‡`Annotated`æŒ‡å®šï¼‰ï¼š - `add_messages`ï¼šè¿½åŠ æ•°æ®ï¼ˆé€‚åˆèŠå¤©å†å²ï¼‰ - `lambda x, y: y`ï¼šè¦†ç›–æ›´æ–°ï¼ˆé€‚åˆæœ€æ–°ç»“æœï¼‰ - **çŠ¶æ€æŒä¹…åŒ–**ï¼šçŠ¶æ€ä¼šåœ¨èŠ‚ç‚¹é—´è‡ªåŠ¨ä¼ é€’å’Œæ›´æ–°[^1] #### 2. **åˆå§‹åŒ–çŠ¶æ€å›¾** ```python from _langgraph_.graph import _State_ Graph # åˆ›å»ºçŠ¶æ€å›¾å®ä¾‹ graph = _State_ Graph(_Agent_ _State_) # æ·»åŠ èŠ‚ç‚¹ï¼ˆæ™ºèƒ½ä½“åŠŸèƒ½å•å…ƒï¼‰ graph.add_node("query_analyzer", analyze_query) graph.add_node("tool_executor", execute_tools) graph.add_node("response_generator", generate_response) # è®¾ç½®èŠ‚ç‚¹å…³ç³» graph.add_edge("query_analyzer", "tool_executor") graph.add_edge("tool_executor", "response_generator") graph.set_finish_point("response_generator") # ç¼–è¯‘å¯æ‰§è¡Œå›¾ app = graph.compile() ``` #### 3. **èŠ‚ç‚¹å‡½æ•°è®¾è®¡** æ¯ä¸ªèŠ‚ç‚¹æ¥æ”¶å½“å‰çŠ¶æ€ï¼Œè¿”å›çŠ¶æ€æ›´æ–°ï¼š ```python def execute_tools(_state_: _Agent_ _State_) -> dict: """å·¥å…·æ‰§è¡ŒèŠ‚ç‚¹ç¤ºä¾‹""" tools = select_tools(_state_["user_query"]) results = [tool.run() for tool in tools] return { "tools_used": tools, # æ›´æ–°å·¥å…·åˆ—è¡¨ "_agent_ _response": results[0] # æ›´æ–°æœ€æ–°ç»“æœ } ``` #### 4. **æ‰§è¡ŒçŠ¶æ€å·¥ä½œæµ** ```python # åˆå§‹åŒ–çŠ¶æ€ initial_ _state_ = _Agent_ _State_( user_query="å¦‚ä½•è®¡ç®—GDPï¼Ÿ", _agent_ _response="", chat_history=[], tools_used=[] ) # æ‰§è¡Œå·¥ä½œæµ final_ _state_ = app.invoke(initial_ _state_) print(final_ _state_["_agent_ _response"]) ``` #### 5. **é«˜çº§åŠŸèƒ½** - **æ¡ä»¶åˆ†æ”¯**ï¼šä½¿ç”¨`add_conditional_edges`å®ç°åŠ¨æ€è·¯ç”± ```python graph.add_conditional_edges( "query_analyzer", decide_next_node, # è¿”å›"tool_executor"æˆ–"response_generator" {"need_tools": "tool_executor", "direct_answer": "response_generator"} ) ``` - **å¾ªç¯æ§åˆ¶**ï¼šé€šè¿‡`add_edge`åˆ›å»ºå¾ªç¯å®ç°å¤šè½®äº¤äº’ - **å¤šæ™ºèƒ½ä½“åä½œ**ï¼šä¸åŒèŠ‚ç‚¹å¯å¯¹åº”ä¸åŒæ™ºèƒ½ä½“ï¼Œå…±äº«çŠ¶æ€å¯¹è±¡ #### æœ€ä½³å®è·µ 1. **çŠ¶æ€æœ€å°åŒ–**ï¼šåªå­˜å‚¨å¿…è¦æ•°æ®ï¼Œé¿å…è¿‡åº¦å¤æ‚çš„çŠ¶æ€ç»“æ„ 2. **æ›´æ–°ç­–ç•¥**ï¼šæ ¹æ®å­—æ®µç‰¹æ€§é€‰æ‹©è¿½åŠ ï¼ˆå†å²æ•°æ®ï¼‰æˆ–è¦†ç›–ï¼ˆæœ€æ–°ç»“æœï¼‰ 3. **é”™è¯¯å¤„ç†**ï¼šåœ¨èŠ‚ç‚¹ä¸­æ·»åŠ çŠ¶æ€å›æ»šæœºåˆ¶ 4. **çŠ¶æ€å¿«ç…§**ï¼šå®šæœŸæŒä¹…åŒ–çŠ¶æ€ï¼Œæ”¯æŒæ–­ç‚¹ç»­è·‘ > ç¤ºä¾‹åº”ç”¨åœºæ™¯ï¼šå®¢æˆ·æœåŠ¡ç³»ç»Ÿå¯åŒ…å«`é—®é¢˜åˆ†ç±»`â†’`æ•°æ®åº“æŸ¥è¯¢`â†’`ç»“æœç”Ÿæˆ`ä¸‰ä¸ªèŠ‚ç‚¹ï¼ŒçŠ¶æ€å¯¹è±¡ä¼ é€’ç”¨æˆ·é—®é¢˜ã€æŸ¥è¯¢ç»“æœã€å›å¤å†…å®¹ç­‰æ•°æ®[^1]ã€‚](https://wenku.csdn.net/answer/6jxfhfex3v)\n\n*   [å…³äºæˆ‘ä»¬](https://www.csdn.net/company/index.html#about)\n*   [æ‹›è´¤çº³å£«](https://www.csdn.net/company/index.html#recruit)\n*   [å•†åŠ¡åˆä½œ](https://fsc-p05.txscrm.com/T8PN8SFII7W)\n*   [å¯»æ±‚æŠ¥é“](https://marketing.csdn.net/questions/Q2202181748074189855)\n*   ![Image 57](https://g.csdnimg.cn/common/csdn-footer/images/tel.png)400-660-0108\n*   ![Image 58](https://g.csdnimg.cn/common/csdn-footer/images/email.png)[kefu@csdn.net](mailto:webmaster@csdn.net)\n*   ![Image 59](https://g.csdnimg.cn/common/csdn-footer/images/cs.png)[åœ¨çº¿å®¢æœ](https://csdn.s2.udesk.cn/im_client/?web_plugin_id=29181)\n*    å·¥ä½œæ—¶é—´ 8:30-22:00 \n\n*   ![Image 60](https://g.csdnimg.cn/common/csdn-footer/images/badge.png)[å…¬å®‰å¤‡æ¡ˆå·11010502030143](http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=11010502030143)\n*   [äº¬ICPå¤‡19004658å·](http://beian.miit.gov.cn/publish/query/indexFirst.action)\n*   [äº¬ç½‘æ–‡ã€”2020ã€•1039-165å·](https://csdnimg.cn/release/live_fe/culture_license.png)\n*   [ç»è¥æ€§ç½‘ç«™å¤‡æ¡ˆä¿¡æ¯](https://csdnimg.cn/cdn/content-toolbar/csdn-ICP.png)\n*   [åŒ—äº¬äº’è”ç½‘è¿æ³•å’Œä¸è‰¯ä¿¡æ¯ä¸¾æŠ¥ä¸­å¿ƒ](http://www.bjjubao.org/)\n*   [å®¶é•¿ç›‘æŠ¤](https://download.csdn.net/tutelage/home)\n*   [ç½‘ç»œ110æŠ¥è­¦æœåŠ¡](https://cyberpolice.mps.gov.cn/)\n*   [ä¸­å›½äº’è”ç½‘ä¸¾æŠ¥ä¸­å¿ƒ](http://www.12377.cn/)\n*   [Chromeå•†åº—ä¸‹è½½](https://chrome.google.com/webstore/detail/csdn%E5%BC%80%E5%8F%91%E8%80%85%E5%8A%A9%E6%89%8B/kfkdboecolemdjodhmhmcibjocfopejo?hl=zh-CN)\n*   [è´¦å·ç®¡ç†è§„èŒƒ](https://blog.csdn.net/blogdevteam/article/details/126135357)\n*   [ç‰ˆæƒä¸å…è´£å£°æ˜](https://www.csdn.net/company/index.html#statement)\n*   [ç‰ˆæƒç”³è¯‰](https://blog.csdn.net/blogdevteam/article/details/90369522)\n*   [å‡ºç‰ˆç‰©è®¸å¯è¯](https://img-home.csdnimg.cn/images/20250103023206.png)\n*   [è¥ä¸šæ‰§ç…§](https://img-home.csdnimg.cn/images/20250103023201.png)\n*   Â©1999-2026åŒ—äº¬åˆ›æ–°ä¹çŸ¥ç½‘ç»œæŠ€æœ¯æœ‰é™å…¬å¸\n\n[![Image 61](https://profile-avatar.csdnimg.cn/12627a5b12dd4935a293f4608c5806d4_qq_43588095.jpg!1)](https://blog.csdn.net/qq_43588095)\n\n[ä¸Šæœ‰æ™¨å…‰](https://blog.csdn.net/qq_43588095 "ä¸Šæœ‰æ™¨å…‰")\n\nåšå®¢ç­‰çº§ ![Image 62](https://csdnimg.cn/identity/blog5.png)\n\nç é¾„7å¹´\n\n[91 åŸåˆ›](https://blog.csdn.net/qq_43588095)1604 ç‚¹èµ 1588 æ”¶è— 5330 ç²‰ä¸\n\n[å…³æ³¨](https://blog.csdn.net/qq_43588095/article/details/147479946)\n\n[ç§ä¿¡](https://im.csdn.net/chat/qq_43588095)\n\n[![Image 63](https://i-operation.csdnimg.cn/images/d5d144f1d1904560adf54c48ec13c5b4.png)](https://ai.csdn.net/workbench/wallet?utm_source=xtai_slb_bloglb)\n\n[](https://wwads.cn/click/bait)[![Image 64: ä¸‡ç»´å¹¿å‘Šè”ç›Ÿ](https://cdn.wwads.cn/creatives/ocZcBmiI9GrrBWWbGauozCvDuNbfUf79yINPx1AP.jpg)](https://wwads.cn/click/bundle?code=OjwIpJp7uaB2SfOUMJIHqtYLJzicsH)\n\n[å…éƒ¨ç½²\\è¿ç»´\\è´¦å·\\æ”¯ä»˜ç³»ç»Ÿå¼€å‘ï¼Œè®©ä½ ç”¨Cursoråˆ¶ä½œå¯æ”¶è´¹çš„AIæ™ºèƒ½ä½“ï¼](https://wwads.cn/click/bundle?code=OjwIpJp7uaB2SfOUMJIHqtYLJzicsH)[![Image 65](https://blog.csdn.net/qq_43588095/article/details/147479946)å¹¿å‘Š](https://wwads.cn/?utm_source=property-175&utm_medium=footer "ç‚¹å‡»äº†è§£ä¸‡ç»´å¹¿å‘Šè”ç›Ÿ")\n\n[](https://blog.csdn.net/qq_43588095/article/details/147479946 "éšè—å¹¿å‘Š")\n\n![Image 66](https://kunyu.csdn.net/1.png?p=56&adId=1071043&adBlockFlag=0&a=1071043&c=0&k=LangGraph%E4%B8%ADState%E7%9A%84%E5%AE%9A%E4%B9%89%E6%A8%A1%E5%BC%8F&spm=1001.2101.3001.5000&articleId=147479946&d=1&t=3&u=a5d2e34815a24cb4879456c525bd7633)\n\n### çƒ­é—¨æ–‡ç« \n\n*   [DeepSeek æ¨¡å‹å¯¹æ¯”ï¼ˆR1 vs V3 vs V3-0324ï¼‰ ![Image 67](https://csdnimg.cn/release/blogv2/dist/pc/img/readCountWhite.png)7257](https://blog.csdn.net/qq_43588095/article/details/146748702)\n*   [LLaMA - Factoryå®‰è£…éƒ¨ç½²åŠå¾®è°ƒæµç¨‹ ![Image 68](https://csdnimg.cn/release/blogv2/dist/pc/img/readCountWhite.png)4255](https://blog.csdn.net/qq_43588095/article/details/146547831)\n*   [LLamaFactoryåç«¯PPOå¾®è°ƒå®æ“ ![Image 69](https://csdnimg.cn/release/blogv2/dist/pc/img/readCountWhite.png)3995](https://blog.csdn.net/qq_43588095/article/details/146604113)\n*   [LLaMA-Factory æ¨¡å‹å¾®è°ƒæŒ‡ä»¤å‚æ•°è¯¦è§£ ![Image 70](https://csdnimg.cn/release/blogv2/dist/pc/img/readCountWhite.png)3772](https://blog.csdn.net/qq_43588095/article/details/146572550)\n*   [LangGraphä¸­çš„äº‹ä»¶æµ ![Image 71](https://csdnimg.cn/release/blogv2/dist/pc/img/readCountWhite.png)2433](https://blog.csdn.net/qq_43588095/article/details/147635246)\n\n### åˆ†ç±»ä¸“æ \n\n*   [![Image 72](https://i-blog.csdnimg.cn/columns/default/20201014180756724.png?x-oss-process=image/resize,m_fixed,h_64,w_64) å¤§æ¨¡å‹Agentå¼€å‘](https://blog.csdn.net/qq_43588095/category_12933023.html)53ç¯‡\n*   [![Image 73](https://i-blog.csdnimg.cn/columns/default/20201014180756738.png?x-oss-process=image/resize,m_fixed,h_64,w_64) DeepSeekç³»åˆ—ç¬”è®°](https://blog.csdn.net/qq_43588095/category_12931550.html)8ç¯‡\n*   [![Image 74](https://i-blog.csdnimg.cn/columns/default/20201014180756930.png?x-oss-process=image/resize,m_fixed,h_64,w_64) å¾®è°ƒè¯¾ç¨‹ç¬”è®°](https://blog.csdn.net/qq_43588095/category_12928611.html)30ç¯‡\n\n ä¸Šä¸€ç¯‡ï¼š [LangGraphä¸­å¦‚ä½•æ¥å…¥å¤§æ¨¡å‹åšé—®ç­”æµç¨‹](https://blog.csdn.net/qq_43588095/article/details/147479709) ä¸‹ä¸€ç¯‡ï¼š [LangGraphä¸­ä½¿ç”¨å­—å…¸ç±»å‹å®šä¹‰çŠ¶æ€æ„å»ºå›¾ç»“æ„](https://blog.csdn.net/qq_43588095/article/details/147479990)\n\n### æœ€æ–°è¯„è®º\n\n*   [LangGraphä¹‹Tool Calling Agent ä¸­ToolNodeçš„ä½¿ç”¨](https://blog.csdn.net/qq_43588095/article/details/147633960#comments_37789141)\n[æœ¨å¸›:](https://blog.csdn.net/u010380026)å¥½æ–‡ï¼ä½†æ˜¯result_1å’Œ2çš„ç”Ÿæˆä»£ç æ˜¯ä¸æ˜¯æœ‰ç‚¹é—®é¢˜\n\n### å¤§å®¶åœ¨çœ‹\n\n*   [2006å¹´Hintonè®ºæ–‡ï¼šæ·±åº¦å­¦ä¹ ç ´å†°èµ·ç‚¹ ![Image 75](https://csdnimg.cn/release/blogv2/dist/pc/img/readCountWhite.png)986](https://blog.csdn.net/jeffsonfu/article/details/158152445)\n*   [Flask+Vue3å­¦ç”Ÿä¿¡æ¯ç®¡ç†ç³»ç»Ÿ](https://blog.csdn.net/caoli201314/article/details/158234142)\n*   [Transformerï¼šè·¨æ¨¡æ€AIæ ¸å¿ƒæ¶æ„ ![Image 76](https://csdnimg.cn/release/blogv2/dist/pc/img/readCountWhite.png)1093](https://blog.csdn.net/jeffsonfu/article/details/157688935)\n*   [ç¥ç»ç½‘ç»œå…­åå¹´æ¼”è¿›å²](https://blog.csdn.net/jeffsonfu/article/details/158208812)\n*   [æ¢¯åº¦ä¸‹é™åŠä¸»æµä¼˜åŒ–ç®—æ³•è¯¦è§£](https://blog.csdn.net/jeffsonfu/article/details/158234538)\n\n### æœ€æ–°æ–‡ç« \n\n*   [LangGraphä¸­çš„äº‹ä»¶æµ](https://blog.csdn.net/qq_43588095/article/details/147635246)\n*   [LangGraphä¸­å¦‚ä½•ä½¿ç”¨æµå¼è¾“å‡º](https://blog.csdn.net/qq_43588095/article/details/147635070)\n*   [LangGraphæ¡ˆä¾‹å®æ“ï¼šæ„å»ºå¤æ‚å·¥å…·åº”ç”¨çš„ReActè‡ªæ²»ä»£ç†ï¼ˆå«ä»£ç ï¼‰](https://blog.csdn.net/qq_43588095/article/details/147634669)\n\n[2025å¹´ 91ç¯‡](https://blog.csdn.net/qq_43588095?type=blog&year=2025&month=04)\n\n![Image 77](https://kunyu.csdn.net/1.png?p=57&adId=1086623&adBlockFlag=0&a=1086623&c=0&k=LangGraph%E4%B8%ADState%E7%9A%84%E5%AE%9A%E4%B9%89%E6%A8%A1%E5%BC%8F&spm=1001.2101.3001.5001&articleId=147479946&d=1&t=3&u=45ac8718cd754d28a20ea1e56f2520e9)\n\n### ç›®å½•\n\n1.   [ä¸€ã€LangGraphæ¡†æ¶æ ¸å¿ƒè¦ç‚¹å›é¡¾](https://blog.csdn.net/qq_43588095/article/details/147479946#t0)\n2.   [äºŒã€Stateçš„å…³é”®ä½œç”¨åŠæ¶ˆæ¯ä¼ é€’æœºåˆ¶](https://blog.csdn.net/qq_43588095/article/details/147479946#t1)\n3.   [ä¸‰ã€Stateçš„å®šä¹‰æ¨¡å¼ä¸ä»£ç å®ç°ç¤ºä¾‹](https://blog.csdn.net/qq_43588095/article/details/147479946#t2)\n\nå±•å¼€å…¨éƒ¨![Image 78](https://csdnimg.cn/release/blogv2/dist/pc/img/arrowup-line-bot-White.png)\n\næ”¶èµ·![Image 79](https://csdnimg.cn/release/blogv2/dist/pc/img/arrowup-line-top-White.png)\n\n![Image 80](https://kunyu.csdn.net/1.png?p=530&adId=1086624&adBlockFlag=0&a=1086624&c=0&k=LangGraph%E4%B8%ADState%E7%9A%84%E5%AE%9A%E4%B9%89%E6%A8%A1%E5%BC%8F&spm=1001.2101.3001.4647&articleId=147479946&d=1&t=3&u=e41726bf44e74f4d9f03f7a1cb21f59e)\n\n### ç›®å½•\n\n1.   [ä¸€ã€LangGraphæ¡†æ¶æ ¸å¿ƒè¦ç‚¹å›é¡¾](https://blog.csdn.net/qq_43588095/article/details/147479946#t0)\n2.   [äºŒã€Stateçš„å…³é”®ä½œç”¨åŠæ¶ˆæ¯ä¼ é€’æœºåˆ¶](https://blog.csdn.net/qq_43588095/article/details/147479946#t1)\n3.   [ä¸‰ã€Stateçš„å®šä¹‰æ¨¡å¼ä¸ä»£ç å®ç°ç¤ºä¾‹](https://blog.csdn.net/qq_43588095/article/details/147479946#t2)\n\nå±•å¼€å…¨éƒ¨![Image 81](https://csdnimg.cn/release/blogv2/dist/pc/img/arrowup-line-bot-White.png)\n\næ”¶èµ·![Image 82](https://csdnimg.cn/release/blogv2/dist/pc/img/arrowup-line-top-White.png)\n\n[](https://wwads.cn/click/bait)[![Image 83: ä¸‡ç»´å¹¿å‘Šè”ç›Ÿ](https://cdn.wwads.cn/creatives/ocZcBmiI9GrrBWWbGauozCvDuNbfUf79yINPx1AP.jpg)](https://wwads.cn/click/bundle?code=OjwIpJp7uaB2SfOUMJIHqtYLJzicsH)\n\n[å…éƒ¨ç½²\\è¿ç»´\\è´¦å·\\æ”¯ä»˜ç³»ç»Ÿå¼€å‘ï¼Œè®©ä½ ç”¨Cursoråˆ¶ä½œå¯æ”¶è´¹çš„AIæ™ºèƒ½ä½“ï¼](https://wwads.cn/click/bundle?code=OjwIpJp7uaB2SfOUMJIHqtYLJzicsH)[![Image 84](https://blog.csdn.net/qq_43588095/article/details/147479946)å¹¿å‘Š](https://wwads.cn/?utm_source=property-175&utm_medium=footer "ç‚¹å‡»äº†è§£ä¸‡ç»´å¹¿å‘Šè”ç›Ÿ")\n\n[](https://blog.csdn.net/qq_43588095/article/details/147479946 "éšè—å¹¿å‘Š")\n\n![Image 85](https://kunyu.csdn.net/1.png?p=479&adId=1071044&adBlockFlag=0&a=1071044&c=0&k=LangGraph%E4%B8%ADState%E7%9A%84%E5%AE%9A%E4%B9%89%E6%A8%A1%E5%BC%8F&spm=1001.2101.3001.4834&articleId=147479946&d=1&t=3&u=56412dcc2f554eaba763e3b763a50e70)\n\n ä¸Šä¸€ç¯‡ï¼š [LangGraphä¸­å¦‚ä½•æ¥å…¥å¤§æ¨¡å‹åšé—®ç­”æµç¨‹](https://blog.csdn.net/qq_43588095/article/details/147479709) ä¸‹ä¸€ç¯‡ï¼š [LangGraphä¸­ä½¿ç”¨å­—å…¸ç±»å‹å®šä¹‰çŠ¶æ€æ„å»ºå›¾ç»“æ„](https://blog.csdn.net/qq_43588095/article/details/147479990)\n\n### åˆ†ç±»ä¸“æ \n\n*   [![Image 86](https://i-blog.csdnimg.cn/columns/default/20201014180756724.png?x-oss-process=image/resize,m_fixed,h_64,w_64) å¤§æ¨¡å‹Agentå¼€å‘](https://blog.csdn.net/qq_43588095/category_12933023.html)53ç¯‡\n*   [![Image 87](https://i-blog.csdnimg.cn/columns/default/20201014180756738.png?x-oss-process=image/resize,m_fixed,h_64,w_64) DeepSeekç³»åˆ—ç¬”è®°](https://blog.csdn.net/qq_43588095/category_12931550.html)8ç¯‡\n*   [![Image 88](https://i-blog.csdnimg.cn/columns/default/20201014180756930.png?x-oss-process=image/resize,m_fixed,h_64,w_64) å¾®è°ƒè¯¾ç¨‹ç¬”è®°](https://blog.csdn.net/qq_43588095/category_12928611.html)30ç¯‡\n\n[å±•å¼€å…¨éƒ¨![Image 89](https://csdnimg.cn/release/blogv2/dist/pc/img/arrowup-line-bot-White.png)](https://blog.csdn.net/qq_43588095/article/details/147479946)[æ”¶èµ·![Image 90](https://csdnimg.cn/release/blogv2/dist/pc/img/arrowup-line-top-White.png)](https://blog.csdn.net/qq_43588095/article/details/147479946)\n\nç™»å½•åæ‚¨å¯ä»¥äº«å—ä»¥ä¸‹æƒç›Šï¼š\n\n*   ![Image 91](blob:http://localhost/e891c3a7c1a92038da15617ead1c0096)å…è´¹å¤åˆ¶ä»£ç \n*   ![Image 92](blob:http://localhost/3d84693e43989ca72c63590d38052fc8)å’Œåšä¸»å¤§Väº’åŠ¨\n*   ![Image 93](blob:http://localhost/a746ba3bd4746d1ec8acd6b5071ccf00)ä¸‹è½½æµ·é‡èµ„æº\n*   ![Image 94](blob:http://localhost/7cd6e3cbe7e0076d0b9199193b4b832d)å‘åŠ¨æ€/å†™æ–‡ç« /åŠ å…¥ç¤¾åŒº\n\nÃ—ç«‹å³ç™»å½•\n\nè¯„è®º![Image 95](https://csdnimg.cn/release/blogv2/dist/pc/img/closeBt.png)\n\n![Image 96](https://csdnimg.cn/release/blogv2/dist/pc/img/commentArrowLeftWhite.png)è¢«æŠ˜å çš„ æ¡è¯„è®º [ä¸ºä»€ä¹ˆè¢«æŠ˜å ?](https://blogdev.blog.csdn.net/article/details/122245662)[![Image 97](https://csdnimg.cn/release/blogv2/dist/pc/img/iconPark.png)åˆ°ã€çŒæ°´ä¹å›­ã€‘å‘è¨€](https://bbs.csdn.net/forums/FreeZone)\n\n[æŸ¥çœ‹æ›´å¤šè¯„è®º![Image 98](https://csdnimg.cn/release/blogv2/dist/pc/img/commentArrowDownWhite.png)](https://blog.csdn.net/qq_43588095/article/details/147479946)\n\n æ·»åŠ çº¢åŒ… [](https://blog.csdn.net/qq_43588095/article/details/147479946)\n\nç¥ç¦è¯­ \n\n[](https://blog.csdn.net/qq_43588095/article/details/147479946)\n\nè¯·å¡«å†™çº¢åŒ…ç¥ç¦è¯­æˆ–æ ‡é¢˜\n\nçº¢åŒ…æ•°é‡ \n\nä¸ª\n\nçº¢åŒ…ä¸ªæ•°æœ€å°ä¸º10ä¸ª\n\nçº¢åŒ…æ€»é‡‘é¢ \n\nå…ƒ\n\nçº¢åŒ…é‡‘é¢æœ€ä½5å…ƒ\n\nä½™é¢æ”¯ä»˜ \n\n å½“å‰ä½™é¢ 3.43 å…ƒ [å‰å¾€å……å€¼ >](https://i.csdn.net/#/wallet/balance/recharge)\n\n éœ€æ”¯ä»˜ï¼š10.00 å…ƒ \n\nå–æ¶ˆ ç¡®å®š\n\n![Image 99](https://blog.csdn.net/qq_43588095/article/details/147479946)\n\næˆå°±ä¸€äº¿æŠ€æœ¯äºº!\n\n é¢†å–åä½ ä¼šè‡ªåŠ¨æˆä¸ºåšä¸»å’Œçº¢åŒ…ä¸»çš„ç²‰ä¸ [è§„åˆ™](https://blogdev.blog.csdn.net/article/details/128932621)\n\n[![Image 100](https://profile-avatar.csdnimg.cn/default.jpg!2)](https://blog.csdn.net/qq_43588095/article/details/147479946)\n\nhope_wisdom\n\n å‘å‡ºçš„çº¢åŒ… \n\nå®ä»˜ å…ƒ\n\n[ä½¿ç”¨ä½™é¢æ”¯ä»˜](javascript:;)\n\n![Image 101](https://csdnimg.cn/release/blogv2/dist/pc/img/pay-time-out.png)ç‚¹å‡»é‡æ–°è·å–\n\n![Image 102](https://csdnimg.cn/release/blogv2/dist/pc/img/weixin.png)![Image 103](https://csdnimg.cn/release/blogv2/dist/pc/img/zhifubao.png)![Image 104](https://csdnimg.cn/release/blogv2/dist/pc/img/jingdong.png)æ‰«ç æ”¯ä»˜\n\né’±åŒ…ä½™é¢ 0\n\n![Image 105](https://csdnimg.cn/release/blogv2/dist/pc/img/pay-help.png)\n\næŠµæ‰£è¯´æ˜ï¼š\n\n1.ä½™é¢æ˜¯é’±åŒ…å……å€¼çš„è™šæ‹Ÿè´§å¸ï¼ŒæŒ‰ç…§1:1çš„æ¯”ä¾‹è¿›è¡Œæ”¯ä»˜é‡‘é¢çš„æŠµæ‰£ã€‚\n\n 2.ä½™é¢æ— æ³•ç›´æ¥è´­ä¹°ä¸‹è½½ï¼Œå¯ä»¥è´­ä¹°VIPã€ä»˜è´¹ä¸“æ åŠè¯¾ç¨‹ã€‚\n\n[![Image 106](https://csdnimg.cn/release/blogv2/dist/pc/img/recharge.png)ä½™é¢å……å€¼](https://i.csdn.net/#/wallet/balance/recharge)\n\n![Image 107](https://blog.csdn.net/qq_43588095/article/details/147479946)\n\nç¡®å®š å–æ¶ˆ![Image 108](https://csdnimg.cn/release/blogv2/dist/pc/img/closeBt.png)\n\nä¸¾æŠ¥\n\n![Image 109](https://csdnimg.cn/release/blogv2/dist/pc/img/closeBlack.png)\n\né€‰æ‹©ä½ æƒ³è¦ä¸¾æŠ¥çš„å†…å®¹ï¼ˆå¿…é€‰ï¼‰\n\n*   å†…å®¹æ¶‰é»„\n*   æ”¿æ²»ç›¸å…³\n*   å†…å®¹æŠ„è¢­\n*   æ¶‰å«Œå¹¿å‘Š\n*   å†…å®¹ä¾µæƒ\n*   ä¾®è¾±è°©éª‚\n*   æ ·å¼é—®é¢˜\n*   å…¶ä»–\n\nåŸæ–‡é“¾æ¥ï¼ˆå¿…å¡«ï¼‰\n\nè¯·é€‰æ‹©å…·ä½“åŸå› ï¼ˆå¿…é€‰ï¼‰\n\n*   åŒ…å«ä¸å®ä¿¡æ¯\n*   æ¶‰åŠä¸ªäººéšç§\n\nè¯·é€‰æ‹©å…·ä½“åŸå› ï¼ˆå¿…é€‰ï¼‰\n\n*   ä¾®è¾±è°©éª‚\n*   è¯½è°¤\n\nè¯·é€‰æ‹©å…·ä½“åŸå› ï¼ˆå¿…é€‰ï¼‰\n\n*   æ¬å®¶æ ·å¼\n*   åšæ–‡æ ·å¼\n\nè¡¥å……è¯´æ˜ï¼ˆé€‰å¡«ï¼‰\n\nå–æ¶ˆ\n\nç¡®å®š\n\n[![Image 110](https://i-operation.csdnimg.cn/images/23189f0255c74da0aead8ae1842c6f39.gif)](https://ai.csdn.net/workbench/wallet?utm_source=xtai_slb_blogxf_ty)[![Image 111](https://csdnimg.cn/release/blogv2/dist/pc/img/toolbar/Group.png)ç‚¹å‡»ä½“éªŒ DeepSeekR1æ»¡è¡€ç‰ˆ](https://ai.csdn.net/chat?utm_source=cknow_pc_blogdetail&spm=1001.2101.3001.10583)[![Image 112](https://g.csdnimg.cn/side-toolbar/3.6/images/mobile.png) ä¸‹è½½APP ![Image 113: ç¨‹åºå‘˜éƒ½åœ¨ç”¨çš„ä¸­æ–‡ITæŠ€æœ¯äº¤æµç¤¾åŒº](https://g.csdnimg.cn/side-toolbar/3.6/images/qr_app.png) ç¨‹åºå‘˜éƒ½åœ¨ç”¨çš„ä¸­æ–‡ITæŠ€æœ¯äº¤æµç¤¾åŒº å…¬ä¼—å· ![Image 114: ä¸“ä¸šçš„ä¸­æ–‡ IT æŠ€æœ¯ç¤¾åŒºï¼Œä¸åƒä¸‡æŠ€æœ¯äººå…±æˆé•¿](https://g.csdnimg.cn/side-toolbar/3.6/images/qr_wechat.png) ä¸“ä¸šçš„ä¸­æ–‡ IT æŠ€æœ¯ç¤¾åŒºï¼Œä¸åƒä¸‡æŠ€æœ¯äººå…±æˆé•¿ è§†é¢‘å· ![Image 115: å…³æ³¨ã€CSDNã€‘è§†é¢‘å·ï¼Œè¡Œä¸šèµ„è®¯ã€æŠ€æœ¯åˆ†äº«ç²¾å½©ä¸æ–­ï¼Œç›´æ’­å¥½ç¤¼é€ä¸åœï¼](https://g.csdnimg.cn/side-toolbar/3.6/images/qr_video.png) å…³æ³¨ã€CSDNã€‘è§†é¢‘å·ï¼Œè¡Œä¸šèµ„è®¯ã€æŠ€æœ¯åˆ†äº«ç²¾å½©ä¸æ–­ï¼Œç›´æ’­å¥½ç¤¼é€ä¸åœï¼](https://blog.csdn.net/qq_43588095/article/details/147479946)[![Image 116](https://g.csdnimg.cn/side-toolbar/3.6/images/customer.png)å®¢æœ](https://blog.csdn.net/qq_43588095/article/details/147479946)[![Image 117](https://g.csdnimg.cn/side-toolbar/3.6/images/totop.png)è¿”å›é¡¶éƒ¨](https://blog.csdn.net/qq_43588095/article/details/147479946)\n\n[![Image 118](https://csdnimg.cn/release/blogv2/dist/pc/img/quoteClose1White.png)](https://blog.csdn.net/qq_43588095/article/details/147479946)\n\n![Image 119](https://i-blog.csdnimg.cn/direct/34c5cd13225746f28209b80e750f3d85.png#pic_center)\n\n-è¿˜åŸ+1:1 è¿˜åŸ', 'doi': '', 'published_date': None, 'pdf_url': '', 'url': 'https://blog.csdn.net/qq_43588095/article/details/147479946', 'source': 'tavily', 'categories': ['web_search'], 'keywords': [], 'citations': 0, 'references': [], 'extra': {'score': 0.99999726, 'saved_path': None}}
2026-02-21 19:55:56,567 - __main__ - INFO - handle_search: returned=1
2026-02-21 19:55:56,568 - __main__ - INFO - call_tool payload: source_tool=tavily_search, result_type=papers, count=1
2026-02-21 19:55:56,568 - __main__ - INFO - call_tool: name=tavily_search, result_type=papers, count=1
2026-02-21 19:55:56,568 - __main__ - DEBUG - call_tool payload sample: {'paper_id': '', 'title': 'ä»é›¶å¼€å§‹å­¦LangGraphï¼ˆ6ï¼‰ï¼šè½»æ¾ç©è½¬Conditional Edges', 'authors': [], 'abstract': '# [logo ç«å±±å¼•æ“ ADG ç¤¾åŒº](https://adg.csdn.net "ç«å±±å¼•æ“ ADG ç¤¾åŒº")\n\n![logo](https://i-blog.csdnimg.cn/devpress/blog/51b6b18b57a24ac185913dd7db13ea07.jpg)\n![](https://i-blog.csdnimg.cn/devpress/blog/51b6b18b57a24ac185913dd7db13ea07.jpg)\n\n## ç™»å½•ç¤¾åŒºäº‘\n\nç™»å½•ç¤¾åŒºäº‘ï¼Œä¸ç¤¾åŒºç”¨æˆ·å…±åŒæˆé•¿\n\n### ç«å±±å¼•æ“ ADG ç¤¾åŒº\n\né‚€è¯·æ‚¨åŠ å…¥ç¤¾åŒº\n\n![]()![]()\n\n# ä»é›¶å¼€å§‹å­¦LangGraphï¼ˆ6ï¼‰ï¼šè½»æ¾ç©è½¬Conditional Edges\n\nåœ¨ä¸Šä¸€æœŸæ–‡ç« ä¸­ï¼Œæˆ‘å¸¦ç€å¤§å®¶æ­å»ºäº†ä¸€ä¸ªåŸºç¡€ç‰ˆçš„Graphã€‚ä»Šå¤©æˆ‘ä»¬è¦åœ¨æ­¤åŸºç¡€ä¸Šï¼Œå¼•å…¥Conditional Edgesï¼ˆæ¡ä»¶è¾¹ï¼‰çš„æ¦‚å¿µï¼Œè®©æˆ‘ä»¬çš„Graphæ›´åŠ å¥½ç©ä¸€ç‚¹ã€‚\n\n![](https://profile-avatar.csdnimg.cn/eb75dcc8773540bda9379c1546d0464b_y525698136.jpg!1)\n\n### [ç¨‹åºå­¦åˆ°æ˜](https://devpress.csdn.net/user/Y525698136)\n\n![](https://profile-avatar.csdnimg.cn/eb75dcc8773540bda9379c1546d0464b_y525698136.jpg!1)\n\nå¤§å®¶å¥½ï¼Œåœ¨ä¸Šä¸€æœŸæ–‡ç« ä¸­ï¼Œæˆ‘å¸¦ç€å¤§å®¶æ­å»ºäº†ä¸€ä¸ªåŸºç¡€ç‰ˆçš„Graphã€‚ä»Šå¤©æˆ‘ä»¬è¦åœ¨æ­¤åŸºç¡€ä¸Šï¼Œå¼•å…¥Conditional Edgesï¼ˆæ¡ä»¶è¾¹ï¼‰çš„æ¦‚å¿µï¼Œè®©æˆ‘ä»¬çš„Graphæ›´åŠ å¥½ç©ä¸€ç‚¹ã€‚\n\n### ä»€ä¹ˆæ˜¯Conditional Edges\n\nConditional Edgesï¼ˆæ¡ä»¶è¾¹ï¼‰é¡¾åæ€ä¹‰ï¼Œå°±æ˜¯å¸¦æ¡ä»¶åˆ¤æ–­çš„è¾¹ï¼Œå³æ ¹æ®æ¡ä»¶æ˜¯å¦æ»¡è¶³ï¼Œå†³å®šèµ°å“ªæ¡è¾¹ã€‚\n\næˆ‘ä»¬å…ˆä»å›¾å½¢ä¸Šæ¥æ„Ÿå—ä¸€ä¸‹æ¡ä»¶è¾¹ï¼š\n\n![](https://i-blog.csdnimg.cn/img_convert/33f3735631cf5a66c7b1a3761191a4d5.jpeg)\n\n![](https://i-blog.csdnimg.cn/img_convert/33f3735631cf5a66c7b1a3761191a4d5.jpeg)\n\nå¯ä»¥çœ‹åˆ°ï¼Œä¸ä¸ŠæœŸçš„ç®€å•çº¿æ¡ç»“æ„ç›¸æ¯”ï¼Œä»Šå¤©æˆ‘ä»¬è¦åˆ›å»ºçš„å›¾ï¼Œå¤šäº†ä¸€ä¸ª**router**èŠ‚ç‚¹ï¼Œç„¶åä»å®ƒå‡ºå‘ï¼Œåˆåˆ†å‡ºäº†é˜²å¾¡å’Œé—ªé¿ä¸¤ä¸ªåˆ†æ”¯ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ ¹æ®**router**è®¾å®šçš„é€»è¾‘ï¼Œæˆ‘ä»¬çš„è§’è‰²è¦ä¹ˆé€‰æ‹©é˜²å¾¡ï¼Œè¦ä¹ˆé€‰æ‹©é—ªé¿ã€‚å…¶ä¸­çš„defendå’Œdodgeä¸¤æ¡è™šçº¿ï¼Œå°±æ˜¯æ¡ä»¶è¾¹ã€‚\n\n### æ„é€ æ¡ä»¶è¾¹çš„åŸºæœ¬æ–¹æ³•\n\næ¡ä»¶è¾¹çš„æ„é€ æ–¹æ³•éå¸¸ç®€å•ï¼Œä¸»è¦åˆ†ä¸ºä¸‰ä¸ªæ­¥éª¤ï¼š\n\n#### 1.æ„é€ routing\\_function\n\næ‰€è°“çš„routing\\_functionï¼ˆè·¯ç”±å‡½æ•°ï¼‰ï¼Œå°±æ˜¯æŒ‡å¯¹æ•°æ®åˆ°åº•å¦‚ä½•æµåŠ¨è¿›è¡Œå®šä¹‰çš„å‡½æ•°ã€‚è€Œè¿™ç§å®šä¹‰åˆ©ç”¨çš„å°±æ˜¯pythonä¸­éå¸¸åŸºç¡€çš„â€œif-elif-elseâ€œçš„æ¡ä»¶åˆ¤æ–­ã€‚\n\nä¸€ä¸ªåŸºæœ¬çš„routing\\_functionçš„ç»“æ„å¦‚ä¸‹ï¼š\n\n`def routing_function(state:AgentState) -> AgentState: """This node will select the next node of the graph""" if state["KEY"] == "condition": return "edge_1" else: return "edge_2"`\n\nä»¥ä¸Šå‡½æ•°çš„æ„æ€å°±æ˜¯ï¼Œå¦‚æœç›®å‰Graphçš„stateä¸­çš„æŸä¸ª`KEY`çš„å€¼ä¸º`condition`ï¼Œé‚£ä¹ˆæ•°æ®å°±ä¼šæ²¿ç€åä¸º`edge_1`çš„è¾¹æµåŠ¨ã€‚å¦åˆ™ï¼Œå°±æ²¿ç€åä¸º`edge_2`çš„è¾¹æµåŠ¨ã€‚å½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥ç”¨`elif`å¢åŠ æ›´å¤šç§çš„æ¡ä»¶åˆ†æ”¯ã€‚\n\n`KEY`\n`condition`\n`edge_1`\n`edge_2`\n`elif`\n\nè¿™é‡Œæœ‰å‡ ä¸ªè¦ç‚¹ï¼š\n\n#### 2.æ·»åŠ æ¡ä»¶Node\n\nå¦‚ä¸ŠæœŸæ‰€è®²ï¼Œå½“æˆ‘ä»¬å®ŒæˆStateçš„åˆå§‹åŒ–ä¹‹åï¼Œé¦–å…ˆéœ€è¦æ·»åŠ Nodeã€‚æ™®é€šNodeçš„æ·»åŠ æ–¹æ³•å¦‚ä¸‹ï¼š\n\n`graph.add_node("èŠ‚ç‚¹å",èŠ‚ç‚¹å‡½æ•°)`\n\nåŒæ ·çš„ï¼Œæ¡ä»¶Nodeï¼Œå¦‚æˆ‘ä»¬å‰é¢å›¾ä¸­çš„`router`ï¼Œä¹Ÿéœ€è¦æ·»åŠ ã€‚ä½†æ¡ä»¶Nodeçš„æ·»åŠ æ–¹æ³•ä¸æ™®é€šNodeæœ‰ä¸ªç»†å¾®çš„å·®å¼‚ã€‚\n\n`router`\n\nç”±äºrouting\\_functionä¸æ™®é€šçš„èŠ‚ç‚¹å‡½æ•°ä¸åŒï¼Œå®ƒä¸ä¼šå¯¹Graphçš„stateæ•°æ®è¿›è¡Œæ“ä½œï¼Œå®ƒæœ€å¤šåˆ©ç”¨stateçš„æ•°æ®è¿›è¡Œä¸€äº›æ¡ä»¶æ»¡è¶³æ–¹é¢çš„åˆ¤æ–­ã€‚å› æ­¤ï¼Œäº‹å®ä¸Šè¾“å…¥routing\\_functionçš„stateï¼Œä¸å…¶è¾“å‡ºçš„stateï¼Œæ˜¯æ²¡æœ‰ä»»ä½•å·®å¼‚çš„ã€‚\n\nå› æ­¤ï¼Œæ¡ä»¶Nodeçš„æ·»åŠ æ–¹æ³•å¦‚ä¸‹ï¼š\n\n`graph.add_node("æ¡ä»¶èŠ‚ç‚¹å",lambda stateï¼šstate)`\n\nå…¶ä¸­èŠ‚ç‚¹å‡½æ•°çš„ä½ç½®è¢«ä¸€ä¸ª`lambda`å‡½æ•°æ‰€æ›¿ä»£ï¼Œä½ ä»ç„¶ä¸éœ€è¦çŸ¥é“è¿™ä¸ªçš„åŸç†æ˜¯ä»€ä¹ˆï¼Œä½ åªéœ€è¦çŸ¥é“è¿™ä»£è¡¨ç€è¾“å…¥è¾“å‡ºæ¡ä»¶Nodeçš„stateæ˜¯ç›¸åŒçš„å³å¯ã€‚\n\n`lambda`\n\n#### 3.æ·»åŠ æ¡ä»¶è¾¹\n\næœ€åï¼Œæˆ‘ä»¬ç»ˆäºæ¥åˆ°æ·»åŠ æ¡ä»¶è¾¹çš„ç¯èŠ‚ã€‚å…ˆæ¥çœ‹åŸºæœ¬ä»£ç ï¼š\n\n`graph.add_conditional_edges( "router", routing_function, { "edge_1":"node_name1", "edge_2":"node_name2" })`\n\nä¾ç„¶æ˜¯éå¸¸ç®€å•ï¼Œåˆ©ç”¨äº†ä¸€ä¸ª`add_conditional_edges`æ–¹æ³•ã€‚è¿™ä¸ªæ–¹æ³•éœ€è¦ä¸‰ä¸ªå‚æ•°ï¼Œåˆ†åˆ«æ˜¯ï¼š\n\n`add_conditional_edges`\n\nå®Œæˆä»¥ä¸Šå…¨éƒ¨æ­¥éª¤ï¼Œæˆ‘ä»¬çš„æ¡ä»¶è¾¹å°±æ·»åŠ å®Œæˆäº†ã€‚ä¸‹é¢æˆ‘å¸¦å¤§å®¶æ¥å®ç°ä¸€ä¸‹å‰é¢å›¾ä¸­çš„Graphã€‚\n\n### å®æˆ˜æ¼”ç»ƒ\n\n#### 1.å®šä¹‰State\n\n`from typing import TypedDictclass AppState(TypedDict): char_class: str char_level:int char_HP:int char_action: str`\n\nåœ¨ä¸ŠæœŸçš„state çš„åŸºç¡€ä¸Šï¼Œæˆ‘å¢åŠ äº†ä¸€ä¸ª`char_action`é”®ï¼Œå¹¶å°†å®ƒçš„å€¼çš„ç±»å‹è®¾å®šä¸ºstrã€‚è¿™é‡Œçš„æƒ³æ³•æ˜¯æˆ‘ä»¬ç›´æ¥ä¼ å…¥åŠ¨ä½œï¼Œæ˜¯é—ªé¿è¿˜æ˜¯é˜²å¾¡ï¼Œç„¶åå†ç”±routeræ ¹æ®æˆ‘ä»¬ä¼ å…¥çš„åŠ¨ä½œæ¥ç¡®å®šæ•°æ®èµ°å‘ã€‚\n\n`char_action`\n\næˆ‘è¿™é‡Œä¸»è¦å› ä¸ºæ˜¯æ¼”ç¤ºï¼Œæ‰€ä»¥æè¿™ä¹ˆç®€å•ï¼Œå¤§å®¶å¯ä»¥å°½æƒ…å¼€è„‘æ´å»è®¾è®¡è‡ªå·±çš„æ¡ä»¶åˆ¤æ–­ã€‚\n\n#### 2.å®šä¹‰å„èŠ‚ç‚¹å‡½æ•°\n\nä¸ºäº†é¿å…å†—ä½™ï¼Œè¿™é‡Œæˆ‘åªåˆ†æä¸ä¸ŠæœŸç›¸æ¯”å¢åŠ çš„ä»£ç ã€‚æ²¡æœ‰çœ‹è¿‡ä¸ŠæœŸçš„æœ‹å‹ä¸€å®šè¦å»çœ‹å•Šï¼\n\né¦–å…ˆï¼Œå†™å‡ºrouteræ‰€éœ€çš„routing\\_function:\n\n`def decide_next_node(state:AppState) -> AppState: """This node will select the next node of the graph""" if state["char_action"] == "é—ªé¿": return "dodge" elif state["char_action"] == "é˜²å¾¡": return "defend"`\n\néå¸¸ç®€å•çš„ä¸€ä¸ªæ¡ä»¶åˆ¤æ–­ï¼Œä¸å†èµ˜è¿°ã€‚\n\nç„¶åï¼Œå¢åŠ ä¸€ä¸ªâ€œé˜²å¾¡â€èŠ‚ç‚¹çš„å‡½æ•°\n\n`def defend_check_node(state: AppState) -> AppState: """æ£€æŸ¥é˜²å¾¡ç»“æœå¹¶å¤„ç†HPå˜åŒ–""" dice_roll = random.randint(1, 3) state[\'char_HP\'] = state[\'char_HP\'] - dice_roll print(f"ä½ å—åˆ°äº†{dice_roll}ç‚¹ä¼¤å®³") return state`\n\nè¿™é‡ŒåŒæ ·æ˜¯æå¾—å¾ˆç®€å•ï¼Œä½ å®Œå…¨å¯ä»¥åœ¨stateä¸­å¢åŠ ä¸€ä¸ªâ€œé˜²å¾¡å€¼â€çš„keyï¼Œç„¶ååœ¨è§’è‰²å—åˆ°æ”»å‡»æ—¶ï¼Œç”¨æ•Œæ–¹ä¼¤å®³å‡å»é˜²å¾¡å€¼çš„å‡€é¢ï¼Œä½œä¸ºè§’è‰²æœ€ç»ˆå—åˆ°çš„ä¼¤å®³ã€‚æ€»ä¹‹éå¸¸çµæ´»ã€‚\n\n#### 3.æ­å»ºGraph\n\nè¿™é‡Œä¹Ÿéå¸¸ç®€å•ï¼Œå› ä¸ºè¦ç‚¹å‰é¢éƒ½è®²äº†ï¼Œç›´æ¥ç»™å‡ºä»£ç ï¼š\n\n`graph = StateGraph(AppState)graph.add_node("dodge_check",dodge_check_node)graph.add_node("defend_check",defend_check_node)graph.add_node("character_status",display_character_status)graph.add_node("router",lambda state:state)graph.add_edge(START,"router")graph.add_conditional_edges( "router", decide_next_node, { "dodge":"dodge_check", "defend":"defend_check" })graph.add_edge("dodge_check","character_status")graph.add_edge("defend_check","character_status")graph.add_edge("character_status",END)app = graph.compile()`\n\nå†™è¿™ä¸€éƒ¨åˆ†ä»£ç çš„å…³é”®æ˜¯ä½ è‡ªå·±è¦å¯¹ä½ çš„Graphçš„æ•°æ®æµå‘å¿ƒé‡Œæœ‰æ•°ï¼Œæ‰€ä»¥ä¸€èˆ¬éƒ½æ˜¯å…ˆç”»å¥½ç»“æ„è‰å›¾ï¼ŒçœŸæ­£å†™ä»£ç çš„è¿‡ç¨‹å…¶å®æ˜¯å¾ˆç®€å•çš„ã€‚\n\n#### 4.ä½¿ç”¨Graph\n\næœ€åå°±æ˜¯å®é™…ä½¿ç”¨äº†ã€‚æˆ‘ä»¬ä¾ç„¶æ˜¯å‘`invoke`æ–¹æ³•ä¼ å…¥ä¸€ä¸ªä¸stateå®šä¹‰ä¸€è‡´çš„å­—å…¸ï¼Œæˆ‘ä»¬å…ˆæŠŠactionè®¾å®šä¸ºé—ªé¿ï¼š\n\n`invoke`\n`result = app.invoke({"char_class":"æ³•å¸ˆ","char_level":5,"char_HP":10,"char_action":"é—ªé¿"})`\n\nç»“æœå¦‚ä¸‹ï¼Œwoopsï¼Œé—ªé¿å¤±è´¥ï¼Œè¢«ç äº†3æ»´è¡€ã€‚\n\n![](https://i-blog.csdnimg.cn/img_convert/16bcda6e688c67184a4b3f04d9644add.jpeg)\n\n![](https://i-blog.csdnimg.cn/img_convert/16bcda6e688c67184a4b3f04d9644add.jpeg)\n\næˆ‘ä»¬å†è¯•è¯•è®©è§’è‰²é˜²å¾¡ï¼Œæœç„¶ç¨³å¦‚æ³°å±±ï¼š\n\n![](https://i-blog.csdnimg.cn/img_convert/5998c26d06c50d666fe28673c6e2794a.jpeg)\n\n![](https://i-blog.csdnimg.cn/img_convert/5998c26d06c50d666fe28673c6e2794a.jpeg)\n\nå¥½äº†ï¼Œå‡ºäºç¯‡å¹…è€ƒè™‘ï¼Œæœ¬æœŸå°±åˆ°æ­¤ä¸ºæ­¢ï¼Œä¸‹æœŸæˆ‘å°†ç»™å¤§å®¶ä»‹ç»æ¡ä»¶è¾¹çš„ä¸€ç§å¸¸ç”¨ç©æ³•ï¼ŒLoopï¼ˆå¾ªç¯ï¼‰ï¼Œå¤§å®¶å¯ä»¥å…ˆå°½æƒ…æ¢ç´¢ã€‚å¸Œæœ›è§‰å¾—æœ¬ç³»åˆ—æ–‡ç« æœ‰ç”¨çš„æœ‹å‹ä¸è¦å¿˜äº†ä¸€é”®ä¸‰è¿ï¼Œç»™ä¿ºä¸€ç‚¹é¼“åŠ±ï¼Œç¥å¤§å®¶ç©çš„å¼€å¿ƒï¼\n\næƒ³å…¥é—¨ AI å¤§æ¨¡å‹å´æ‰¾ä¸åˆ°æ¸…æ™°æ–¹å‘ï¼Ÿå¤‡è€ƒå¤§å‚ AI å²—è¿˜åœ¨å››å¤„æœé›†é›¶æ•£èµ„æ–™ï¼Ÿåˆ«å†æµªè´¹æ—¶é—´å•¦ï¼2025 å¹´ `AI å¤§æ¨¡å‹å…¨å¥—å­¦ä¹ èµ„æ–™`å·²æ•´ç†å®Œæ¯•ï¼Œä»å­¦ä¹ è·¯çº¿åˆ°é¢è¯•çœŸé¢˜ï¼Œä»å·¥å…·æ•™ç¨‹åˆ°è¡Œä¸šæŠ¥å‘Šï¼Œä¸€ç«™å¼è¦†ç›–ä½ çš„æ‰€æœ‰éœ€æ±‚ï¼Œç°åœ¨å…¨éƒ¨`å…è´¹åˆ†äº«`ï¼\n\n `AI å¤§æ¨¡å‹å…¨å¥—å­¦ä¹ èµ„æ–™`\n`å…è´¹åˆ†äº«`\n\n**ğŸ‘‡ğŸ‘‡æ‰«ç å…è´¹é¢†å–å…¨éƒ¨å†…å®¹ğŸ‘‡ğŸ‘‡**\n\n\u200b![](https://i-blog.csdnimg.cn/blog_migrate/35a667356d00b606992c228becf1f3a8.png)\n\n![](https://i-blog.csdnimg.cn/blog_migrate/35a667356d00b606992c228becf1f3a8.png)\n\n### ä¸€ã€å­¦ä¹ å¿…å¤‡ï¼š100+æœ¬å¤§æ¨¡å‹ç”µå­ä¹¦+26 ä»½è¡Œä¸šæŠ¥å‘Š + 600+ å¥—æŠ€æœ¯PPTï¼Œå¸®ä½ çœ‹é€ AI è¶‹åŠ¿\n\næƒ³äº†è§£å¤§æ¨¡å‹çš„è¡Œä¸šåŠ¨æ€ã€å•†ä¸šè½åœ°æ¡ˆä¾‹ï¼Ÿå¤§æ¨¡å‹ç”µå­ä¹¦ï¼Ÿ**`è¿™ä»½èµ„æ–™å¸®ä½ ç«™åœ¨ â€œè¡Œä¸šé«˜åº¦â€ å­¦ AI`ï¼š**\n\n`è¿™ä»½èµ„æ–™å¸®ä½ ç«™åœ¨ â€œè¡Œä¸šé«˜åº¦â€ å­¦ AI`\n\n#### 1. 100+æœ¬å¤§æ¨¡å‹æ–¹å‘ç”µå­ä¹¦\n\n![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/direct/b76dfd5e3a9b42fdad0f5ea51dfd0c04.png#pic_center)\n\n![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/direct/b76dfd5e3a9b42fdad0f5ea51dfd0c04.png#pic_center)\n\n#### 2. 26 ä»½è¡Œä¸šç ”ç©¶æŠ¥å‘Šï¼šè¦†ç›–å¤šé¢†åŸŸå®è·µä¸è¶‹åŠ¿\n\næŠ¥å‘ŠåŒ…å«é˜¿é‡Œã€DeepSeek ç­‰æƒå¨æœºæ„å‘å¸ƒçš„æ ¸å¿ƒå†…å®¹ï¼Œæ¶µç›–ï¼š  \n![](https://i-blog.csdnimg.cn/img_convert/42dbc372b05fba5c04f015e9d3b8e030.jpeg)\n\n![](https://i-blog.csdnimg.cn/img_convert/42dbc372b05fba5c04f015e9d3b8e030.jpeg)\n\n#### 3. 600+å¥—æŠ€æœ¯å¤§ä¼š PPTï¼šå¬è¡Œä¸šå¤§å’–è®²å®æˆ˜\n\nPPT æ•´ç†è‡ª 2024-2025 å¹´çƒ­é—¨æŠ€æœ¯å¤§ä¼šï¼ŒåŒ…å«ç™¾åº¦ã€è…¾è®¯ã€å­—èŠ‚ç­‰ä¼ä¸šçš„ä¸€çº¿å®è·µï¼š\n\n![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/direct/c478368f9f2b4b418d68d68a35876bc4.gif#pic_center)\n\n![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/direct/c478368f9f2b4b418d68d68a35876bc4.gif#pic_center)\n\n### äºŒã€æ±‚èŒå¿…çœ‹ï¼šå¤§å‚ AI å²—é¢è¯• â€œå¼¹è¯åº“â€ï¼Œ300 + çœŸé¢˜ + 107 é“é¢ç»ç›´æ¥æŠ±èµ°\n\næƒ³å†²å­—èŠ‚ã€è…¾è®¯ã€é˜¿é‡Œã€è”šæ¥ç­‰å¤§å‚ AI å²—ï¼Ÿè¿™ä»½é¢è¯•èµ„æ–™å¸®ä½ æå‰ â€œæŠ¼é¢˜â€ï¼Œæ‹’ç»ä¸´åœºæ…Œï¼\n\n![](https://i-blog.csdnimg.cn/img_convert/70f9f3a66290f3f94181cb8f676c264a.jpeg)\n\n![](https://i-blog.csdnimg.cn/img_convert/70f9f3a66290f3f94181cb8f676c264a.jpeg)\n\n#### 1. 107 é“å¤§å‚é¢ç»ï¼šè¦†ç›– Promptã€RAGã€å¤§æ¨¡å‹åº”ç”¨å·¥ç¨‹å¸ˆç­‰çƒ­é—¨å²—ä½\n\né¢ç»æ•´ç†è‡ª 2021-2025 å¹´çœŸå®é¢è¯•åœºæ™¯ï¼ŒåŒ…å« TPlinkã€å­—èŠ‚ã€è…¾è®¯ã€è”šæ¥ã€è™¾çš®ã€ä¸­å…´ã€ç§‘å¤§è®¯é£ã€äº¬ä¸œç­‰ä¼ä¸šçš„é«˜é¢‘è€ƒé¢˜ï¼Œ`æ¯é“é¢˜éƒ½é™„å¸¦æ€è·¯è§£æ`ï¼š\n\n`æ¯é“é¢˜éƒ½é™„å¸¦æ€è·¯è§£æ`\n\n![](https://i-blog.csdnimg.cn/img_convert/2123cd7b05a849ba7cda52d55675412c.jpeg)\n\n![](https://i-blog.csdnimg.cn/img_convert/2123cd7b05a849ba7cda52d55675412c.jpeg)\n\n#### 2. 102 é“ AI å¤§æ¨¡å‹çœŸé¢˜ï¼šç›´å‡»å¤§æ¨¡å‹æ ¸å¿ƒè€ƒç‚¹\n\né’ˆå¯¹å¤§æ¨¡å‹ä¸“å±è€ƒé¢˜ï¼Œä»æ¦‚å¿µåˆ°å®è·µå…¨é¢è¦†ç›–ï¼Œå¸®ä½ ç†æ¸…åº•å±‚é€»è¾‘ï¼š\n\n![](https://i-blog.csdnimg.cn/img_convert/635628ec8a40cddf7592730ba0f9d860.jpeg)\n\n![](https://i-blog.csdnimg.cn/img_convert/635628ec8a40cddf7592730ba0f9d860.jpeg)\n\n#### 3. 97 é“ LLMs çœŸé¢˜ï¼šèšç„¦å¤§å‹è¯­è¨€æ¨¡å‹é«˜é¢‘é—®é¢˜\n\nä¸“é—¨æ‹†è§£ LLMs çš„æ ¸å¿ƒç—›ç‚¹ä¸è§£å†³æ–¹æ¡ˆï¼Œæ¯”å¦‚è®©å¾ˆå¤šäººå¤´ç–¼çš„ â€œå¤è¯»æœºé—®é¢˜â€ï¼š\n\n### ä¸‰ã€è·¯çº¿å¿…æ˜ï¼š AI å¤§æ¨¡å‹å­¦ä¹ è·¯çº¿å›¾ï¼Œ1 å¼ å›¾ç†æ¸…æ ¸å¿ƒå†…å®¹\n\n![](https://i-blog.csdnimg.cn/img_convert/3128ce65b9ebb9be60474ae0fdd0b104.jpeg)\n\nåˆšæ¥è§¦ AI å¤§æ¨¡å‹ï¼Œä¸çŸ¥é“è¯¥ä»å“ªå­¦èµ·ï¼Ÿè¿™ä»½ã€Œ`AIå¤§æ¨¡å‹ å­¦ä¹ è·¯çº¿å›¾`ã€ç›´æ¥å¸®ä½ åˆ’é‡ç‚¹ï¼Œä¸ç”¨å†ç›²ç›®æ‘¸ç´¢ï¼\n\n`AIå¤§æ¨¡å‹ å­¦ä¹ è·¯çº¿å›¾`\n\n![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/direct/d76c79e57d5a48ecb19de5ef4e8433b8.png#pic_center)\n\n![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/direct/d76c79e57d5a48ecb19de5ef4e8433b8.png#pic_center)\n\n##### è·¯çº¿å›¾æ¶µç›– 5 å¤§æ ¸å¿ƒæ¿å—ï¼Œä»åŸºç¡€åˆ°è¿›é˜¶å±‚å±‚é€’è¿›ï¼šä¸€æ­¥æ­¥å¸¦ä½ ä»å…¥é—¨åˆ°è¿›é˜¶ï¼Œä»ç†è®ºåˆ°å®æˆ˜ã€‚\n\n![img](https://i-blog.csdnimg.cn/img_convert/1b2587bb0da8f1e918602c014d1ae0bf.png)\n\n![img](https://i-blog.csdnimg.cn/img_convert/1b2587bb0da8f1e918602c014d1ae0bf.png)\n\n##### **L1é˜¶æ®µ:å¯èˆªç¯‡ä¸¨æé€Ÿç ´ç•ŒAIæ–°æ—¶ä»£**\n\nL1é˜¶æ®µï¼šäº†è§£å¤§æ¨¡å‹çš„åŸºç¡€çŸ¥è¯†ï¼Œä»¥åŠå¤§æ¨¡å‹åœ¨å„ä¸ªè¡Œä¸šçš„åº”ç”¨å’Œåˆ†æï¼Œå­¦ä¹ ç†è§£å¤§æ¨¡å‹çš„æ ¸å¿ƒåŸç†ã€å…³é”®æŠ€æœ¯ä»¥åŠå¤§æ¨¡å‹åº”ç”¨åœºæ™¯ã€‚\n\n![img](https://i-blog.csdnimg.cn/img_convert/eb7b2e8fa0a6238f7c06f20403dd3ab3.png)\n\n![img](https://i-blog.csdnimg.cn/img_convert/eb7b2e8fa0a6238f7c06f20403dd3ab3.png)\n\n###### L2é˜¶æ®µï¼šæ”»åšç¯‡ä¸¨RAGå¼€å‘å®æˆ˜å·¥åŠ\n\nL2é˜¶æ®µï¼šAIå¤§æ¨¡å‹RAGåº”ç”¨å¼€å‘å·¥ç¨‹ï¼Œä¸»è¦å­¦ä¹ RAGæ£€ç´¢å¢å¼ºç”Ÿæˆï¼šåŒ…æ‹¬Naive RAGã€Advanced-RAGä»¥åŠRAGæ€§èƒ½è¯„ä¼°ï¼Œè¿˜æœ‰GraphRAGåœ¨å†…çš„å¤šä¸ªRAGçƒ­é—¨é¡¹ç›®çš„åˆ†æã€‚\n\n![img](https://i-blog.csdnimg.cn/img_convert/a93fa0ff46c2e650bead1d405b769644.png)\n\n![img](https://i-blog.csdnimg.cn/img_convert/a93fa0ff46c2e650bead1d405b769644.png)\n\n###### L3é˜¶æ®µï¼šè·ƒè¿ç¯‡ä¸¨Agentæ™ºèƒ½ä½“æ¶æ„è®¾è®¡\n\nL3é˜¶æ®µï¼šå¤§æ¨¡å‹Agentåº”ç”¨æ¶æ„è¿›é˜¶å®ç°ï¼Œä¸»è¦å­¦ä¹ LangChainã€ LIamaIndexæ¡†æ¶ï¼Œä¹Ÿä¼šå­¦ä¹ åˆ°AutoGPTã€ MetaGPTç­‰å¤šAgentç³»ç»Ÿï¼Œæ‰“é€ Agentæ™ºèƒ½ä½“ã€‚\n\n![img](https://i-blog.csdnimg.cn/img_convert/9f513b693bf85d8d26ceb6abc09f60ba.png)\n\n![img](https://i-blog.csdnimg.cn/img_convert/9f513b693bf85d8d26ceb6abc09f60ba.png)\n\n###### L4é˜¶æ®µï¼šç²¾è¿›ç¯‡ä¸¨æ¨¡å‹å¾®è°ƒä¸ç§æœ‰åŒ–éƒ¨ç½²\n\nL4é˜¶æ®µï¼šå¤§æ¨¡å‹çš„å¾®è°ƒå’Œç§æœ‰åŒ–éƒ¨ç½²ï¼Œæ›´åŠ æ·±å…¥çš„æ¢è®¨Transformeræ¶æ„ï¼Œå­¦ä¹ å¤§æ¨¡å‹çš„å¾®è°ƒæŠ€æœ¯ï¼Œåˆ©ç”¨DeepSpeedã€Lamam Factoryç­‰å·¥å…·å¿«é€Ÿè¿›è¡Œæ¨¡å‹å¾®è°ƒï¼Œå¹¶é€šè¿‡Ollamaã€vLLMç­‰æ¨ç†éƒ¨ç½²æ¡†æ¶ï¼Œå®ç°æ¨¡å‹çš„å¿«é€Ÿéƒ¨ç½²ã€‚\n\n![img](https://i-blog.csdnimg.cn/img_convert/b8695d8cb21de9e000917b945b36fa1d.png)\n\n![img](https://i-blog.csdnimg.cn/img_convert/b8695d8cb21de9e000917b945b36fa1d.png)\n\n###### L5é˜¶æ®µï¼šä¸“é¢˜é›†ä¸¨ç‰¹è®­ç¯‡ ã€å½•æ’­è¯¾ã€‘\n\n### img å››ã€èµ„æ–™é¢†å–ï¼šå…¨å¥—å†…å®¹å…è´¹æŠ±èµ°ï¼Œå­¦ AI ä¸ç”¨å†æ‰¾ç¬¬äºŒä»½\n\n![img](https://i-blog.csdnimg.cn/img_convert/a2eecf1cb9ef0450bec7b4dd66d8e6a2.png)\n\nä¸ç®¡ä½ æ˜¯ 0 åŸºç¡€æƒ³å…¥é—¨ AI å¤§æ¨¡å‹ï¼Œè¿˜æ˜¯æœ‰åŸºç¡€æƒ³å†²åˆºå¤§å‚ã€äº†è§£è¡Œä¸šè¶‹åŠ¿ï¼Œè¿™ä»½èµ„æ–™éƒ½èƒ½æ»¡è¶³ä½ ï¼  \nç°åœ¨åªéœ€æŒ‰ç…§æç¤ºæ“ä½œï¼Œå°±èƒ½å…è´¹é¢†å–ï¼š\n\n**ğŸ‘‡ğŸ‘‡æ‰«ç å…è´¹é¢†å–å…¨éƒ¨å†…å®¹ğŸ‘‡ğŸ‘‡**\n\n\u200b![](https://i-blog.csdnimg.cn/blog_migrate/35a667356d00b606992c228becf1f3a8.png)\n\n![](https://i-blog.csdnimg.cn/blog_migrate/35a667356d00b606992c228becf1f3a8.png)\n\n2025 å¹´æƒ³æŠ“ä½ AI å¤§æ¨¡å‹çš„é£å£ï¼Ÿåˆ«çŠ¹è±«ï¼Œè¿™ä»½å…è´¹èµ„æ–™å°±æ˜¯ä½ çš„ â€œèµ·è·‘çº¿â€ï¼\n\n![Logo](https://i-blog.csdnimg.cn/devpress/blog/51b6b18b57a24ac185913dd7db13ea07.jpg)\n\nç«å±±å¼•æ“å¼€å‘è€…ç¤¾åŒºæ˜¯ç«å±±å¼•æ“æ‰“é€ çš„AIæŠ€æœ¯ç”Ÿæ€å¹³å°ï¼Œèšç„¦Agentä¸å¤§æ¨¡å‹å¼€å‘ï¼Œæä¾›è±†åŒ…ç³»åˆ—æ¨¡å‹ï¼ˆå›¾åƒ/è§†é¢‘/è§†è§‰ï¼‰ã€æ™ºèƒ½åˆ†æä¸ä¼šè¯å·¥å…·ï¼Œå¹¶é…å¥—è¯„æµ‹é›†ã€åŠ¨æ‰‹å®éªŒå®¤åŠè¡Œä¸šæ¡ˆä¾‹åº“ã€‚ç¤¾åŒºé€šè¿‡æŠ€æœ¯æ²™é¾™ã€æŒ‘æˆ˜èµ›ç­‰æ´»åŠ¨ä¿ƒè¿›å¼€å‘è€…æˆé•¿ï¼Œæ–°ç”¨æˆ·å¯é¢†50ä¸‡Tokensæƒç›Šï¼ŒåŠ©åŠ›æ„å»ºæ™ºèƒ½åº”ç”¨ã€‚\n\næ›´å¤šæ¨è\n\nChessç”¨æˆ·ç•Œé¢è®¾è®¡ï¼šTailwind CSSæ ·å¼ç³»ç»Ÿå’Œç»„ä»¶åº“\n\nGitHubæ¨èé¡¹ç›®ç²¾é€‰ä¸­çš„ch/chessæ˜¯ä¸€ä¸ªç±»ä¼¼chess.comçš„å¤šäººåœ¨çº¿è±¡æ£‹å¹³å°ï¼Œå®ƒé‡‡ç”¨ç°ä»£åŒ–çš„å‰ç«¯æŠ€æœ¯æ ˆæ„å»ºï¼Œå°¤å…¶åœ¨ç”¨æˆ·ç•Œé¢è®¾è®¡ä¸Šé€šè¿‡Tailwind CSSæ ·å¼ç³»ç»Ÿå’Œç»„ä»¶åº“å®ç°äº†ä¼˜é›…ä¸”åŠŸèƒ½ä¸°å¯Œçš„äº¤äº’ä½“éªŒã€‚æœ¬æ–‡å°†æ·±å…¥æ¢è®¨è¯¥é¡¹ç›®å¦‚ä½•åˆ©ç”¨Tailwind CSSæ‰“é€ ä¸€è‡´çš„è®¾è®¡è¯­è¨€å’Œé«˜æ•ˆçš„ç»„ä»¶ç³»ç»Ÿï¼Œä¸ºè±¡æ£‹çˆ±å¥½è€…æä¾›æ²‰æµ¸å¼çš„æ¸¸æˆç•Œé¢ã€‚## ğŸ¨ Tailwind CSSæ ·å¼ç³»ç»Ÿï¼šæ„å»ºç»Ÿä¸€è§†\n\n![avatar](https://i-blog.csdnimg.cn/devpress/blog/51b6b18b57a24ac185913dd7db13ea07.jpg)\n\nç»ˆææŒ‡å—ï¼šGPT-Engineerå¦‚ä½•é€šè¿‡AIè‡ªåŠ¨å‘ç°ä»£ç é—®é¢˜å¹¶æå‡è´¨é‡\n\nGPT-Engineeræ˜¯ä¸€æ¬¾å¼ºå¤§çš„AIé©±åŠ¨ä»£ç å·¥å…·ï¼Œå®ƒèƒ½å¸®åŠ©å¼€å‘è€…è‡ªåŠ¨æ£€æµ‹æ½œåœ¨ä»£ç é—®é¢˜ã€ä¼˜åŒ–ä»£ç è´¨é‡ï¼Œè®©ç¼–ç¨‹æ•ˆç‡æå‡3å€ä»¥ä¸Šã€‚æ— è®ºæ˜¯æ–°æ‰‹è¿˜æ˜¯èµ„æ·±å¼€å‘è€…ï¼Œéƒ½èƒ½é€šè¿‡è¿™æ¬¾å·¥å…·è½»æ¾å‘ç°ä»£ç ä¸­çš„éšè—ç¼ºé™·ï¼Œå‡å°‘è°ƒè¯•æ—¶é—´ï¼Œé‡Šæ”¾æ›´å¤šç²¾åŠ›åœ¨åˆ›é€ æ€§å·¥ä½œä¸Šã€‚## ä¸€é”®å‘ç°ä»£ç é—®é¢˜ï¼šGPT-Engineerçš„AIå®¡æŸ¥é­”åŠ›GPT-Engineerçš„æ ¸å¿ƒèƒ½åŠ›åœ¨äºå…¶å†…ç½®çš„æ™ºèƒ½ä»£ç åˆ†æç³»ç»Ÿã€‚é€šè¿‡é›†æˆPythonä»£ç æ ¼å¼\n\n![avatar](https://i-blog.csdnimg.cn/devpress/blog/51b6b18b57a24ac185913dd7db13ea07.jpg)\n\nSatDumpä¸­çš„çº é”™ç¼–ç æŠ€æœ¯ï¼šä»RSç åˆ°Turboç çš„å®Œæ•´å®ç°æŒ‡å—\n\nåœ¨å«æ˜Ÿæ•°æ®ä¼ è¾“è¿‡ç¨‹ä¸­ï¼Œä¿¡å·å¾€å¾€ä¼šå—åˆ°å„ç§å¹²æ‰°ï¼Œå¯¼è‡´æ•°æ®é”™è¯¯ã€‚SatDumpä½œä¸ºä¸€æ¬¾é€šç”¨å«æ˜Ÿæ•°æ®å¤„ç†è½¯ä»¶ï¼Œé›†æˆäº†å¤šç§å…ˆè¿›çš„çº é”™ç¼–ç æŠ€æœ¯ï¼Œç¡®ä¿ä»å«æ˜Ÿæ¥æ”¶åˆ°çš„æ•°æ®èƒ½å¤Ÿå‡†ç¡®è§£ç ã€‚æœ¬æ–‡å°†æ·±å…¥è§£æSatDumpä¸­ä»Reed-Solomonï¼ˆRSï¼‰ç åˆ°Turboç çš„å®ç°ç»†èŠ‚ï¼Œå¸®åŠ©è¯»è€…ç†è§£è¿™äº›æŠ€æœ¯å¦‚ä½•ä¿éšœå«æ˜Ÿé€šä¿¡çš„å¯é æ€§ã€‚## ä¸ºä»€ä¹ˆçº é”™ç¼–ç å¯¹å«æ˜Ÿæ•°æ®è‡³å…³é‡è¦ï¼Ÿå«æ˜Ÿä¸åœ°é¢ç«™ä¹‹é—´çš„é€šä¿¡é“¾è·¯é¢ä¸´ç€ç©ºé—´è¾å°„ã€å¤§\n\n![avatar](https://i-blog.csdnimg.cn/devpress/blog/51b6b18b57a24ac185913dd7db13ea07.jpg)\n![æµè§ˆé‡](https://csdnimg.cn/release/devpress/public/img/watch.a5bd9e9b.svg)\n![ç‚¹èµ](https://csdnimg.cn/release/devpress/public/img/thumb.a0b81433.svg)\n![æ”¶è—](https://csdnimg.cn/release/devpress/public/img/mark.f1a889ab.svg)\n![](https://csdnimg.cn/release/devpress/public/img/share.f1fdda75.svg)\n\næ‰«ä¸€æ‰«åˆ†äº«å†…å®¹\n\n![]()\n![](https://csdnimg.cn/release/devpress/public/img/share.f1fdda75.svg)\n\n### æ‰€æœ‰è¯„è®º(0)\n\n![]()![](https://profile-avatar.csdnimg.cn/eb75dcc8773540bda9379c1546d0464b_y525698136.jpg!1)\n\n### [ç¨‹åºå­¦åˆ°æ˜](https://devpress.csdn.net/user/Y525698136)\n\n![](https://csdnimg.cn/release/devpress/public/img/devote.fe704c8a.svg)\n![](https://csdnimg.cn/release/devpress/public/img/top.c3a2945a.svg)\n![]()![logo](https://csdnimg.cn/release/devpress/public/img/csdn-logo.07312d72.png)\n![logo](https://csdnimg.cn/release/devpress/public/img/csdn-logo.07312d72.png)', 'doi': '', 'published_date': None, 'pdf_url': '', 'url': 'https://adg.csdn.net/696f5616437a6b40336a0d48.html', 'source': 'tavily', 'categories': ['web_search'], 'keywords': [], 'citations': 0, 'references': [], 'extra': {'score': 0.9999349, 'saved_path': None}}
2026-02-21 19:56:59,410 - __main__ - INFO - call_tool: name=tavily_download, args={'papers': [{'paper_id': '', 'title': 'ä½¿ç”¨å­å›¾ - LangChain æ–‡æ¡£', 'authors': [], 'abstract': '* [è®¾ç½®](#setup)\n* [å…±äº«çŠ¶æ€æ¨¡å¼](#shared-state-schemas)\n* [ä¸åŒçŠ¶æ€æ¨¡å¼](#different-state-schemas)\n* [æ·»åŠ æŒä¹…åŒ–](#add-persistence)\n* [æŸ¥çœ‹å­å›¾çŠ¶æ€](#view-subgraph-state)\n* [æµå¼ä¼ è¾“å­å›¾è¾“å‡º](#stream-subgraph-outputs)\n\n# ä½¿ç”¨å­å›¾[Â¶](#use-subgraphs "Permanent link")\n\næœ¬æŒ‡å—ä»‹ç»äº†ä½¿ç”¨[å­å›¾](../../concepts/subgraphs/)çš„æœºåˆ¶ã€‚å­å›¾çš„ä¸€ä¸ªå¸¸è§åº”ç”¨æ˜¯æ„å»º[å¤šæ™ºèƒ½ä½“](../../concepts/multi_agent/)ç³»ç»Ÿã€‚\n\næ·»åŠ å­å›¾æ—¶ï¼Œæ‚¨éœ€è¦å®šä¹‰çˆ¶å›¾å’Œå­å›¾å¦‚ä½•é€šä¿¡\n\n* [å…±äº«çŠ¶æ€æ¨¡å¼](#shared-state-schemas) â€” çˆ¶å›¾å’Œå­å›¾åœ¨å…¶çŠ¶æ€[æ¨¡å¼](../../concepts/low_level/#state)ä¸­æ‹¥æœ‰**å…±äº«çš„çŠ¶æ€é”®**\n* [ä¸åŒçŠ¶æ€æ¨¡å¼](#different-state-schemas) â€” çˆ¶å›¾å’Œå­å›¾çš„[æ¨¡å¼](../../concepts/low_level/#state)ä¸­**æ²¡æœ‰å…±äº«çš„çŠ¶æ€é”®**\n\n## è®¾ç½®[Â¶](#setup "æ°¸ä¹…é“¾æ¥")\n\n```\npip install -U langgraph    \n```\n\nä¸º LangGraph å¼€å‘è®¾ç½® LangSmith\n\næ³¨å†Œ [LangSmith](https://smith.langchain.com) ä»¥å¿«é€Ÿå‘ç°é—®é¢˜å¹¶æé«˜æ‚¨çš„ LangGraph é¡¹ç›®çš„æ€§èƒ½ã€‚LangSmith å…è®¸æ‚¨ä½¿ç”¨è·Ÿè¸ªæ•°æ®æ¥è°ƒè¯•ã€æµ‹è¯•å’Œç›‘æ§æ‚¨ä½¿ç”¨ LangGraph æ„å»ºçš„ LLM åº”ç”¨ â€” åœ¨[æ­¤å¤„](https://langsmith.langchain.ac.cn)é˜…è¯»æ›´å¤šå…³äºå¦‚ä½•å…¥é—¨çš„ä¿¡æ¯ã€‚\n\n## å…±äº«çŠ¶æ€æ¨¡å¼[Â¶](#shared-state-schemas "Permanent link")\n\nä¸€ç§å¸¸è§æƒ…å†µæ˜¯çˆ¶å›¾å’Œå­å›¾é€šè¿‡[æ¨¡å¼](../../concepts/low_level/#state)ä¸­çš„å…±äº«çŠ¶æ€é”®ï¼ˆé€šé“ï¼‰è¿›è¡Œé€šä¿¡ã€‚ä¾‹å¦‚ï¼Œåœ¨[å¤šæ™ºèƒ½ä½“](../../concepts/multi_agent/)ç³»ç»Ÿä¸­ï¼Œæ™ºèƒ½ä½“é€šå¸¸é€šè¿‡å…±äº«çš„ [messages](https://github.langchain.ac.cn/langgraph/concepts/low_level.md#why-use-messages) é”®è¿›è¡Œé€šä¿¡ã€‚\n\nå¦‚æœæ‚¨çš„å­å›¾ä¸çˆ¶å›¾å…±äº«çŠ¶æ€é”®ï¼Œæ‚¨å¯ä»¥æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤å°†å…¶æ·»åŠ åˆ°æ‚¨çš„å›¾ä¸­\n\n1. å®šä¹‰å­å›¾å·¥ä½œæµï¼ˆåœ¨ä¸‹é¢çš„ç¤ºä¾‹ä¸­ä¸º `subgraph_builder`ï¼‰å¹¶ç¼–è¯‘å®ƒ\n2. åœ¨å®šä¹‰çˆ¶å›¾å·¥ä½œæµæ—¶ï¼Œå°†ç¼–è¯‘åçš„å­å›¾ä¼ é€’ç»™ `.add_node` æ–¹æ³•\n\n*API å‚è€ƒï¼š[StateGraph](https://github.langchain.ac.cn/langgraph/reference/graphs/#langgraph.graph.state.StateGraph)*\n\n```\n from typing_extensions import TypedDict from  typing_extensions  import TypedDictfrom langgraph.graph.state import StateGraph, START from  langgraph.graph.state  import StateGraph, START  class State(TypedDict): class  State(TypedDict): foo: str foo: str  # Subgraph # Subgraph  def subgraph_node_1(state: State): def  subgraph_node_1(state: State): return {"foo": "hi! " + state["foo"]} return{"foo":"hi! " + state["foo"]}  subgraph_builder = StateGraph(State) subgraph_builder = StateGraph(State)subgraph_builder.add_node(subgraph_node_1) subgraph_builder. add_node(subgraph_node_1)subgraph_builder.add_edge(START, "subgraph_node_1") subgraph_builder. add_edge(START, "subgraph_node_1")subgraph = subgraph_builder.compile() subgraph = subgraph_builder. compile()  # Parent graph # Parent graph  builder = StateGraph(State) builder = StateGraph(State)builder.add_node("node_1", subgraph) builder. add_node("node_1", subgraph)builder.add_edge(START, "node_1") builder. add_edge(START, "node_1")graph = builder.compile() graph = builder. compile()\n```\n\n å®Œæ•´ç¤ºä¾‹ï¼šå…±äº«çŠ¶æ€æ¨¡å¼\n\n```\n from typing_extensions import TypedDict from  typing_extensions  import TypedDictfrom langgraph.graph.state import StateGraph, START from  langgraph.graph.state  import StateGraph, START  # Define subgraph # Define subgraphclass SubgraphState(TypedDict): class  SubgraphState(TypedDict): foo: str # (1)!  foo: str# (1)!  bar: str # (2)! bar: str# (2)!  def subgraph_node_1(state: SubgraphState): def  subgraph_node_1(state: SubgraphState): return {"bar": "bar"} return{"bar": "bar"}  def subgraph_node_2(state: SubgraphState): def  subgraph_node_2(state: SubgraphState): # note that this node is using a state key (\'bar\') that is only available in the subgraph # note that this node is using a state key (\'bar\') that is only available in the subgraph # and is sending update on the shared state key (\'foo\') # and is sending update on the shared state key (\'foo\') return {"foo": state["foo"] + state["bar"]} return{"foo": state["foo"] + state["bar"]}  subgraph_builder = StateGraph(SubgraphState) subgraph_builder = StateGraph(SubgraphState)subgraph_builder.add_node(subgraph_node_1) subgraph_builder. add_node(subgraph_node_1)subgraph_builder.add_node(subgraph_node_2) subgraph_builder. add_node(subgraph_node_2)subgraph_builder.add_edge(START, "subgraph_node_1") subgraph_builder. add_edge(START, "subgraph_node_1")subgraph_builder.add_edge("subgraph_node_1", "subgraph_node_2") subgraph_builder. add_edge("subgraph_node_1", "subgraph_node_2")subgraph = subgraph_builder.compile() subgraph = subgraph_builder. compile()  # Define parent graph # Define parent graphclass ParentState(TypedDict): class  ParentState(TypedDict): foo: str foo: str  def node_1(state: ParentState): def  node_1(state: ParentState): return {"foo": "hi! " + state["foo"]} return{"foo":"hi! " + state["foo"]}  builder = StateGraph(ParentState) builder = StateGraph(ParentState)builder.add_node("node_1", node_1) builder. add_node("node_1", node_1)builder.add_node("node_2", subgraph) builder. add_node("node_2", subgraph)builder.add_edge(START, "node_1") builder. add_edge(START, "node_1")builder.add_edge("node_1", "node_2") builder. add_edge("node_1", "node_2")graph = builder.compile() graph = builder. compile()  for chunk in graph.stream({"foo": "foo"}): for chunk in graph. stream({"foo": "foo"}): print(chunk) print(chunk)\n```\n\n1. æ­¤é”®ä¸çˆ¶å›¾çŠ¶æ€å…±äº«\n2. æ­¤é”®æ˜¯ `SubgraphState` ç§æœ‰çš„ï¼Œå¯¹çˆ¶å›¾ä¸å¯è§\n\n```\n{\'node_1\': {\'foo\': \'hi! foo\'}} {\'node_2\': {\'foo\': \'hi! foobar\'}} \n```\n\n## ä¸åŒçŠ¶æ€æ¨¡å¼[Â¶](#different-state-schemas "Permanent link")\n\nå¯¹äºæ›´å¤æ‚çš„ç³»ç»Ÿï¼Œæ‚¨å¯èƒ½å¸Œæœ›å®šä¹‰ä¸çˆ¶å›¾å…·æœ‰**å®Œå…¨ä¸åŒæ¨¡å¼**ï¼ˆæ²¡æœ‰å…±äº«é”®ï¼‰çš„å­å›¾ã€‚ä¾‹å¦‚ï¼Œæ‚¨å¯èƒ½å¸Œæœ›ä¸º[å¤šæ™ºèƒ½ä½“](../../concepts/multi_agent/)ç³»ç»Ÿä¸­çš„æ¯ä¸ªæ™ºèƒ½ä½“ä¿ç•™ç§æœ‰çš„æ¶ˆæ¯å†å²è®°å½•ã€‚\n\nå¦‚æœæ‚¨çš„åº”ç”¨ç¨‹åºå±äºè¿™ç§æƒ…å†µï¼Œæ‚¨éœ€è¦å®šä¹‰ä¸€ä¸ª**è°ƒç”¨å­å›¾çš„èŠ‚ç‚¹å‡½æ•°**ã€‚æ­¤å‡½æ•°éœ€è¦åœ¨è°ƒç”¨å­å›¾ä¹‹å‰å°†è¾“å…¥ï¼ˆçˆ¶ï¼‰çŠ¶æ€è½¬æ¢ä¸ºå­å›¾çŠ¶æ€ï¼Œå¹¶åœ¨ä»èŠ‚ç‚¹è¿”å›çŠ¶æ€æ›´æ–°ä¹‹å‰å°†ç»“æœè½¬æ¢å›çˆ¶çŠ¶æ€ã€‚\n\n*API å‚è€ƒï¼š[StateGraph](https://github.langchain.ac.cn/langgraph/reference/graphs/#langgraph.graph.state.StateGraph)*\n\n```\n from typing_extensions import TypedDict from  typing_extensions  import TypedDictfrom langgraph.graph.state import StateGraph, START from  langgraph.graph.state  import StateGraph, START  class SubgraphState(TypedDict): class  SubgraphState(TypedDict): bar: str bar: str  # Subgraph # Subgraph  def subgraph_node_1(state: SubgraphState): def  subgraph_node_1(state: SubgraphState): return {"bar": "hi! " + state["bar"]} return{"bar":"hi! " + state["bar"]}  subgraph_builder = StateGraph(SubgraphState) subgraph_builder = StateGraph(SubgraphState)subgraph_builder.add_node(subgraph_node_1) subgraph_builder. add_node(subgraph_node_1)subgraph_builder.add_edge(START, "subgraph_node_1") subgraph_builder. add_edge(START, "subgraph_node_1")subgraph = subgraph_builder.compile() subgraph = subgraph_builder. compile()  # Parent graph # Parent graph  class State(TypedDict): class  State(TypedDict): foo: str foo: str  def call_subgraph(state: State): def  call_subgraph(state: State): subgraph_output = subgraph.invoke({"bar": state["foo"]}) # (1)! subgraph_output = subgraph. invoke({"bar": state["foo"]})# (1)! return {"foo": subgraph_output["bar"]} # (2)! return{"foo": subgraph_output["bar"]}# (2)!  builder = StateGraph(State) builder = StateGraph(State)builder.add_node("node_1", call_subgraph) builder. add_node("node_1", call_subgraph)builder.add_edge(START, "node_1") builder. add_edge(START, "node_1")graph = builder.compile() graph = builder. compile()\n```\n\n1. å°†çŠ¶æ€è½¬æ¢ä¸ºå­å›¾çŠ¶æ€\n2. å°†å“åº”è½¬æ¢å›çˆ¶çŠ¶æ€\n\n å®Œæ•´ç¤ºä¾‹ï¼šä¸åŒçŠ¶æ€æ¨¡å¼\n\n```\n from typing_extensions import TypedDict from  typing_extensions  import TypedDictfrom langgraph.graph.state import StateGraph, START from  langgraph.graph.state  import StateGraph, START  # Define subgraph # Define subgraphclass SubgraphState(TypedDict): class  SubgraphState(TypedDict):  # note that none of these keys are shared with the parent graph state # note that none of these keys are shared with the parent graph state bar: str bar: str baz: str baz: str  def subgraph_node_1(state: SubgraphState): def  subgraph_node_1(state: SubgraphState): return {"baz": "baz"} return{"baz": "baz"}  def subgraph_node_2(state: SubgraphState): def  subgraph_node_2(state: SubgraphState): return {"bar": state["bar"] + state["baz"]} return{"bar": state["bar"] + state["baz"]}  subgraph_builder = StateGraph(SubgraphState) subgraph_builder = StateGraph(SubgraphState)subgraph_builder.add_node(subgraph_node_1) subgraph_builder. add_node(subgraph_node_1)subgraph_builder.add_node(subgraph_node_2) subgraph_builder. add_node(subgraph_node_2)subgraph_builder.add_edge(START, "subgraph_node_1") subgraph_builder. add_edge(START, "subgraph_node_1")subgraph_builder.add_edge("subgraph_node_1", "subgraph_node_2") subgraph_builder. add_edge("subgraph_node_1", "subgraph_node_2")subgraph = subgraph_builder.compile() subgraph = subgraph_builder. compile()  # Define parent graph # Define parent graphclass ParentState(TypedDict): class  ParentState(TypedDict): foo: str foo: str  def node_1(state: ParentState): def  node_1(state: ParentState): return {"foo": "hi! " + state["foo"]} return{"foo":"hi! " + state["foo"]}  def node_2(state: ParentState): def  node_2(state: ParentState): response = subgraph.invoke({"bar": state["foo"]}) # (1)! response = subgraph. invoke({"bar": state["foo"]})# (1)! return {"foo": response["bar"]} # (2)! return{"foo": response["bar"]}# (2)!   builder = StateGraph(ParentState) builder = StateGraph(ParentState)builder.add_node("node_1", node_1) builder. add_node("node_1", node_1)builder.add_node("node_2", node_2) builder. add_node("node_2", node_2)builder.add_edge(START, "node_1") builder. add_edge(START, "node_1")builder.add_edge("node_1", "node_2") builder. add_edge("node_1", "node_2")graph = builder.compile() graph = builder. compile()  for chunk in graph.stream({"foo": "foo"}, subgraphs=True): for chunk in graph. stream({"foo": "foo"}, subgraphs = True): print(chunk) print(chunk)\n```\n\n1. å°†çŠ¶æ€è½¬æ¢ä¸ºå­å›¾çŠ¶æ€\n2. å°†å“åº”è½¬æ¢å›çˆ¶çŠ¶æ€\n\n```\n((), {\'node_1\': {\'foo\': \'hi! foo\'}}) ((\'node_2:9c36dd0f-151a-cb42-cbad-fa2f851f9ab7\',), {\'grandchild_1\': {\'my_grandchild_key\': \'hi Bob, how are you\'}}) ((\'node_2:9c36dd0f-151a-cb42-cbad-fa2f851f9ab7\',), {\'grandchild_2\': {\'bar\': \'hi! foobaz\'}}) ((), {\'node_2\': {\'foo\': \'hi! foobaz\'}}) \n```\n\n  å®Œæ•´ç¤ºä¾‹ï¼šä¸åŒçŠ¶æ€æ¨¡å¼ï¼ˆä¸¤çº§å­å›¾ï¼‰\n\nè¿™æ˜¯ä¸€ä¸ªå…·æœ‰ä¸¤çº§å­å›¾çš„ç¤ºä¾‹ï¼šçˆ¶çº§ -> å­çº§ -> å­™çº§ã€‚\n\n```\n # Grandchild graph # Grandchild graph from typing_extensions import TypedDict from  typing_extensions  import TypedDictfrom langgraph.graph.state import StateGraph, START, END from  langgraph.graph.state  import StateGraph, START, END  class GrandChildState(TypedDict): class  GrandChildState(TypedDict): my_grandchild_key: str my_grandchild_key: str  def grandchild_1(state: GrandChildState) -> GrandChildState: def  grandchild_1(state: GrandChildState) -> GrandChildState: # NOTE: child or parent keys will not be accessible here # NOTE: child or parent keys will not be accessible here return {"my_grandchild_key": state["my_grandchild_key"] + ", how are you"} return{"my_grandchild_key": state["my_grandchild_key"] +", how are you"}   grandchild = StateGraph(GrandChildState) grandchild = StateGraph(GrandChildState)grandchild.add_node("grandchild_1", grandchild_1) grandchild. add_node("grandchild_1", grandchild_1)  grandchild.add_edge(START, "grandchild_1") grandchild. add_edge(START, "grandchild_1")grandchild.add_edge("grandchild_1", END) grandchild. add_edge("grandchild_1", END)  grandchild_graph = grandchild.compile() grandchild_graph = grandchild. compile()  # Child graph # Child graphclass ChildState(TypedDict): class  ChildState(TypedDict): my_child_key: str my_child_key: str  def call_grandchild_graph(state: ChildState) -> ChildState: def  call_grandchild_graph(state: ChildState) -> ChildState: # NOTE: parent or grandchild keys won\'t be accessible here # NOTE: parent or grandchild keys won\'t be accessible here grandchild_graph_input = {"my_grandchild_key": state["my_child_key"]} # (1)! grandchild_graph_input ={"my_grandchild_key": state["my_child_key"]}# (1)! grandchild_graph_output = grandchild_graph.invoke(grandchild_graph_input) grandchild_graph_output = grandchild_graph. invoke(grandchild_graph_input) return {"my_child_key": grandchild_graph_output["my_grandchild_key"] + " today?"} # (2)! return{"my_child_key": grandchild_graph_output["my_grandchild_key"] + " today?"}# (2)!  child = StateGraph(ChildState) child = StateGraph(ChildState)child.add_node("child_1", call_grandchild_graph) # (3)! child. add_node("child_1", call_grandchild_graph)# (3)!child.add_edge(START, "child_1") child. add_edge(START, "child_1")child.add_edge("child_1", END) child. add_edge("child_1", END)child_graph = child.compile() child_graph = child. compile()  # Parent graph # Parent graphclass ParentState(TypedDict): class  ParentState(TypedDict): my_key: str my_key: str  def parent_1(state: ParentState) -> ParentState: def  parent_1(state: ParentState) -> ParentState: # NOTE: child or grandchild keys won\'t be accessible here # NOTE: child or grandchild keys won\'t be accessible here return {"my_key": "hi " + state["my_key"]} return{"my_key": "hi " + state["my_key"]}  def parent_2(state: ParentState) -> ParentState: def  parent_2(state: ParentState) -> ParentState: return {"my_key": state["my_key"] + " bye!"} return{"my_key": state["my_key"] +" bye!"}  def call_child_graph(state: ParentState) -> ParentState: def  call_child_graph(state: ParentState) -> ParentState: child_graph_input = {"my_child_key": state["my_key"]} # (4)! child_graph_input ={"my_child_key": state["my_key"]}# (4)! child_graph_output = child_graph.invoke(child_graph_input) child_graph_output = child_graph. invoke(child_graph_input) return {"my_key": child_graph_output["my_child_key"]} # (5)! return{"my_key": child_graph_output["my_child_key"]}# (5)!  parent = StateGraph(ParentState) parent = StateGraph(ParentState)parent.add_node("parent_1", parent_1) parent. add_node("parent_1", parent_1)parent.add_node("child", call_child_graph) # (6)! parent. add_node("child", call_child_graph)# (6)!parent.add_node("parent_2", parent_2) parent. add_node("parent_2", parent_2)  parent.add_edge(START, "parent_1") parent. add_edge(START, "parent_1")parent.add_edge("parent_1", "child") parent. add_edge("parent_1", "child")parent.add_edge("child", "parent_2") parent. add_edge("child", "parent_2")parent.add_edge("parent_2", END) parent. add_edge("parent_2", END)  parent_graph = parent.compile() parent_graph = parent. compile()  for chunk in parent_graph.stream({"my_key": "Bob"}, subgraphs=True): for chunk in parent_graph. stream({"my_key": "Bob"}, subgraphs = True): print(chunk) print(chunk)\n```\n\n1. æˆ‘ä»¬æ­£åœ¨å°†çŠ¶æ€ä»å­çŠ¶æ€é€šé“ï¼ˆ`my_child_key`ï¼‰è½¬æ¢ä¸ºå­™çŠ¶æ€é€šé“ï¼ˆ`my_grandchild_key`ï¼‰\n2. æˆ‘ä»¬æ­£åœ¨å°†çŠ¶æ€ä»å­™çŠ¶æ€é€šé“ï¼ˆ`my_grandchild_key`ï¼‰è½¬æ¢å›å­çŠ¶æ€é€šé“ï¼ˆ`my_child_key`ï¼‰\n3. æˆ‘ä»¬åœ¨è¿™é‡Œä¼ é€’ä¸€ä¸ªå‡½æ•°ï¼Œè€Œä¸ä»…ä»…æ˜¯ç¼–è¯‘åçš„å›¾ï¼ˆ`grandchild_graph`ï¼‰\n4. æˆ‘ä»¬æ­£åœ¨å°†çŠ¶æ€ä»çˆ¶çŠ¶æ€é€šé“ï¼ˆ`my_key`ï¼‰è½¬æ¢ä¸ºå­çŠ¶æ€é€šé“ï¼ˆ`my_child_key`ï¼‰\n5. æˆ‘ä»¬æ­£åœ¨å°†çŠ¶æ€ä»å­çŠ¶æ€é€šé“ï¼ˆ`my_child_key`ï¼‰è½¬æ¢å›çˆ¶çŠ¶æ€é€šé“ï¼ˆ`my_key`ï¼‰\n6. æˆ‘ä»¬åœ¨è¿™é‡Œä¼ é€’ä¸€ä¸ªå‡½æ•°ï¼Œè€Œä¸ä»…ä»…æ˜¯ç¼–è¯‘åçš„å›¾ï¼ˆ`child_graph`ï¼‰\n\n```\n((), {\'parent_1\': {\'my_key\': \'hi Bob\'}}) ((\'child:2e26e9ce-602f-862c-aa66-1ea5a4655e3b\', \'child_1:781bb3b1-3971-84ce-810b-acf819a03f9c\'), {\'grandchild_1\': {\'my_grandchild_key\': \'hi Bob, how are you\'}}) ((\'child:2e26e9ce-602f-862c-aa66-1ea5a4655e3b\',), {\'child_1\': {\'my_child_key\': \'hi Bob, how are you today?\'}}) ((), {\'child\': {\'my_key\': \'hi Bob, how are you today?\'}}) ((), {\'parent_2\': {\'my_key\': \'hi Bob, how are you today? bye!\'}}) \n```\n\n## æ·»åŠ æŒä¹…åŒ–[Â¶](#add-persistence "Permanent link")\n\næ‚¨åªéœ€è¦**åœ¨ç¼–è¯‘çˆ¶å›¾æ—¶æä¾›æ£€æŸ¥ç‚¹ï¼ˆcheckpointerï¼‰**ã€‚LangGraph å°†è‡ªåŠ¨å°†æ£€æŸ¥ç‚¹ä¼ æ’­åˆ°å­å›¾ã€‚\n\n*API å‚è€ƒï¼š [START](https://github.langchain.ac.cn/langgraph/reference/constants/#langgraph.constants.START) | [StateGraph](https://github.langchain.ac.cn/langgraph/reference/graphs/#langgraph.graph.state.StateGraph) | [InMemorySaver](https://github.langchain.ac.cn/langgraph/reference/checkpoints/#langgraph.checkpoint.memory.InMemorySaver)*\n\n```\nfrom langgraph.graph import START, StateGraph from  langgraph.graph  import START, StateGraphfrom langgraph.checkpoint.memory import InMemorySaver from  langgraph.checkpoint.memory  import InMemorySaver from typing_extensions import TypedDict from  typing_extensions  import TypedDict  class State(TypedDict): class  State(TypedDict): foo: str foo: str  # Subgraph # Subgraph  def subgraph_node_1(state: State): def  subgraph_node_1(state: State): return {"foo": state["foo"] + "bar"} return{"foo": state["foo"] + "bar"}  subgraph_builder = StateGraph(State) subgraph_builder = StateGraph(State)subgraph_builder.add_node(subgraph_node_1) subgraph_builder. add_node(subgraph_node_1)subgraph_builder.add_edge(START, "subgraph_node_1") subgraph_builder. add_edge(START, "subgraph_node_1")subgraph = subgraph_builder.compile() subgraph = subgraph_builder. compile()  # Parent graph # Parent graph  builder = StateGraph(State) builder = StateGraph(State)builder.add_node("node_1", subgraph) builder. add_node("node_1", subgraph)builder.add_edge(START, "node_1") builder. add_edge(START, "node_1")  checkpointer = InMemorySaver() checkpointer = InMemorySaver()graph = builder.compile(checkpointer=checkpointer) graph = builder. compile(checkpointer = checkpointer)\n```\n\nå¦‚æœæ‚¨å¸Œæœ›å­å›¾**æ‹¥æœ‰è‡ªå·±çš„å†…å­˜**ï¼Œæ‚¨å¯ä»¥åœ¨ç¼–è¯‘æ—¶è®¾ç½® `with checkpointer=True`ã€‚è¿™åœ¨[å¤šæ™ºèƒ½ä½“](../../concepts/multi_agent/)ç³»ç»Ÿä¸­å¾ˆæœ‰ç”¨ï¼Œå¦‚æœæ‚¨å¸Œæœ›æ™ºèƒ½ä½“èƒ½å¤Ÿè·Ÿè¸ªå…¶å†…éƒ¨æ¶ˆæ¯å†å²è®°å½•ã€‚\n\n```\nsubgraph_builder = StateGraph(...) subgraph_builder = StateGraph(...)subgraph = subgraph_builder.compile(checkpointer=True) subgraph = subgraph_builder. compile(checkpointer = True)\n```\n\n## æŸ¥çœ‹å­å›¾çŠ¶æ€[Â¶](#view-subgraph-state "Permanent link")\n\nå½“æ‚¨å¯ç”¨[æŒä¹…åŒ–](../../concepts/persistence/)åï¼Œæ‚¨å¯ä»¥é€šè¿‡ `graph.get_state(config)` [æ£€æŸ¥å›¾çš„çŠ¶æ€](../../concepts/persistence/#checkpoints)ï¼ˆæ£€æŸ¥ç‚¹ï¼‰ã€‚è¦æŸ¥çœ‹å­å›¾çš„çŠ¶æ€ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ `graph.get_state(config, subgraphs=True)`ã€‚\n\n**ä»…**åœ¨ä¸­æ–­æ—¶å¯ç”¨\n\nå­å›¾çŠ¶æ€åªèƒ½åœ¨**å­å›¾è¢«ä¸­æ–­æ—¶**æŸ¥çœ‹ã€‚ä¸€æ—¦æ‚¨æ¢å¤å›¾çš„è¿è¡Œï¼Œæ‚¨å°†æ— æ³•è®¿é—®å­å›¾çŠ¶æ€ã€‚\n\n æŸ¥çœ‹ä¸­æ–­çš„å­å›¾çŠ¶æ€\n\n```\nfrom langgraph.graph import START, StateGraph from  langgraph.graph  import START, StateGraphfrom langgraph.checkpoint.memory import InMemorySaver from  langgraph.checkpoint.memory  import InMemorySaverfrom langgraph.types import interrupt, Command from  langgraph.types  import interrupt, Command from typing_extensions import TypedDict from  typing_extensions  import TypedDict  class State(TypedDict): class  State(TypedDict): foo: str foo: str  # Subgraph # Subgraph  def subgraph_node_1(state: State): def  subgraph_node_1(state: State): value = interrupt("Provide value:") value = interrupt("Provide value:") return {"foo": state["foo"] + value} return{"foo": state["foo"] + value}  subgraph_builder = StateGraph(State) subgraph_builder = StateGraph(State)subgraph_builder.add_node(subgraph_node_1) subgraph_builder. add_node(subgraph_node_1)subgraph_builder.add_edge(START, "subgraph_node_1") subgraph_builder. add_edge(START, "subgraph_node_1")  subgraph = subgraph_builder.compile() subgraph = subgraph_builder. compile()  # Parent graph # Parent graph  builder = StateGraph(State) builder = StateGraph(State)builder.add_node("node_1", subgraph) builder. add_node("node_1", subgraph)builder.add_edge(START, "node_1") builder. add_edge(START, "node_1")  checkpointer = InMemorySaver() checkpointer = InMemorySaver()graph = builder.compile(checkpointer=checkpointer) graph = builder. compile(checkpointer = checkpointer)  config = {"configurable": {"thread_id": "1"}} config ={"configurable":{"thread_id": "1"}}  graph.invoke({"foo": ""}, config) graph. invoke({"foo": ""}, config)parent_state = graph.get_state(config) parent_state = graph. get_state(config)subgraph_state = graph.get_state(config, subgraphs=True).tasks[0].state # (1)! subgraph_state = graph. get_state(config, subgraphs = True). tasks[0]. state# (1)!  # resume the subgraph # resume the subgraphgraph.invoke(Command(resume="bar"), config) graph. invoke(Command(resume = "bar"), config)\n```\n\n1. è¿™ä»…åœ¨å­å›¾è¢«ä¸­æ–­æ—¶å¯ç”¨ã€‚ä¸€æ—¦æ‚¨æ¢å¤å›¾çš„è¿è¡Œï¼Œæ‚¨å°†æ— æ³•è®¿é—®å­å›¾çŠ¶æ€ã€‚\n\n## æµå¼ä¼ è¾“å­å›¾è¾“å‡º[Â¶](#stream-subgraph-outputs "Permanent link")\n\nè¦å°†å­å›¾çš„è¾“å‡ºåŒ…å«åœ¨æµå¼è¾“å‡ºä¸­ï¼Œæ‚¨å¯ä»¥åœ¨çˆ¶å›¾çš„ `.stream()` æ–¹æ³•ä¸­è®¾ç½® `subgraphs=True`ã€‚è¿™å°†ä»çˆ¶å›¾å’Œä»»ä½•å­å›¾ä¸­æµå¼ä¼ è¾“è¾“å‡ºã€‚\n\n```\nfor chunk in graph.stream( for chunk in graph. stream( {"foo": "foo"}, {"foo": "foo"}, subgraphs=True, # (1)! subgraphs = True,# (1)! stream_mode="updates", stream_mode = "updates",): ): print(chunk) print(chunk)\n```\n\n1. è®¾ç½® `subgraphs=True` ä»¥ä»å­å›¾ä¸­æµå¼ä¼ è¾“è¾“å‡ºã€‚\n\n ä»å­å›¾æµå¼ä¼ è¾“\n\n```\n from typing_extensions import TypedDict from  typing_extensions  import TypedDictfrom langgraph.graph.state import StateGraph, START from  langgraph.graph.state  import StateGraph, START  # Define subgraph # Define subgraphclass SubgraphState(TypedDict): class  SubgraphState(TypedDict): foo: str foo: str bar: str bar: str  def subgraph_node_1(state: SubgraphState): def  subgraph_node_1(state: SubgraphState): return {"bar": "bar"} return{"bar": "bar"}  def subgraph_node_2(state: SubgraphState): def  subgraph_node_2(state: SubgraphState): # note that this node is using a state key (\'bar\') that is only available in the subgraph # note that this node is using a state key (\'bar\') that is only available in the subgraph # and is sending update on the shared state key (\'foo\') # and is sending update on the shared state key (\'foo\') return {"foo": state["foo"] + state["bar"]} return{"foo": state["foo"] + state["bar"]}  subgraph_builder = StateGraph(SubgraphState) subgraph_builder = StateGraph(SubgraphState)subgraph_builder.add_node(subgraph_node_1) subgraph_builder. add_node(subgraph_node_1)subgraph_builder.add_node(subgraph_node_2) subgraph_builder. add_node(subgraph_node_2)subgraph_builder.add_edge(START, "subgraph_node_1") subgraph_builder. add_edge(START, "subgraph_node_1")subgraph_builder.add_edge("subgraph_node_1", "subgraph_node_2") subgraph_builder. add_edge("subgraph_node_1", "subgraph_node_2")subgraph = subgraph_builder.compile() subgraph = subgraph_builder. compile()  # Define parent graph # Define parent graphclass ParentState(TypedDict): class  ParentState(TypedDict): foo: str foo: str  def node_1(state: ParentState): def  node_1(state: ParentState): return {"foo": "hi! " + state["foo"]} return{"foo":"hi! " + state["foo"]}  builder = StateGraph(ParentState) builder = StateGraph(ParentState)builder.add_node("node_1", node_1) builder. add_node("node_1", node_1)builder.add_node("node_2", subgraph) builder. add_node("node_2", subgraph)builder.add_edge(START, "node_1") builder. add_edge(START, "node_1")builder.add_edge("node_1", "node_2") builder. add_edge("node_1", "node_2")graph = builder.compile() graph = builder. compile()  for chunk in graph.stream( for chunk in graph. stream( {"foo": "foo"}, {"foo": "foo"}, stream_mode="updates", stream_mode = "updates", subgraphs=True, # (1)! subgraphs = True,# (1)!): ): print(chunk) print(chunk)\n```\n\n1. è®¾ç½® `subgraphs=True` ä»¥ä»å­å›¾ä¸­æµå¼ä¼ è¾“è¾“å‡ºã€‚\n\n``` ((), {\'node\\_1\': {\'foo\': \'hi! foo\'}}) ((\'node\\_2:e58e5673-a661-ebb0-70d4-e298a7fc28b7\',), {\'subgraph\\_node\\_1\': {\'bar\': \'bar\'}}) ((\'node\\_2:e58e5673-a661-ebb0-70d4-e298a7fc28b7\',), {\'subgraph\\_node\\_2\': {\'foo\': \'hi! foobar\'}}) ((), {\'node\\_2\': {\'foo\': \'hi! foobar\'}})', 'doi': '', 'published_date': None, 'pdf_url': '', 'url': 'https://github.langchain.ac.cn/langgraph/how-tos/subgraph/', 'source': 'tavily', 'categories': ['web_search'], 'keywords': [], 'citations': 0, 'references': [], 'extra': {'score': 0.99998534, 'saved_path': None}}], 'save_path': '/home/qinshan/widthresearch/data/downloads'}
2026-02-21 19:56:59,411 - __main__ - INFO - handle_download: searcher=TavilySearch, input_papers=1, save_path=/home/qinshan/widthresearch/data/downloads
2026-02-21 19:56:59,411 - __main__ - INFO - handle_download: downloaded=1
2026-02-21 19:56:59,411 - __main__ - INFO - call_tool payload: source_tool=tavily_download, result_type=papers, count=1
2026-02-21 19:56:59,411 - __main__ - INFO - call_tool: name=tavily_download, result_type=papers, count=1
2026-02-21 19:56:59,412 - __main__ - DEBUG - call_tool payload sample: {'paper_id': '', 'title': 'ä½¿ç”¨å­å›¾ - LangChain æ–‡æ¡£', 'authors': [], 'abstract': '* [è®¾ç½®](#setup)\n* [å…±äº«çŠ¶æ€æ¨¡å¼](#shared-state-schemas)\n* [ä¸åŒçŠ¶æ€æ¨¡å¼](#different-state-schemas)\n* [æ·»åŠ æŒä¹…åŒ–](#add-persistence)\n* [æŸ¥çœ‹å­å›¾çŠ¶æ€](#view-subgraph-state)\n* [æµå¼ä¼ è¾“å­å›¾è¾“å‡º](#stream-subgraph-outputs)\n\n# ä½¿ç”¨å­å›¾[Â¶](#use-subgraphs "Permanent link")\n\næœ¬æŒ‡å—ä»‹ç»äº†ä½¿ç”¨[å­å›¾](../../concepts/subgraphs/)çš„æœºåˆ¶ã€‚å­å›¾çš„ä¸€ä¸ªå¸¸è§åº”ç”¨æ˜¯æ„å»º[å¤šæ™ºèƒ½ä½“](../../concepts/multi_agent/)ç³»ç»Ÿã€‚\n\næ·»åŠ å­å›¾æ—¶ï¼Œæ‚¨éœ€è¦å®šä¹‰çˆ¶å›¾å’Œå­å›¾å¦‚ä½•é€šä¿¡\n\n* [å…±äº«çŠ¶æ€æ¨¡å¼](#shared-state-schemas) â€” çˆ¶å›¾å’Œå­å›¾åœ¨å…¶çŠ¶æ€[æ¨¡å¼](../../concepts/low_level/#state)ä¸­æ‹¥æœ‰**å…±äº«çš„çŠ¶æ€é”®**\n* [ä¸åŒçŠ¶æ€æ¨¡å¼](#different-state-schemas) â€” çˆ¶å›¾å’Œå­å›¾çš„[æ¨¡å¼](../../concepts/low_level/#state)ä¸­**æ²¡æœ‰å…±äº«çš„çŠ¶æ€é”®**\n\n## è®¾ç½®[Â¶](#setup "æ°¸ä¹…é“¾æ¥")\n\n```\npip install -U langgraph    \n```\n\nä¸º LangGraph å¼€å‘è®¾ç½® LangSmith\n\næ³¨å†Œ [LangSmith](https://smith.langchain.com) ä»¥å¿«é€Ÿå‘ç°é—®é¢˜å¹¶æé«˜æ‚¨çš„ LangGraph é¡¹ç›®çš„æ€§èƒ½ã€‚LangSmith å…è®¸æ‚¨ä½¿ç”¨è·Ÿè¸ªæ•°æ®æ¥è°ƒè¯•ã€æµ‹è¯•å’Œç›‘æ§æ‚¨ä½¿ç”¨ LangGraph æ„å»ºçš„ LLM åº”ç”¨ â€” åœ¨[æ­¤å¤„](https://langsmith.langchain.ac.cn)é˜…è¯»æ›´å¤šå…³äºå¦‚ä½•å…¥é—¨çš„ä¿¡æ¯ã€‚\n\n## å…±äº«çŠ¶æ€æ¨¡å¼[Â¶](#shared-state-schemas "Permanent link")\n\nä¸€ç§å¸¸è§æƒ…å†µæ˜¯çˆ¶å›¾å’Œå­å›¾é€šè¿‡[æ¨¡å¼](../../concepts/low_level/#state)ä¸­çš„å…±äº«çŠ¶æ€é”®ï¼ˆé€šé“ï¼‰è¿›è¡Œé€šä¿¡ã€‚ä¾‹å¦‚ï¼Œåœ¨[å¤šæ™ºèƒ½ä½“](../../concepts/multi_agent/)ç³»ç»Ÿä¸­ï¼Œæ™ºèƒ½ä½“é€šå¸¸é€šè¿‡å…±äº«çš„ [messages](https://github.langchain.ac.cn/langgraph/concepts/low_level.md#why-use-messages) é”®è¿›è¡Œé€šä¿¡ã€‚\n\nå¦‚æœæ‚¨çš„å­å›¾ä¸çˆ¶å›¾å…±äº«çŠ¶æ€é”®ï¼Œæ‚¨å¯ä»¥æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤å°†å…¶æ·»åŠ åˆ°æ‚¨çš„å›¾ä¸­\n\n1. å®šä¹‰å­å›¾å·¥ä½œæµï¼ˆåœ¨ä¸‹é¢çš„ç¤ºä¾‹ä¸­ä¸º `subgraph_builder`ï¼‰å¹¶ç¼–è¯‘å®ƒ\n2. åœ¨å®šä¹‰çˆ¶å›¾å·¥ä½œæµæ—¶ï¼Œå°†ç¼–è¯‘åçš„å­å›¾ä¼ é€’ç»™ `.add_node` æ–¹æ³•\n\n*API å‚è€ƒï¼š[StateGraph](https://github.langchain.ac.cn/langgraph/reference/graphs/#langgraph.graph.state.StateGraph)*\n\n```\n from typing_extensions import TypedDict from  typing_extensions  import TypedDictfrom langgraph.graph.state import StateGraph, START from  langgraph.graph.state  import StateGraph, START  class State(TypedDict): class  State(TypedDict): foo: str foo: str  # Subgraph # Subgraph  def subgraph_node_1(state: State): def  subgraph_node_1(state: State): return {"foo": "hi! " + state["foo"]} return{"foo":"hi! " + state["foo"]}  subgraph_builder = StateGraph(State) subgraph_builder = StateGraph(State)subgraph_builder.add_node(subgraph_node_1) subgraph_builder. add_node(subgraph_node_1)subgraph_builder.add_edge(START, "subgraph_node_1") subgraph_builder. add_edge(START, "subgraph_node_1")subgraph = subgraph_builder.compile() subgraph = subgraph_builder. compile()  # Parent graph # Parent graph  builder = StateGraph(State) builder = StateGraph(State)builder.add_node("node_1", subgraph) builder. add_node("node_1", subgraph)builder.add_edge(START, "node_1") builder. add_edge(START, "node_1")graph = builder.compile() graph = builder. compile()\n```\n\n å®Œæ•´ç¤ºä¾‹ï¼šå…±äº«çŠ¶æ€æ¨¡å¼\n\n```\n from typing_extensions import TypedDict from  typing_extensions  import TypedDictfrom langgraph.graph.state import StateGraph, START from  langgraph.graph.state  import StateGraph, START  # Define subgraph # Define subgraphclass SubgraphState(TypedDict): class  SubgraphState(TypedDict): foo: str # (1)!  foo: str# (1)!  bar: str # (2)! bar: str# (2)!  def subgraph_node_1(state: SubgraphState): def  subgraph_node_1(state: SubgraphState): return {"bar": "bar"} return{"bar": "bar"}  def subgraph_node_2(state: SubgraphState): def  subgraph_node_2(state: SubgraphState): # note that this node is using a state key (\'bar\') that is only available in the subgraph # note that this node is using a state key (\'bar\') that is only available in the subgraph # and is sending update on the shared state key (\'foo\') # and is sending update on the shared state key (\'foo\') return {"foo": state["foo"] + state["bar"]} return{"foo": state["foo"] + state["bar"]}  subgraph_builder = StateGraph(SubgraphState) subgraph_builder = StateGraph(SubgraphState)subgraph_builder.add_node(subgraph_node_1) subgraph_builder. add_node(subgraph_node_1)subgraph_builder.add_node(subgraph_node_2) subgraph_builder. add_node(subgraph_node_2)subgraph_builder.add_edge(START, "subgraph_node_1") subgraph_builder. add_edge(START, "subgraph_node_1")subgraph_builder.add_edge("subgraph_node_1", "subgraph_node_2") subgraph_builder. add_edge("subgraph_node_1", "subgraph_node_2")subgraph = subgraph_builder.compile() subgraph = subgraph_builder. compile()  # Define parent graph # Define parent graphclass ParentState(TypedDict): class  ParentState(TypedDict): foo: str foo: str  def node_1(state: ParentState): def  node_1(state: ParentState): return {"foo": "hi! " + state["foo"]} return{"foo":"hi! " + state["foo"]}  builder = StateGraph(ParentState) builder = StateGraph(ParentState)builder.add_node("node_1", node_1) builder. add_node("node_1", node_1)builder.add_node("node_2", subgraph) builder. add_node("node_2", subgraph)builder.add_edge(START, "node_1") builder. add_edge(START, "node_1")builder.add_edge("node_1", "node_2") builder. add_edge("node_1", "node_2")graph = builder.compile() graph = builder. compile()  for chunk in graph.stream({"foo": "foo"}): for chunk in graph. stream({"foo": "foo"}): print(chunk) print(chunk)\n```\n\n1. æ­¤é”®ä¸çˆ¶å›¾çŠ¶æ€å…±äº«\n2. æ­¤é”®æ˜¯ `SubgraphState` ç§æœ‰çš„ï¼Œå¯¹çˆ¶å›¾ä¸å¯è§\n\n```\n{\'node_1\': {\'foo\': \'hi! foo\'}} {\'node_2\': {\'foo\': \'hi! foobar\'}} \n```\n\n## ä¸åŒçŠ¶æ€æ¨¡å¼[Â¶](#different-state-schemas "Permanent link")\n\nå¯¹äºæ›´å¤æ‚çš„ç³»ç»Ÿï¼Œæ‚¨å¯èƒ½å¸Œæœ›å®šä¹‰ä¸çˆ¶å›¾å…·æœ‰**å®Œå…¨ä¸åŒæ¨¡å¼**ï¼ˆæ²¡æœ‰å…±äº«é”®ï¼‰çš„å­å›¾ã€‚ä¾‹å¦‚ï¼Œæ‚¨å¯èƒ½å¸Œæœ›ä¸º[å¤šæ™ºèƒ½ä½“](../../concepts/multi_agent/)ç³»ç»Ÿä¸­çš„æ¯ä¸ªæ™ºèƒ½ä½“ä¿ç•™ç§æœ‰çš„æ¶ˆæ¯å†å²è®°å½•ã€‚\n\nå¦‚æœæ‚¨çš„åº”ç”¨ç¨‹åºå±äºè¿™ç§æƒ…å†µï¼Œæ‚¨éœ€è¦å®šä¹‰ä¸€ä¸ª**è°ƒç”¨å­å›¾çš„èŠ‚ç‚¹å‡½æ•°**ã€‚æ­¤å‡½æ•°éœ€è¦åœ¨è°ƒç”¨å­å›¾ä¹‹å‰å°†è¾“å…¥ï¼ˆçˆ¶ï¼‰çŠ¶æ€è½¬æ¢ä¸ºå­å›¾çŠ¶æ€ï¼Œå¹¶åœ¨ä»èŠ‚ç‚¹è¿”å›çŠ¶æ€æ›´æ–°ä¹‹å‰å°†ç»“æœè½¬æ¢å›çˆ¶çŠ¶æ€ã€‚\n\n*API å‚è€ƒï¼š[StateGraph](https://github.langchain.ac.cn/langgraph/reference/graphs/#langgraph.graph.state.StateGraph)*\n\n```\n from typing_extensions import TypedDict from  typing_extensions  import TypedDictfrom langgraph.graph.state import StateGraph, START from  langgraph.graph.state  import StateGraph, START  class SubgraphState(TypedDict): class  SubgraphState(TypedDict): bar: str bar: str  # Subgraph # Subgraph  def subgraph_node_1(state: SubgraphState): def  subgraph_node_1(state: SubgraphState): return {"bar": "hi! " + state["bar"]} return{"bar":"hi! " + state["bar"]}  subgraph_builder = StateGraph(SubgraphState) subgraph_builder = StateGraph(SubgraphState)subgraph_builder.add_node(subgraph_node_1) subgraph_builder. add_node(subgraph_node_1)subgraph_builder.add_edge(START, "subgraph_node_1") subgraph_builder. add_edge(START, "subgraph_node_1")subgraph = subgraph_builder.compile() subgraph = subgraph_builder. compile()  # Parent graph # Parent graph  class State(TypedDict): class  State(TypedDict): foo: str foo: str  def call_subgraph(state: State): def  call_subgraph(state: State): subgraph_output = subgraph.invoke({"bar": state["foo"]}) # (1)! subgraph_output = subgraph. invoke({"bar": state["foo"]})# (1)! return {"foo": subgraph_output["bar"]} # (2)! return{"foo": subgraph_output["bar"]}# (2)!  builder = StateGraph(State) builder = StateGraph(State)builder.add_node("node_1", call_subgraph) builder. add_node("node_1", call_subgraph)builder.add_edge(START, "node_1") builder. add_edge(START, "node_1")graph = builder.compile() graph = builder. compile()\n```\n\n1. å°†çŠ¶æ€è½¬æ¢ä¸ºå­å›¾çŠ¶æ€\n2. å°†å“åº”è½¬æ¢å›çˆ¶çŠ¶æ€\n\n å®Œæ•´ç¤ºä¾‹ï¼šä¸åŒçŠ¶æ€æ¨¡å¼\n\n```\n from typing_extensions import TypedDict from  typing_extensions  import TypedDictfrom langgraph.graph.state import StateGraph, START from  langgraph.graph.state  import StateGraph, START  # Define subgraph # Define subgraphclass SubgraphState(TypedDict): class  SubgraphState(TypedDict):  # note that none of these keys are shared with the parent graph state # note that none of these keys are shared with the parent graph state bar: str bar: str baz: str baz: str  def subgraph_node_1(state: SubgraphState): def  subgraph_node_1(state: SubgraphState): return {"baz": "baz"} return{"baz": "baz"}  def subgraph_node_2(state: SubgraphState): def  subgraph_node_2(state: SubgraphState): return {"bar": state["bar"] + state["baz"]} return{"bar": state["bar"] + state["baz"]}  subgraph_builder = StateGraph(SubgraphState) subgraph_builder = StateGraph(SubgraphState)subgraph_builder.add_node(subgraph_node_1) subgraph_builder. add_node(subgraph_node_1)subgraph_builder.add_node(subgraph_node_2) subgraph_builder. add_node(subgraph_node_2)subgraph_builder.add_edge(START, "subgraph_node_1") subgraph_builder. add_edge(START, "subgraph_node_1")subgraph_builder.add_edge("subgraph_node_1", "subgraph_node_2") subgraph_builder. add_edge("subgraph_node_1", "subgraph_node_2")subgraph = subgraph_builder.compile() subgraph = subgraph_builder. compile()  # Define parent graph # Define parent graphclass ParentState(TypedDict): class  ParentState(TypedDict): foo: str foo: str  def node_1(state: ParentState): def  node_1(state: ParentState): return {"foo": "hi! " + state["foo"]} return{"foo":"hi! " + state["foo"]}  def node_2(state: ParentState): def  node_2(state: ParentState): response = subgraph.invoke({"bar": state["foo"]}) # (1)! response = subgraph. invoke({"bar": state["foo"]})# (1)! return {"foo": response["bar"]} # (2)! return{"foo": response["bar"]}# (2)!   builder = StateGraph(ParentState) builder = StateGraph(ParentState)builder.add_node("node_1", node_1) builder. add_node("node_1", node_1)builder.add_node("node_2", node_2) builder. add_node("node_2", node_2)builder.add_edge(START, "node_1") builder. add_edge(START, "node_1")builder.add_edge("node_1", "node_2") builder. add_edge("node_1", "node_2")graph = builder.compile() graph = builder. compile()  for chunk in graph.stream({"foo": "foo"}, subgraphs=True): for chunk in graph. stream({"foo": "foo"}, subgraphs = True): print(chunk) print(chunk)\n```\n\n1. å°†çŠ¶æ€è½¬æ¢ä¸ºå­å›¾çŠ¶æ€\n2. å°†å“åº”è½¬æ¢å›çˆ¶çŠ¶æ€\n\n```\n((), {\'node_1\': {\'foo\': \'hi! foo\'}}) ((\'node_2:9c36dd0f-151a-cb42-cbad-fa2f851f9ab7\',), {\'grandchild_1\': {\'my_grandchild_key\': \'hi Bob, how are you\'}}) ((\'node_2:9c36dd0f-151a-cb42-cbad-fa2f851f9ab7\',), {\'grandchild_2\': {\'bar\': \'hi! foobaz\'}}) ((), {\'node_2\': {\'foo\': \'hi! foobaz\'}}) \n```\n\n  å®Œæ•´ç¤ºä¾‹ï¼šä¸åŒçŠ¶æ€æ¨¡å¼ï¼ˆä¸¤çº§å­å›¾ï¼‰\n\nè¿™æ˜¯ä¸€ä¸ªå…·æœ‰ä¸¤çº§å­å›¾çš„ç¤ºä¾‹ï¼šçˆ¶çº§ -> å­çº§ -> å­™çº§ã€‚\n\n```\n # Grandchild graph # Grandchild graph from typing_extensions import TypedDict from  typing_extensions  import TypedDictfrom langgraph.graph.state import StateGraph, START, END from  langgraph.graph.state  import StateGraph, START, END  class GrandChildState(TypedDict): class  GrandChildState(TypedDict): my_grandchild_key: str my_grandchild_key: str  def grandchild_1(state: GrandChildState) -> GrandChildState: def  grandchild_1(state: GrandChildState) -> GrandChildState: # NOTE: child or parent keys will not be accessible here # NOTE: child or parent keys will not be accessible here return {"my_grandchild_key": state["my_grandchild_key"] + ", how are you"} return{"my_grandchild_key": state["my_grandchild_key"] +", how are you"}   grandchild = StateGraph(GrandChildState) grandchild = StateGraph(GrandChildState)grandchild.add_node("grandchild_1", grandchild_1) grandchild. add_node("grandchild_1", grandchild_1)  grandchild.add_edge(START, "grandchild_1") grandchild. add_edge(START, "grandchild_1")grandchild.add_edge("grandchild_1", END) grandchild. add_edge("grandchild_1", END)  grandchild_graph = grandchild.compile() grandchild_graph = grandchild. compile()  # Child graph # Child graphclass ChildState(TypedDict): class  ChildState(TypedDict): my_child_key: str my_child_key: str  def call_grandchild_graph(state: ChildState) -> ChildState: def  call_grandchild_graph(state: ChildState) -> ChildState: # NOTE: parent or grandchild keys won\'t be accessible here # NOTE: parent or grandchild keys won\'t be accessible here grandchild_graph_input = {"my_grandchild_key": state["my_child_key"]} # (1)! grandchild_graph_input ={"my_grandchild_key": state["my_child_key"]}# (1)! grandchild_graph_output = grandchild_graph.invoke(grandchild_graph_input) grandchild_graph_output = grandchild_graph. invoke(grandchild_graph_input) return {"my_child_key": grandchild_graph_output["my_grandchild_key"] + " today?"} # (2)! return{"my_child_key": grandchild_graph_output["my_grandchild_key"] + " today?"}# (2)!  child = StateGraph(ChildState) child = StateGraph(ChildState)child.add_node("child_1", call_grandchild_graph) # (3)! child. add_node("child_1", call_grandchild_graph)# (3)!child.add_edge(START, "child_1") child. add_edge(START, "child_1")child.add_edge("child_1", END) child. add_edge("child_1", END)child_graph = child.compile() child_graph = child. compile()  # Parent graph # Parent graphclass ParentState(TypedDict): class  ParentState(TypedDict): my_key: str my_key: str  def parent_1(state: ParentState) -> ParentState: def  parent_1(state: ParentState) -> ParentState: # NOTE: child or grandchild keys won\'t be accessible here # NOTE: child or grandchild keys won\'t be accessible here return {"my_key": "hi " + state["my_key"]} return{"my_key": "hi " + state["my_key"]}  def parent_2(state: ParentState) -> ParentState: def  parent_2(state: ParentState) -> ParentState: return {"my_key": state["my_key"] + " bye!"} return{"my_key": state["my_key"] +" bye!"}  def call_child_graph(state: ParentState) -> ParentState: def  call_child_graph(state: ParentState) -> ParentState: child_graph_input = {"my_child_key": state["my_key"]} # (4)! child_graph_input ={"my_child_key": state["my_key"]}# (4)! child_graph_output = child_graph.invoke(child_graph_input) child_graph_output = child_graph. invoke(child_graph_input) return {"my_key": child_graph_output["my_child_key"]} # (5)! return{"my_key": child_graph_output["my_child_key"]}# (5)!  parent = StateGraph(ParentState) parent = StateGraph(ParentState)parent.add_node("parent_1", parent_1) parent. add_node("parent_1", parent_1)parent.add_node("child", call_child_graph) # (6)! parent. add_node("child", call_child_graph)# (6)!parent.add_node("parent_2", parent_2) parent. add_node("parent_2", parent_2)  parent.add_edge(START, "parent_1") parent. add_edge(START, "parent_1")parent.add_edge("parent_1", "child") parent. add_edge("parent_1", "child")parent.add_edge("child", "parent_2") parent. add_edge("child", "parent_2")parent.add_edge("parent_2", END) parent. add_edge("parent_2", END)  parent_graph = parent.compile() parent_graph = parent. compile()  for chunk in parent_graph.stream({"my_key": "Bob"}, subgraphs=True): for chunk in parent_graph. stream({"my_key": "Bob"}, subgraphs = True): print(chunk) print(chunk)\n```\n\n1. æˆ‘ä»¬æ­£åœ¨å°†çŠ¶æ€ä»å­çŠ¶æ€é€šé“ï¼ˆ`my_child_key`ï¼‰è½¬æ¢ä¸ºå­™çŠ¶æ€é€šé“ï¼ˆ`my_grandchild_key`ï¼‰\n2. æˆ‘ä»¬æ­£åœ¨å°†çŠ¶æ€ä»å­™çŠ¶æ€é€šé“ï¼ˆ`my_grandchild_key`ï¼‰è½¬æ¢å›å­çŠ¶æ€é€šé“ï¼ˆ`my_child_key`ï¼‰\n3. æˆ‘ä»¬åœ¨è¿™é‡Œä¼ é€’ä¸€ä¸ªå‡½æ•°ï¼Œè€Œä¸ä»…ä»…æ˜¯ç¼–è¯‘åçš„å›¾ï¼ˆ`grandchild_graph`ï¼‰\n4. æˆ‘ä»¬æ­£åœ¨å°†çŠ¶æ€ä»çˆ¶çŠ¶æ€é€šé“ï¼ˆ`my_key`ï¼‰è½¬æ¢ä¸ºå­çŠ¶æ€é€šé“ï¼ˆ`my_child_key`ï¼‰\n5. æˆ‘ä»¬æ­£åœ¨å°†çŠ¶æ€ä»å­çŠ¶æ€é€šé“ï¼ˆ`my_child_key`ï¼‰è½¬æ¢å›çˆ¶çŠ¶æ€é€šé“ï¼ˆ`my_key`ï¼‰\n6. æˆ‘ä»¬åœ¨è¿™é‡Œä¼ é€’ä¸€ä¸ªå‡½æ•°ï¼Œè€Œä¸ä»…ä»…æ˜¯ç¼–è¯‘åçš„å›¾ï¼ˆ`child_graph`ï¼‰\n\n```\n((), {\'parent_1\': {\'my_key\': \'hi Bob\'}}) ((\'child:2e26e9ce-602f-862c-aa66-1ea5a4655e3b\', \'child_1:781bb3b1-3971-84ce-810b-acf819a03f9c\'), {\'grandchild_1\': {\'my_grandchild_key\': \'hi Bob, how are you\'}}) ((\'child:2e26e9ce-602f-862c-aa66-1ea5a4655e3b\',), {\'child_1\': {\'my_child_key\': \'hi Bob, how are you today?\'}}) ((), {\'child\': {\'my_key\': \'hi Bob, how are you today?\'}}) ((), {\'parent_2\': {\'my_key\': \'hi Bob, how are you today? bye!\'}}) \n```\n\n## æ·»åŠ æŒä¹…åŒ–[Â¶](#add-persistence "Permanent link")\n\næ‚¨åªéœ€è¦**åœ¨ç¼–è¯‘çˆ¶å›¾æ—¶æä¾›æ£€æŸ¥ç‚¹ï¼ˆcheckpointerï¼‰**ã€‚LangGraph å°†è‡ªåŠ¨å°†æ£€æŸ¥ç‚¹ä¼ æ’­åˆ°å­å›¾ã€‚\n\n*API å‚è€ƒï¼š [START](https://github.langchain.ac.cn/langgraph/reference/constants/#langgraph.constants.START) | [StateGraph](https://github.langchain.ac.cn/langgraph/reference/graphs/#langgraph.graph.state.StateGraph) | [InMemorySaver](https://github.langchain.ac.cn/langgraph/reference/checkpoints/#langgraph.checkpoint.memory.InMemorySaver)*\n\n```\nfrom langgraph.graph import START, StateGraph from  langgraph.graph  import START, StateGraphfrom langgraph.checkpoint.memory import InMemorySaver from  langgraph.checkpoint.memory  import InMemorySaver from typing_extensions import TypedDict from  typing_extensions  import TypedDict  class State(TypedDict): class  State(TypedDict): foo: str foo: str  # Subgraph # Subgraph  def subgraph_node_1(state: State): def  subgraph_node_1(state: State): return {"foo": state["foo"] + "bar"} return{"foo": state["foo"] + "bar"}  subgraph_builder = StateGraph(State) subgraph_builder = StateGraph(State)subgraph_builder.add_node(subgraph_node_1) subgraph_builder. add_node(subgraph_node_1)subgraph_builder.add_edge(START, "subgraph_node_1") subgraph_builder. add_edge(START, "subgraph_node_1")subgraph = subgraph_builder.compile() subgraph = subgraph_builder. compile()  # Parent graph # Parent graph  builder = StateGraph(State) builder = StateGraph(State)builder.add_node("node_1", subgraph) builder. add_node("node_1", subgraph)builder.add_edge(START, "node_1") builder. add_edge(START, "node_1")  checkpointer = InMemorySaver() checkpointer = InMemorySaver()graph = builder.compile(checkpointer=checkpointer) graph = builder. compile(checkpointer = checkpointer)\n```\n\nå¦‚æœæ‚¨å¸Œæœ›å­å›¾**æ‹¥æœ‰è‡ªå·±çš„å†…å­˜**ï¼Œæ‚¨å¯ä»¥åœ¨ç¼–è¯‘æ—¶è®¾ç½® `with checkpointer=True`ã€‚è¿™åœ¨[å¤šæ™ºèƒ½ä½“](../../concepts/multi_agent/)ç³»ç»Ÿä¸­å¾ˆæœ‰ç”¨ï¼Œå¦‚æœæ‚¨å¸Œæœ›æ™ºèƒ½ä½“èƒ½å¤Ÿè·Ÿè¸ªå…¶å†…éƒ¨æ¶ˆæ¯å†å²è®°å½•ã€‚\n\n```\nsubgraph_builder = StateGraph(...) subgraph_builder = StateGraph(...)subgraph = subgraph_builder.compile(checkpointer=True) subgraph = subgraph_builder. compile(checkpointer = True)\n```\n\n## æŸ¥çœ‹å­å›¾çŠ¶æ€[Â¶](#view-subgraph-state "Permanent link")\n\nå½“æ‚¨å¯ç”¨[æŒä¹…åŒ–](../../concepts/persistence/)åï¼Œæ‚¨å¯ä»¥é€šè¿‡ `graph.get_state(config)` [æ£€æŸ¥å›¾çš„çŠ¶æ€](../../concepts/persistence/#checkpoints)ï¼ˆæ£€æŸ¥ç‚¹ï¼‰ã€‚è¦æŸ¥çœ‹å­å›¾çš„çŠ¶æ€ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ `graph.get_state(config, subgraphs=True)`ã€‚\n\n**ä»…**åœ¨ä¸­æ–­æ—¶å¯ç”¨\n\nå­å›¾çŠ¶æ€åªèƒ½åœ¨**å­å›¾è¢«ä¸­æ–­æ—¶**æŸ¥çœ‹ã€‚ä¸€æ—¦æ‚¨æ¢å¤å›¾çš„è¿è¡Œï¼Œæ‚¨å°†æ— æ³•è®¿é—®å­å›¾çŠ¶æ€ã€‚\n\n æŸ¥çœ‹ä¸­æ–­çš„å­å›¾çŠ¶æ€\n\n```\nfrom langgraph.graph import START, StateGraph from  langgraph.graph  import START, StateGraphfrom langgraph.checkpoint.memory import InMemorySaver from  langgraph.checkpoint.memory  import InMemorySaverfrom langgraph.types import interrupt, Command from  langgraph.types  import interrupt, Command from typing_extensions import TypedDict from  typing_extensions  import TypedDict  class State(TypedDict): class  State(TypedDict): foo: str foo: str  # Subgraph # Subgraph  def subgraph_node_1(state: State): def  subgraph_node_1(state: State): value = interrupt("Provide value:") value = interrupt("Provide value:") return {"foo": state["foo"] + value} return{"foo": state["foo"] + value}  subgraph_builder = StateGraph(State) subgraph_builder = StateGraph(State)subgraph_builder.add_node(subgraph_node_1) subgraph_builder. add_node(subgraph_node_1)subgraph_builder.add_edge(START, "subgraph_node_1") subgraph_builder. add_edge(START, "subgraph_node_1")  subgraph = subgraph_builder.compile() subgraph = subgraph_builder. compile()  # Parent graph # Parent graph  builder = StateGraph(State) builder = StateGraph(State)builder.add_node("node_1", subgraph) builder. add_node("node_1", subgraph)builder.add_edge(START, "node_1") builder. add_edge(START, "node_1")  checkpointer = InMemorySaver() checkpointer = InMemorySaver()graph = builder.compile(checkpointer=checkpointer) graph = builder. compile(checkpointer = checkpointer)  config = {"configurable": {"thread_id": "1"}} config ={"configurable":{"thread_id": "1"}}  graph.invoke({"foo": ""}, config) graph. invoke({"foo": ""}, config)parent_state = graph.get_state(config) parent_state = graph. get_state(config)subgraph_state = graph.get_state(config, subgraphs=True).tasks[0].state # (1)! subgraph_state = graph. get_state(config, subgraphs = True). tasks[0]. state# (1)!  # resume the subgraph # resume the subgraphgraph.invoke(Command(resume="bar"), config) graph. invoke(Command(resume = "bar"), config)\n```\n\n1. è¿™ä»…åœ¨å­å›¾è¢«ä¸­æ–­æ—¶å¯ç”¨ã€‚ä¸€æ—¦æ‚¨æ¢å¤å›¾çš„è¿è¡Œï¼Œæ‚¨å°†æ— æ³•è®¿é—®å­å›¾çŠ¶æ€ã€‚\n\n## æµå¼ä¼ è¾“å­å›¾è¾“å‡º[Â¶](#stream-subgraph-outputs "Permanent link")\n\nè¦å°†å­å›¾çš„è¾“å‡ºåŒ…å«åœ¨æµå¼è¾“å‡ºä¸­ï¼Œæ‚¨å¯ä»¥åœ¨çˆ¶å›¾çš„ `.stream()` æ–¹æ³•ä¸­è®¾ç½® `subgraphs=True`ã€‚è¿™å°†ä»çˆ¶å›¾å’Œä»»ä½•å­å›¾ä¸­æµå¼ä¼ è¾“è¾“å‡ºã€‚\n\n```\nfor chunk in graph.stream( for chunk in graph. stream( {"foo": "foo"}, {"foo": "foo"}, subgraphs=True, # (1)! subgraphs = True,# (1)! stream_mode="updates", stream_mode = "updates",): ): print(chunk) print(chunk)\n```\n\n1. è®¾ç½® `subgraphs=True` ä»¥ä»å­å›¾ä¸­æµå¼ä¼ è¾“è¾“å‡ºã€‚\n\n ä»å­å›¾æµå¼ä¼ è¾“\n\n```\n from typing_extensions import TypedDict from  typing_extensions  import TypedDictfrom langgraph.graph.state import StateGraph, START from  langgraph.graph.state  import StateGraph, START  # Define subgraph # Define subgraphclass SubgraphState(TypedDict): class  SubgraphState(TypedDict): foo: str foo: str bar: str bar: str  def subgraph_node_1(state: SubgraphState): def  subgraph_node_1(state: SubgraphState): return {"bar": "bar"} return{"bar": "bar"}  def subgraph_node_2(state: SubgraphState): def  subgraph_node_2(state: SubgraphState): # note that this node is using a state key (\'bar\') that is only available in the subgraph # note that this node is using a state key (\'bar\') that is only available in the subgraph # and is sending update on the shared state key (\'foo\') # and is sending update on the shared state key (\'foo\') return {"foo": state["foo"] + state["bar"]} return{"foo": state["foo"] + state["bar"]}  subgraph_builder = StateGraph(SubgraphState) subgraph_builder = StateGraph(SubgraphState)subgraph_builder.add_node(subgraph_node_1) subgraph_builder. add_node(subgraph_node_1)subgraph_builder.add_node(subgraph_node_2) subgraph_builder. add_node(subgraph_node_2)subgraph_builder.add_edge(START, "subgraph_node_1") subgraph_builder. add_edge(START, "subgraph_node_1")subgraph_builder.add_edge("subgraph_node_1", "subgraph_node_2") subgraph_builder. add_edge("subgraph_node_1", "subgraph_node_2")subgraph = subgraph_builder.compile() subgraph = subgraph_builder. compile()  # Define parent graph # Define parent graphclass ParentState(TypedDict): class  ParentState(TypedDict): foo: str foo: str  def node_1(state: ParentState): def  node_1(state: ParentState): return {"foo": "hi! " + state["foo"]} return{"foo":"hi! " + state["foo"]}  builder = StateGraph(ParentState) builder = StateGraph(ParentState)builder.add_node("node_1", node_1) builder. add_node("node_1", node_1)builder.add_node("node_2", subgraph) builder. add_node("node_2", subgraph)builder.add_edge(START, "node_1") builder. add_edge(START, "node_1")builder.add_edge("node_1", "node_2") builder. add_edge("node_1", "node_2")graph = builder.compile() graph = builder. compile()  for chunk in graph.stream( for chunk in graph. stream( {"foo": "foo"}, {"foo": "foo"}, stream_mode="updates", stream_mode = "updates", subgraphs=True, # (1)! subgraphs = True,# (1)!): ): print(chunk) print(chunk)\n```\n\n1. è®¾ç½® `subgraphs=True` ä»¥ä»å­å›¾ä¸­æµå¼ä¼ è¾“è¾“å‡ºã€‚\n\n``` ((), {\'node\\_1\': {\'foo\': \'hi! foo\'}}) ((\'node\\_2:e58e5673-a661-ebb0-70d4-e298a7fc28b7\',), {\'subgraph\\_node\\_1\': {\'bar\': \'bar\'}}) ((\'node\\_2:e58e5673-a661-ebb0-70d4-e298a7fc28b7\',), {\'subgraph\\_node\\_2\': {\'foo\': \'hi! foobar\'}}) ((), {\'node\\_2\': {\'foo\': \'hi! foobar\'}})', 'doi': '', 'published_date': None, 'pdf_url': '', 'url': 'https://github.langchain.ac.cn/langgraph/how-tos/subgraph/', 'source': 'tavily', 'categories': ['web_search'], 'keywords': [], 'citations': 0, 'references': [], 'extra': {'score': 0.99998534, 'saved_path': '/home/qinshan/widthresearch/data/downloads/tavily_ä½¿ç”¨å­å›¾ - Lan.md'}}
2026-02-21 19:56:59,459 - __main__ - INFO - call_tool: name=exa_context_download, args={'papers': [{'paper_id': '', 'title': 'æ¦‚è¿° - LangChain æ¡†æ¶', 'authors': [], 'abstract': 'æ¦‚è¿° - LangChain æ•™ç¨‹[è·³åˆ°å†…å®¹] \n**LangGraph å¹³å°æ–‡æ¡£å·²è¿ç§»ï¼**è¯·åœ¨æ–°çš„[LangChain æ–‡æ¡£] ç½‘ç«™ä¸ŠæŸ¥æ‰¾ LangGraph å¹³å°æ–‡æ¡£ã€‚[] # å­å›¾[Â¶] \nå­å›¾ï¼ˆsubgraphï¼‰æ˜¯ä¸€ä¸ªåœ¨å¦ä¸€ä¸ªå›¾ä¸­ä½œä¸º[èŠ‚ç‚¹] ä½¿ç”¨çš„[å›¾] â€”â€”è¿™æ˜¯å°è£…æ¦‚å¿µåœ¨ LangGraph ä¸­çš„åº”ç”¨ã€‚å­å›¾å…è®¸æ‚¨æ„å»ºåŒ…å«å¤šä¸ªç»„ä»¶çš„å¤æ‚ç³»ç»Ÿï¼Œè€Œè¿™äº›ç»„ä»¶æœ¬èº«å°±æ˜¯å›¾ã€‚![Subgraph] \nä½¿ç”¨å­å›¾çš„ä¸€äº›åŸå› åŒ…æ‹¬ï¼š* æ„å»º[å¤šæ™ºèƒ½ä½“ç³»ç»Ÿ] \n* å½“æ‚¨æƒ³åœ¨å¤šä¸ªå›¾ä¸­é‡ç”¨ä¸€ç»„èŠ‚ç‚¹æ—¶* å½“æ‚¨å¸Œæœ›ä¸åŒçš„å›¢é˜Ÿç‹¬ç«‹å¼€å‘å›¾çš„ä¸åŒéƒ¨åˆ†æ—¶ï¼Œæ‚¨å¯ä»¥å°†æ¯ä¸ªéƒ¨åˆ†å®šä¹‰ä¸ºä¸€ä¸ªå­å›¾ã€‚åªè¦éµå®ˆå­å›¾çš„æ¥å£ï¼ˆè¾“å…¥å’Œè¾“å‡ºæ¨¡å¼ï¼‰ï¼Œçˆ¶å›¾å°±å¯ä»¥åœ¨ä¸äº†è§£å­å›¾ä»»ä½•ç»†èŠ‚çš„æƒ…å†µä¸‹è¿›è¡Œæ„å»ºã€‚æ·»åŠ å­å›¾æ—¶ï¼Œä¸»è¦çš„é—®é¢˜æ˜¯çˆ¶å›¾å’Œå­å›¾å¦‚ä½•é€šä¿¡ï¼Œå³å®ƒä»¬åœ¨å›¾æ‰§è¡ŒæœŸé—´å¦‚ä½•ç›¸äº’ä¼ é€’[çŠ¶æ€] ã€‚æœ‰ä¸¤ç§æƒ…å†µï¼š\n* çˆ¶å›¾å’Œå­å›¾çš„çŠ¶æ€[æ¨¡å¼] ä¸­æœ‰**å…±äº«çš„çŠ¶æ€é”®**ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ‚¨å¯ä»¥[å°†å­å›¾ä½œä¸ºçˆ¶å›¾ä¸­çš„ä¸€ä¸ªèŠ‚ç‚¹åŒ…å«è¿›æ¥] ã€‚\n```\n`[]<web_link>fromlanggraph.graphimportStateGraph,MessagesState,START[]<web_link>[]<web_link># Subgraph[]<web_link>[]<web_link>defcall\\_model(state:MessagesState):[]<web_link>response=model.invoke(state["messages"])[]<web_link>return{"messages":response}[]<web_link>[]<web_link>subgraph\\_builder=StateGraph(State)[]<web_link>subgraph\\_builder.add\\_node(call\\_model)[]<web_link>...[]<web_link>subgraph=subgraph\\_builder.compile()[]<web_link>[]<web_link># Parent graph[]<web_link>[]<web_link>builder=StateGraph(State)[]<web_link>builder.add\\_node("subgraph\\_node",subgraph)[]<web_link>builder.add\\_edge(START,"subgraph\\_node")[]<web_link>graph=builder.compile()[]<web_link>...[]<web_link>graph.invoke({"messages":[{"role":"user","content":"hi!"}]})`\n```\n* çˆ¶å›¾å’Œå­å›¾æœ‰**ä¸åŒçš„æ¨¡å¼**ï¼ˆå®ƒä»¬çš„çŠ¶æ€[æ¨¡å¼] ä¸­æ²¡æœ‰å…±äº«çš„çŠ¶æ€é”®ï¼‰ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ‚¨å¿…é¡»[ä»çˆ¶å›¾çš„ä¸€ä¸ªèŠ‚ç‚¹å†…éƒ¨è°ƒç”¨å­å›¾] ï¼šå½“çˆ¶å›¾å’Œå­å›¾å…·æœ‰ä¸åŒçš„çŠ¶æ€æ¨¡å¼ï¼Œå¹¶ä¸”æ‚¨éœ€è¦åœ¨è°ƒç”¨å­å›¾ä¹‹å‰æˆ–ä¹‹åè½¬æ¢çŠ¶æ€æ—¶ï¼Œè¿™ç§æ–¹æ³•å¾ˆæœ‰ç”¨ã€‚\n```\n`[]<web_link>fromtyping\\_extensionsimportTypedDict,Annotated[]<web_link>fromlangchain\\_core.messagesimportAnyMessage[]<web_link>fromlanggraph.graphimportStateGraph,MessagesState,START[]<web_link>fromlanggraph.graph.messageimportadd\\_messages[]<web_link>[]<web_link>classSubgraphMessagesState(TypedDict):[]<web_link>subgraph\\_messages:Annotated[list[AnyMessage],add\\_messages][]<web_link>[]<web_link># Subgraph[]<web_link>[]<web_link>defcall\\_model(state:SubgraphMessagesState):[]<web_link>response=model.invoke(state["subgraph\\_messages"])[]<web_link>return{"subgraph\\_messages":response}[]<web_link>[]<web_link>subgraph\\_builder=StateGraph(SubgraphMessagesState)[]<web_link>subgraph\\_builder.add\\_node("call\\_model\\_from\\_subgraph",call\\_model)[]<web_link>subgraph\\_builder.add\\_edge(START,"call\\_model\\_from\\_subgraph")[]<web_link>...[]<web_link>subgraph=subgraph\\_builder.compile()[]<web_link>[]<web_link># Parent graph[]<web_link>[]<web_link>defcall\\_subgraph(state:MessagesState):[]<web_link>response=subgraph.invoke({"subgraph\\_messages":state["messages"]})[]<web_link>return{"messages":response["subgraph\\_messages"]}[]<web_link>[]<web_link>builder=StateGraph(State)[]<web_link>builder.add\\_node("subgraph\\_node",call\\_subgraph)[]<web_link>builder.add\\_edge(START,"subgraph\\_node")[]<web_link>graph=builder.compile()[]<web_link>...[]<web_link>graph.invoke({"messages":[{"role":"user","content":"hi!"}]})`\n```\nå›åˆ°é¡¶', 'doi': '', 'published_date': '2025-01-01T00:00:00+00:00', 'pdf_url': '', 'url': 'https://github.langchain.ac.cn/langgraph/concepts/subgraphs', 'source': 'exa_context', 'categories': [], 'keywords': [], 'citations': 0, 'references': [], 'extra': {}}], 'save_path': '/home/qinshan/widthresearch/data/downloads'}
2026-02-21 19:56:59,460 - __main__ - INFO - handle_download: searcher=ExaSearcherContext, input_papers=1, save_path=/home/qinshan/widthresearch/data/downloads
2026-02-21 19:56:59,460 - __main__ - INFO - handle_download: downloaded=1
2026-02-21 19:56:59,460 - __main__ - INFO - call_tool payload: source_tool=exa_context_download, result_type=papers, count=1
2026-02-21 19:56:59,460 - __main__ - INFO - call_tool: name=exa_context_download, result_type=papers, count=1
2026-02-21 19:56:59,460 - __main__ - DEBUG - call_tool payload sample: {'paper_id': '', 'title': 'æ¦‚è¿° - LangChain æ¡†æ¶', 'authors': [], 'abstract': 'æ¦‚è¿° - LangChain æ•™ç¨‹[è·³åˆ°å†…å®¹] \n**LangGraph å¹³å°æ–‡æ¡£å·²è¿ç§»ï¼**è¯·åœ¨æ–°çš„[LangChain æ–‡æ¡£] ç½‘ç«™ä¸ŠæŸ¥æ‰¾ LangGraph å¹³å°æ–‡æ¡£ã€‚[] # å­å›¾[Â¶] \nå­å›¾ï¼ˆsubgraphï¼‰æ˜¯ä¸€ä¸ªåœ¨å¦ä¸€ä¸ªå›¾ä¸­ä½œä¸º[èŠ‚ç‚¹] ä½¿ç”¨çš„[å›¾] â€”â€”è¿™æ˜¯å°è£…æ¦‚å¿µåœ¨ LangGraph ä¸­çš„åº”ç”¨ã€‚å­å›¾å…è®¸æ‚¨æ„å»ºåŒ…å«å¤šä¸ªç»„ä»¶çš„å¤æ‚ç³»ç»Ÿï¼Œè€Œè¿™äº›ç»„ä»¶æœ¬èº«å°±æ˜¯å›¾ã€‚![Subgraph] \nä½¿ç”¨å­å›¾çš„ä¸€äº›åŸå› åŒ…æ‹¬ï¼š* æ„å»º[å¤šæ™ºèƒ½ä½“ç³»ç»Ÿ] \n* å½“æ‚¨æƒ³åœ¨å¤šä¸ªå›¾ä¸­é‡ç”¨ä¸€ç»„èŠ‚ç‚¹æ—¶* å½“æ‚¨å¸Œæœ›ä¸åŒçš„å›¢é˜Ÿç‹¬ç«‹å¼€å‘å›¾çš„ä¸åŒéƒ¨åˆ†æ—¶ï¼Œæ‚¨å¯ä»¥å°†æ¯ä¸ªéƒ¨åˆ†å®šä¹‰ä¸ºä¸€ä¸ªå­å›¾ã€‚åªè¦éµå®ˆå­å›¾çš„æ¥å£ï¼ˆè¾“å…¥å’Œè¾“å‡ºæ¨¡å¼ï¼‰ï¼Œçˆ¶å›¾å°±å¯ä»¥åœ¨ä¸äº†è§£å­å›¾ä»»ä½•ç»†èŠ‚çš„æƒ…å†µä¸‹è¿›è¡Œæ„å»ºã€‚æ·»åŠ å­å›¾æ—¶ï¼Œä¸»è¦çš„é—®é¢˜æ˜¯çˆ¶å›¾å’Œå­å›¾å¦‚ä½•é€šä¿¡ï¼Œå³å®ƒä»¬åœ¨å›¾æ‰§è¡ŒæœŸé—´å¦‚ä½•ç›¸äº’ä¼ é€’[çŠ¶æ€] ã€‚æœ‰ä¸¤ç§æƒ…å†µï¼š\n* çˆ¶å›¾å’Œå­å›¾çš„çŠ¶æ€[æ¨¡å¼] ä¸­æœ‰**å…±äº«çš„çŠ¶æ€é”®**ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ‚¨å¯ä»¥[å°†å­å›¾ä½œä¸ºçˆ¶å›¾ä¸­çš„ä¸€ä¸ªèŠ‚ç‚¹åŒ…å«è¿›æ¥] ã€‚\n```\n`[]<web_link>fromlanggraph.graphimportStateGraph,MessagesState,START[]<web_link>[]<web_link># Subgraph[]<web_link>[]<web_link>defcall\\_model(state:MessagesState):[]<web_link>response=model.invoke(state["messages"])[]<web_link>return{"messages":response}[]<web_link>[]<web_link>subgraph\\_builder=StateGraph(State)[]<web_link>subgraph\\_builder.add\\_node(call\\_model)[]<web_link>...[]<web_link>subgraph=subgraph\\_builder.compile()[]<web_link>[]<web_link># Parent graph[]<web_link>[]<web_link>builder=StateGraph(State)[]<web_link>builder.add\\_node("subgraph\\_node",subgraph)[]<web_link>builder.add\\_edge(START,"subgraph\\_node")[]<web_link>graph=builder.compile()[]<web_link>...[]<web_link>graph.invoke({"messages":[{"role":"user","content":"hi!"}]})`\n```\n* çˆ¶å›¾å’Œå­å›¾æœ‰**ä¸åŒçš„æ¨¡å¼**ï¼ˆå®ƒä»¬çš„çŠ¶æ€[æ¨¡å¼] ä¸­æ²¡æœ‰å…±äº«çš„çŠ¶æ€é”®ï¼‰ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ‚¨å¿…é¡»[ä»çˆ¶å›¾çš„ä¸€ä¸ªèŠ‚ç‚¹å†…éƒ¨è°ƒç”¨å­å›¾] ï¼šå½“çˆ¶å›¾å’Œå­å›¾å…·æœ‰ä¸åŒçš„çŠ¶æ€æ¨¡å¼ï¼Œå¹¶ä¸”æ‚¨éœ€è¦åœ¨è°ƒç”¨å­å›¾ä¹‹å‰æˆ–ä¹‹åè½¬æ¢çŠ¶æ€æ—¶ï¼Œè¿™ç§æ–¹æ³•å¾ˆæœ‰ç”¨ã€‚\n```\n`[]<web_link>fromtyping\\_extensionsimportTypedDict,Annotated[]<web_link>fromlangchain\\_core.messagesimportAnyMessage[]<web_link>fromlanggraph.graphimportStateGraph,MessagesState,START[]<web_link>fromlanggraph.graph.messageimportadd\\_messages[]<web_link>[]<web_link>classSubgraphMessagesState(TypedDict):[]<web_link>subgraph\\_messages:Annotated[list[AnyMessage],add\\_messages][]<web_link>[]<web_link># Subgraph[]<web_link>[]<web_link>defcall\\_model(state:SubgraphMessagesState):[]<web_link>response=model.invoke(state["subgraph\\_messages"])[]<web_link>return{"subgraph\\_messages":response}[]<web_link>[]<web_link>subgraph\\_builder=StateGraph(SubgraphMessagesState)[]<web_link>subgraph\\_builder.add\\_node("call\\_model\\_from\\_subgraph",call\\_model)[]<web_link>subgraph\\_builder.add\\_edge(START,"call\\_model\\_from\\_subgraph")[]<web_link>...[]<web_link>subgraph=subgraph\\_builder.compile()[]<web_link>[]<web_link># Parent graph[]<web_link>[]<web_link>defcall\\_subgraph(state:MessagesState):[]<web_link>response=subgraph.invoke({"subgraph\\_messages":state["messages"]})[]<web_link>return{"messages":response["subgraph\\_messages"]}[]<web_link>[]<web_link>builder=StateGraph(State)[]<web_link>builder.add\\_node("subgraph\\_node",call\\_subgraph)[]<web_link>builder.add\\_edge(START,"subgraph\\_node")[]<web_link>graph=builder.compile()[]<web_link>...[]<web_link>graph.invoke({"messages":[{"role":"user","content":"hi!"}]})`\n```\nå›åˆ°é¡¶', 'doi': '', 'published_date': '2025-01-01T00:00:00+00:00', 'pdf_url': '', 'url': 'https://github.langchain.ac.cn/langgraph/concepts/subgraphs', 'source': 'exa_context', 'categories': [], 'keywords': [], 'citations': 0, 'references': [], 'extra': {'saved_path': '/home/qinshan/widthresearch/data/downloads/exa_æ¦‚è¿° - LangC.md'}}
2026-02-21 19:57:01,679 - __main__ - INFO - call_tool: name=tavily_download, args={'papers': [{'paper_id': '', 'title': 'ä»é›¶å¼€å§‹å­¦LangGraphï¼ˆ6ï¼‰ï¼šè½»æ¾ç©è½¬Conditional Edges', 'authors': [], 'abstract': '# [logo ç«å±±å¼•æ“ ADG ç¤¾åŒº](https://adg.csdn.net "ç«å±±å¼•æ“ ADG ç¤¾åŒº")\n\n![logo](https://i-blog.csdnimg.cn/devpress/blog/51b6b18b57a24ac185913dd7db13ea07.jpg)\n![](https://i-blog.csdnimg.cn/devpress/blog/51b6b18b57a24ac185913dd7db13ea07.jpg)\n\n## ç™»å½•ç¤¾åŒºäº‘\n\nç™»å½•ç¤¾åŒºäº‘ï¼Œä¸ç¤¾åŒºç”¨æˆ·å…±åŒæˆé•¿\n\n### ç«å±±å¼•æ“ ADG ç¤¾åŒº\n\né‚€è¯·æ‚¨åŠ å…¥ç¤¾åŒº\n\n![]()![]()\n\n# ä»é›¶å¼€å§‹å­¦LangGraphï¼ˆ6ï¼‰ï¼šè½»æ¾ç©è½¬Conditional Edges\n\nåœ¨ä¸Šä¸€æœŸæ–‡ç« ä¸­ï¼Œæˆ‘å¸¦ç€å¤§å®¶æ­å»ºäº†ä¸€ä¸ªåŸºç¡€ç‰ˆçš„Graphã€‚ä»Šå¤©æˆ‘ä»¬è¦åœ¨æ­¤åŸºç¡€ä¸Šï¼Œå¼•å…¥Conditional Edgesï¼ˆæ¡ä»¶è¾¹ï¼‰çš„æ¦‚å¿µï¼Œè®©æˆ‘ä»¬çš„Graphæ›´åŠ å¥½ç©ä¸€ç‚¹ã€‚\n\n![](https://profile-avatar.csdnimg.cn/eb75dcc8773540bda9379c1546d0464b_y525698136.jpg!1)\n\n### [ç¨‹åºå­¦åˆ°æ˜](https://devpress.csdn.net/user/Y525698136)\n\n![](https://profile-avatar.csdnimg.cn/eb75dcc8773540bda9379c1546d0464b_y525698136.jpg!1)\n\nå¤§å®¶å¥½ï¼Œåœ¨ä¸Šä¸€æœŸæ–‡ç« ä¸­ï¼Œæˆ‘å¸¦ç€å¤§å®¶æ­å»ºäº†ä¸€ä¸ªåŸºç¡€ç‰ˆçš„Graphã€‚ä»Šå¤©æˆ‘ä»¬è¦åœ¨æ­¤åŸºç¡€ä¸Šï¼Œå¼•å…¥Conditional Edgesï¼ˆæ¡ä»¶è¾¹ï¼‰çš„æ¦‚å¿µï¼Œè®©æˆ‘ä»¬çš„Graphæ›´åŠ å¥½ç©ä¸€ç‚¹ã€‚\n\n### ä»€ä¹ˆæ˜¯Conditional Edges\n\nConditional Edgesï¼ˆæ¡ä»¶è¾¹ï¼‰é¡¾åæ€ä¹‰ï¼Œå°±æ˜¯å¸¦æ¡ä»¶åˆ¤æ–­çš„è¾¹ï¼Œå³æ ¹æ®æ¡ä»¶æ˜¯å¦æ»¡è¶³ï¼Œå†³å®šèµ°å“ªæ¡è¾¹ã€‚\n\næˆ‘ä»¬å…ˆä»å›¾å½¢ä¸Šæ¥æ„Ÿå—ä¸€ä¸‹æ¡ä»¶è¾¹ï¼š\n\n![](https://i-blog.csdnimg.cn/img_convert/33f3735631cf5a66c7b1a3761191a4d5.jpeg)\n\n![](https://i-blog.csdnimg.cn/img_convert/33f3735631cf5a66c7b1a3761191a4d5.jpeg)\n\nå¯ä»¥çœ‹åˆ°ï¼Œä¸ä¸ŠæœŸçš„ç®€å•çº¿æ¡ç»“æ„ç›¸æ¯”ï¼Œä»Šå¤©æˆ‘ä»¬è¦åˆ›å»ºçš„å›¾ï¼Œå¤šäº†ä¸€ä¸ª**router**èŠ‚ç‚¹ï¼Œç„¶åä»å®ƒå‡ºå‘ï¼Œåˆåˆ†å‡ºäº†é˜²å¾¡å’Œé—ªé¿ä¸¤ä¸ªåˆ†æ”¯ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ ¹æ®**router**è®¾å®šçš„é€»è¾‘ï¼Œæˆ‘ä»¬çš„è§’è‰²è¦ä¹ˆé€‰æ‹©é˜²å¾¡ï¼Œè¦ä¹ˆé€‰æ‹©é—ªé¿ã€‚å…¶ä¸­çš„defendå’Œdodgeä¸¤æ¡è™šçº¿ï¼Œå°±æ˜¯æ¡ä»¶è¾¹ã€‚\n\n### æ„é€ æ¡ä»¶è¾¹çš„åŸºæœ¬æ–¹æ³•\n\næ¡ä»¶è¾¹çš„æ„é€ æ–¹æ³•éå¸¸ç®€å•ï¼Œä¸»è¦åˆ†ä¸ºä¸‰ä¸ªæ­¥éª¤ï¼š\n\n#### 1.æ„é€ routing\\_function\n\næ‰€è°“çš„routing\\_functionï¼ˆè·¯ç”±å‡½æ•°ï¼‰ï¼Œå°±æ˜¯æŒ‡å¯¹æ•°æ®åˆ°åº•å¦‚ä½•æµåŠ¨è¿›è¡Œå®šä¹‰çš„å‡½æ•°ã€‚è€Œè¿™ç§å®šä¹‰åˆ©ç”¨çš„å°±æ˜¯pythonä¸­éå¸¸åŸºç¡€çš„â€œif-elif-elseâ€œçš„æ¡ä»¶åˆ¤æ–­ã€‚\n\nä¸€ä¸ªåŸºæœ¬çš„routing\\_functionçš„ç»“æ„å¦‚ä¸‹ï¼š\n\n`def routing_function(state:AgentState) -> AgentState: """This node will select the next node of the graph""" if state["KEY"] == "condition": return "edge_1" else: return "edge_2"`\n\nä»¥ä¸Šå‡½æ•°çš„æ„æ€å°±æ˜¯ï¼Œå¦‚æœç›®å‰Graphçš„stateä¸­çš„æŸä¸ª`KEY`çš„å€¼ä¸º`condition`ï¼Œé‚£ä¹ˆæ•°æ®å°±ä¼šæ²¿ç€åä¸º`edge_1`çš„è¾¹æµåŠ¨ã€‚å¦åˆ™ï¼Œå°±æ²¿ç€åä¸º`edge_2`çš„è¾¹æµåŠ¨ã€‚å½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥ç”¨`elif`å¢åŠ æ›´å¤šç§çš„æ¡ä»¶åˆ†æ”¯ã€‚\n\n`KEY`\n`condition`\n`edge_1`\n`edge_2`\n`elif`\n\nè¿™é‡Œæœ‰å‡ ä¸ªè¦ç‚¹ï¼š\n\n#### 2.æ·»åŠ æ¡ä»¶Node\n\nå¦‚ä¸ŠæœŸæ‰€è®²ï¼Œå½“æˆ‘ä»¬å®ŒæˆStateçš„åˆå§‹åŒ–ä¹‹åï¼Œé¦–å…ˆéœ€è¦æ·»åŠ Nodeã€‚æ™®é€šNodeçš„æ·»åŠ æ–¹æ³•å¦‚ä¸‹ï¼š\n\n`graph.add_node("èŠ‚ç‚¹å",èŠ‚ç‚¹å‡½æ•°)`\n\nåŒæ ·çš„ï¼Œæ¡ä»¶Nodeï¼Œå¦‚æˆ‘ä»¬å‰é¢å›¾ä¸­çš„`router`ï¼Œä¹Ÿéœ€è¦æ·»åŠ ã€‚ä½†æ¡ä»¶Nodeçš„æ·»åŠ æ–¹æ³•ä¸æ™®é€šNodeæœ‰ä¸ªç»†å¾®çš„å·®å¼‚ã€‚\n\n`router`\n\nç”±äºrouting\\_functionä¸æ™®é€šçš„èŠ‚ç‚¹å‡½æ•°ä¸åŒï¼Œå®ƒä¸ä¼šå¯¹Graphçš„stateæ•°æ®è¿›è¡Œæ“ä½œï¼Œå®ƒæœ€å¤šåˆ©ç”¨stateçš„æ•°æ®è¿›è¡Œä¸€äº›æ¡ä»¶æ»¡è¶³æ–¹é¢çš„åˆ¤æ–­ã€‚å› æ­¤ï¼Œäº‹å®ä¸Šè¾“å…¥routing\\_functionçš„stateï¼Œä¸å…¶è¾“å‡ºçš„stateï¼Œæ˜¯æ²¡æœ‰ä»»ä½•å·®å¼‚çš„ã€‚\n\nå› æ­¤ï¼Œæ¡ä»¶Nodeçš„æ·»åŠ æ–¹æ³•å¦‚ä¸‹ï¼š\n\n`graph.add_node("æ¡ä»¶èŠ‚ç‚¹å",lambda stateï¼šstate)`\n\nå…¶ä¸­èŠ‚ç‚¹å‡½æ•°çš„ä½ç½®è¢«ä¸€ä¸ª`lambda`å‡½æ•°æ‰€æ›¿ä»£ï¼Œä½ ä»ç„¶ä¸éœ€è¦çŸ¥é“è¿™ä¸ªçš„åŸç†æ˜¯ä»€ä¹ˆï¼Œä½ åªéœ€è¦çŸ¥é“è¿™ä»£è¡¨ç€è¾“å…¥è¾“å‡ºæ¡ä»¶Nodeçš„stateæ˜¯ç›¸åŒçš„å³å¯ã€‚\n\n`lambda`\n\n#### 3.æ·»åŠ æ¡ä»¶è¾¹\n\næœ€åï¼Œæˆ‘ä»¬ç»ˆäºæ¥åˆ°æ·»åŠ æ¡ä»¶è¾¹çš„ç¯èŠ‚ã€‚å…ˆæ¥çœ‹åŸºæœ¬ä»£ç ï¼š\n\n`graph.add_conditional_edges( "router", routing_function, { "edge_1":"node_name1", "edge_2":"node_name2" })`\n\nä¾ç„¶æ˜¯éå¸¸ç®€å•ï¼Œåˆ©ç”¨äº†ä¸€ä¸ª`add_conditional_edges`æ–¹æ³•ã€‚è¿™ä¸ªæ–¹æ³•éœ€è¦ä¸‰ä¸ªå‚æ•°ï¼Œåˆ†åˆ«æ˜¯ï¼š\n\n`add_conditional_edges`\n\nå®Œæˆä»¥ä¸Šå…¨éƒ¨æ­¥éª¤ï¼Œæˆ‘ä»¬çš„æ¡ä»¶è¾¹å°±æ·»åŠ å®Œæˆäº†ã€‚ä¸‹é¢æˆ‘å¸¦å¤§å®¶æ¥å®ç°ä¸€ä¸‹å‰é¢å›¾ä¸­çš„Graphã€‚\n\n### å®æˆ˜æ¼”ç»ƒ\n\n#### 1.å®šä¹‰State\n\n`from typing import TypedDictclass AppState(TypedDict): char_class: str char_level:int char_HP:int char_action: str`\n\nåœ¨ä¸ŠæœŸçš„state çš„åŸºç¡€ä¸Šï¼Œæˆ‘å¢åŠ äº†ä¸€ä¸ª`char_action`é”®ï¼Œå¹¶å°†å®ƒçš„å€¼çš„ç±»å‹è®¾å®šä¸ºstrã€‚è¿™é‡Œçš„æƒ³æ³•æ˜¯æˆ‘ä»¬ç›´æ¥ä¼ å…¥åŠ¨ä½œï¼Œæ˜¯é—ªé¿è¿˜æ˜¯é˜²å¾¡ï¼Œç„¶åå†ç”±routeræ ¹æ®æˆ‘ä»¬ä¼ å…¥çš„åŠ¨ä½œæ¥ç¡®å®šæ•°æ®èµ°å‘ã€‚\n\n`char_action`\n\næˆ‘è¿™é‡Œä¸»è¦å› ä¸ºæ˜¯æ¼”ç¤ºï¼Œæ‰€ä»¥æè¿™ä¹ˆç®€å•ï¼Œå¤§å®¶å¯ä»¥å°½æƒ…å¼€è„‘æ´å»è®¾è®¡è‡ªå·±çš„æ¡ä»¶åˆ¤æ–­ã€‚\n\n#### 2.å®šä¹‰å„èŠ‚ç‚¹å‡½æ•°\n\nä¸ºäº†é¿å…å†—ä½™ï¼Œè¿™é‡Œæˆ‘åªåˆ†æä¸ä¸ŠæœŸç›¸æ¯”å¢åŠ çš„ä»£ç ã€‚æ²¡æœ‰çœ‹è¿‡ä¸ŠæœŸçš„æœ‹å‹ä¸€å®šè¦å»çœ‹å•Šï¼\n\né¦–å…ˆï¼Œå†™å‡ºrouteræ‰€éœ€çš„routing\\_function:\n\n`def decide_next_node(state:AppState) -> AppState: """This node will select the next node of the graph""" if state["char_action"] == "é—ªé¿": return "dodge" elif state["char_action"] == "é˜²å¾¡": return "defend"`\n\néå¸¸ç®€å•çš„ä¸€ä¸ªæ¡ä»¶åˆ¤æ–­ï¼Œä¸å†èµ˜è¿°ã€‚\n\nç„¶åï¼Œå¢åŠ ä¸€ä¸ªâ€œé˜²å¾¡â€èŠ‚ç‚¹çš„å‡½æ•°\n\n`def defend_check_node(state: AppState) -> AppState: """æ£€æŸ¥é˜²å¾¡ç»“æœå¹¶å¤„ç†HPå˜åŒ–""" dice_roll = random.randint(1, 3) state[\'char_HP\'] = state[\'char_HP\'] - dice_roll print(f"ä½ å—åˆ°äº†{dice_roll}ç‚¹ä¼¤å®³") return state`\n\nè¿™é‡ŒåŒæ ·æ˜¯æå¾—å¾ˆç®€å•ï¼Œä½ å®Œå…¨å¯ä»¥åœ¨stateä¸­å¢åŠ ä¸€ä¸ªâ€œé˜²å¾¡å€¼â€çš„keyï¼Œç„¶ååœ¨è§’è‰²å—åˆ°æ”»å‡»æ—¶ï¼Œç”¨æ•Œæ–¹ä¼¤å®³å‡å»é˜²å¾¡å€¼çš„å‡€é¢ï¼Œä½œä¸ºè§’è‰²æœ€ç»ˆå—åˆ°çš„ä¼¤å®³ã€‚æ€»ä¹‹éå¸¸çµæ´»ã€‚\n\n#### 3.æ­å»ºGraph\n\nè¿™é‡Œä¹Ÿéå¸¸ç®€å•ï¼Œå› ä¸ºè¦ç‚¹å‰é¢éƒ½è®²äº†ï¼Œç›´æ¥ç»™å‡ºä»£ç ï¼š\n\n`graph = StateGraph(AppState)graph.add_node("dodge_check",dodge_check_node)graph.add_node("defend_check",defend_check_node)graph.add_node("character_status",display_character_status)graph.add_node("router",lambda state:state)graph.add_edge(START,"router")graph.add_conditional_edges( "router", decide_next_node, { "dodge":"dodge_check", "defend":"defend_check" })graph.add_edge("dodge_check","character_status")graph.add_edge("defend_check","character_status")graph.add_edge("character_status",END)app = graph.compile()`\n\nå†™è¿™ä¸€éƒ¨åˆ†ä»£ç çš„å…³é”®æ˜¯ä½ è‡ªå·±è¦å¯¹ä½ çš„Graphçš„æ•°æ®æµå‘å¿ƒé‡Œæœ‰æ•°ï¼Œæ‰€ä»¥ä¸€èˆ¬éƒ½æ˜¯å…ˆç”»å¥½ç»“æ„è‰å›¾ï¼ŒçœŸæ­£å†™ä»£ç çš„è¿‡ç¨‹å…¶å®æ˜¯å¾ˆç®€å•çš„ã€‚\n\n#### 4.ä½¿ç”¨Graph\n\næœ€åå°±æ˜¯å®é™…ä½¿ç”¨äº†ã€‚æˆ‘ä»¬ä¾ç„¶æ˜¯å‘`invoke`æ–¹æ³•ä¼ å…¥ä¸€ä¸ªä¸stateå®šä¹‰ä¸€è‡´çš„å­—å…¸ï¼Œæˆ‘ä»¬å…ˆæŠŠactionè®¾å®šä¸ºé—ªé¿ï¼š\n\n`invoke`\n`result = app.invoke({"char_class":"æ³•å¸ˆ","char_level":5,"char_HP":10,"char_action":"é—ªé¿"})`\n\nç»“æœå¦‚ä¸‹ï¼Œwoopsï¼Œé—ªé¿å¤±è´¥ï¼Œè¢«ç äº†3æ»´è¡€ã€‚\n\n![](https://i-blog.csdnimg.cn/img_convert/16bcda6e688c67184a4b3f04d9644add.jpeg)\n\n![](https://i-blog.csdnimg.cn/img_convert/16bcda6e688c67184a4b3f04d9644add.jpeg)\n\næˆ‘ä»¬å†è¯•è¯•è®©è§’è‰²é˜²å¾¡ï¼Œæœç„¶ç¨³å¦‚æ³°å±±ï¼š\n\n![](https://i-blog.csdnimg.cn/img_convert/5998c26d06c50d666fe28673c6e2794a.jpeg)\n\n![](https://i-blog.csdnimg.cn/img_convert/5998c26d06c50d666fe28673c6e2794a.jpeg)\n\nå¥½äº†ï¼Œå‡ºäºç¯‡å¹…è€ƒè™‘ï¼Œæœ¬æœŸå°±åˆ°æ­¤ä¸ºæ­¢ï¼Œä¸‹æœŸæˆ‘å°†ç»™å¤§å®¶ä»‹ç»æ¡ä»¶è¾¹çš„ä¸€ç§å¸¸ç”¨ç©æ³•ï¼ŒLoopï¼ˆå¾ªç¯ï¼‰ï¼Œå¤§å®¶å¯ä»¥å…ˆå°½æƒ…æ¢ç´¢ã€‚å¸Œæœ›è§‰å¾—æœ¬ç³»åˆ—æ–‡ç« æœ‰ç”¨çš„æœ‹å‹ä¸è¦å¿˜äº†ä¸€é”®ä¸‰è¿ï¼Œç»™ä¿ºä¸€ç‚¹é¼“åŠ±ï¼Œç¥å¤§å®¶ç©çš„å¼€å¿ƒï¼\n\næƒ³å…¥é—¨ AI å¤§æ¨¡å‹å´æ‰¾ä¸åˆ°æ¸…æ™°æ–¹å‘ï¼Ÿå¤‡è€ƒå¤§å‚ AI å²—è¿˜åœ¨å››å¤„æœé›†é›¶æ•£èµ„æ–™ï¼Ÿåˆ«å†æµªè´¹æ—¶é—´å•¦ï¼2025 å¹´ `AI å¤§æ¨¡å‹å…¨å¥—å­¦ä¹ èµ„æ–™`å·²æ•´ç†å®Œæ¯•ï¼Œä»å­¦ä¹ è·¯çº¿åˆ°é¢è¯•çœŸé¢˜ï¼Œä»å·¥å…·æ•™ç¨‹åˆ°è¡Œä¸šæŠ¥å‘Šï¼Œä¸€ç«™å¼è¦†ç›–ä½ çš„æ‰€æœ‰éœ€æ±‚ï¼Œç°åœ¨å…¨éƒ¨`å…è´¹åˆ†äº«`ï¼\n\n `AI å¤§æ¨¡å‹å…¨å¥—å­¦ä¹ èµ„æ–™`\n`å…è´¹åˆ†äº«`\n\n**ğŸ‘‡ğŸ‘‡æ‰«ç å…è´¹é¢†å–å…¨éƒ¨å†…å®¹ğŸ‘‡ğŸ‘‡**\n\n\u200b![](https://i-blog.csdnimg.cn/blog_migrate/35a667356d00b606992c228becf1f3a8.png)\n\n![](https://i-blog.csdnimg.cn/blog_migrate/35a667356d00b606992c228becf1f3a8.png)\n\n### ä¸€ã€å­¦ä¹ å¿…å¤‡ï¼š100+æœ¬å¤§æ¨¡å‹ç”µå­ä¹¦+26 ä»½è¡Œä¸šæŠ¥å‘Š + 600+ å¥—æŠ€æœ¯PPTï¼Œå¸®ä½ çœ‹é€ AI è¶‹åŠ¿\n\næƒ³äº†è§£å¤§æ¨¡å‹çš„è¡Œä¸šåŠ¨æ€ã€å•†ä¸šè½åœ°æ¡ˆä¾‹ï¼Ÿå¤§æ¨¡å‹ç”µå­ä¹¦ï¼Ÿ**`è¿™ä»½èµ„æ–™å¸®ä½ ç«™åœ¨ â€œè¡Œä¸šé«˜åº¦â€ å­¦ AI`ï¼š**\n\n`è¿™ä»½èµ„æ–™å¸®ä½ ç«™åœ¨ â€œè¡Œä¸šé«˜åº¦â€ å­¦ AI`\n\n#### 1. 100+æœ¬å¤§æ¨¡å‹æ–¹å‘ç”µå­ä¹¦\n\n![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/direct/b76dfd5e3a9b42fdad0f5ea51dfd0c04.png#pic_center)\n\n![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/direct/b76dfd5e3a9b42fdad0f5ea51dfd0c04.png#pic_center)\n\n#### 2. 26 ä»½è¡Œä¸šç ”ç©¶æŠ¥å‘Šï¼šè¦†ç›–å¤šé¢†åŸŸå®è·µä¸è¶‹åŠ¿\n\næŠ¥å‘ŠåŒ…å«é˜¿é‡Œã€DeepSeek ç­‰æƒå¨æœºæ„å‘å¸ƒçš„æ ¸å¿ƒå†…å®¹ï¼Œæ¶µç›–ï¼š  \n![](https://i-blog.csdnimg.cn/img_convert/42dbc372b05fba5c04f015e9d3b8e030.jpeg)\n\n![](https://i-blog.csdnimg.cn/img_convert/42dbc372b05fba5c04f015e9d3b8e030.jpeg)\n\n#### 3. 600+å¥—æŠ€æœ¯å¤§ä¼š PPTï¼šå¬è¡Œä¸šå¤§å’–è®²å®æˆ˜\n\nPPT æ•´ç†è‡ª 2024-2025 å¹´çƒ­é—¨æŠ€æœ¯å¤§ä¼šï¼ŒåŒ…å«ç™¾åº¦ã€è…¾è®¯ã€å­—èŠ‚ç­‰ä¼ä¸šçš„ä¸€çº¿å®è·µï¼š\n\n![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/direct/c478368f9f2b4b418d68d68a35876bc4.gif#pic_center)\n\n![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/direct/c478368f9f2b4b418d68d68a35876bc4.gif#pic_center)\n\n### äºŒã€æ±‚èŒå¿…çœ‹ï¼šå¤§å‚ AI å²—é¢è¯• â€œå¼¹è¯åº“â€ï¼Œ300 + çœŸé¢˜ + 107 é“é¢ç»ç›´æ¥æŠ±èµ°\n\næƒ³å†²å­—èŠ‚ã€è…¾è®¯ã€é˜¿é‡Œã€è”šæ¥ç­‰å¤§å‚ AI å²—ï¼Ÿè¿™ä»½é¢è¯•èµ„æ–™å¸®ä½ æå‰ â€œæŠ¼é¢˜â€ï¼Œæ‹’ç»ä¸´åœºæ…Œï¼\n\n![](https://i-blog.csdnimg.cn/img_convert/70f9f3a66290f3f94181cb8f676c264a.jpeg)\n\n![](https://i-blog.csdnimg.cn/img_convert/70f9f3a66290f3f94181cb8f676c264a.jpeg)\n\n#### 1. 107 é“å¤§å‚é¢ç»ï¼šè¦†ç›– Promptã€RAGã€å¤§æ¨¡å‹åº”ç”¨å·¥ç¨‹å¸ˆç­‰çƒ­é—¨å²—ä½\n\né¢ç»æ•´ç†è‡ª 2021-2025 å¹´çœŸå®é¢è¯•åœºæ™¯ï¼ŒåŒ…å« TPlinkã€å­—èŠ‚ã€è…¾è®¯ã€è”šæ¥ã€è™¾çš®ã€ä¸­å…´ã€ç§‘å¤§è®¯é£ã€äº¬ä¸œç­‰ä¼ä¸šçš„é«˜é¢‘è€ƒé¢˜ï¼Œ`æ¯é“é¢˜éƒ½é™„å¸¦æ€è·¯è§£æ`ï¼š\n\n`æ¯é“é¢˜éƒ½é™„å¸¦æ€è·¯è§£æ`\n\n![](https://i-blog.csdnimg.cn/img_convert/2123cd7b05a849ba7cda52d55675412c.jpeg)\n\n![](https://i-blog.csdnimg.cn/img_convert/2123cd7b05a849ba7cda52d55675412c.jpeg)\n\n#### 2. 102 é“ AI å¤§æ¨¡å‹çœŸé¢˜ï¼šç›´å‡»å¤§æ¨¡å‹æ ¸å¿ƒè€ƒç‚¹\n\né’ˆå¯¹å¤§æ¨¡å‹ä¸“å±è€ƒé¢˜ï¼Œä»æ¦‚å¿µåˆ°å®è·µå…¨é¢è¦†ç›–ï¼Œå¸®ä½ ç†æ¸…åº•å±‚é€»è¾‘ï¼š\n\n![](https://i-blog.csdnimg.cn/img_convert/635628ec8a40cddf7592730ba0f9d860.jpeg)\n\n![](https://i-blog.csdnimg.cn/img_convert/635628ec8a40cddf7592730ba0f9d860.jpeg)\n\n#### 3. 97 é“ LLMs çœŸé¢˜ï¼šèšç„¦å¤§å‹è¯­è¨€æ¨¡å‹é«˜é¢‘é—®é¢˜\n\nä¸“é—¨æ‹†è§£ LLMs çš„æ ¸å¿ƒç—›ç‚¹ä¸è§£å†³æ–¹æ¡ˆï¼Œæ¯”å¦‚è®©å¾ˆå¤šäººå¤´ç–¼çš„ â€œå¤è¯»æœºé—®é¢˜â€ï¼š\n\n### ä¸‰ã€è·¯çº¿å¿…æ˜ï¼š AI å¤§æ¨¡å‹å­¦ä¹ è·¯çº¿å›¾ï¼Œ1 å¼ å›¾ç†æ¸…æ ¸å¿ƒå†…å®¹\n\n![](https://i-blog.csdnimg.cn/img_convert/3128ce65b9ebb9be60474ae0fdd0b104.jpeg)\n\nåˆšæ¥è§¦ AI å¤§æ¨¡å‹ï¼Œä¸çŸ¥é“è¯¥ä»å“ªå­¦èµ·ï¼Ÿè¿™ä»½ã€Œ`AIå¤§æ¨¡å‹ å­¦ä¹ è·¯çº¿å›¾`ã€ç›´æ¥å¸®ä½ åˆ’é‡ç‚¹ï¼Œä¸ç”¨å†ç›²ç›®æ‘¸ç´¢ï¼\n\n`AIå¤§æ¨¡å‹ å­¦ä¹ è·¯çº¿å›¾`\n\n![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/direct/d76c79e57d5a48ecb19de5ef4e8433b8.png#pic_center)\n\n![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/direct/d76c79e57d5a48ecb19de5ef4e8433b8.png#pic_center)\n\n##### è·¯çº¿å›¾æ¶µç›– 5 å¤§æ ¸å¿ƒæ¿å—ï¼Œä»åŸºç¡€åˆ°è¿›é˜¶å±‚å±‚é€’è¿›ï¼šä¸€æ­¥æ­¥å¸¦ä½ ä»å…¥é—¨åˆ°è¿›é˜¶ï¼Œä»ç†è®ºåˆ°å®æˆ˜ã€‚\n\n![img](https://i-blog.csdnimg.cn/img_convert/1b2587bb0da8f1e918602c014d1ae0bf.png)\n\n![img](https://i-blog.csdnimg.cn/img_convert/1b2587bb0da8f1e918602c014d1ae0bf.png)\n\n##### **L1é˜¶æ®µ:å¯èˆªç¯‡ä¸¨æé€Ÿç ´ç•ŒAIæ–°æ—¶ä»£**\n\nL1é˜¶æ®µï¼šäº†è§£å¤§æ¨¡å‹çš„åŸºç¡€çŸ¥è¯†ï¼Œä»¥åŠå¤§æ¨¡å‹åœ¨å„ä¸ªè¡Œä¸šçš„åº”ç”¨å’Œåˆ†æï¼Œå­¦ä¹ ç†è§£å¤§æ¨¡å‹çš„æ ¸å¿ƒåŸç†ã€å…³é”®æŠ€æœ¯ä»¥åŠå¤§æ¨¡å‹åº”ç”¨åœºæ™¯ã€‚\n\n![img](https://i-blog.csdnimg.cn/img_convert/eb7b2e8fa0a6238f7c06f20403dd3ab3.png)\n\n![img](https://i-blog.csdnimg.cn/img_convert/eb7b2e8fa0a6238f7c06f20403dd3ab3.png)\n\n###### L2é˜¶æ®µï¼šæ”»åšç¯‡ä¸¨RAGå¼€å‘å®æˆ˜å·¥åŠ\n\nL2é˜¶æ®µï¼šAIå¤§æ¨¡å‹RAGåº”ç”¨å¼€å‘å·¥ç¨‹ï¼Œä¸»è¦å­¦ä¹ RAGæ£€ç´¢å¢å¼ºç”Ÿæˆï¼šåŒ…æ‹¬Naive RAGã€Advanced-RAGä»¥åŠRAGæ€§èƒ½è¯„ä¼°ï¼Œè¿˜æœ‰GraphRAGåœ¨å†…çš„å¤šä¸ªRAGçƒ­é—¨é¡¹ç›®çš„åˆ†æã€‚\n\n![img](https://i-blog.csdnimg.cn/img_convert/a93fa0ff46c2e650bead1d405b769644.png)\n\n![img](https://i-blog.csdnimg.cn/img_convert/a93fa0ff46c2e650bead1d405b769644.png)\n\n###### L3é˜¶æ®µï¼šè·ƒè¿ç¯‡ä¸¨Agentæ™ºèƒ½ä½“æ¶æ„è®¾è®¡\n\nL3é˜¶æ®µï¼šå¤§æ¨¡å‹Agentåº”ç”¨æ¶æ„è¿›é˜¶å®ç°ï¼Œä¸»è¦å­¦ä¹ LangChainã€ LIamaIndexæ¡†æ¶ï¼Œä¹Ÿä¼šå­¦ä¹ åˆ°AutoGPTã€ MetaGPTç­‰å¤šAgentç³»ç»Ÿï¼Œæ‰“é€ Agentæ™ºèƒ½ä½“ã€‚\n\n![img](https://i-blog.csdnimg.cn/img_convert/9f513b693bf85d8d26ceb6abc09f60ba.png)\n\n![img](https://i-blog.csdnimg.cn/img_convert/9f513b693bf85d8d26ceb6abc09f60ba.png)\n\n###### L4é˜¶æ®µï¼šç²¾è¿›ç¯‡ä¸¨æ¨¡å‹å¾®è°ƒä¸ç§æœ‰åŒ–éƒ¨ç½²\n\nL4é˜¶æ®µï¼šå¤§æ¨¡å‹çš„å¾®è°ƒå’Œç§æœ‰åŒ–éƒ¨ç½²ï¼Œæ›´åŠ æ·±å…¥çš„æ¢è®¨Transformeræ¶æ„ï¼Œå­¦ä¹ å¤§æ¨¡å‹çš„å¾®è°ƒæŠ€æœ¯ï¼Œåˆ©ç”¨DeepSpeedã€Lamam Factoryç­‰å·¥å…·å¿«é€Ÿè¿›è¡Œæ¨¡å‹å¾®è°ƒï¼Œå¹¶é€šè¿‡Ollamaã€vLLMç­‰æ¨ç†éƒ¨ç½²æ¡†æ¶ï¼Œå®ç°æ¨¡å‹çš„å¿«é€Ÿéƒ¨ç½²ã€‚\n\n![img](https://i-blog.csdnimg.cn/img_convert/b8695d8cb21de9e000917b945b36fa1d.png)\n\n![img](https://i-blog.csdnimg.cn/img_convert/b8695d8cb21de9e000917b945b36fa1d.png)\n\n###### L5é˜¶æ®µï¼šä¸“é¢˜é›†ä¸¨ç‰¹è®­ç¯‡ ã€å½•æ’­è¯¾ã€‘\n\n### img å››ã€èµ„æ–™é¢†å–ï¼šå…¨å¥—å†…å®¹å…è´¹æŠ±èµ°ï¼Œå­¦ AI ä¸ç”¨å†æ‰¾ç¬¬äºŒä»½\n\n![img](https://i-blog.csdnimg.cn/img_convert/a2eecf1cb9ef0450bec7b4dd66d8e6a2.png)\n\nä¸ç®¡ä½ æ˜¯ 0 åŸºç¡€æƒ³å…¥é—¨ AI å¤§æ¨¡å‹ï¼Œè¿˜æ˜¯æœ‰åŸºç¡€æƒ³å†²åˆºå¤§å‚ã€äº†è§£è¡Œä¸šè¶‹åŠ¿ï¼Œè¿™ä»½èµ„æ–™éƒ½èƒ½æ»¡è¶³ä½ ï¼  \nç°åœ¨åªéœ€æŒ‰ç…§æç¤ºæ“ä½œï¼Œå°±èƒ½å…è´¹é¢†å–ï¼š\n\n**ğŸ‘‡ğŸ‘‡æ‰«ç å…è´¹é¢†å–å…¨éƒ¨å†…å®¹ğŸ‘‡ğŸ‘‡**\n\n\u200b![](https://i-blog.csdnimg.cn/blog_migrate/35a667356d00b606992c228becf1f3a8.png)\n\n![](https://i-blog.csdnimg.cn/blog_migrate/35a667356d00b606992c228becf1f3a8.png)\n\n2025 å¹´æƒ³æŠ“ä½ AI å¤§æ¨¡å‹çš„é£å£ï¼Ÿåˆ«çŠ¹è±«ï¼Œè¿™ä»½å…è´¹èµ„æ–™å°±æ˜¯ä½ çš„ â€œèµ·è·‘çº¿â€ï¼\n\n![Logo](https://i-blog.csdnimg.cn/devpress/blog/51b6b18b57a24ac185913dd7db13ea07.jpg)\n\nç«å±±å¼•æ“å¼€å‘è€…ç¤¾åŒºæ˜¯ç«å±±å¼•æ“æ‰“é€ çš„AIæŠ€æœ¯ç”Ÿæ€å¹³å°ï¼Œèšç„¦Agentä¸å¤§æ¨¡å‹å¼€å‘ï¼Œæä¾›è±†åŒ…ç³»åˆ—æ¨¡å‹ï¼ˆå›¾åƒ/è§†é¢‘/è§†è§‰ï¼‰ã€æ™ºèƒ½åˆ†æä¸ä¼šè¯å·¥å…·ï¼Œå¹¶é…å¥—è¯„æµ‹é›†ã€åŠ¨æ‰‹å®éªŒå®¤åŠè¡Œä¸šæ¡ˆä¾‹åº“ã€‚ç¤¾åŒºé€šè¿‡æŠ€æœ¯æ²™é¾™ã€æŒ‘æˆ˜èµ›ç­‰æ´»åŠ¨ä¿ƒè¿›å¼€å‘è€…æˆé•¿ï¼Œæ–°ç”¨æˆ·å¯é¢†50ä¸‡Tokensæƒç›Šï¼ŒåŠ©åŠ›æ„å»ºæ™ºèƒ½åº”ç”¨ã€‚\n\næ›´å¤šæ¨è\n\nChessç”¨æˆ·ç•Œé¢è®¾è®¡ï¼šTailwind CSSæ ·å¼ç³»ç»Ÿå’Œç»„ä»¶åº“\n\nGitHubæ¨èé¡¹ç›®ç²¾é€‰ä¸­çš„ch/chessæ˜¯ä¸€ä¸ªç±»ä¼¼chess.comçš„å¤šäººåœ¨çº¿è±¡æ£‹å¹³å°ï¼Œå®ƒé‡‡ç”¨ç°ä»£åŒ–çš„å‰ç«¯æŠ€æœ¯æ ˆæ„å»ºï¼Œå°¤å…¶åœ¨ç”¨æˆ·ç•Œé¢è®¾è®¡ä¸Šé€šè¿‡Tailwind CSSæ ·å¼ç³»ç»Ÿå’Œç»„ä»¶åº“å®ç°äº†ä¼˜é›…ä¸”åŠŸèƒ½ä¸°å¯Œçš„äº¤äº’ä½“éªŒã€‚æœ¬æ–‡å°†æ·±å…¥æ¢è®¨è¯¥é¡¹ç›®å¦‚ä½•åˆ©ç”¨Tailwind CSSæ‰“é€ ä¸€è‡´çš„è®¾è®¡è¯­è¨€å’Œé«˜æ•ˆçš„ç»„ä»¶ç³»ç»Ÿï¼Œä¸ºè±¡æ£‹çˆ±å¥½è€…æä¾›æ²‰æµ¸å¼çš„æ¸¸æˆç•Œé¢ã€‚## ğŸ¨ Tailwind CSSæ ·å¼ç³»ç»Ÿï¼šæ„å»ºç»Ÿä¸€è§†\n\n![avatar](https://i-blog.csdnimg.cn/devpress/blog/51b6b18b57a24ac185913dd7db13ea07.jpg)\n\nç»ˆææŒ‡å—ï¼šGPT-Engineerå¦‚ä½•é€šè¿‡AIè‡ªåŠ¨å‘ç°ä»£ç é—®é¢˜å¹¶æå‡è´¨é‡\n\nGPT-Engineeræ˜¯ä¸€æ¬¾å¼ºå¤§çš„AIé©±åŠ¨ä»£ç å·¥å…·ï¼Œå®ƒèƒ½å¸®åŠ©å¼€å‘è€…è‡ªåŠ¨æ£€æµ‹æ½œåœ¨ä»£ç é—®é¢˜ã€ä¼˜åŒ–ä»£ç è´¨é‡ï¼Œè®©ç¼–ç¨‹æ•ˆç‡æå‡3å€ä»¥ä¸Šã€‚æ— è®ºæ˜¯æ–°æ‰‹è¿˜æ˜¯èµ„æ·±å¼€å‘è€…ï¼Œéƒ½èƒ½é€šè¿‡è¿™æ¬¾å·¥å…·è½»æ¾å‘ç°ä»£ç ä¸­çš„éšè—ç¼ºé™·ï¼Œå‡å°‘è°ƒè¯•æ—¶é—´ï¼Œé‡Šæ”¾æ›´å¤šç²¾åŠ›åœ¨åˆ›é€ æ€§å·¥ä½œä¸Šã€‚## ä¸€é”®å‘ç°ä»£ç é—®é¢˜ï¼šGPT-Engineerçš„AIå®¡æŸ¥é­”åŠ›GPT-Engineerçš„æ ¸å¿ƒèƒ½åŠ›åœ¨äºå…¶å†…ç½®çš„æ™ºèƒ½ä»£ç åˆ†æç³»ç»Ÿã€‚é€šè¿‡é›†æˆPythonä»£ç æ ¼å¼\n\n![avatar](https://i-blog.csdnimg.cn/devpress/blog/51b6b18b57a24ac185913dd7db13ea07.jpg)\n\nSatDumpä¸­çš„çº é”™ç¼–ç æŠ€æœ¯ï¼šä»RSç åˆ°Turboç çš„å®Œæ•´å®ç°æŒ‡å—\n\nåœ¨å«æ˜Ÿæ•°æ®ä¼ è¾“è¿‡ç¨‹ä¸­ï¼Œä¿¡å·å¾€å¾€ä¼šå—åˆ°å„ç§å¹²æ‰°ï¼Œå¯¼è‡´æ•°æ®é”™è¯¯ã€‚SatDumpä½œä¸ºä¸€æ¬¾é€šç”¨å«æ˜Ÿæ•°æ®å¤„ç†è½¯ä»¶ï¼Œé›†æˆäº†å¤šç§å…ˆè¿›çš„çº é”™ç¼–ç æŠ€æœ¯ï¼Œç¡®ä¿ä»å«æ˜Ÿæ¥æ”¶åˆ°çš„æ•°æ®èƒ½å¤Ÿå‡†ç¡®è§£ç ã€‚æœ¬æ–‡å°†æ·±å…¥è§£æSatDumpä¸­ä»Reed-Solomonï¼ˆRSï¼‰ç åˆ°Turboç çš„å®ç°ç»†èŠ‚ï¼Œå¸®åŠ©è¯»è€…ç†è§£è¿™äº›æŠ€æœ¯å¦‚ä½•ä¿éšœå«æ˜Ÿé€šä¿¡çš„å¯é æ€§ã€‚## ä¸ºä»€ä¹ˆçº é”™ç¼–ç å¯¹å«æ˜Ÿæ•°æ®è‡³å…³é‡è¦ï¼Ÿå«æ˜Ÿä¸åœ°é¢ç«™ä¹‹é—´çš„é€šä¿¡é“¾è·¯é¢ä¸´ç€ç©ºé—´è¾å°„ã€å¤§\n\n![avatar](https://i-blog.csdnimg.cn/devpress/blog/51b6b18b57a24ac185913dd7db13ea07.jpg)\n![æµè§ˆé‡](https://csdnimg.cn/release/devpress/public/img/watch.a5bd9e9b.svg)\n![ç‚¹èµ](https://csdnimg.cn/release/devpress/public/img/thumb.a0b81433.svg)\n![æ”¶è—](https://csdnimg.cn/release/devpress/public/img/mark.f1a889ab.svg)\n![](https://csdnimg.cn/release/devpress/public/img/share.f1fdda75.svg)\n\næ‰«ä¸€æ‰«åˆ†äº«å†…å®¹\n\n![]()\n![](https://csdnimg.cn/release/devpress/public/img/share.f1fdda75.svg)\n\n### æ‰€æœ‰è¯„è®º(0)\n\n![]()![](https://profile-avatar.csdnimg.cn/eb75dcc8773540bda9379c1546d0464b_y525698136.jpg!1)\n\n### [ç¨‹åºå­¦åˆ°æ˜](https://devpress.csdn.net/user/Y525698136)\n\n![](https://csdnimg.cn/release/devpress/public/img/devote.fe704c8a.svg)\n![](https://csdnimg.cn/release/devpress/public/img/top.c3a2945a.svg)\n![]()![logo](https://csdnimg.cn/release/devpress/public/img/csdn-logo.07312d72.png)\n![logo](https://csdnimg.cn/release/devpress/public/img/csdn-logo.07312d72.png)', 'doi': '', 'published_date': None, 'pdf_url': '', 'url': 'https://adg.csdn.net/696f5616437a6b40336a0d48.html', 'source': 'tavily', 'categories': ['web_search'], 'keywords': [], 'citations': 0, 'references': [], 'extra': {'score': 0.9999349, 'saved_path': None}}], 'save_path': '/home/qinshan/widthresearch/data/downloads'}
2026-02-21 19:57:01,679 - __main__ - INFO - handle_download: searcher=TavilySearch, input_papers=1, save_path=/home/qinshan/widthresearch/data/downloads
2026-02-21 19:57:01,680 - __main__ - INFO - handle_download: downloaded=1
2026-02-21 19:57:01,680 - __main__ - INFO - call_tool payload: source_tool=tavily_download, result_type=papers, count=1
2026-02-21 19:57:01,680 - __main__ - INFO - call_tool: name=tavily_download, result_type=papers, count=1
2026-02-21 19:57:01,680 - __main__ - DEBUG - call_tool payload sample: {'paper_id': '', 'title': 'ä»é›¶å¼€å§‹å­¦LangGraphï¼ˆ6ï¼‰ï¼šè½»æ¾ç©è½¬Conditional Edges', 'authors': [], 'abstract': '# [logo ç«å±±å¼•æ“ ADG ç¤¾åŒº](https://adg.csdn.net "ç«å±±å¼•æ“ ADG ç¤¾åŒº")\n\n![logo](https://i-blog.csdnimg.cn/devpress/blog/51b6b18b57a24ac185913dd7db13ea07.jpg)\n![](https://i-blog.csdnimg.cn/devpress/blog/51b6b18b57a24ac185913dd7db13ea07.jpg)\n\n## ç™»å½•ç¤¾åŒºäº‘\n\nç™»å½•ç¤¾åŒºäº‘ï¼Œä¸ç¤¾åŒºç”¨æˆ·å…±åŒæˆé•¿\n\n### ç«å±±å¼•æ“ ADG ç¤¾åŒº\n\né‚€è¯·æ‚¨åŠ å…¥ç¤¾åŒº\n\n![]()![]()\n\n# ä»é›¶å¼€å§‹å­¦LangGraphï¼ˆ6ï¼‰ï¼šè½»æ¾ç©è½¬Conditional Edges\n\nåœ¨ä¸Šä¸€æœŸæ–‡ç« ä¸­ï¼Œæˆ‘å¸¦ç€å¤§å®¶æ­å»ºäº†ä¸€ä¸ªåŸºç¡€ç‰ˆçš„Graphã€‚ä»Šå¤©æˆ‘ä»¬è¦åœ¨æ­¤åŸºç¡€ä¸Šï¼Œå¼•å…¥Conditional Edgesï¼ˆæ¡ä»¶è¾¹ï¼‰çš„æ¦‚å¿µï¼Œè®©æˆ‘ä»¬çš„Graphæ›´åŠ å¥½ç©ä¸€ç‚¹ã€‚\n\n![](https://profile-avatar.csdnimg.cn/eb75dcc8773540bda9379c1546d0464b_y525698136.jpg!1)\n\n### [ç¨‹åºå­¦åˆ°æ˜](https://devpress.csdn.net/user/Y525698136)\n\n![](https://profile-avatar.csdnimg.cn/eb75dcc8773540bda9379c1546d0464b_y525698136.jpg!1)\n\nå¤§å®¶å¥½ï¼Œåœ¨ä¸Šä¸€æœŸæ–‡ç« ä¸­ï¼Œæˆ‘å¸¦ç€å¤§å®¶æ­å»ºäº†ä¸€ä¸ªåŸºç¡€ç‰ˆçš„Graphã€‚ä»Šå¤©æˆ‘ä»¬è¦åœ¨æ­¤åŸºç¡€ä¸Šï¼Œå¼•å…¥Conditional Edgesï¼ˆæ¡ä»¶è¾¹ï¼‰çš„æ¦‚å¿µï¼Œè®©æˆ‘ä»¬çš„Graphæ›´åŠ å¥½ç©ä¸€ç‚¹ã€‚\n\n### ä»€ä¹ˆæ˜¯Conditional Edges\n\nConditional Edgesï¼ˆæ¡ä»¶è¾¹ï¼‰é¡¾åæ€ä¹‰ï¼Œå°±æ˜¯å¸¦æ¡ä»¶åˆ¤æ–­çš„è¾¹ï¼Œå³æ ¹æ®æ¡ä»¶æ˜¯å¦æ»¡è¶³ï¼Œå†³å®šèµ°å“ªæ¡è¾¹ã€‚\n\næˆ‘ä»¬å…ˆä»å›¾å½¢ä¸Šæ¥æ„Ÿå—ä¸€ä¸‹æ¡ä»¶è¾¹ï¼š\n\n![](https://i-blog.csdnimg.cn/img_convert/33f3735631cf5a66c7b1a3761191a4d5.jpeg)\n\n![](https://i-blog.csdnimg.cn/img_convert/33f3735631cf5a66c7b1a3761191a4d5.jpeg)\n\nå¯ä»¥çœ‹åˆ°ï¼Œä¸ä¸ŠæœŸçš„ç®€å•çº¿æ¡ç»“æ„ç›¸æ¯”ï¼Œä»Šå¤©æˆ‘ä»¬è¦åˆ›å»ºçš„å›¾ï¼Œå¤šäº†ä¸€ä¸ª**router**èŠ‚ç‚¹ï¼Œç„¶åä»å®ƒå‡ºå‘ï¼Œåˆåˆ†å‡ºäº†é˜²å¾¡å’Œé—ªé¿ä¸¤ä¸ªåˆ†æ”¯ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ ¹æ®**router**è®¾å®šçš„é€»è¾‘ï¼Œæˆ‘ä»¬çš„è§’è‰²è¦ä¹ˆé€‰æ‹©é˜²å¾¡ï¼Œè¦ä¹ˆé€‰æ‹©é—ªé¿ã€‚å…¶ä¸­çš„defendå’Œdodgeä¸¤æ¡è™šçº¿ï¼Œå°±æ˜¯æ¡ä»¶è¾¹ã€‚\n\n### æ„é€ æ¡ä»¶è¾¹çš„åŸºæœ¬æ–¹æ³•\n\næ¡ä»¶è¾¹çš„æ„é€ æ–¹æ³•éå¸¸ç®€å•ï¼Œä¸»è¦åˆ†ä¸ºä¸‰ä¸ªæ­¥éª¤ï¼š\n\n#### 1.æ„é€ routing\\_function\n\næ‰€è°“çš„routing\\_functionï¼ˆè·¯ç”±å‡½æ•°ï¼‰ï¼Œå°±æ˜¯æŒ‡å¯¹æ•°æ®åˆ°åº•å¦‚ä½•æµåŠ¨è¿›è¡Œå®šä¹‰çš„å‡½æ•°ã€‚è€Œè¿™ç§å®šä¹‰åˆ©ç”¨çš„å°±æ˜¯pythonä¸­éå¸¸åŸºç¡€çš„â€œif-elif-elseâ€œçš„æ¡ä»¶åˆ¤æ–­ã€‚\n\nä¸€ä¸ªåŸºæœ¬çš„routing\\_functionçš„ç»“æ„å¦‚ä¸‹ï¼š\n\n`def routing_function(state:AgentState) -> AgentState: """This node will select the next node of the graph""" if state["KEY"] == "condition": return "edge_1" else: return "edge_2"`\n\nä»¥ä¸Šå‡½æ•°çš„æ„æ€å°±æ˜¯ï¼Œå¦‚æœç›®å‰Graphçš„stateä¸­çš„æŸä¸ª`KEY`çš„å€¼ä¸º`condition`ï¼Œé‚£ä¹ˆæ•°æ®å°±ä¼šæ²¿ç€åä¸º`edge_1`çš„è¾¹æµåŠ¨ã€‚å¦åˆ™ï¼Œå°±æ²¿ç€åä¸º`edge_2`çš„è¾¹æµåŠ¨ã€‚å½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥ç”¨`elif`å¢åŠ æ›´å¤šç§çš„æ¡ä»¶åˆ†æ”¯ã€‚\n\n`KEY`\n`condition`\n`edge_1`\n`edge_2`\n`elif`\n\nè¿™é‡Œæœ‰å‡ ä¸ªè¦ç‚¹ï¼š\n\n#### 2.æ·»åŠ æ¡ä»¶Node\n\nå¦‚ä¸ŠæœŸæ‰€è®²ï¼Œå½“æˆ‘ä»¬å®ŒæˆStateçš„åˆå§‹åŒ–ä¹‹åï¼Œé¦–å…ˆéœ€è¦æ·»åŠ Nodeã€‚æ™®é€šNodeçš„æ·»åŠ æ–¹æ³•å¦‚ä¸‹ï¼š\n\n`graph.add_node("èŠ‚ç‚¹å",èŠ‚ç‚¹å‡½æ•°)`\n\nåŒæ ·çš„ï¼Œæ¡ä»¶Nodeï¼Œå¦‚æˆ‘ä»¬å‰é¢å›¾ä¸­çš„`router`ï¼Œä¹Ÿéœ€è¦æ·»åŠ ã€‚ä½†æ¡ä»¶Nodeçš„æ·»åŠ æ–¹æ³•ä¸æ™®é€šNodeæœ‰ä¸ªç»†å¾®çš„å·®å¼‚ã€‚\n\n`router`\n\nç”±äºrouting\\_functionä¸æ™®é€šçš„èŠ‚ç‚¹å‡½æ•°ä¸åŒï¼Œå®ƒä¸ä¼šå¯¹Graphçš„stateæ•°æ®è¿›è¡Œæ“ä½œï¼Œå®ƒæœ€å¤šåˆ©ç”¨stateçš„æ•°æ®è¿›è¡Œä¸€äº›æ¡ä»¶æ»¡è¶³æ–¹é¢çš„åˆ¤æ–­ã€‚å› æ­¤ï¼Œäº‹å®ä¸Šè¾“å…¥routing\\_functionçš„stateï¼Œä¸å…¶è¾“å‡ºçš„stateï¼Œæ˜¯æ²¡æœ‰ä»»ä½•å·®å¼‚çš„ã€‚\n\nå› æ­¤ï¼Œæ¡ä»¶Nodeçš„æ·»åŠ æ–¹æ³•å¦‚ä¸‹ï¼š\n\n`graph.add_node("æ¡ä»¶èŠ‚ç‚¹å",lambda stateï¼šstate)`\n\nå…¶ä¸­èŠ‚ç‚¹å‡½æ•°çš„ä½ç½®è¢«ä¸€ä¸ª`lambda`å‡½æ•°æ‰€æ›¿ä»£ï¼Œä½ ä»ç„¶ä¸éœ€è¦çŸ¥é“è¿™ä¸ªçš„åŸç†æ˜¯ä»€ä¹ˆï¼Œä½ åªéœ€è¦çŸ¥é“è¿™ä»£è¡¨ç€è¾“å…¥è¾“å‡ºæ¡ä»¶Nodeçš„stateæ˜¯ç›¸åŒçš„å³å¯ã€‚\n\n`lambda`\n\n#### 3.æ·»åŠ æ¡ä»¶è¾¹\n\næœ€åï¼Œæˆ‘ä»¬ç»ˆäºæ¥åˆ°æ·»åŠ æ¡ä»¶è¾¹çš„ç¯èŠ‚ã€‚å…ˆæ¥çœ‹åŸºæœ¬ä»£ç ï¼š\n\n`graph.add_conditional_edges( "router", routing_function, { "edge_1":"node_name1", "edge_2":"node_name2" })`\n\nä¾ç„¶æ˜¯éå¸¸ç®€å•ï¼Œåˆ©ç”¨äº†ä¸€ä¸ª`add_conditional_edges`æ–¹æ³•ã€‚è¿™ä¸ªæ–¹æ³•éœ€è¦ä¸‰ä¸ªå‚æ•°ï¼Œåˆ†åˆ«æ˜¯ï¼š\n\n`add_conditional_edges`\n\nå®Œæˆä»¥ä¸Šå…¨éƒ¨æ­¥éª¤ï¼Œæˆ‘ä»¬çš„æ¡ä»¶è¾¹å°±æ·»åŠ å®Œæˆäº†ã€‚ä¸‹é¢æˆ‘å¸¦å¤§å®¶æ¥å®ç°ä¸€ä¸‹å‰é¢å›¾ä¸­çš„Graphã€‚\n\n### å®æˆ˜æ¼”ç»ƒ\n\n#### 1.å®šä¹‰State\n\n`from typing import TypedDictclass AppState(TypedDict): char_class: str char_level:int char_HP:int char_action: str`\n\nåœ¨ä¸ŠæœŸçš„state çš„åŸºç¡€ä¸Šï¼Œæˆ‘å¢åŠ äº†ä¸€ä¸ª`char_action`é”®ï¼Œå¹¶å°†å®ƒçš„å€¼çš„ç±»å‹è®¾å®šä¸ºstrã€‚è¿™é‡Œçš„æƒ³æ³•æ˜¯æˆ‘ä»¬ç›´æ¥ä¼ å…¥åŠ¨ä½œï¼Œæ˜¯é—ªé¿è¿˜æ˜¯é˜²å¾¡ï¼Œç„¶åå†ç”±routeræ ¹æ®æˆ‘ä»¬ä¼ å…¥çš„åŠ¨ä½œæ¥ç¡®å®šæ•°æ®èµ°å‘ã€‚\n\n`char_action`\n\næˆ‘è¿™é‡Œä¸»è¦å› ä¸ºæ˜¯æ¼”ç¤ºï¼Œæ‰€ä»¥æè¿™ä¹ˆç®€å•ï¼Œå¤§å®¶å¯ä»¥å°½æƒ…å¼€è„‘æ´å»è®¾è®¡è‡ªå·±çš„æ¡ä»¶åˆ¤æ–­ã€‚\n\n#### 2.å®šä¹‰å„èŠ‚ç‚¹å‡½æ•°\n\nä¸ºäº†é¿å…å†—ä½™ï¼Œè¿™é‡Œæˆ‘åªåˆ†æä¸ä¸ŠæœŸç›¸æ¯”å¢åŠ çš„ä»£ç ã€‚æ²¡æœ‰çœ‹è¿‡ä¸ŠæœŸçš„æœ‹å‹ä¸€å®šè¦å»çœ‹å•Šï¼\n\né¦–å…ˆï¼Œå†™å‡ºrouteræ‰€éœ€çš„routing\\_function:\n\n`def decide_next_node(state:AppState) -> AppState: """This node will select the next node of the graph""" if state["char_action"] == "é—ªé¿": return "dodge" elif state["char_action"] == "é˜²å¾¡": return "defend"`\n\néå¸¸ç®€å•çš„ä¸€ä¸ªæ¡ä»¶åˆ¤æ–­ï¼Œä¸å†èµ˜è¿°ã€‚\n\nç„¶åï¼Œå¢åŠ ä¸€ä¸ªâ€œé˜²å¾¡â€èŠ‚ç‚¹çš„å‡½æ•°\n\n`def defend_check_node(state: AppState) -> AppState: """æ£€æŸ¥é˜²å¾¡ç»“æœå¹¶å¤„ç†HPå˜åŒ–""" dice_roll = random.randint(1, 3) state[\'char_HP\'] = state[\'char_HP\'] - dice_roll print(f"ä½ å—åˆ°äº†{dice_roll}ç‚¹ä¼¤å®³") return state`\n\nè¿™é‡ŒåŒæ ·æ˜¯æå¾—å¾ˆç®€å•ï¼Œä½ å®Œå…¨å¯ä»¥åœ¨stateä¸­å¢åŠ ä¸€ä¸ªâ€œé˜²å¾¡å€¼â€çš„keyï¼Œç„¶ååœ¨è§’è‰²å—åˆ°æ”»å‡»æ—¶ï¼Œç”¨æ•Œæ–¹ä¼¤å®³å‡å»é˜²å¾¡å€¼çš„å‡€é¢ï¼Œä½œä¸ºè§’è‰²æœ€ç»ˆå—åˆ°çš„ä¼¤å®³ã€‚æ€»ä¹‹éå¸¸çµæ´»ã€‚\n\n#### 3.æ­å»ºGraph\n\nè¿™é‡Œä¹Ÿéå¸¸ç®€å•ï¼Œå› ä¸ºè¦ç‚¹å‰é¢éƒ½è®²äº†ï¼Œç›´æ¥ç»™å‡ºä»£ç ï¼š\n\n`graph = StateGraph(AppState)graph.add_node("dodge_check",dodge_check_node)graph.add_node("defend_check",defend_check_node)graph.add_node("character_status",display_character_status)graph.add_node("router",lambda state:state)graph.add_edge(START,"router")graph.add_conditional_edges( "router", decide_next_node, { "dodge":"dodge_check", "defend":"defend_check" })graph.add_edge("dodge_check","character_status")graph.add_edge("defend_check","character_status")graph.add_edge("character_status",END)app = graph.compile()`\n\nå†™è¿™ä¸€éƒ¨åˆ†ä»£ç çš„å…³é”®æ˜¯ä½ è‡ªå·±è¦å¯¹ä½ çš„Graphçš„æ•°æ®æµå‘å¿ƒé‡Œæœ‰æ•°ï¼Œæ‰€ä»¥ä¸€èˆ¬éƒ½æ˜¯å…ˆç”»å¥½ç»“æ„è‰å›¾ï¼ŒçœŸæ­£å†™ä»£ç çš„è¿‡ç¨‹å…¶å®æ˜¯å¾ˆç®€å•çš„ã€‚\n\n#### 4.ä½¿ç”¨Graph\n\næœ€åå°±æ˜¯å®é™…ä½¿ç”¨äº†ã€‚æˆ‘ä»¬ä¾ç„¶æ˜¯å‘`invoke`æ–¹æ³•ä¼ å…¥ä¸€ä¸ªä¸stateå®šä¹‰ä¸€è‡´çš„å­—å…¸ï¼Œæˆ‘ä»¬å…ˆæŠŠactionè®¾å®šä¸ºé—ªé¿ï¼š\n\n`invoke`\n`result = app.invoke({"char_class":"æ³•å¸ˆ","char_level":5,"char_HP":10,"char_action":"é—ªé¿"})`\n\nç»“æœå¦‚ä¸‹ï¼Œwoopsï¼Œé—ªé¿å¤±è´¥ï¼Œè¢«ç äº†3æ»´è¡€ã€‚\n\n![](https://i-blog.csdnimg.cn/img_convert/16bcda6e688c67184a4b3f04d9644add.jpeg)\n\n![](https://i-blog.csdnimg.cn/img_convert/16bcda6e688c67184a4b3f04d9644add.jpeg)\n\næˆ‘ä»¬å†è¯•è¯•è®©è§’è‰²é˜²å¾¡ï¼Œæœç„¶ç¨³å¦‚æ³°å±±ï¼š\n\n![](https://i-blog.csdnimg.cn/img_convert/5998c26d06c50d666fe28673c6e2794a.jpeg)\n\n![](https://i-blog.csdnimg.cn/img_convert/5998c26d06c50d666fe28673c6e2794a.jpeg)\n\nå¥½äº†ï¼Œå‡ºäºç¯‡å¹…è€ƒè™‘ï¼Œæœ¬æœŸå°±åˆ°æ­¤ä¸ºæ­¢ï¼Œä¸‹æœŸæˆ‘å°†ç»™å¤§å®¶ä»‹ç»æ¡ä»¶è¾¹çš„ä¸€ç§å¸¸ç”¨ç©æ³•ï¼ŒLoopï¼ˆå¾ªç¯ï¼‰ï¼Œå¤§å®¶å¯ä»¥å…ˆå°½æƒ…æ¢ç´¢ã€‚å¸Œæœ›è§‰å¾—æœ¬ç³»åˆ—æ–‡ç« æœ‰ç”¨çš„æœ‹å‹ä¸è¦å¿˜äº†ä¸€é”®ä¸‰è¿ï¼Œç»™ä¿ºä¸€ç‚¹é¼“åŠ±ï¼Œç¥å¤§å®¶ç©çš„å¼€å¿ƒï¼\n\næƒ³å…¥é—¨ AI å¤§æ¨¡å‹å´æ‰¾ä¸åˆ°æ¸…æ™°æ–¹å‘ï¼Ÿå¤‡è€ƒå¤§å‚ AI å²—è¿˜åœ¨å››å¤„æœé›†é›¶æ•£èµ„æ–™ï¼Ÿåˆ«å†æµªè´¹æ—¶é—´å•¦ï¼2025 å¹´ `AI å¤§æ¨¡å‹å…¨å¥—å­¦ä¹ èµ„æ–™`å·²æ•´ç†å®Œæ¯•ï¼Œä»å­¦ä¹ è·¯çº¿åˆ°é¢è¯•çœŸé¢˜ï¼Œä»å·¥å…·æ•™ç¨‹åˆ°è¡Œä¸šæŠ¥å‘Šï¼Œä¸€ç«™å¼è¦†ç›–ä½ çš„æ‰€æœ‰éœ€æ±‚ï¼Œç°åœ¨å…¨éƒ¨`å…è´¹åˆ†äº«`ï¼\n\n `AI å¤§æ¨¡å‹å…¨å¥—å­¦ä¹ èµ„æ–™`\n`å…è´¹åˆ†äº«`\n\n**ğŸ‘‡ğŸ‘‡æ‰«ç å…è´¹é¢†å–å…¨éƒ¨å†…å®¹ğŸ‘‡ğŸ‘‡**\n\n\u200b![](https://i-blog.csdnimg.cn/blog_migrate/35a667356d00b606992c228becf1f3a8.png)\n\n![](https://i-blog.csdnimg.cn/blog_migrate/35a667356d00b606992c228becf1f3a8.png)\n\n### ä¸€ã€å­¦ä¹ å¿…å¤‡ï¼š100+æœ¬å¤§æ¨¡å‹ç”µå­ä¹¦+26 ä»½è¡Œä¸šæŠ¥å‘Š + 600+ å¥—æŠ€æœ¯PPTï¼Œå¸®ä½ çœ‹é€ AI è¶‹åŠ¿\n\næƒ³äº†è§£å¤§æ¨¡å‹çš„è¡Œä¸šåŠ¨æ€ã€å•†ä¸šè½åœ°æ¡ˆä¾‹ï¼Ÿå¤§æ¨¡å‹ç”µå­ä¹¦ï¼Ÿ**`è¿™ä»½èµ„æ–™å¸®ä½ ç«™åœ¨ â€œè¡Œä¸šé«˜åº¦â€ å­¦ AI`ï¼š**\n\n`è¿™ä»½èµ„æ–™å¸®ä½ ç«™åœ¨ â€œè¡Œä¸šé«˜åº¦â€ å­¦ AI`\n\n#### 1. 100+æœ¬å¤§æ¨¡å‹æ–¹å‘ç”µå­ä¹¦\n\n![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/direct/b76dfd5e3a9b42fdad0f5ea51dfd0c04.png#pic_center)\n\n![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/direct/b76dfd5e3a9b42fdad0f5ea51dfd0c04.png#pic_center)\n\n#### 2. 26 ä»½è¡Œä¸šç ”ç©¶æŠ¥å‘Šï¼šè¦†ç›–å¤šé¢†åŸŸå®è·µä¸è¶‹åŠ¿\n\næŠ¥å‘ŠåŒ…å«é˜¿é‡Œã€DeepSeek ç­‰æƒå¨æœºæ„å‘å¸ƒçš„æ ¸å¿ƒå†…å®¹ï¼Œæ¶µç›–ï¼š  \n![](https://i-blog.csdnimg.cn/img_convert/42dbc372b05fba5c04f015e9d3b8e030.jpeg)\n\n![](https://i-blog.csdnimg.cn/img_convert/42dbc372b05fba5c04f015e9d3b8e030.jpeg)\n\n#### 3. 600+å¥—æŠ€æœ¯å¤§ä¼š PPTï¼šå¬è¡Œä¸šå¤§å’–è®²å®æˆ˜\n\nPPT æ•´ç†è‡ª 2024-2025 å¹´çƒ­é—¨æŠ€æœ¯å¤§ä¼šï¼ŒåŒ…å«ç™¾åº¦ã€è…¾è®¯ã€å­—èŠ‚ç­‰ä¼ä¸šçš„ä¸€çº¿å®è·µï¼š\n\n![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/direct/c478368f9f2b4b418d68d68a35876bc4.gif#pic_center)\n\n![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/direct/c478368f9f2b4b418d68d68a35876bc4.gif#pic_center)\n\n### äºŒã€æ±‚èŒå¿…çœ‹ï¼šå¤§å‚ AI å²—é¢è¯• â€œå¼¹è¯åº“â€ï¼Œ300 + çœŸé¢˜ + 107 é“é¢ç»ç›´æ¥æŠ±èµ°\n\næƒ³å†²å­—èŠ‚ã€è…¾è®¯ã€é˜¿é‡Œã€è”šæ¥ç­‰å¤§å‚ AI å²—ï¼Ÿè¿™ä»½é¢è¯•èµ„æ–™å¸®ä½ æå‰ â€œæŠ¼é¢˜â€ï¼Œæ‹’ç»ä¸´åœºæ…Œï¼\n\n![](https://i-blog.csdnimg.cn/img_convert/70f9f3a66290f3f94181cb8f676c264a.jpeg)\n\n![](https://i-blog.csdnimg.cn/img_convert/70f9f3a66290f3f94181cb8f676c264a.jpeg)\n\n#### 1. 107 é“å¤§å‚é¢ç»ï¼šè¦†ç›– Promptã€RAGã€å¤§æ¨¡å‹åº”ç”¨å·¥ç¨‹å¸ˆç­‰çƒ­é—¨å²—ä½\n\né¢ç»æ•´ç†è‡ª 2021-2025 å¹´çœŸå®é¢è¯•åœºæ™¯ï¼ŒåŒ…å« TPlinkã€å­—èŠ‚ã€è…¾è®¯ã€è”šæ¥ã€è™¾çš®ã€ä¸­å…´ã€ç§‘å¤§è®¯é£ã€äº¬ä¸œç­‰ä¼ä¸šçš„é«˜é¢‘è€ƒé¢˜ï¼Œ`æ¯é“é¢˜éƒ½é™„å¸¦æ€è·¯è§£æ`ï¼š\n\n`æ¯é“é¢˜éƒ½é™„å¸¦æ€è·¯è§£æ`\n\n![](https://i-blog.csdnimg.cn/img_convert/2123cd7b05a849ba7cda52d55675412c.jpeg)\n\n![](https://i-blog.csdnimg.cn/img_convert/2123cd7b05a849ba7cda52d55675412c.jpeg)\n\n#### 2. 102 é“ AI å¤§æ¨¡å‹çœŸé¢˜ï¼šç›´å‡»å¤§æ¨¡å‹æ ¸å¿ƒè€ƒç‚¹\n\né’ˆå¯¹å¤§æ¨¡å‹ä¸“å±è€ƒé¢˜ï¼Œä»æ¦‚å¿µåˆ°å®è·µå…¨é¢è¦†ç›–ï¼Œå¸®ä½ ç†æ¸…åº•å±‚é€»è¾‘ï¼š\n\n![](https://i-blog.csdnimg.cn/img_convert/635628ec8a40cddf7592730ba0f9d860.jpeg)\n\n![](https://i-blog.csdnimg.cn/img_convert/635628ec8a40cddf7592730ba0f9d860.jpeg)\n\n#### 3. 97 é“ LLMs çœŸé¢˜ï¼šèšç„¦å¤§å‹è¯­è¨€æ¨¡å‹é«˜é¢‘é—®é¢˜\n\nä¸“é—¨æ‹†è§£ LLMs çš„æ ¸å¿ƒç—›ç‚¹ä¸è§£å†³æ–¹æ¡ˆï¼Œæ¯”å¦‚è®©å¾ˆå¤šäººå¤´ç–¼çš„ â€œå¤è¯»æœºé—®é¢˜â€ï¼š\n\n### ä¸‰ã€è·¯çº¿å¿…æ˜ï¼š AI å¤§æ¨¡å‹å­¦ä¹ è·¯çº¿å›¾ï¼Œ1 å¼ å›¾ç†æ¸…æ ¸å¿ƒå†…å®¹\n\n![](https://i-blog.csdnimg.cn/img_convert/3128ce65b9ebb9be60474ae0fdd0b104.jpeg)\n\nåˆšæ¥è§¦ AI å¤§æ¨¡å‹ï¼Œä¸çŸ¥é“è¯¥ä»å“ªå­¦èµ·ï¼Ÿè¿™ä»½ã€Œ`AIå¤§æ¨¡å‹ å­¦ä¹ è·¯çº¿å›¾`ã€ç›´æ¥å¸®ä½ åˆ’é‡ç‚¹ï¼Œä¸ç”¨å†ç›²ç›®æ‘¸ç´¢ï¼\n\n`AIå¤§æ¨¡å‹ å­¦ä¹ è·¯çº¿å›¾`\n\n![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/direct/d76c79e57d5a48ecb19de5ef4e8433b8.png#pic_center)\n\n![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/direct/d76c79e57d5a48ecb19de5ef4e8433b8.png#pic_center)\n\n##### è·¯çº¿å›¾æ¶µç›– 5 å¤§æ ¸å¿ƒæ¿å—ï¼Œä»åŸºç¡€åˆ°è¿›é˜¶å±‚å±‚é€’è¿›ï¼šä¸€æ­¥æ­¥å¸¦ä½ ä»å…¥é—¨åˆ°è¿›é˜¶ï¼Œä»ç†è®ºåˆ°å®æˆ˜ã€‚\n\n![img](https://i-blog.csdnimg.cn/img_convert/1b2587bb0da8f1e918602c014d1ae0bf.png)\n\n![img](https://i-blog.csdnimg.cn/img_convert/1b2587bb0da8f1e918602c014d1ae0bf.png)\n\n##### **L1é˜¶æ®µ:å¯èˆªç¯‡ä¸¨æé€Ÿç ´ç•ŒAIæ–°æ—¶ä»£**\n\nL1é˜¶æ®µï¼šäº†è§£å¤§æ¨¡å‹çš„åŸºç¡€çŸ¥è¯†ï¼Œä»¥åŠå¤§æ¨¡å‹åœ¨å„ä¸ªè¡Œä¸šçš„åº”ç”¨å’Œåˆ†æï¼Œå­¦ä¹ ç†è§£å¤§æ¨¡å‹çš„æ ¸å¿ƒåŸç†ã€å…³é”®æŠ€æœ¯ä»¥åŠå¤§æ¨¡å‹åº”ç”¨åœºæ™¯ã€‚\n\n![img](https://i-blog.csdnimg.cn/img_convert/eb7b2e8fa0a6238f7c06f20403dd3ab3.png)\n\n![img](https://i-blog.csdnimg.cn/img_convert/eb7b2e8fa0a6238f7c06f20403dd3ab3.png)\n\n###### L2é˜¶æ®µï¼šæ”»åšç¯‡ä¸¨RAGå¼€å‘å®æˆ˜å·¥åŠ\n\nL2é˜¶æ®µï¼šAIå¤§æ¨¡å‹RAGåº”ç”¨å¼€å‘å·¥ç¨‹ï¼Œä¸»è¦å­¦ä¹ RAGæ£€ç´¢å¢å¼ºç”Ÿæˆï¼šåŒ…æ‹¬Naive RAGã€Advanced-RAGä»¥åŠRAGæ€§èƒ½è¯„ä¼°ï¼Œè¿˜æœ‰GraphRAGåœ¨å†…çš„å¤šä¸ªRAGçƒ­é—¨é¡¹ç›®çš„åˆ†æã€‚\n\n![img](https://i-blog.csdnimg.cn/img_convert/a93fa0ff46c2e650bead1d405b769644.png)\n\n![img](https://i-blog.csdnimg.cn/img_convert/a93fa0ff46c2e650bead1d405b769644.png)\n\n###### L3é˜¶æ®µï¼šè·ƒè¿ç¯‡ä¸¨Agentæ™ºèƒ½ä½“æ¶æ„è®¾è®¡\n\nL3é˜¶æ®µï¼šå¤§æ¨¡å‹Agentåº”ç”¨æ¶æ„è¿›é˜¶å®ç°ï¼Œä¸»è¦å­¦ä¹ LangChainã€ LIamaIndexæ¡†æ¶ï¼Œä¹Ÿä¼šå­¦ä¹ åˆ°AutoGPTã€ MetaGPTç­‰å¤šAgentç³»ç»Ÿï¼Œæ‰“é€ Agentæ™ºèƒ½ä½“ã€‚\n\n![img](https://i-blog.csdnimg.cn/img_convert/9f513b693bf85d8d26ceb6abc09f60ba.png)\n\n![img](https://i-blog.csdnimg.cn/img_convert/9f513b693bf85d8d26ceb6abc09f60ba.png)\n\n###### L4é˜¶æ®µï¼šç²¾è¿›ç¯‡ä¸¨æ¨¡å‹å¾®è°ƒä¸ç§æœ‰åŒ–éƒ¨ç½²\n\nL4é˜¶æ®µï¼šå¤§æ¨¡å‹çš„å¾®è°ƒå’Œç§æœ‰åŒ–éƒ¨ç½²ï¼Œæ›´åŠ æ·±å…¥çš„æ¢è®¨Transformeræ¶æ„ï¼Œå­¦ä¹ å¤§æ¨¡å‹çš„å¾®è°ƒæŠ€æœ¯ï¼Œåˆ©ç”¨DeepSpeedã€Lamam Factoryç­‰å·¥å…·å¿«é€Ÿè¿›è¡Œæ¨¡å‹å¾®è°ƒï¼Œå¹¶é€šè¿‡Ollamaã€vLLMç­‰æ¨ç†éƒ¨ç½²æ¡†æ¶ï¼Œå®ç°æ¨¡å‹çš„å¿«é€Ÿéƒ¨ç½²ã€‚\n\n![img](https://i-blog.csdnimg.cn/img_convert/b8695d8cb21de9e000917b945b36fa1d.png)\n\n![img](https://i-blog.csdnimg.cn/img_convert/b8695d8cb21de9e000917b945b36fa1d.png)\n\n###### L5é˜¶æ®µï¼šä¸“é¢˜é›†ä¸¨ç‰¹è®­ç¯‡ ã€å½•æ’­è¯¾ã€‘\n\n### img å››ã€èµ„æ–™é¢†å–ï¼šå…¨å¥—å†…å®¹å…è´¹æŠ±èµ°ï¼Œå­¦ AI ä¸ç”¨å†æ‰¾ç¬¬äºŒä»½\n\n![img](https://i-blog.csdnimg.cn/img_convert/a2eecf1cb9ef0450bec7b4dd66d8e6a2.png)\n\nä¸ç®¡ä½ æ˜¯ 0 åŸºç¡€æƒ³å…¥é—¨ AI å¤§æ¨¡å‹ï¼Œè¿˜æ˜¯æœ‰åŸºç¡€æƒ³å†²åˆºå¤§å‚ã€äº†è§£è¡Œä¸šè¶‹åŠ¿ï¼Œè¿™ä»½èµ„æ–™éƒ½èƒ½æ»¡è¶³ä½ ï¼  \nç°åœ¨åªéœ€æŒ‰ç…§æç¤ºæ“ä½œï¼Œå°±èƒ½å…è´¹é¢†å–ï¼š\n\n**ğŸ‘‡ğŸ‘‡æ‰«ç å…è´¹é¢†å–å…¨éƒ¨å†…å®¹ğŸ‘‡ğŸ‘‡**\n\n\u200b![](https://i-blog.csdnimg.cn/blog_migrate/35a667356d00b606992c228becf1f3a8.png)\n\n![](https://i-blog.csdnimg.cn/blog_migrate/35a667356d00b606992c228becf1f3a8.png)\n\n2025 å¹´æƒ³æŠ“ä½ AI å¤§æ¨¡å‹çš„é£å£ï¼Ÿåˆ«çŠ¹è±«ï¼Œè¿™ä»½å…è´¹èµ„æ–™å°±æ˜¯ä½ çš„ â€œèµ·è·‘çº¿â€ï¼\n\n![Logo](https://i-blog.csdnimg.cn/devpress/blog/51b6b18b57a24ac185913dd7db13ea07.jpg)\n\nç«å±±å¼•æ“å¼€å‘è€…ç¤¾åŒºæ˜¯ç«å±±å¼•æ“æ‰“é€ çš„AIæŠ€æœ¯ç”Ÿæ€å¹³å°ï¼Œèšç„¦Agentä¸å¤§æ¨¡å‹å¼€å‘ï¼Œæä¾›è±†åŒ…ç³»åˆ—æ¨¡å‹ï¼ˆå›¾åƒ/è§†é¢‘/è§†è§‰ï¼‰ã€æ™ºèƒ½åˆ†æä¸ä¼šè¯å·¥å…·ï¼Œå¹¶é…å¥—è¯„æµ‹é›†ã€åŠ¨æ‰‹å®éªŒå®¤åŠè¡Œä¸šæ¡ˆä¾‹åº“ã€‚ç¤¾åŒºé€šè¿‡æŠ€æœ¯æ²™é¾™ã€æŒ‘æˆ˜èµ›ç­‰æ´»åŠ¨ä¿ƒè¿›å¼€å‘è€…æˆé•¿ï¼Œæ–°ç”¨æˆ·å¯é¢†50ä¸‡Tokensæƒç›Šï¼ŒåŠ©åŠ›æ„å»ºæ™ºèƒ½åº”ç”¨ã€‚\n\næ›´å¤šæ¨è\n\nChessç”¨æˆ·ç•Œé¢è®¾è®¡ï¼šTailwind CSSæ ·å¼ç³»ç»Ÿå’Œç»„ä»¶åº“\n\nGitHubæ¨èé¡¹ç›®ç²¾é€‰ä¸­çš„ch/chessæ˜¯ä¸€ä¸ªç±»ä¼¼chess.comçš„å¤šäººåœ¨çº¿è±¡æ£‹å¹³å°ï¼Œå®ƒé‡‡ç”¨ç°ä»£åŒ–çš„å‰ç«¯æŠ€æœ¯æ ˆæ„å»ºï¼Œå°¤å…¶åœ¨ç”¨æˆ·ç•Œé¢è®¾è®¡ä¸Šé€šè¿‡Tailwind CSSæ ·å¼ç³»ç»Ÿå’Œç»„ä»¶åº“å®ç°äº†ä¼˜é›…ä¸”åŠŸèƒ½ä¸°å¯Œçš„äº¤äº’ä½“éªŒã€‚æœ¬æ–‡å°†æ·±å…¥æ¢è®¨è¯¥é¡¹ç›®å¦‚ä½•åˆ©ç”¨Tailwind CSSæ‰“é€ ä¸€è‡´çš„è®¾è®¡è¯­è¨€å’Œé«˜æ•ˆçš„ç»„ä»¶ç³»ç»Ÿï¼Œä¸ºè±¡æ£‹çˆ±å¥½è€…æä¾›æ²‰æµ¸å¼çš„æ¸¸æˆç•Œé¢ã€‚## ğŸ¨ Tailwind CSSæ ·å¼ç³»ç»Ÿï¼šæ„å»ºç»Ÿä¸€è§†\n\n![avatar](https://i-blog.csdnimg.cn/devpress/blog/51b6b18b57a24ac185913dd7db13ea07.jpg)\n\nç»ˆææŒ‡å—ï¼šGPT-Engineerå¦‚ä½•é€šè¿‡AIè‡ªåŠ¨å‘ç°ä»£ç é—®é¢˜å¹¶æå‡è´¨é‡\n\nGPT-Engineeræ˜¯ä¸€æ¬¾å¼ºå¤§çš„AIé©±åŠ¨ä»£ç å·¥å…·ï¼Œå®ƒèƒ½å¸®åŠ©å¼€å‘è€…è‡ªåŠ¨æ£€æµ‹æ½œåœ¨ä»£ç é—®é¢˜ã€ä¼˜åŒ–ä»£ç è´¨é‡ï¼Œè®©ç¼–ç¨‹æ•ˆç‡æå‡3å€ä»¥ä¸Šã€‚æ— è®ºæ˜¯æ–°æ‰‹è¿˜æ˜¯èµ„æ·±å¼€å‘è€…ï¼Œéƒ½èƒ½é€šè¿‡è¿™æ¬¾å·¥å…·è½»æ¾å‘ç°ä»£ç ä¸­çš„éšè—ç¼ºé™·ï¼Œå‡å°‘è°ƒè¯•æ—¶é—´ï¼Œé‡Šæ”¾æ›´å¤šç²¾åŠ›åœ¨åˆ›é€ æ€§å·¥ä½œä¸Šã€‚## ä¸€é”®å‘ç°ä»£ç é—®é¢˜ï¼šGPT-Engineerçš„AIå®¡æŸ¥é­”åŠ›GPT-Engineerçš„æ ¸å¿ƒèƒ½åŠ›åœ¨äºå…¶å†…ç½®çš„æ™ºèƒ½ä»£ç åˆ†æç³»ç»Ÿã€‚é€šè¿‡é›†æˆPythonä»£ç æ ¼å¼\n\n![avatar](https://i-blog.csdnimg.cn/devpress/blog/51b6b18b57a24ac185913dd7db13ea07.jpg)\n\nSatDumpä¸­çš„çº é”™ç¼–ç æŠ€æœ¯ï¼šä»RSç åˆ°Turboç çš„å®Œæ•´å®ç°æŒ‡å—\n\nåœ¨å«æ˜Ÿæ•°æ®ä¼ è¾“è¿‡ç¨‹ä¸­ï¼Œä¿¡å·å¾€å¾€ä¼šå—åˆ°å„ç§å¹²æ‰°ï¼Œå¯¼è‡´æ•°æ®é”™è¯¯ã€‚SatDumpä½œä¸ºä¸€æ¬¾é€šç”¨å«æ˜Ÿæ•°æ®å¤„ç†è½¯ä»¶ï¼Œé›†æˆäº†å¤šç§å…ˆè¿›çš„çº é”™ç¼–ç æŠ€æœ¯ï¼Œç¡®ä¿ä»å«æ˜Ÿæ¥æ”¶åˆ°çš„æ•°æ®èƒ½å¤Ÿå‡†ç¡®è§£ç ã€‚æœ¬æ–‡å°†æ·±å…¥è§£æSatDumpä¸­ä»Reed-Solomonï¼ˆRSï¼‰ç åˆ°Turboç çš„å®ç°ç»†èŠ‚ï¼Œå¸®åŠ©è¯»è€…ç†è§£è¿™äº›æŠ€æœ¯å¦‚ä½•ä¿éšœå«æ˜Ÿé€šä¿¡çš„å¯é æ€§ã€‚## ä¸ºä»€ä¹ˆçº é”™ç¼–ç å¯¹å«æ˜Ÿæ•°æ®è‡³å…³é‡è¦ï¼Ÿå«æ˜Ÿä¸åœ°é¢ç«™ä¹‹é—´çš„é€šä¿¡é“¾è·¯é¢ä¸´ç€ç©ºé—´è¾å°„ã€å¤§\n\n![avatar](https://i-blog.csdnimg.cn/devpress/blog/51b6b18b57a24ac185913dd7db13ea07.jpg)\n![æµè§ˆé‡](https://csdnimg.cn/release/devpress/public/img/watch.a5bd9e9b.svg)\n![ç‚¹èµ](https://csdnimg.cn/release/devpress/public/img/thumb.a0b81433.svg)\n![æ”¶è—](https://csdnimg.cn/release/devpress/public/img/mark.f1a889ab.svg)\n![](https://csdnimg.cn/release/devpress/public/img/share.f1fdda75.svg)\n\næ‰«ä¸€æ‰«åˆ†äº«å†…å®¹\n\n![]()\n![](https://csdnimg.cn/release/devpress/public/img/share.f1fdda75.svg)\n\n### æ‰€æœ‰è¯„è®º(0)\n\n![]()![](https://profile-avatar.csdnimg.cn/eb75dcc8773540bda9379c1546d0464b_y525698136.jpg!1)\n\n### [ç¨‹åºå­¦åˆ°æ˜](https://devpress.csdn.net/user/Y525698136)\n\n![](https://csdnimg.cn/release/devpress/public/img/devote.fe704c8a.svg)\n![](https://csdnimg.cn/release/devpress/public/img/top.c3a2945a.svg)\n![]()![logo](https://csdnimg.cn/release/devpress/public/img/csdn-logo.07312d72.png)\n![logo](https://csdnimg.cn/release/devpress/public/img/csdn-logo.07312d72.png)', 'doi': '', 'published_date': None, 'pdf_url': '', 'url': 'https://adg.csdn.net/696f5616437a6b40336a0d48.html', 'source': 'tavily', 'categories': ['web_search'], 'keywords': [], 'citations': 0, 'references': [], 'extra': {'score': 0.9999349, 'saved_path': '/home/qinshan/widthresearch/data/downloads/tavily_ä»é›¶å¼€å§‹å­¦LangG.md'}}
2026-02-21 19:57:01,698 - __main__ - INFO - call_tool: name=exa_context_download, args={'papers': [{'paper_id': '', 'title': 'Conditional Workflow in LangGraph: A Complete Developer Guide | by Akash Shinde | Jan, 2026 | Medium', 'authors': [], 'abstract': 'Conditional Workflow in LangGraph: A Complete Developer Guide | by Akash Shinde | Jan, 2026 | Medium\n[Sitemap] \n[Open in app] \nSign up\n[Sign in] \n[Medium Logo] \n[\nWrite\n] \n[\nSearch\n] \nSign up\n[Sign in] \n![] \n# Conditional Workflow in LangGraph: A Complete Developer Guide\n[\n![Akash Shinde] \n] \n[Akash Shinde] \n5 min read\nÂ·Jan 25, 2026\n[\n] \n--\n[] \nListen\nShare\nBuilding intelligent AI agents requires more than just a linear â€œinput-to-outputâ€ chain. To create truly autonomous systems, you need a way for the workflow to make decisions, handle errors, and route queries dynamically.\nIn**LangGraph**, this is achieved through**Conditional Edges**. Unlike standard edges in[**Sequential workflow**] **(we learned in our previous blog)**that connect**Node A**to**Node B**directly, conditional edges act as the â€œbrainâ€ of your graph, deciding which path to take at runtime based on the current state.\n## What Is a Conditional Workflow in LangGraph?\n> A **> conditional workflow\n**> is a workflow where the next step is chosen **> based on a condition or decision\n**> .\nPress enter or click to view image in full size\n![] \n## Components :\nThere are three components which required to build a conditional workflow.\n1. **Nodes**: Python functions that perform tasks (e.g., calling an LLM or a tool).\n2. **State**: A shared memory object (usually a`TypedDict`) that stores the data flowing through the graph.\n3. **The Routing Function**: A function that inspects the state or check the condition and returns a string representing the next node to visit.### How Conditional Workflows Differ from Sequential Ones\n**Sequential Workflow**\n```\nSTART â†’Step A â†’Step B â†’END\n```\n**Conditional Workflow**\n```\nâ”Œâ”€â†’Step A\nSTART â†’Router â”¤â””â”€â†’Step B\nâ†“END\n```\n## Examples\n### 1. Letâ€™s look at our first example of a Conditional workflow without using LLM.\nWe will be checking a simple loan status on the basis of the salary of the loan applicant.\n***If the loan applicantâ€™s salary is less than 25k then loan status should be â€œrejectedâ€. If the salary is greater than 25k and less than 50k then it should be â€œManual review requiredâ€ and if the salary is more than 50k then status should be â€œapprovedâ€.***\n```\nfrom langgraph.graph import StateGraph, START, END\nfrom typing import TypedDict\nclass LoanState(TypedDict):\nsalary: int\ndecision: str\ndef evaluate\\_loan\\_requirement(state: LoanState):\nprint(&quot;Evaluating requirement.....&quot;)\nsalary = state[&#x27;salary&#x27;]\nreturn {&#x27;salary&#x27;: salary}\ndef check\\_loan\\_decision(state: LoanState):\nprint(&#x27;salary&#x27;, state[&#x27;salary&#x27;])\nsalary = state[&#x27;salary&#x27;]\nif salary &lt; 25000:\nreturn &quot;reject&quot;\nelif salary &lt; 50000:\nreturn &quot;review&quot;\nelse:\nreturn &quot;approve&quot;\ndef approve\\_loan(state: LoanState):\nreturn {&quot;decision&quot;: &quot;Loan approved&quot;}\ndef review\\_loan(state: LoanState):\nreturn {&quot;decision&quot;: &quot;Manual Review Required&quot;}\ndef reject\\_loan(state: LoanState):\nreturn {&quot;decision&quot;: &quot;Loan Rejected&quot;}\ngraph = StateGraph(LoanState)\ngraph.add\\_node(&#x27;&#x27;evaluate\\_loan\\_requirement&#x27;&#x27;,evaluate\\_loan\\_requirement),\ngraph.add\\_node(&#x27;&#x27;approve&#x27;&#x27;, approve\\_loan)\ngraph.add\\_node(&#x27;&#x27;review&#x27;&#x27;, review\\_loan)\ngraph.add\\_node(&#x27;&#x27;reject&#x27;&#x27;, reject\\_loan)\ngraph.add\\_edge(START, &#x27;&#x27;evaluate\\_loan\\_requirement&#x27;&#x27;)\ngraph.add\\_conditional\\_edges(\n&#x27;&#x27;evaluate\\_loan\\_requirement&#x27;&#x27;,\ncheck\\_loan\\_decision,\n{\n&#x27;approve&#x27;: &#x27;approve&#x27;,\n&#x27;review&#x27;: &#x27;review&#x27;,\n&#x27;reject&#x27;: &#x27;reject&#x27;\n}\n)\ngraph.add\\_edge(&#x27;&#x27;approve&#x27;&#x27;, END)\ngraph.add\\_edge(&#x27;&#x27;review&#x27;&#x27;, END)\ngraph.add\\_edge(&#x27;&#x27;reject&#x27;&#x27;, END)\nworkflow = graph.compile()\nworkflow\ninitial\\_state = {&#x27;&#x27;salary&#x27;&#x27;: 49000}\nresult = workflow.invoke(initial\\_state)\nprint(result)\n```\n**Output:**\nPress enter or click to view image in full size\n![] \n**Workflow:**\n![] \n### 2. Letâ€™s look at the second example of a conditional workflow with using LLM.\nLetâ€™s assume you have a product that is featured online. Users are writing feedback to the product. Our workflow will check the sentiment of the userâ€™s feedback. If the feedback is â€˜**positive**â€™ then workflow will end and if the feedback is**â€˜negativeâ€™,**we will run the diagnosis on the review and check the**tone**,**type**of the issue and**urgency**of the issue.\n```\nfrom langgraph.graph import StateGraph, START, END\nfrom typing import TypedDict, Literal\nfrom langchain\\_groq import ChatGroq\nfrom dotenv import load\\_dotenv\nfrom pydantic import BaseModel, Field\nimport os\nload\\_dotenv()\nmodel = ChatGroq(api\\_key=os.getenv(&quot;&quot;GROQ\\_API\\_KEY&quot;&quot;), model=&quot;&quot;qwen/qwen3-32b&quot;&quot;, temperature=0)\nclass SentimentSchema(BaseModel):\nsentiment: Literal[&quot;positive&quot;, &quot;negative&quot;] = Field(description=&quot;sentiment of the review&quot;)\nclass DiagnosisSchema(BaseModel):\nissue\\_type: Literal[&quot;&quot;UX&quot;&quot;, &quot;&quot;Performance&quot;&quot;, &quot;&quot;Bug&quot;&quot;, &quot;&quot;Support&quot;&quot;, &quot;&quot;Other&quot;&quot;] = Field(description=&#x27;&#x27;The category of issue mentioned in the review&#x27;&#x27;)\ntone: Literal[&quot;angry&quot;, &quot;frustrated&quot;, &quot;disappointed&quot;, &quot;calm&quot;] = Field(description=&#x27;The emotional tone expressed by the user&#x27;)\nurgency: Literal[&quot;low&quot;, &quot;medium&quot;, &quot;high&quot;] = Field(description=&#x27;How urgent or critical the issue appears to be&#x27;)\nstructured\\_model = model.with\\_structured\\_output(SentimentSchema)\ndignosisStructured\\_model = model.with\\_structured\\_output(DiagnosisSchema)\nclass ReviewState(TypedDict):\nreview: str\nsentiment: Literal[&quot;positive&quot;, &quot;negative&quot;]\ndiagnosis: dict\nresponse: str\ndef find\\_sentiment(state: ReviewState):\nreview = state[&#x27;review&#x27;]\nprompt = f&quot;&quot;For the following review find out the sentiment \\\\n {review}&quot;&quot;\nsentiment = structured\\_model.invoke(prompt).sentiment\nreturn {&#x27;sentiment&#x27;: sentiment}\ndef check\\_sentiment(state: ReviewState) -&gt;&gt; Literal[&quot;&quot;positive\\_response&quot;&quot;, &quot;&quot;run\\_diagnosis&quot;&quot;]:\nsentiment = state[&#x27;sentiment&#x27;]\nif sentiment == &#x27;positive&#x27;:\nreturn &quot;&quot;positive\\_response&quot;&quot;\nelse:\nreturn &quot;&quot;run\\_diagnosis&quot;&quot;\ndef positive\\_response(state: ReviewState):\nreview = state[&#x27;review&#x27;]\nprompt = f&quot;&quot;&quot;&quot;&quot;&quot;Write a warm thank you message in response to this review: \\\\n\\\\n &quot;&quot;{review}\\\\&quot;&quot;\\\\n\nAlso, Kindly ask the user to the leave the feedback on the website.\n&quot;&quot;&quot;\nresponse = model.invoke(prompt).content\nreturn {&quot;response&quot;: response}\ndef run\\_diagnosis(state: ReviewState):\nreview = state[&#x27;review&#x27;]\nprompt = f&quot;&quot;&quot;&quot;&quot;&quot;Diagnose this negative review:\\\\n\\\\n{review}\\\\n&quot;&quot;\n&quot;&quot;Return issue\\_type, tone, and urgency. &quot;&quot;&quot;&quot;&quot;&quot;\nresponse = dignosisStructured\\_model.invoke(prompt)\nreturn {&quot;&quot;diagnosis&quot;&quot;: response.model\\_dump()}\ndef negative\\_response(state: ReviewState):\ndiagnosis = state[&#x27;diagnosis&#x27;]\nprompt = f&quot;&quot;&quot;You are a support assistant.\nThe user had a &#x27;&#x27;{diagnosis[&#x27;&#x27;issue\\_type&#x27;&#x27;]}&#x27;&#x27; issue, sounded &#x27;&#x27;{diagnosis[&#x27;&#x27;tone&#x27;&#x27;]}&#x27;&#x27;, and marked urgency as &#x27;&#x27;{diagnosis[&#x27;&#x27;urgency&#x27;&#x27;]}&#x27;&#x27;.\nWrite an empathetic, helpful resolution message.\n&quot;&quot;&quot;\nresponse = model.invoke(prompt).content\nreturn {&quot;response&quot;: response}\ngraph = StateGraph(ReviewState)\ngraph.add\\_node(&#x27;&#x27;find\\_sentiment&#x27;&#x27;, find\\_sentiment)\ngraph.add\\_node(&#x27;&#x27;positive\\_response&#x27;&#x27;, positive\\_response)\ngraph.add\\_node(&#x27;&#x27;run\\_diagnosis&#x27;&#x27;, run\\_diagnosis)\ngraph.add\\_node(&#x27;&#x27;negative\\_response&#x27;&#x27;, negative\\_response)\ngraph.add\\_edge(START, &#x27;&#x27;find\\_sentiment&#x27;&#x27;)\ngraph.add\\_conditional\\_edges(&#x27;&#x27;find\\_sentiment&#x27;&#x27;, check\\_sentiment)\ngraph.add\\_edge(&#x27;&#x27;positive\\_response&#x27;&#x27;, END)\ngraph.add\\_edge(&#x27;&#x27;run\\_diagnosis&#x27;&#x27;, &#x27;&#x27;negative\\_response&#x27;&#x27;)\ngraph.add\\_edge(&#x27;&#x27;negative\\_response&#x27;&#x27;, END)\nworkflow = graph.compile()\nintial\\_state={\n&#x27;review&#x27;: &quot;The product is not good at all&quot;\n}\nworkflow.invoke(intial\\_state)\n```\n**Output:**\nPress enter or click to view image in full size\n![] \n**Workflow:**\n![] \n**Note: In standard LLM calls, you get back a string of text. For a workflow to make decisions (like routing to a â€œNegativeâ€ or â€œPositiveâ€ path), the code needs data it can rely on.**\n**Usage of Schema**: It transforms unstructured human language into structured machine data.\n`*DiagnosisSchema*`*or*`*SentimentSchema*`*ensures the LLM doesn&#x27;t just &quot;talk&quot; about the problem, but extracts specific metadata (*`*issue\\_type*`*,*`*tone*`*,*`*urgency*`*) or (*`*positive*`*,*`*negative*`*) that the system can actually use in downstream logic.*\n**Usage of model.with\\_structured\\_output :**This tells the LLM, â€œYou must respond**only**in this exact structure.â€\nThe line`model.with\\_structured\\_output(SentimentSchema)`is where the magic happens. This forces the LLM to skip the long text answers and return a Python object. eg: {â€œsentimentâ€: â€œpositiveâ€}\n## ğŸ’¡Why This Matters for Agentic AI\n### Conditional workflows are essential when:\n* **Different inputs need different handling:**Conditional', 'doi': '', 'published_date': '2026-01-25T00:00:00+00:00', 'pdf_url': '', 'url': 'https://medium.com/%40shindeakash412/conditional-workflow-in-langgraph-a-complete-developer-guide-5483f05c221e', 'source': 'exa_context', 'categories': [], 'keywords': [], 'citations': 0, 'references': [], 'extra': {}}], 'save_path': '/home/qinshan/widthresearch/data/downloads'}
2026-02-21 19:57:01,699 - __main__ - INFO - handle_download: searcher=ExaSearcherContext, input_papers=1, save_path=/home/qinshan/widthresearch/data/downloads
2026-02-21 19:57:01,699 - __main__ - INFO - handle_download: downloaded=1
2026-02-21 19:57:01,699 - __main__ - INFO - call_tool payload: source_tool=exa_context_download, result_type=papers, count=1
2026-02-21 19:57:01,699 - __main__ - INFO - call_tool: name=exa_context_download, result_type=papers, count=1
2026-02-21 19:57:01,699 - __main__ - DEBUG - call_tool payload sample: {'paper_id': '', 'title': 'Conditional Workflow in LangGraph: A Complete Developer Guide | by Akash Shinde | Jan, 2026 | Medium', 'authors': [], 'abstract': 'Conditional Workflow in LangGraph: A Complete Developer Guide | by Akash Shinde | Jan, 2026 | Medium\n[Sitemap] \n[Open in app] \nSign up\n[Sign in] \n[Medium Logo] \n[\nWrite\n] \n[\nSearch\n] \nSign up\n[Sign in] \n![] \n# Conditional Workflow in LangGraph: A Complete Developer Guide\n[\n![Akash Shinde] \n] \n[Akash Shinde] \n5 min read\nÂ·Jan 25, 2026\n[\n] \n--\n[] \nListen\nShare\nBuilding intelligent AI agents requires more than just a linear â€œinput-to-outputâ€ chain. To create truly autonomous systems, you need a way for the workflow to make decisions, handle errors, and route queries dynamically.\nIn**LangGraph**, this is achieved through**Conditional Edges**. Unlike standard edges in[**Sequential workflow**] **(we learned in our previous blog)**that connect**Node A**to**Node B**directly, conditional edges act as the â€œbrainâ€ of your graph, deciding which path to take at runtime based on the current state.\n## What Is a Conditional Workflow in LangGraph?\n> A **> conditional workflow\n**> is a workflow where the next step is chosen **> based on a condition or decision\n**> .\nPress enter or click to view image in full size\n![] \n## Components :\nThere are three components which required to build a conditional workflow.\n1. **Nodes**: Python functions that perform tasks (e.g., calling an LLM or a tool).\n2. **State**: A shared memory object (usually a`TypedDict`) that stores the data flowing through the graph.\n3. **The Routing Function**: A function that inspects the state or check the condition and returns a string representing the next node to visit.### How Conditional Workflows Differ from Sequential Ones\n**Sequential Workflow**\n```\nSTART â†’Step A â†’Step B â†’END\n```\n**Conditional Workflow**\n```\nâ”Œâ”€â†’Step A\nSTART â†’Router â”¤â””â”€â†’Step B\nâ†“END\n```\n## Examples\n### 1. Letâ€™s look at our first example of a Conditional workflow without using LLM.\nWe will be checking a simple loan status on the basis of the salary of the loan applicant.\n***If the loan applicantâ€™s salary is less than 25k then loan status should be â€œrejectedâ€. If the salary is greater than 25k and less than 50k then it should be â€œManual review requiredâ€ and if the salary is more than 50k then status should be â€œapprovedâ€.***\n```\nfrom langgraph.graph import StateGraph, START, END\nfrom typing import TypedDict\nclass LoanState(TypedDict):\nsalary: int\ndecision: str\ndef evaluate\\_loan\\_requirement(state: LoanState):\nprint(&quot;Evaluating requirement.....&quot;)\nsalary = state[&#x27;salary&#x27;]\nreturn {&#x27;salary&#x27;: salary}\ndef check\\_loan\\_decision(state: LoanState):\nprint(&#x27;salary&#x27;, state[&#x27;salary&#x27;])\nsalary = state[&#x27;salary&#x27;]\nif salary &lt; 25000:\nreturn &quot;reject&quot;\nelif salary &lt; 50000:\nreturn &quot;review&quot;\nelse:\nreturn &quot;approve&quot;\ndef approve\\_loan(state: LoanState):\nreturn {&quot;decision&quot;: &quot;Loan approved&quot;}\ndef review\\_loan(state: LoanState):\nreturn {&quot;decision&quot;: &quot;Manual Review Required&quot;}\ndef reject\\_loan(state: LoanState):\nreturn {&quot;decision&quot;: &quot;Loan Rejected&quot;}\ngraph = StateGraph(LoanState)\ngraph.add\\_node(&#x27;&#x27;evaluate\\_loan\\_requirement&#x27;&#x27;,evaluate\\_loan\\_requirement),\ngraph.add\\_node(&#x27;&#x27;approve&#x27;&#x27;, approve\\_loan)\ngraph.add\\_node(&#x27;&#x27;review&#x27;&#x27;, review\\_loan)\ngraph.add\\_node(&#x27;&#x27;reject&#x27;&#x27;, reject\\_loan)\ngraph.add\\_edge(START, &#x27;&#x27;evaluate\\_loan\\_requirement&#x27;&#x27;)\ngraph.add\\_conditional\\_edges(\n&#x27;&#x27;evaluate\\_loan\\_requirement&#x27;&#x27;,\ncheck\\_loan\\_decision,\n{\n&#x27;approve&#x27;: &#x27;approve&#x27;,\n&#x27;review&#x27;: &#x27;review&#x27;,\n&#x27;reject&#x27;: &#x27;reject&#x27;\n}\n)\ngraph.add\\_edge(&#x27;&#x27;approve&#x27;&#x27;, END)\ngraph.add\\_edge(&#x27;&#x27;review&#x27;&#x27;, END)\ngraph.add\\_edge(&#x27;&#x27;reject&#x27;&#x27;, END)\nworkflow = graph.compile()\nworkflow\ninitial\\_state = {&#x27;&#x27;salary&#x27;&#x27;: 49000}\nresult = workflow.invoke(initial\\_state)\nprint(result)\n```\n**Output:**\nPress enter or click to view image in full size\n![] \n**Workflow:**\n![] \n### 2. Letâ€™s look at the second example of a conditional workflow with using LLM.\nLetâ€™s assume you have a product that is featured online. Users are writing feedback to the product. Our workflow will check the sentiment of the userâ€™s feedback. If the feedback is â€˜**positive**â€™ then workflow will end and if the feedback is**â€˜negativeâ€™,**we will run the diagnosis on the review and check the**tone**,**type**of the issue and**urgency**of the issue.\n```\nfrom langgraph.graph import StateGraph, START, END\nfrom typing import TypedDict, Literal\nfrom langchain\\_groq import ChatGroq\nfrom dotenv import load\\_dotenv\nfrom pydantic import BaseModel, Field\nimport os\nload\\_dotenv()\nmodel = ChatGroq(api\\_key=os.getenv(&quot;&quot;GROQ\\_API\\_KEY&quot;&quot;), model=&quot;&quot;qwen/qwen3-32b&quot;&quot;, temperature=0)\nclass SentimentSchema(BaseModel):\nsentiment: Literal[&quot;positive&quot;, &quot;negative&quot;] = Field(description=&quot;sentiment of the review&quot;)\nclass DiagnosisSchema(BaseModel):\nissue\\_type: Literal[&quot;&quot;UX&quot;&quot;, &quot;&quot;Performance&quot;&quot;, &quot;&quot;Bug&quot;&quot;, &quot;&quot;Support&quot;&quot;, &quot;&quot;Other&quot;&quot;] = Field(description=&#x27;&#x27;The category of issue mentioned in the review&#x27;&#x27;)\ntone: Literal[&quot;angry&quot;, &quot;frustrated&quot;, &quot;disappointed&quot;, &quot;calm&quot;] = Field(description=&#x27;The emotional tone expressed by the user&#x27;)\nurgency: Literal[&quot;low&quot;, &quot;medium&quot;, &quot;high&quot;] = Field(description=&#x27;How urgent or critical the issue appears to be&#x27;)\nstructured\\_model = model.with\\_structured\\_output(SentimentSchema)\ndignosisStructured\\_model = model.with\\_structured\\_output(DiagnosisSchema)\nclass ReviewState(TypedDict):\nreview: str\nsentiment: Literal[&quot;positive&quot;, &quot;negative&quot;]\ndiagnosis: dict\nresponse: str\ndef find\\_sentiment(state: ReviewState):\nreview = state[&#x27;review&#x27;]\nprompt = f&quot;&quot;For the following review find out the sentiment \\\\n {review}&quot;&quot;\nsentiment = structured\\_model.invoke(prompt).sentiment\nreturn {&#x27;sentiment&#x27;: sentiment}\ndef check\\_sentiment(state: ReviewState) -&gt;&gt; Literal[&quot;&quot;positive\\_response&quot;&quot;, &quot;&quot;run\\_diagnosis&quot;&quot;]:\nsentiment = state[&#x27;sentiment&#x27;]\nif sentiment == &#x27;positive&#x27;:\nreturn &quot;&quot;positive\\_response&quot;&quot;\nelse:\nreturn &quot;&quot;run\\_diagnosis&quot;&quot;\ndef positive\\_response(state: ReviewState):\nreview = state[&#x27;review&#x27;]\nprompt = f&quot;&quot;&quot;&quot;&quot;&quot;Write a warm thank you message in response to this review: \\\\n\\\\n &quot;&quot;{review}\\\\&quot;&quot;\\\\n\nAlso, Kindly ask the user to the leave the feedback on the website.\n&quot;&quot;&quot;\nresponse = model.invoke(prompt).content\nreturn {&quot;response&quot;: response}\ndef run\\_diagnosis(state: ReviewState):\nreview = state[&#x27;review&#x27;]\nprompt = f&quot;&quot;&quot;&quot;&quot;&quot;Diagnose this negative review:\\\\n\\\\n{review}\\\\n&quot;&quot;\n&quot;&quot;Return issue\\_type, tone, and urgency. &quot;&quot;&quot;&quot;&quot;&quot;\nresponse = dignosisStructured\\_model.invoke(prompt)\nreturn {&quot;&quot;diagnosis&quot;&quot;: response.model\\_dump()}\ndef negative\\_response(state: ReviewState):\ndiagnosis = state[&#x27;diagnosis&#x27;]\nprompt = f&quot;&quot;&quot;You are a support assistant.\nThe user had a &#x27;&#x27;{diagnosis[&#x27;&#x27;issue\\_type&#x27;&#x27;]}&#x27;&#x27; issue, sounded &#x27;&#x27;{diagnosis[&#x27;&#x27;tone&#x27;&#x27;]}&#x27;&#x27;, and marked urgency as &#x27;&#x27;{diagnosis[&#x27;&#x27;urgency&#x27;&#x27;]}&#x27;&#x27;.\nWrite an empathetic, helpful resolution message.\n&quot;&quot;&quot;\nresponse = model.invoke(prompt).content\nreturn {&quot;response&quot;: response}\ngraph = StateGraph(ReviewState)\ngraph.add\\_node(&#x27;&#x27;find\\_sentiment&#x27;&#x27;, find\\_sentiment)\ngraph.add\\_node(&#x27;&#x27;positive\\_response&#x27;&#x27;, positive\\_response)\ngraph.add\\_node(&#x27;&#x27;run\\_diagnosis&#x27;&#x27;, run\\_diagnosis)\ngraph.add\\_node(&#x27;&#x27;negative\\_response&#x27;&#x27;, negative\\_response)\ngraph.add\\_edge(START, &#x27;&#x27;find\\_sentiment&#x27;&#x27;)\ngraph.add\\_conditional\\_edges(&#x27;&#x27;find\\_sentiment&#x27;&#x27;, check\\_sentiment)\ngraph.add\\_edge(&#x27;&#x27;positive\\_response&#x27;&#x27;, END)\ngraph.add\\_edge(&#x27;&#x27;run\\_diagnosis&#x27;&#x27;, &#x27;&#x27;negative\\_response&#x27;&#x27;)\ngraph.add\\_edge(&#x27;&#x27;negative\\_response&#x27;&#x27;, END)\nworkflow = graph.compile()\nintial\\_state={\n&#x27;review&#x27;: &quot;The product is not good at all&quot;\n}\nworkflow.invoke(intial\\_state)\n```\n**Output:**\nPress enter or click to view image in full size\n![] \n**Workflow:**\n![] \n**Note: In standard LLM calls, you get back a string of text. For a workflow to make decisions (like routing to a â€œNegativeâ€ or â€œPositiveâ€ path), the code needs data it can rely on.**\n**Usage of Schema**: It transforms unstructured human language into structured machine data.\n`*DiagnosisSchema*`*or*`*SentimentSchema*`*ensures the LLM doesn&#x27;t just &quot;talk&quot; about the problem, but extracts specific metadata (*`*issue\\_type*`*,*`*tone*`*,*`*urgency*`*) or (*`*positive*`*,*`*negative*`*) that the system can actually use in downstream logic.*\n**Usage of model.with\\_structured\\_output :**This tells the LLM, â€œYou must respond**only**in this exact structure.â€\nThe line`model.with\\_structured\\_output(SentimentSchema)`is where the magic happens. This forces the LLM to skip the long text answers and return a Python object. eg: {â€œsentimentâ€: â€œpositiveâ€}\n## ğŸ’¡Why This Matters for Agentic AI\n### Conditional workflows are essential when:\n* **Different inputs need different handling:**Conditional', 'doi': '', 'published_date': '2026-01-25T00:00:00+00:00', 'pdf_url': '', 'url': 'https://medium.com/%40shindeakash412/conditional-workflow-in-langgraph-a-complete-developer-guide-5483f05c221e', 'source': 'exa_context', 'categories': [], 'keywords': [], 'citations': 0, 'references': [], 'extra': {'saved_path': '/home/qinshan/widthresearch/data/downloads/exa_Conditiona.md'}}
2026-02-21 19:57:14,029 - __main__ - INFO - call_tool: name=tavily_download, args={'papers': [{'paper_id': '', 'title': 'LangGraphä¸­Stateçš„å®šä¹‰æ¨¡å¼ - CSDNåšå®¢', 'authors': [], 'abstract': 'LangGraphä¸­Stateçš„å®šä¹‰æ¨¡å¼_langgraphè·å–state-CSDNåšå®¢\n===============\n\n[![Image 1: CSDNé¦–é¡µ](https://img-home.csdnimg.cn/images/20201124032511.png)](https://www.csdn.net/)\n\n*   [åšå®¢](https://blog.csdn.net/)\n*   [ä¸‹è½½](https://download.csdn.net/)\n*   [ç¤¾åŒº](https://devpress.csdn.net/)\n*   [![Image 2](https://img-home.csdnimg.cn/images/20240829093757.png)GitCode](https://link.csdn.net/?target=https%3A%2F%2Fgitcode.com%3Futm_source%3Dcsdn_toolbar)\n*   [![Image 3](https://i-operation.csdnimg.cn/images/3c66245675ae423e9cc897dc790b8ac9.png)GPUç®—åŠ› ![Image 4](https://i-operation.csdnimg.cn/images/d8d2f104eeeb4a428045d2b34d72ed13.png)](https://ai.csdn.net/)\n*   [æ›´å¤š](https://blog.csdn.net/qq_43588095/article/details/147479946)[ä¼šè®®](https://www.bagevent.com/event/9117243 "ä¼šè®®")[å­¦ä¹ ](https://edu.csdn.net/?utm_source=zhuzhantoolbar "é«˜è´¨é‡è¯¾ç¨‹Â·å¤§ä¼šäº‘ä¼šå‘˜")[![Image 5](https://i-operation.csdnimg.cn/images/77c4dd7a760a493498bee1d336b064c0.png)InsCode](https://inscode.net/?utm_source=csdn_blog_top_bar "InsCode") \n\næœç´¢\nAI æœç´¢\n\n[ç™»å½•](https://blog.csdn.net/qq_43588095/article/details/147479946)\n\nç™»å½•åæ‚¨å¯ä»¥ï¼š\n\n*   å¤åˆ¶ä»£ç å’Œä¸€é”®è¿è¡Œ\n*   ä¸åšä¸»å¤§Væ·±åº¦äº’åŠ¨\n*   è§£é”æµ·é‡ç²¾é€‰èµ„æº\n*   è·å–å‰æ²¿æŠ€æœ¯èµ„è®¯\n\n[ç«‹å³ç™»å½•](https://blog.csdn.net/qq_43588095/article/details/147479946)\n\n[![Image 6](https://i-operation.csdnimg.cn/images/f9098e9320264ddc85f274234b2f0c6a.png)æ–°å®¢å¼€é€šä¼šå‘˜ ç«‹å‡60![Image 7](https://i-operation.csdnimg.cn/images/97f199b02b604390ab516e4897fb5bfe.png)](https://mall.csdn.net/vip?utm_source=dl_hover)\n\n[ä¼šå‘˜Â·æ–°äººç¤¼åŒ… ![Image 8](https://i-operation.csdnimg.cn/images/105eda9d414f4250a7c3fe45be3cd15f.png)](https://mall.csdn.net/vip?utm_source=260206_vip_toolbarhyzx_hy)\n\n[æ¶ˆæ¯](https://i.csdn.net/#/msg/index)\n\n[åˆ›ä½œä¸­å¿ƒ](https://mp.csdn.net/ "åˆ›ä½œä¸­å¿ƒ")\n\n[åˆ›ä½œ](https://mp.csdn.net/edit)\n\n[![Image 9](https://i-operation.csdnimg.cn/images/6e41bd372d1f4ec39b3cd36ab95046c4.png)](https://mp.csdn.net/edit)![Image 10](https://i-operation.csdnimg.cn/images/43349e98a45341699652b0b6fa4ea541.png)![Image 11](https://i-operation.csdnimg.cn/images/0f13ec529b6b4195ad99894f76653e56.png)\n\nLangGraphä¸­Stateçš„å®šä¹‰æ¨¡å¼\n====================\n\næœ€æ–°æ¨èæ–‡ç« äº 2025-12-01 20:03:17 å‘å¸ƒ\n\nåŸåˆ› äº 2025-04-24 15:32:41 å‘å¸ƒÂ·897 é˜…è¯»\n\nÂ·![Image 12](https://csdnimg.cn/release/blogv2/dist/pc/img/newHeart2023Active.png)![Image 13](https://csdnimg.cn/release/blogv2/dist/pc/img/newHeart2023Black.png) 5 \n\nÂ·[![Image 14](https://csdnimg.cn/release/blogv2/dist/pc/img/tobarCollect2.png)![Image 15](https://csdnimg.cn/release/blogv2/dist/pc/img/tobarCollectionActive2.png) 5](https://blog.csdn.net/qq_43588095/article/details/147479946)Â·\n\nCC 4.0 BY-SAç‰ˆæƒ\n\n ç‰ˆæƒå£°æ˜ï¼šæœ¬æ–‡ä¸ºåšä¸»åŸåˆ›æ–‡ç« ï¼Œéµå¾ª[CC 4.0 BY-SA](http://creativecommons.org/licenses/by-sa/4.0/)ç‰ˆæƒåè®®ï¼Œè½¬è½½è¯·é™„ä¸ŠåŸæ–‡å‡ºå¤„é“¾æ¥å’Œæœ¬å£°æ˜ã€‚ \n\næ–‡ç« æ ‡ç­¾ï¼š\n[#äººå·¥æ™ºèƒ½](https://so.csdn.net/so/search/s.do?q=%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD&t=all&o=vip&s=&l=&f=&viparticle=&from_tracking_code=tag_word&from_code=app_blog_art)[#å¤§æ¨¡å‹](https://so.csdn.net/so/search/s.do?q=%E5%A4%A7%E6%A8%A1%E5%9E%8B&t=all&o=vip&s=&l=&f=&viparticle=&from_tracking_code=tag_word&from_code=app_blog_art)[#Agent](https://so.csdn.net/so/search/s.do?q=Agent&t=all&o=vip&s=&l=&f=&viparticle=&from_tracking_code=tag_word&from_code=app_blog_art)[#LangGraph](https://so.csdn.net/so/search/s.do?q=LangGraph&t=all&o=vip&s=&l=&f=&viparticle=&from_tracking_code=tag_word&from_code=app_blog_art)\n\n[![Image 16](https://i-blog.csdnimg.cn/columns/default/20201014180756724.png?x-oss-process=image/resize,m_fixed,h_224,w_224)å¤§æ¨¡å‹Agentå¼€å‘ ä¸“æ æ”¶å½•è¯¥å†…å®¹](https://blog.csdn.net/qq_43588095/category_12933023.html "å¤§æ¨¡å‹Agentå¼€å‘")\n\n53 ç¯‡æ–‡ç« \n\n[è®¢é˜…ä¸“æ ](https://blog.csdn.net/qq_43588095/article/details/147479946)\n\n#### [](https://blog.csdn.net/qq_43588095/article/details/147479946)[](https://blog.csdn.net/qq_43588095/article/details/147479946)ä¸€ã€LangGraph æ¡†æ¶æ ¸å¿ƒè¦ç‚¹å›é¡¾\n\n1.   **åº•å±‚åŸç†ä¸ä¼˜åŠ¿**\n    *   LangGraphé‡‡ç”¨å›¾ç»“æ„æ›¿ä»£LangChainæ„å»ºAI Agentè¿è¡ŒçŠ¶æ€ï¼Œå¥‘åˆå¤§æ¨¡å‹æŠ€æœ¯å‘å±•è¶‹åŠ¿ã€‚\n    *   å‡­å€Ÿå¾ªç¯å›¾å’Œåˆ†æ”¯çŠ¶æ€ï¼Œèƒ½çµæ´»æ„å»ºagentå†…éƒ¨æµè½¬è¿‡ç¨‹ï¼Œé€‚ç”¨äºå¤æ‚AI Agentåº”ç”¨å¼€å‘ã€‚\n\n2.   **æ ¸å¿ƒç»„ä»¶è§£æ**\n    *   **èŠ‚ç‚¹ï¼ˆNodeï¼‰**ï¼šä½œä¸ºç‹¬ç«‹å‡½æ•°ï¼Œå¯æ ¹æ®ä¸šåŠ¡éœ€æ±‚è°ƒç”¨å¤§æ¨¡å‹æˆ–å…¶ä»–é€»è¾‘ï¼Œå°è£…å…·ä½“æ‰§è¡Œé€»è¾‘ã€‚\n    *   **è¾¹ï¼ˆEdgeï¼‰**ï¼šç”¨äºè¿æ¥å„ä¸ªèŠ‚ç‚¹ï¼Œæ˜ç¡®ä¸šåŠ¡æµçš„æ‰§è¡Œé¡ºåºã€‚\n    *   **çŠ¶æ€ï¼ˆStateï¼‰**ï¼šè´Ÿè´£åœ¨èŠ‚ç‚¹é—´ä¼ é€’ä¿¡æ¯ï¼Œå¯¹ç»´æŒå›¾çš„æŒç»­è¿è¡Œèµ·ç€å…³é”®ä½œç”¨ ã€‚\n\n3.   **åº”ç”¨åœºæ™¯å¤æ‚åº¦å·®å¼‚**\n    *   **ç®€å•åœºæ™¯**ï¼šå¦‚å¤§æ¨¡å‹é—®ç­”æµç¨‹ï¼Œå¯ç”±START - Node - ENDæ„æˆï¼Œåœ¨Nodeä¸­å°è£…å¤§æ¨¡å‹æ¥å…¥é€»è¾‘å³å¯ã€‚\n    *   **å¤æ‚åœºæ™¯**ï¼šæ¶‰åŠå¤šä»»åŠ¡å¤„ç†ã€å¤šæ•°æ®æµç¨‹ä»¥åŠå¤šagentååŒå·¥ä½œï¼Œå€ŸåŠ©åˆ†æ”¯å’Œå¾ªç¯å®ç°ã€‚åˆ†æ”¯ä¾æ®ç”¨æˆ·è¾“å…¥é€‰æ‹©ä¸åŒå¤„ç†é€»è¾‘ï¼Œå¾ªç¯åˆ™åœ¨èŠ‚ç‚¹è¾“å‡ºä¸é¢„æœŸæ—¶ï¼Œä½¿èŠ‚ç‚¹è¿”å›é‡æ–°å¤„ç†ã€‚\n\n#### [](https://blog.csdn.net/qq_43588095/article/details/147479946)[](https://blog.csdn.net/qq_43588095/article/details/147479946)äºŒã€Stateçš„å…³é”®ä½œç”¨åŠ[æ¶ˆæ¯ä¼ é€’](https://so.csdn.net/so/search?q=%E6%B6%88%E6%81%AF%E4%BC%A0%E9%80%92&spm=1001.2101.3001.7020)æœºåˆ¶\n\n1.   **æ ¸å¿ƒåœ°ä½å‡¸æ˜¾**\n\n    *   LangGraphåº•å±‚å›¾ç®—æ³•ä¾é æ¶ˆæ¯ä¼ é€’æœºåˆ¶å®šä¹‰å’Œæ‰§è¡Œå›¾çš„äº¤äº’æµç¨‹ï¼ŒStateä½œä¸ºæ¶ˆæ¯ä¼ é€’çš„è½½ä½“ï¼Œç›´æ¥å†³å®šå›¾èƒ½å¦æŒç»­è¿è¡Œã€‚\n    *   Stateä¸å·¥å…·è°ƒç”¨ã€äººæœºäº¤äº’ã€ä¸Šä¸‹æ–‡å†å²ä¿¡æ¯ç®¡ç†ç­‰é«˜çº§åŠŸèƒ½å¯†åˆ‡ç›¸å…³ã€‚\n\n2.   **æ¶ˆæ¯ä¼ é€’è¯¦ç»†è¿‡ç¨‹**ï¼šä»¥ç®€å•å›¾çŠ¶æ€ä¸ºä¾‹ï¼ŒSTARTèŠ‚ç‚¹æ¥æ”¶ç”¨æˆ·è¾“å…¥ã€‚![Image 17: åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/direct/34c5cd13225746f28209b80e750f3d85.png#pic_center)\n\n    *   åˆå§‹çŠ¶æ€å‡è®¾ä¸º`{"message":[{"x":10}]}`,æ¶ˆæ¯ç»è¾¹ä¼ é€’è‡³Node 1ã€‚\n    *   Node 1å¯¹`x`è¿›è¡ŒåŠ ä¸€æ“ä½œï¼ŒçŠ¶æ€æ›´æ–°ä¸º`{"message":[{"x":10},{"x":11}]}`,éšåä¼ é€’åˆ°Node 2ã€‚\n    *   Node 2æ¥æ”¶åˆ°æ›´æ–°åçš„çŠ¶æ€ï¼Œå¯¹`x`æ‰§è¡Œå‡äºŒæ“ä½œå¾—åˆ°`y=9` ï¼Œæœ€ç»ˆçŠ¶æ€å˜ä¸º`{"message":[{"x":10},{"x":11},{"y":9}]}`,é€šè¿‡ENDèŠ‚ç‚¹è¾“å‡ºç»™ç”¨æˆ·ç«¯ã€‚\n\n3.   **å¹¿æ’­æœºåˆ¶è§£æ**\n\n    *   LangGraphçš„çŠ¶æ€ä¸ºå…±äº«çŠ¶æ€ï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½å…·å¤‡è¯»å–å’Œå†™å…¥æƒé™ã€‚\n    *   å½“æŸä¸ªèŠ‚ç‚¹æ›´æ–°çŠ¶æ€æ—¶ï¼Œä¼šé€šè¿‡å¹¿æ’­æœºåˆ¶é€šçŸ¥å…¶ä»–èŠ‚ç‚¹ï¼Œä½¿å…¶ä»–èŠ‚ç‚¹èƒ½å¤Ÿæ®æ­¤è°ƒæ•´è‡ªèº«è¡Œä¸ºã€‚\n\n#### [](https://blog.csdn.net/qq_43588095/article/details/147479946)[](https://blog.csdn.net/qq_43588095/article/details/147479946)ä¸‰ã€Stateçš„å®šä¹‰æ¨¡å¼ä¸ä»£ç å®ç°ç¤ºä¾‹\n\n1.   **åŸºäºå­—å…¸ç±»å‹çš„å®šä¹‰æ¨¡å¼**ï¼šä»å¼€å‘è€…è§†è§’çœ‹ï¼ŒStateæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªå­—å…¸ï¼Œå…¶é”®å€¼ä¸ºåˆ—è¡¨ã€‚æ¯æ¬¡æ›´æ–°æ—¶ï¼Œä¼šå‘åˆ—è¡¨ä¸­æ·»åŠ æ–°å€¼ï¼Œä»¥æ­¤æ”¯æ’‘åç»­èŠ‚ç‚¹çš„è¿è¡Œã€‚\n2.   **ä»£ç å®ç°æ­¥éª¤**\n    *   ä½¿ç”¨`StateGraph`ç±»å®šä¹‰çŠ¶æ€ï¼Œåˆ›å»º`StateGraph`å®ä¾‹ã€‚\n\n    *   å®šä¹‰`addition`å’Œ`subtraction`å‡½æ•°ï¼Œåˆ†åˆ«å®ç°å¯¹çŠ¶æ€çš„åŠ ä¸€å’Œå‡äºŒæ“ä½œã€‚\n\n    *   é€šè¿‡`add_node`æ–¹æ³•æ·»åŠ èŠ‚ç‚¹ï¼Œåˆ©ç”¨`add_edge`æ–¹æ³•è¿æ¥èŠ‚ç‚¹ã€‚\n\n    *   æœ€åè°ƒç”¨`compile`æ–¹æ³•ï¼Œå°†`StateGraph`è½¬æ¢ä¸ºå¯è¿è¡Œçš„å›¾ç»“æ„ã€‚\n\n[å…³æ³¨åšä¸»å³å¯é˜…è¯»å…¨æ–‡![Image 18](https://csdnimg.cn/release/blogv2/dist/pc/img/arrowDownAttend.png)](https://blog.csdn.net/qq_43588095/article/details/147479946)\n\n![Image 19](https://csdnimg.cn/release/blogv2/dist/pc/img/vip-limited-close-newWhite.png)\n\n ç¡®å®šè¦æ”¾å¼ƒæœ¬æ¬¡æœºä¼šï¼Ÿ \n\nç¦åˆ©å€’è®¡æ—¶\n\n_:_ _:_\n\n![Image 20](https://csdnimg.cn/release/blogv2/dist/pc/img/vip-limited-close-roup.png)ç«‹å‡ Â¥\n\næ™®é€šVIPå¹´å¡å¯ç”¨\n\n[ç«‹å³ä½¿ç”¨](https://mall.csdn.net/vip)\n\n[![Image 21](https://profile-avatar.csdnimg.cn/12627a5b12dd4935a293f4608c5806d4_qq_43588095.jpg!1) ä¸Šæœ‰æ™¨å…‰](https://blog.csdn.net/qq_43588095)\n\n[å…³æ³¨](javascript:;)[å…³æ³¨](https://blog.csdn.net/qq_43588095/article/details/147479946)\n\n*   [![Image 22](https://csdnimg.cn/release/blogv2/dist/pc/img/tobarThumbUpactive.png)![Image 23](https://csdnimg.cn/release/blogv2/dist/pc/img/toolbar/like-active.png)![Image 24](https://csdnimg.cn/release/blogv2/dist/pc/img/toolbar/like.png) 5](https://blog.csdn.net/qq_43588095/article/details/147479946)ç‚¹èµ \n*   [![Image 25](https://csdnimg.cn/release/blogv2/dist/pc/img/toolbar/unlike-active.png)![Image 26](https://csdnimg.cn/release/blogv2/dist/pc/img/toolbar/unlike.png)](https://blog.csdn.net/qq_43588095/article/details/147479946)è¸© \n*   [![Image 27](https://csdnimg.cn/release/blogv2/dist/pc/img/toolbar/collect-active.png)![Image 28](https://csdnimg.cn/release/blogv2/dist/pc/img/toolbar/collect.png)![Image 29](https://csdnimg.cn/release/blogv2/dist/pc/img/newCollectActive.png) 5](javascript:;) æ”¶è—    è§‰å¾—è¿˜ä¸é”™?  ä¸€é”®æ”¶è— ![Image 30](https://csdnimg.cn/release/blogv2/dist/pc/img/collectionCloseWhite.png)  \n*   [![Image 31](https://csdnimg.cn/release/blogv2/dist/pc/img/toolbar/comment.png) 0](https://blog.csdn.net/qq_43588095/article/details/147479946#commentBox)è¯„è®º \n*   [![Image 32](https://csdnimg.cn/release/blogv2/dist/pc/img/toolbar/share.png)åˆ†äº«](javascript:;)[å¤åˆ¶é“¾æ¥](https://blog.csdn.net/qq_43588095/article/details/147479946) [åˆ†äº«åˆ° QQ](https://blog.csdn.net/qq_43588095/article/details/147479946) [åˆ†äº«åˆ°æ–°æµªå¾®åš](https://blog.csdn.net/qq_43588095/article/details/147479946) ![Image 33](https://blog.csdn.net/qq_43588095/article/details/147479946) ![Image 34](https://csdnimg.cn/release/blogv2/dist/pc/img/share/icon-wechat.png)æ‰«ä¸€æ‰«     \n*   [![Image 35](https://csdnimg.cn/release/blogv2/dist/pc/img/toolbar/more.png)](https://blog.csdn.net/qq_43588095/article/details/147479946)[![Image 36](https://csdnimg.cn/release/blogv2/dist/pc/img/toolbar/report.png)ä¸¾æŠ¥](https://blog.csdn.net/qq_43588095/article/details/147479946) [![Image 37](https://csdnimg.cn/release/blogv2/dist/pc/img/toolbar/report.png)ä¸¾æŠ¥](https://blog.csdn.net/qq_43588095/article/details/147479946)  \n\n[ä¸“æ ç›®å½•](https://blog.csdn.net/qq_43588095/article/details/147479946)\n\n![Image 38](https://kunyu.csdn.net/1.png?p=58&adBlockFlag=0&adId=1083251&a=1083251&c=3768339&k=LangGraph%E4%B8%ADState%E7%9A%84%E5%AE%9A%E4%B9%89%E6%A8%A1%E5%BC%8F&spm=1001.2101.3001.5002&articleId=147479946&d=1&t=3&u=3b9ed406de834dd990615eddf4447285)\n\n[_LangGraph_ ä¸­ _State_ çŠ¶æ€ _æ¨¡å¼_ è¯¦è§£](https://blog.csdn.net/qq_52053775/article/details/154745080)\n\n[qq_52053775çš„åšå®¢](https://blog.csdn.net/qq_52053775)\n\n11-12![Image 39](https://csdnimg.cn/release/blogv2/dist/pc/img/readCountWhite.png) 219 \n\n[_LangGraph_ æ¡†æ¶é€šè¿‡èŠ‚ç‚¹ã€è¾¹å’ŒçŠ¶æ€çš„ç»„åˆæ„å»ºAIä»£ç†ï¼Œå…¶ä¸­çŠ¶æ€ï¼ˆ_State_ï¼‰ä½œä¸ºæ ¸å¿ƒè½½ä½“å®ç°ä¿¡æ¯ä¼ é€’å’ŒåŠŸèƒ½æ”¯æ’‘ã€‚çŠ¶æ€é‡‡ç”¨å…±äº«å­—å…¸æ•°æ®ç»“æ„ï¼ŒèŠ‚ç‚¹å¯è¯»å†™çŠ¶æ€å¹¶å¹¿æ’­æ›´æ–°ï¼Œç¡®ä¿æ•°æ®æµåŠ¨ã€‚æ¡†æ¶æ”¯æŒå¤šç§å¯è§†åŒ–æ–¹æ³•ï¼ˆMermaid/Graphviz/Pyppeteerï¼‰å±•ç°èŠ‚ç‚¹å…³ç³»ã€‚Reducerå‡½æ•°æœºåˆ¶å…è®¸ä¸ºçŠ¶æ€é”® _å®šä¹‰_ ç‹¬ç«‹æ›´æ–°é€»è¾‘ï¼ˆè¦†ç›–/ç´¯åŠ ç­‰ï¼‰ï¼Œç»“åˆTypedDictä¿éšœç±»å‹å®‰å…¨ï¼Œé€‚ç”¨äºå¯¹è¯å†å²ç®¡ç†ç­‰åœºæ™¯ã€‚ä¸“ç”¨MessageGraphå­ç±»é€šè¿‡add_messages Reduceræ™ºèƒ½åˆå¹¶æ¶ˆæ¯åˆ—è¡¨ï¼Œä¼˜åŒ–å¯¹è¯åº”ç”¨](https://blog.csdn.net/qq_52053775/article/details/154745080)\n\n[](https://blog.csdn.net/qq_43588095/article/details/147479946)\n\nå‚ä¸è¯„è®º æ‚¨è¿˜æœªç™»å½•ï¼Œè¯·å…ˆ ç™»å½• åå‘è¡¨æˆ–æŸ¥çœ‹è¯„è®º\n\n[_LangGraph_ ç®€å•è®²è§£ç¤ºä¾‹â€”â€”_State_ã€Nodeã€Edge_ _langgraph_ ç¤ºä¾‹](https://blog.csdn.net/m0_50481455/article/details/156418156)\n\n2-11\n\n[_LangGraph_ ç®€å•è®²è§£ç¤ºä¾‹â€”â€”_State_ã€Nodeã€Edge _LangGraph_ çš„æ ¸å¿ƒä¸»è¦æ˜¯Graph,å®ƒæ˜¯â¼€ä¸ªæœ‰å‘â½†ç¯å›¾,â½¤äºæè¿°ä»»åŠ¡ä¹‹é—´çš„ä¾èµ–å…³ç³»ã€‚ ä¸»è¦åŒ…å«ä¸‰ä¸ªåŸºæœ¬å…ƒç´ : Â· _State_:ä¸€ç§æ•°æ®ç»“æ„ Â·Node:å¤„ç†æ•°æ®çš„èŠ‚ç‚¹,_LangGraph_ ä¸­é€šå¸¸æ˜¯ä¸€ä¸ªpythonå‡½æ•°,ä»¥ _State_ ä¸ºè¾“å…¥,ç»è¿‡ä¸€äº›æ“ä½œå¤„ç†å,è¿”å›æ›´æ–°åçš„ _State_](https://blog.csdn.net/m0_50481455/article/details/156418156)\n\n[æ”¶è—å¤‡ç”¨!_LangGraph_ æ ¸å¿ƒä¹‹ _State_ çŠ¶æ€ç®¡ç†å…¨è§£æ,å°ç™½ä¹Ÿèƒ½ä¸Šæ‰‹ _å¤§æ¨¡å‹_ å¼€å‘...](https://blog.csdn.net/m0_57081622/article/details/156422976)\n\n2-1\n\n[from _langgraph_.graph import _State_ Graph, START, END # _å®šä¹‰_ ç¬¬ä¸€ä¸ªèŠ‚ç‚¹:åŠ æ³• def addition(_state_): """ è¿™ä¸ªå‡½æ•°ä¼šæ”¶åˆ°å½“å‰çš„ _state_(ä¸€ä¸ªå­—å…¸)ä»é‡Œé¢å–å‡ºxçš„å€¼,åŠ 1åè¿”å› """ print(f"åŠ æ³•èŠ‚ç‚¹æ”¶åˆ°çš„ _state_: {_state_}") current_x = _state_["x"] new_x = current_x + 1 # åªè¿”å›æ›´æ–°çš„éƒ¨åˆ†,ä¸ç”¨...](https://blog.csdn.net/m0_57081622/article/details/156422976)\n\n[_LangGraph_ å­¦ä¹ ç¬”è®° â€” _LangGraph_ ä¸­ _State_ çŠ¶æ€ _æ¨¡å¼_](https://blog.csdn.net/Lucky_mzc/article/details/149914049)\n\n[Lucky_mzcçš„åšå®¢](https://blog.csdn.net/Lucky_mzc)\n\n08-05![Image 40](https://csdnimg.cn/release/blogv2/dist/pc/img/readCountWhite.png) 2064 \n\n[æœ¬æ–‡æ·±å…¥è§£æäº† _LangGraph_ æ¡†æ¶ä¸­çš„çŠ¶æ€ç®¡ç†æœºåˆ¶ï¼Œé‡ç‚¹æ¢è®¨äº† _State_ å’ŒReducerå‡½æ•°çš„æ ¸å¿ƒä½œç”¨ã€‚_LangGraph_ é€šè¿‡èŠ‚ç‚¹(Node)å’Œè¾¹(Edge)æ„å»ºå·¥ä½œæµï¼Œå…¶ä¸­çŠ¶æ€(_State_)ä½œä¸ºå…³é”®è½½ä½“åœ¨èŠ‚ç‚¹é—´ä¼ é€’ä¿¡æ¯ã€‚æ–‡ç« è¯¦ç»†ä»‹ç»äº†ä¸‰ç§çŠ¶æ€ _å®šä¹‰_ æ–¹å¼ï¼šå­—å…¸ç±»å‹ã€TypedDictç±»å‹å’ŒMessageGraphä¸“ç”¨ç±»å‹ï¼Œå¹¶åˆ†æäº†Reducerå‡½æ•°å¦‚ä½•æ§åˆ¶çŠ¶æ€æ›´æ–°é€»è¾‘ã€‚ç‰¹åˆ«é˜è¿°äº†add_messagesè¿™ä¸€é«˜çº§Reducerå‡½æ•°çš„å®ç°åŸç†ï¼Œå®ƒèƒ½æ™ºèƒ½å¤„ç†æ¶ˆæ¯çš„è¿½åŠ å’Œæ›´æ–°ã€‚é€šè¿‡å¤šä¸ªä»£ç ç¤ºä¾‹å±•ç¤ºäº†ä¸åŒåœºæ™¯ä¸‹çš„çŠ¶æ€](https://blog.csdn.net/Lucky_mzc/article/details/149914049)\n\n[_LangGraph_ èŠ‚ç‚¹è¿”å› _State_ ï¼Œ æ•°æ®è‡ªåŠ¨æ‹¼æ¥åŸç†](https://blog.csdn.net/weixin_44705554/article/details/147470995)\n\n[AI Agent é¦–å¸­ä½“éªŒå®˜](https://blog.csdn.net/weixin_44705554)\n\n04-24![Image 41](https://csdnimg.cn/release/blogv2/dist/pc/img/readCountWhite.png) 1251 \n\n[_å®šä¹‰_ çŠ¶æ€åˆå¹¶å‡½æ•°# _å®šä¹‰_ çŠ¶æ€ç±»å‹messages: Annotated[List[BaseMessage], add_messages] # ä½¿ç”¨æ³¨è§£æŒ‡å®šåˆå¹¶ç­–ç•¥# èŠ‚ç‚¹å‡½æ•° _å®šä¹‰_"""åˆ†ç±»ç”¨æˆ·è¯·æ±‚çš„ç±»å‹"""# æç¤ºæ¨¡æ¿ç”¨äºåˆ†ç±»ä»»åŠ¡("system", "ä½ æ˜¯ä¸€ä¸ªä»»åŠ¡åˆ†ç±»å™¨ã€‚æ ¹æ®ç”¨æˆ·çš„è¯·æ±‚ï¼Œç¡®å®šå®ƒæ˜¯å“ªç§ç±»å‹çš„ä»»åŠ¡ã€‚\\nè¾“å‡ºæ ¼å¼å¿…é¡»æ˜¯JSONï¼ŒåŒ…å«å­—æ®µ\'task_type\'ï¼Œå€¼ä¸º\'search\'(æœç´¢ç±»)ã€\'calculation\'(è®¡ç®—ç±»)æˆ–\'general\'(ä¸€èˆ¬é—®ç­”)ã€‚"),](https://blog.csdn.net/weixin_44705554/article/details/147470995)\n\n[_LangGraph_ ç³»åˆ—3ï¼š_State_ ä¸GraphåŸºç¡€â€”â€”_LangGraph_ çš„æ™ºèƒ½å·¥ä½œæµå¼•æ“ æœ€æ–°å‘å¸ƒ](https://devpress.csdn.net/v1/article/detail/155461000)\n\n[æ²›å“¥å„¿çš„ä¸“æ ](https://blog.csdn.net/m290345792)\n\n12-01![Image 42](https://csdnimg.cn/release/blogv2/dist/pc/img/readCountWhite.png) 1274 \n\n[åœ¨ _LangGraph_ ä¸­ï¼Œ**çŠ¶æ€ï¼ˆ_State_ï¼‰** å’Œ **å›¾ï¼ˆGraphï¼‰** ä¸æ˜¯è¾…åŠ©æ¦‚å¿µï¼Œè€Œæ˜¯æ•´ä¸ªæ™ºèƒ½ä½“ç³»ç»Ÿçš„â€œéª¨æ¶â€ä¸â€œç¥ç»ç³»ç»Ÿâ€ã€‚è®¸å¤šå¼€å‘è€…è¯¯ä»¥ä¸º _LangGraph_ åªæ˜¯â€œæŠŠå‡½æ•°è¿èµ·æ¥â€ï¼Œç»“æœåœ¨å¤æ‚åœºæ™¯ä¸­é­é‡çŠ¶æ€æ··ä¹±ã€æµç¨‹å¤±æ§ã€è°ƒè¯•æ— é—¨ã€‚å®é™…ä¸Šï¼Œ_LangGraph_ çš„æ ¸å¿ƒä¼˜åŠ¿åœ¨äºï¼š**é€šè¿‡å¼ºç±»å‹çŠ¶æ€ + æ˜¾å¼å›¾ç»“æ„ï¼Œå°† LLM çš„ä¸ç¡®å®šæ€§è¡Œä¸ºçº¦æŸåœ¨å¯éªŒè¯ã€å¯ä¸­æ–­ã€å¯é‡æ”¾çš„ç¡®å®šæ€§æ¡†æ¶å†…**ã€‚æœ¬æ–‡å°†å¸¦ä½ ç©¿é€ API è¡¨å±‚ï¼Œç†è§£ _State_ ä¸ Graph çš„è®¾è®¡å“²å­¦ï¼Œå¹¶æŒæ¡æ„å»ºå¥å£® AI å·¥ä½œæµ](https://devpress.csdn.net/v1/article/detail/155461000)\n\n[ã€_LangGraph_ã€‘ä»€ä¹ˆæ˜¯ _State_ Graph](https://devpress.csdn.net/v1/article/detail/147962997)\n\n[å½¬å½¬ä¾ çš„åšå®¢](https://blog.csdn.net/u013172930)\n\n05-14![Image 43](https://csdnimg.cn/release/blogv2/dist/pc/img/readCountWhite.png) 2237 \n\n[_langgraph_.graph._State_ Graph æ˜¯ _LangGraph_ åº“ä¸­çš„æ ¸å¿ƒç±»ï¼Œç”¨äº _å®šä¹‰_ å’Œç®¡ç†åŸºäºçŠ¶æ€çš„æœ‰å‘å›¾å·¥ä½œæµã€‚å®ƒæ˜¯ _LangGraph_ çš„ä¸»è¦æ„å»ºå—ï¼Œå…è®¸å¼€å‘è€…é€šè¿‡èŠ‚ç‚¹ï¼ˆNodesï¼‰ã€è¾¹ï¼ˆEdgesï¼‰å’ŒçŠ¶æ€ï¼ˆ_State_ï¼‰æ„é€ å¤æ‚çš„å·¥ä½œæµï¼Œç‰¹åˆ«é€‚åˆä¸å¤§å‹è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰ç»“åˆçš„åœºæ™¯ã€‚å…³é”®ç‚¹åŒ…æ‹¬ï¼šä½¿ç”¨ TypedDict æˆ–ç±» _å®šä¹‰_ çŠ¶æ€ã€‚é€šè¿‡ add_node å’Œ add_edge æ„å»ºå›¾ã€‚æ”¯æŒæ¡ä»¶è¾¹å’Œå¾ªç¯ï¼Œé€‚åº”åŠ¨æ€é€»è¾‘ã€‚ç¼–è¯‘åé€šè¿‡ invoke æˆ– stream æ‰§è¡Œã€‚é€šè¿‡ä»£ç ç¤ºä¾‹ï¼Œå¯ä»¥çœ‹åˆ°](https://devpress.csdn.net/v1/article/detail/147962997)\n\n[ã€å°ç™½æ•™ç¨‹ã€‘ä»é›¶å¼€å§‹å­¦ Dify - ä¸‡å­—è¯¦è§£ Dify å¾ªç¯å’Œè¿­ä»£çš„å®ç°æœºåˆ¶ï¼Œå»ºè®®æ”¶è—ï¼ï¼ï¼](https://devpress.csdn.net/v1/article/detail/149931957)\n\n[bugyinyinçš„åšå®¢](https://blog.csdn.net/bugyinyin)\n\n08-05![Image 44](https://csdnimg.cn/release/blogv2/dist/pc/img/readCountWhite.png) 2660 \n\n[Dify æ˜¯ä¸€ä¸ªå¼ºå¤§çš„ AI åº”ç”¨å¼€å‘å¹³å°ï¼Œå…¶å·¥ä½œæµå¼•æ“æ”¯æŒå¤æ‚çš„å¾ªç¯å’Œè¿­ä»£æ“ä½œã€‚æ¥ä¸‹æ¥å°†æ·±å…¥åˆ†æ Dify ä¸­å¾ªç¯å’Œè¿­ä»£çš„å®ç°æœºåˆ¶ã€‚](https://devpress.csdn.net/v1/article/detail/149931957)\n\n[ã€_LangGraph_ã€‘_langgraph_.graph._State_ Graph ç±»çš„å±æ€§å’Œæ–¹æ³•](https://devpress.csdn.net/v1/article/detail/147963138)\n\n[å½¬å½¬ä¾ çš„åšå®¢](https://blog.csdn.net/u013172930)\n\n05-14![Image 45](https://csdnimg.cn/release/blogv2/dist/pc/img/readCountWhite.png) 2158 \n\n[_langgraph_.graph._State_ Graph æ˜¯ _LangGraph_ çš„æ ¸å¿ƒç±»ï¼Œç”¨äº _å®šä¹‰_ åŸºäºçŠ¶æ€çš„å·¥ä½œæµå›¾ã€‚å…¶ä¸»è¦åŠŸèƒ½åŒ…æ‹¬ï¼šé€šè¿‡ add_node å’Œ add_edge æ„å»ºå›¾ç»“æ„ã€‚é€šè¿‡ add_conditional_edges å®ç°åŠ¨æ€åˆ†æ”¯ã€‚é€šè¿‡ set_entry_point å’Œ set_finish_point æŒ‡å®šæ‰§è¡Œè·¯å¾„ã€‚é€šè¿‡ compile ç”Ÿæˆå¯æ‰§è¡Œçš„ CompiledGraphã€‚](https://devpress.csdn.net/v1/article/detail/147963138)\n\n[_LangGraph_ ä¸­çš„ _State_ ç®¡ç†](https://blog.csdn.net/qq_41472205/article/details/144097203)\n\n[The cure for boredom is curiosity. This is the log of its adventures.](https://blog.csdn.net/qq_41472205)\n\n11-27![Image 46](https://csdnimg.cn/release/blogv2/dist/pc/img/readCountWhite.png) 3266 \n\n[_å®šä¹‰_ æ•´ä¸ªå›¾çš„çŠ¶æ€ï¼ˆè¿™æ˜¯åœ¨èŠ‚ç‚¹é—´å…±äº«çš„å…¬å…±çŠ¶æ€ï¼‰a: strreturn {"a": 123 # æ— æ•ˆ# _å®šä¹‰_ è¾“å…¥çŠ¶æ€çš„æ¶æ„# _å®šä¹‰_ è¾“å‡ºçŠ¶æ€çš„æ¶æ„# _å®šä¹‰_ æ•´ä½“æ¶æ„ï¼Œç»“åˆè¾“å…¥å’Œè¾“å‡ºpass# ç¤ºä¾‹ç­”æ¡ˆå’Œä¸€ä¸ªé¢å¤–çš„é”®# æ•´ä¸ªå›¾çš„çŠ¶æ€ï¼ˆè¿™æ˜¯åœ¨èŠ‚ç‚¹é—´å…±äº«çš„å…¬å…±çŠ¶æ€ï¼‰a: str# node_1çš„è¾“å‡ºåŒ…å«ç§æœ‰æ•°æ®ï¼Œä¸å±äºæ•´ä½“çŠ¶æ€ã€‚](https://blog.csdn.net/qq_41472205/article/details/144097203)\n\n[_LangGraph_ æ¡†æ¶ä¸­æ€æ · _å®šä¹‰_ å·¥å…·tools](https://blog.csdn.net/qq_41185191/article/details/147717846)\n\n[ai agentçŸ¥è¯†](https://blog.csdn.net/qq_41185191)\n\n05-05![Image 47](https://csdnimg.cn/release/blogv2/dist/pc/img/readCountWhite.png) 1446 \n\n[å·¥å…·æ˜¯ä¸€ç§å°è£…å‡½æ•°åŠå…¶è¾“å…¥ _æ¨¡å¼_ çš„æ–¹æ³•ï¼Œå¯ä»¥å°†å…¶ä¼ é€’ç»™æ”¯æŒå·¥å…·è°ƒç”¨çš„èŠå¤©æ¨¡å‹ã€‚è¿™ä½¿å¾—æ¨¡å‹èƒ½å¤Ÿé€šè¿‡ç‰¹å®šçš„è¾“å…¥è¯·æ±‚æ‰§è¡Œè¯¥å‡½æ•°ã€‚](https://blog.csdn.net/qq_41185191/article/details/147717846)\n\n[ã€_langgraph_ ç³»åˆ—-1---æ¦‚å¿µè¯¦è§£ã€‘ä»€ä¹ˆæ˜¯ _State_|Nodes|EdgesNode|Reducers](https://blog.csdn.net/weixin_45222582/article/details/143637608)\n\n[weixin_45222582çš„åšå®¢](https://blog.csdn.net/weixin_45222582)\n\n11-09![Image 48](https://csdnimg.cn/release/blogv2/dist/pc/img/readCountWhite.png) 971 \n\n[ã€ä»£ç ã€‘ã€_langgraph_ åè¯è¯¦ç»†è§£é‡Šã€‘ä»€ä¹ˆæ˜¯ _State_|Nodes|EdgesNode|_State_|Reducersã€‚](https://blog.csdn.net/weixin_45222582/article/details/143637608)\n\n[_LangGraph_ çˆ¶å­å›¾ _æ¨¡å¼_ è¯¦è§£](https://blog.csdn.net/Cheer_RIO/article/details/151192412)\n\n[Cheer_RIOçš„åšå®¢](https://blog.csdn.net/Cheer_RIO)\n\n09-04![Image 49](https://csdnimg.cn/release/blogv2/dist/pc/img/readCountWhite.png) 637 \n\n[_LangGraph_ çˆ¶å­å›¾ _æ¨¡å¼_ æ˜¯ä¸€ç§æ¨¡å—åŒ–æ¶æ„ï¼Œå…è®¸çˆ¶å›¾å’Œå­å›¾æ‹¥æœ‰ä¸åŒçš„çŠ¶æ€ç»“æ„ã€‚å…³é”®ç‚¹åŒ…æ‹¬ï¼š çŠ¶æ€éš”ç¦»ï¼šçˆ¶å›¾å’Œå­å›¾å„è‡ª _å®šä¹‰_ çŠ¶æ€ _æ¨¡å¼_ï¼ˆå¦‚Parent _State_ å’ŒSubgraphMessages _State_ï¼‰ èŠ‚ç‚¹è°ƒç”¨ï¼šçˆ¶å›¾ä¸­ä¸“é—¨èŠ‚ç‚¹ï¼ˆcall_subgraphï¼‰è´Ÿè´£ï¼š è½¬æ¢çˆ¶å›¾çŠ¶æ€ä¸ºå­å›¾æ ¼å¼ è°ƒç”¨å­å›¾å¤„ç† å°†å­å›¾è¾“å‡ºè½¬å›çˆ¶å›¾æ ¼å¼ æ ¸å¿ƒä¼˜åŠ¿ï¼š æ¨¡å—åŒ–è®¾è®¡ï¼Œå­å›¾å¯å¤ç”¨ çŠ¶æ€ç»“æ„è§£è€¦ æ”¯æŒå¤æ‚å¤„ç†æµç¨‹ å…¸å‹åº”ç”¨åœºæ™¯ï¼šå¤šä»£ç†ç³»ç»Ÿã€åˆ†é˜¶æ®µå·¥ä½œæµã€æ•°æ®å¤„ç†ç®¡é“ç­‰ è¯¥ _æ¨¡å¼_ é€šè¿‡çŠ¶æ€è½¬æ¢å®ç°çµæ´»é›†æˆï¼Œæ˜¯æ„å»ºå¤æ‚ _LangGraph_](https://blog.csdn.net/Cheer_RIO/article/details/151192412)\n\n[[_LangGraph_ æ•™ç¨‹]_LangGraph_ 05â€”â€”_LangGraph_ çŠ¶æ€ _æ¨¡å¼_ _State_ è¯¦è§£](https://blog.csdn.net/m0_69281817/article/details/147600438)\n\n[m0_69281817çš„åšå®¢](https://blog.csdn.net/m0_69281817)\n\n04-29![Image 50](https://csdnimg.cn/release/blogv2/dist/pc/img/readCountWhite.png) 2565 \n\n[åœ¨ _LangGraph_ æ¡†æ¶é‡Œï¼Œä¸ç®¡æ„å»ºçš„ä»£ç†æ˜¯ç®€å•è¿˜æ˜¯å¤æ‚ï¼Œå½’æ ¹ç»“åº•éƒ½æ˜¯å€ŸåŠ©èŠ‚ç‚¹ï¼ˆNodeï¼‰å’Œè¾¹ï¼ˆEdgeï¼‰æ¥æ„å»ºä¸€ä¸ªå®Œæ•´çš„å›¾ï¼ˆGraphï¼‰ã€‚ä½† _LangGraph_ çš„æ ¸å¿ƒä»æ¥ä¸åœ¨äºå¦‚ä½•å»ç•Œå®šèŠ‚ç‚¹ä¸è¾¹ï¼Œè€Œæ˜¯åœ¨äºã€‚_LangGraph_ çš„åº•å±‚å›¾ç®—æ³•ä¾æ‰˜æœºåˆ¶æ¥ _å®šä¹‰_ å’Œæ‰§è¡Œå›¾ä¸­çš„äº¤äº’æµç¨‹ï¼Œåœ¨è¿™ä¸€è¿‡ç¨‹ä¸­ï¼ŒçŠ¶æ€ï¼ˆ_State_ï¼‰ç»„ä»¶æ‹…å½“ç€å…³é”®çš„è½½ä½“è§’è‰²ï¼Œä¸»è¦è´Ÿè´£åœ¨å›¾çš„å„ä¸ªèŠ‚ç‚¹ä¹‹é—´ä¼ é€’ä¿¡æ¯ï¼Œåƒæ ¸å¿ƒåŠŸèƒ½ä¸­çš„å·¥å…·ä½¿ç”¨ã€è®°å¿†èƒ½åŠ›ä»¥åŠäººæœºäº¤äº’ç­‰ï¼Œéƒ½å¾—ä¾ä»— _State_ æ¥è¾¾æˆå¹¶åŠ ä»¥ç»´æŠ¤ã€‚](https://blog.csdn.net/m0_69281817/article/details/147600438)\n\n[ã€AIå¼€å‘ã€‘_LangGraph_ åŸºç¡€](https://blog.csdn.net/qq_44899247/article/details/139657152)\n\n[qq_44899247çš„åšå®¢](https://blog.csdn.net/qq_44899247)\n\n06-14![Image 51](https://csdnimg.cn/release/blogv2/dist/pc/img/readCountWhite.png) 3287 \n\n[åœ¨ _LangGraph_ ä¸­æœ‰ä¸‰ä¸ªé‡è¦å…ƒç´ ã€‚](https://blog.csdn.net/qq_44899247/article/details/139657152)\n\n[æ·±å…¥è§£æ _LangGraph_ æ ¸å¿ƒæŠ€æœ¯ï¼šçŠ¶æ€ï¼ˆ_State_ï¼‰](https://jigang.blog.csdn.net/article/details/152449616)\n\n[æ²¡äº‹å­¦AIçš„åšå®¢](https://blog.csdn.net/ZuanShi1111)\n\n10-04![Image 52](https://csdnimg.cn/release/blogv2/dist/pc/img/readCountWhite.png) 956 \n\n[æ‘˜è¦ï¼š _LangGraph_ æ¡†æ¶ä¸­çš„â€œçŠ¶æ€ï¼ˆ_State_ï¼‰â€æ˜¯å·¥ä½œæµçš„æ ¸å¿ƒæ•°æ®æ¢çº½ï¼Œæ‰¿æ‹…åŠ¨æ€è®°å¿†ã€æ•°æ®æµè½¬å’Œä¸€è‡´æ€§ä¿éšœçš„å…³é”®è§’è‰²ã€‚å…¶ç»“æ„åŒ–é”®å€¼å¯¹è®¾è®¡æ”¯æŒå¤šç§æ•°æ®ç±»å‹ï¼Œå¹¶é€šè¿‡é¢„ _å®šä¹‰_ ä¸è‡ª _å®šä¹‰_ å­—æ®µé€‚åº”ä¸åŒåœºæ™¯ã€‚çŠ¶æ€å…·å¤‡åŠ¨æ€æ›´æ–°ã€ç‰ˆæœ¬è¿½æº¯å’Œçµæ´»æ‰©å±•ä¸‰å¤§ç‰¹æ€§ï¼Œç¡®ä¿èŠ‚ç‚¹é—´æ•°æ®å®æ—¶åŒæ­¥ï¼Œæ”¯æŒå†å²çŠ¶æ€å›æº¯ï¼Œå¹¶èƒ½éšä¸šåŠ¡éœ€æ±‚æ‰©å±•å­—æ®µã€‚ç†è§£çŠ¶æ€çš„ _å®šä¹‰_ã€ç»“æ„ä¸ç®¡ç†æœºåˆ¶ï¼Œæ˜¯ä¼˜åŒ– _LangGraph_ å·¥ä½œæµè®¾è®¡ä¸æ•…éšœæ’æŸ¥çš„åŸºç¡€ã€‚](https://jigang.blog.csdn.net/article/details/152449616)\n\n[æ·±å…¥ç†è§£ _LangGraph_ï¼šæ™ºèƒ½ä½“å·¥ä½œæµçš„å›¾æ¨¡å‹è®¾è®¡ä¸å®è·µ](https://devpress.csdn.net/v1/article/detail/148798103)\n\n[ä½‘ç»çš„åšå®¢](https://blog.csdn.net/The_Thieves)\n\n06-20![Image 53](https://csdnimg.cn/release/blogv2/dist/pc/img/readCountWhite.png) 1611 \n\n[è¾¹æ˜¯æµç¨‹çš„ "å¯¼èˆªç³»ç»Ÿ"ï¼Œæ ¹æ®çŠ¶æ€å†³å®šä¸‹ä¸€ä¸ªæ‰§è¡Œçš„èŠ‚ç‚¹ï¼špythonè¿è¡Œ# æ ¹æ®å¤„ç†é˜¶æ®µé€‰æ‹©ä¸‹ä¸€ä¸ªèŠ‚ç‚¹else:è¾¹å¯ä»¥æ˜¯å›ºå®šè½¬ç§»æˆ–æ¡ä»¶åˆ†æ”¯ï¼Œå†³å®šäº†èŠ‚ç‚¹é—´çš„æ‰§è¡Œé¡ºåºã€‚æ ¸å¿ƒå…³ç³»æ€»ç»“ï¼šèŠ‚ç‚¹è´Ÿè´£å¤„ç†ä¸šåŠ¡é€»è¾‘ï¼Œè¾¹æ§åˆ¶æµç¨‹èµ°å‘ï¼ŒçŠ¶æ€åˆ™æ˜¯è´¯ç©¿å§‹ç»ˆçš„ä¿¡æ¯è½½ä½“ã€‚è¿™ç§è®¾è®¡è®©å¤æ‚å¾ªç¯æµç¨‹å˜å¾—å¯æ§ï¼Œå°±åƒç”¨ç”µè·¯å›¾è§„åˆ’ç”µæµè·¯å¾„ã€‚ä½¿ç”¨ Annotated ä¸ºå­—æ®µæŒ‡å®š Reducer å‡½æ•°ï¼Œä¾‹å¦‚åˆ—è¡¨è¿½åŠ ï¼špythonè¿è¡Œ# ä½¿ç”¨addå‡½æ•°å®ç°åˆ—è¡¨åˆå¹¶# åˆå§‹çŠ¶æ€ _state_ = {"logs": ["ç³»ç»Ÿå¯åŠ¨"]}](https://devpress.csdn.net/v1/article/detail/148798103)\n\n[LangChain æœ€è¿‘å‘å¸ƒçš„ä¸€ä¸ªé‡è¦åŠŸèƒ½ï¼š_LangGraph_](https://blog.csdn.net/2301_78285120/article/details/136028408)\n\n[2301_78285120çš„åšå®¢](https://blog.csdn.net/2301_78285120)\n\n02-04![Image 54](https://csdnimg.cn/release/blogv2/dist/pc/img/readCountWhite.png) 3599 \n\n[next: strã€‚](https://blog.csdn.net/2301_78285120/article/details/136028408)\n\n[_LangGraph_ï¼šæ„å»ºå¤æ‚æ™ºèƒ½ä½“åº”ç”¨çš„å…¨é¢æŒ‡å—](https://devpress.csdn.net/v1/article/detail/139862000)\n\n[å…¨ä¸–ç•Œçš„åšå®¢](https://blog.csdn.net/qq_40999403)\n\n06-21![Image 55](https://csdnimg.cn/release/blogv2/dist/pc/img/readCountWhite.png) 6790 \n\n[å›¾ï¼ˆGraphï¼‰æ˜¯ä¸€ç§æ•°æ®ç»“æ„ï¼Œç”±èŠ‚ç‚¹ï¼ˆNodeï¼‰å’Œè¾¹ï¼ˆEdgeï¼‰ç»„æˆã€‚èŠ‚ç‚¹è¡¨ç¤ºå®ä½“æˆ–å¯¹è±¡ï¼Œè¾¹è¡¨ç¤ºèŠ‚ç‚¹ä¹‹é—´çš„å…³ç³»ã€‚å›¾å¯ä»¥ç”¨äºè¡¨ç¤ºå¤æ‚çš„å…³ç³»å’Œæµç¨‹ï¼Œå¹¿æ³›åº”ç”¨äºè®¡ç®—æœºç§‘å­¦å’Œ _äººå·¥æ™ºèƒ½_ é¢†åŸŸã€‚åœ¨ _LangGraph_ ä¸­ï¼Œå›¾è¢«ç”¨äºè¡¨ç¤ºå’Œæ„å»ºå¤æ‚çš„æ™ºèƒ½ä½“åº”ç”¨ã€‚æ¯ä¸ªèŠ‚ç‚¹ä»£è¡¨ä¸€ä¸ªæ“ä½œæˆ–æ­¥éª¤ï¼Œè¾¹è¡¨ç¤ºèŠ‚ç‚¹ä¹‹é—´çš„ä¾èµ–å…³ç³»ã€‚é€šè¿‡ _å®šä¹‰_ èŠ‚ç‚¹å’Œè¾¹ï¼Œå¼€å‘è€…å¯ä»¥æ„å»ºå¤æ‚çš„æµç¨‹å’Œé€»è¾‘ã€‚# _å®šä¹‰_ ä¸€ä¸ªå›¾# æ·»åŠ èŠ‚ç‚¹# æ·»åŠ è¾¹# è¿è¡Œå›¾åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ _å®šä¹‰_ äº†ä¸€ä¸ªç®€å•çš„å›¾ï¼Œå®ƒåŒ…å«ä¸‰ä¸ªèŠ‚ç‚¹å’Œä¸¤æ¡è¾¹ã€‚](https://devpress.csdn.net/v1/article/detail/139862000)\n\n[ã€LLM _å¤§æ¨¡å‹_ã€‘LangChainæ¡†æ¶ï¼š_Agent_ ä¹‹ _LangGraph_ çš„ä½¿ç”¨](https://devpress.csdn.net/v1/article/detail/140799030)\n\n[DEVELOPERAAçš„åšå®¢](https://blog.csdn.net/DEVELOPERAA)\n\n07-30![Image 56](https://csdnimg.cn/release/blogv2/dist/pc/img/readCountWhite.png) 3402 \n\n[LangChainçš„æ ¸å¿ƒä¼˜åŠ¿åœ¨äºå…¶èƒ½å¤Ÿè½»æ¾æ„å»ºè‡ª _å®šä¹‰_ é“¾ï¼Œè¿™äº›é“¾é€šå¸¸æ˜¯çº¿æ€§çš„ï¼Œç±»ä¼¼äºæœ‰å‘æ— ç¯å›¾ï¼ˆDAGï¼‰ï¼Œæ¯ä¸ªæ­¥éª¤éƒ½ä¸¥æ ¼æŒ‰é¡ºåºæ‰§è¡Œï¼Œæ¯ä¸ªä»»åŠ¡åªæœ‰ä¸€ä¸ªè¾“å‡ºå’Œä¸€ä¸ªåç»­ä»»åŠ¡ï¼Œå½¢æˆä¸€ä¸ªæ²¡æœ‰å¾ªç¯çš„çº¿æ€§æµç¨‹ã€‚](https://devpress.csdn.net/v1/article/detail/140799030)\n\n[_langGraph_ _state_ æ„å»º](https://wenku.csdn.net/answer/6jxfhfex3v)\n\n08-27\n\n[<think>æˆ‘ä»¬æ­£åœ¨è®¨è®ºå¦‚ä½•æ„å»º _LangGraph_ çš„çŠ¶æ€ã€‚æ ¹æ®å¼•ç”¨å†…å®¹ï¼Œ_LangGraph_ ç”¨äºæ„å»ºæœ‰çŠ¶æ€çš„å¤šæ™ºèƒ½ä½“åº”ç”¨ç¨‹åºï¼Œå…¶æ ¸å¿ƒæ¦‚å¿µä¹‹ä¸€æ˜¯çŠ¶æ€å›¾(_State_ Graph)ã€‚çŠ¶æ€å›¾éœ€è¦ _å®šä¹‰_ ä¸€ä¸ªçŠ¶æ€å¯¹è±¡ï¼Œè¯¥å¯¹è±¡ä¼šåœ¨å›¾çš„å„ä¸ªèŠ‚ç‚¹ä¹‹é—´ä¼ é€’å’Œæ›´æ–°ã€‚ åœ¨ _LangGraph_ ä¸­ï¼Œæ„å»ºçŠ¶æ€é€šå¸¸æ¶‰åŠä»¥ä¸‹æ­¥éª¤ï¼š 1. _å®šä¹‰_ çŠ¶æ€ _æ¨¡å¼_ï¼ˆ_State_ Schemaï¼‰ï¼šä¸€ä¸ªè‡ª _å®šä¹‰_ çš„ç±»ï¼Œç”¨äºæè¿°çŠ¶æ€ä¸­åŒ…å«å“ªäº›å­—æ®µã€‚æ¯ä¸ªå­—æ®µè¡¨ç¤ºæ™ºèƒ½ä½“å·¥ä½œæµä¸­çš„ä¸€éƒ¨åˆ†æ•°æ®ã€‚ 2. åˆå§‹åŒ–çŠ¶æ€å›¾ï¼šä½¿ç”¨ _å®šä¹‰_ çš„çŠ¶æ€ _æ¨¡å¼_ åˆ›å»ºä¸€ä¸ª _State_ Graphå®ä¾‹ã€‚ 3. æ·»åŠ èŠ‚ç‚¹ï¼šèŠ‚ç‚¹æ˜¯å¤„ç†çŠ¶æ€çš„å‡½æ•°ï¼Œæ¯ä¸ªèŠ‚ç‚¹å¯ä»¥è¯»å–å’Œä¿®æ”¹çŠ¶æ€ä¸­çš„ç‰¹å®šå­—æ®µã€‚ 4. _å®šä¹‰_ è¾¹ï¼šåŒ…æ‹¬æ¡ä»¶è¾¹ï¼ˆconditional edgesï¼‰å’Œæ™®é€šè¾¹ï¼Œç”¨äºæ§åˆ¶æµç¨‹çš„èµ°å‘ã€‚ ä¸‹é¢æˆ‘ä»¬è¯¦ç»†è¯´æ˜å¦‚ä½•æ„å»ºçŠ¶æ€ã€‚ ### 1. _å®šä¹‰_ çŠ¶æ€ _æ¨¡å¼_ çŠ¶æ€ _æ¨¡å¼_ æ˜¯ä¸€ä¸ªç±»ï¼Œé€šå¸¸ä½¿ç”¨`TypedDict`æˆ–æ™®é€šçš„ç±»ï¼ˆä½†éœ€è¦ç»§æ‰¿è‡ª`typing.TypedDict`ï¼‰æ¥ _å®šä¹‰_ã€‚åœ¨ _LangGraph_ ä¸­ï¼ŒçŠ¶æ€æ˜¯ä¸€ä¸ªå­—å…¸èˆ¬çš„å¯¹è±¡ï¼Œå…¶é”®æ˜¯å­—ç¬¦ä¸²ï¼Œå€¼å¯ä»¥æ˜¯ä»»æ„ç±»å‹ï¼Œä½†é€šå¸¸æˆ‘ä»¬ä¼šæ˜ç¡®æŒ‡å®šæ¯ä¸ªå­—æ®µçš„ç±»å‹ã€‚ ä¾‹å¦‚ï¼Œå‡è®¾æˆ‘ä»¬æ­£åœ¨æ„å»ºä¸€ä¸ªç®€å•çš„èŠå¤©æœºå™¨äººï¼ŒçŠ¶æ€å¯èƒ½åŒ…å«ç”¨æˆ·è¾“å…¥å’ŒèŠå¤©å†å²ã€‚æˆ‘ä»¬å¯ä»¥è¿™æ · _å®šä¹‰_ çŠ¶æ€ï¼š ```python from typing import TypedDict, List, Annotated from _langgraph_.graph.message import add_messages class _State_(TypedDict): user_input: str chat_history: Annotated[List[str], add_messages] ``` æ³¨æ„ï¼šè¿™é‡Œä½¿ç”¨äº†`Annotated`ç±»å‹ï¼Œè¿™æ˜¯ä¸ºäº†åœ¨çŠ¶æ€æ›´æ–°æ—¶ä½¿ç”¨ç‰¹å®šçš„æ›´æ–°ç­–ç•¥ã€‚`add_messages`æ˜¯ _LangGraph_ æä¾›çš„ä¸€ç§æ›´æ–°ç­–ç•¥ï¼Œç”¨äºåœ¨åˆ—è¡¨ä¸­è¿½åŠ æ¶ˆæ¯ï¼ˆè€Œä¸æ˜¯è¦†ç›–ï¼‰ã€‚_LangGraph_ æ”¯æŒå¤šç§æ›´æ–°ç­–ç•¥ï¼Œå¦‚è¦†ç›–ã€è¿½åŠ ç­‰ã€‚ ### 2. åˆå§‹åŒ–çŠ¶æ€å›¾ åˆ›å»ºçŠ¶æ€å›¾å®ä¾‹ï¼Œå¹¶ä¼ å…¥çŠ¶æ€ç±»ä½œä¸ºå‚æ•°ï¼š ```python from _langgraph_.graph import _State_ Graph graph = _State_ Graph(_State_) ``` ### 3. æ·»åŠ èŠ‚ç‚¹ èŠ‚ç‚¹æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒæ¥æ”¶å½“å‰çŠ¶æ€ï¼ˆä¸€ä¸ªå­—å…¸ï¼ŒåŒ…å«çŠ¶æ€ _æ¨¡å¼_ ä¸­ _å®šä¹‰_ çš„å­—æ®µï¼‰ä½œä¸ºè¾“å…¥ï¼Œå¹¶è¿”å›ä¸€ä¸ªåŒ…å«æ›´æ–°åçŠ¶æ€å­—æ®µçš„å­—å…¸ï¼ˆæˆ–ç›´æ¥è¿”å›æ›´æ–°åçš„çŠ¶æ€å¯¹è±¡ï¼‰ã€‚è¿™ä¸ªè¿”å›çš„å­—å…¸å°†ç”¨äºæ›´æ–°æ•´ä¸ªçŠ¶æ€ï¼ˆæ ¹æ®æ›´æ–°ç­–ç•¥ï¼‰ã€‚ ä¾‹å¦‚ï¼Œæˆ‘ä»¬æ·»åŠ ä¸€ä¸ªèŠ‚ç‚¹æ¥å¤„ç†ç”¨æˆ·è¾“å…¥ï¼š ```python def process_input(_state_: _State_) -> dict: # è¿™é‡Œå¯ä»¥å¤„ç†ç”¨æˆ·è¾“å…¥ï¼Œä¾‹å¦‚è°ƒç”¨LLMç­‰ processed = _state_[\'user_input\'].upper() # ç®€å•ç¤ºä¾‹ï¼šå°†è¾“å…¥è½¬ä¸ºå¤§å†™ return {\'processed_input\': processed} # æ³¨æ„ï¼šè¿™é‡Œè¿”å›çš„å­—æ®µéœ€è¦ä¸çŠ¶æ€ _æ¨¡å¼_ åŒ¹é…ï¼Ÿä½†æ³¨æ„ï¼Œæˆ‘ä»¬ _å®šä¹‰_ çš„çŠ¶æ€ _æ¨¡å¼_ ä¸­å¹¶æ²¡æœ‰\'processed_input\'ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦è°ƒæ•´çŠ¶æ€ _æ¨¡å¼_ æˆ–èŠ‚ç‚¹è¡Œä¸ºã€‚ # è°ƒæ•´çŠ¶æ€ _æ¨¡å¼_ï¼šå¦‚æœæˆ‘ä»¬å¸Œæœ›çŠ¶æ€ä¸­åŒ…å«å¤„ç†åçš„è¾“å…¥ï¼Œæˆ‘ä»¬éœ€è¦åœ¨çŠ¶æ€ _æ¨¡å¼_ ä¸­å¢åŠ å­—æ®µã€‚ ``` å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦é‡æ–°è€ƒè™‘çŠ¶æ€ _æ¨¡å¼_ çš„è®¾è®¡ã€‚é€šå¸¸ï¼ŒçŠ¶æ€ _æ¨¡å¼_ åº”è¯¥åŒ…å«å·¥ä½œæµä¸­æ‰€æœ‰èŠ‚ç‚¹å¯èƒ½è¯»å†™çš„æ•°æ®ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬ä¿®æ”¹çŠ¶æ€ _æ¨¡å¼_ï¼š ```python class _State_(TypedDict): user_input: str chat_history: Annotated[List[str], add_messages] processed_input: str # æ–°å¢å­—æ®µ ``` ç„¶åè°ƒæ•´èŠ‚ç‚¹å‡½æ•°ï¼š ```python def process_input(_state_: _State_) -> dict: processed = _state_[\'user_input\'].upper() return {\'processed_input\': processed} # è¿”å›è¦æ›´æ–°çš„å­—æ®µ ``` ç„¶åå°†èŠ‚ç‚¹æ·»åŠ åˆ°å›¾ä¸­ï¼š ```python graph.add_node("process_input", process_input) ``` ### 4. _å®šä¹‰_ è¾¹ æˆ‘ä»¬éœ€è¦è®¾ç½®èµ·å§‹èŠ‚ç‚¹å’Œè¾¹ï¼Œä»¥åŠæ¡ä»¶è¾¹ï¼ˆå¦‚æœéœ€è¦å¾ªç¯ï¼‰ã€‚ä¾‹å¦‚ï¼š ```python graph.set_entry_point("process_input") # è®¾ç½®å…¥å£èŠ‚ç‚¹ graph.set_finish_point("process_input") # å¦‚æœåªæœ‰ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå¯ä»¥ç›´æ¥è®¾ç½®ä¸ºç»“æŸç‚¹ # å¦‚æœæœ‰å¤šä¸ªèŠ‚ç‚¹ï¼Œæˆ‘ä»¬éœ€è¦æ·»åŠ è¾¹æ¥è¿æ¥å®ƒä»¬ï¼Œä¾‹å¦‚ï¼š # graph.add_edge(\'node1\', \'node2\') ``` ### 5. ç¼–è¯‘å›¾ æœ€åï¼Œç¼–è¯‘å›¾ä»¥åˆ›å»ºå¯æ‰§è¡Œçš„å·¥ä½œæµï¼š ```python app = graph.compile() ``` ### 6. æ‰§è¡Œå›¾ ä½¿ç”¨åˆå§‹çŠ¶æ€è°ƒç”¨å›¾ï¼š ```python initial_ _state_ = _State_(user_input="hello", chat_history=[], processed_input="") result = app.invoke(initial_ _state_) ``` ### æ³¨æ„äº‹é¡¹ - çŠ¶æ€æ›´æ–°ç­–ç•¥ï¼šåœ¨ _å®šä¹‰_ çŠ¶æ€å­—æ®µæ—¶ï¼Œä½¿ç”¨`Annotated`å¯ä»¥æŒ‡å®šæ›´æ–°ç­–ç•¥ã€‚ä¾‹å¦‚ï¼Œ`add_messages`è¡¨ç¤ºè¿½åŠ æ¶ˆæ¯ï¼Œè€Œé»˜è®¤ç­–ç•¥æ˜¯è¦†ç›–ï¼ˆå¦‚æœä¸ç”¨`Annotated`ï¼Œåˆ™ç›´æ¥è¦†ç›–ï¼‰ã€‚ - èŠ‚ç‚¹å‡½æ•°è¿”å›çš„å­—å…¸ä¸­çš„æ¯ä¸ªé”®å¿…é¡»ä¸çŠ¶æ€ _æ¨¡å¼_ ä¸­çš„æŸä¸ªå­—æ®µåå¯¹åº”ï¼Œå¹¶ä¸”å€¼ç±»å‹è¦åŒ¹é…ã€‚è¿”å›çš„å­—å…¸ä¸­åªéœ€è¦åŒ…å«éœ€è¦æ›´æ–°çš„å­—æ®µï¼Œä¸éœ€è¦è¿”å›æ•´ä¸ªçŠ¶æ€ã€‚ ### ç¤ºä¾‹ï¼šå¸¦æ¡ä»¶è¾¹çš„å¾ªç¯ å‡è®¾æˆ‘ä»¬æƒ³è®©æ™ºèƒ½ä½“åœ¨æ»¡è¶³æ¡ä»¶æ—¶å¾ªç¯æ‰§è¡Œã€‚æˆ‘ä»¬å¯ä»¥æ·»åŠ ä¸€ä¸ªæ¡ä»¶è¾¹ã€‚ é¦–å…ˆï¼Œ_å®šä¹‰_ ä¸¤ä¸ªèŠ‚ç‚¹ï¼šä¸€ä¸ªå¤„ç†èŠ‚ç‚¹ï¼Œä¸€ä¸ªåˆ¤æ–­æ˜¯å¦ç»“æŸçš„èŠ‚ç‚¹ã€‚ ```python def should_continue(_state_: _State_) -> str: # æ ¹æ®çŠ¶æ€åˆ¤æ–­æ˜¯å¦ç»§ç»­ if _state_[\'processed_input\'] == "QUIT": return "end" else: return "continue" def process_node(_state_: _State_) -> dict: # è¿™é‡Œæ¨¡æ‹Ÿå¤„ç†ï¼Œæ¯æ¬¡å°†processed_inputåŠ ä¸Šä¸€ä¸ªæ„Ÿå¹å·ï¼Œç›´åˆ°é‡åˆ°QUIT new_processed = _state_[\'processed_input\'] + "!" return {\'processed_input\': new_processed} # æ·»åŠ èŠ‚ç‚¹ graph.add_node("process", process_node) graph.add_node("check_end", should_continue) # æ³¨æ„ï¼šè¿™ä¸ªèŠ‚ç‚¹å®é™…ä¸Šæ˜¯ä¸€ä¸ªæ¡ä»¶å‡½æ•°ï¼Œä½†ä¹Ÿå¯ä»¥ä½œä¸ºèŠ‚ç‚¹æ·»åŠ  # è®¾ç½®å…¥å£ graph.set_entry_point("process") # æ·»åŠ è¾¹ï¼šä»processåˆ°check_end graph.add_edge("process", "check_end") # æ·»åŠ æ¡ä»¶è¾¹ï¼šæ ¹æ®check_endèŠ‚ç‚¹çš„è¿”å›å€¼å†³å®šä¸‹ä¸€æ­¥ graph.add_conditional_edges( "check_end", should_continue, # è¿™ä¸ªå‡½æ•°è¿”å›å­—ç¬¦ä¸²ï¼Œè¡¨ç¤ºä¸‹ä¸€ä¸ªèŠ‚ç‚¹æˆ–ç»“æŸ { "continue": "process", # å¦‚æœè¿”å›"continue"ï¼Œåˆ™å›åˆ°processèŠ‚ç‚¹ "end": END # ç»“æŸ } ) ``` æ³¨æ„ï¼šæ¡ä»¶è¾¹å‡½æ•°ï¼ˆ`should_continue`ï¼‰çš„è¿”å›å€¼æ˜¯å­—ç¬¦ä¸²ï¼Œè¿™äº›å­—ç¬¦ä¸²æ˜ å°„åˆ°ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„åç§°æˆ–`END`ï¼ˆè¡¨ç¤ºç»“æŸï¼‰ã€‚ ### æ€»ç»“ æ„å»º _LangGraph_ çŠ¶æ€çš„å…³é”®æ­¥éª¤ï¼š 1. è®¾è®¡çŠ¶æ€ _æ¨¡å¼_ï¼ˆTypedDictï¼‰ï¼ŒåŒ…å«æ‰€æœ‰éœ€è¦ä¼ é€’çš„æ•°æ®å­—æ®µã€‚ 2. åˆ›å»ºçŠ¶æ€å›¾å®ä¾‹ã€‚ 3. æ·»åŠ èŠ‚ç‚¹ï¼ˆå¤„ç†å‡½æ•°ï¼‰ï¼Œæ¯ä¸ªèŠ‚ç‚¹è´Ÿè´£æ›´æ–°çŠ¶æ€çš„ä¸€éƒ¨åˆ†ã€‚ 4. è®¾ç½®è¾¹ï¼ˆåŒ…æ‹¬æ¡ä»¶è¾¹ï¼‰ä»¥æ§åˆ¶æµç¨‹ã€‚ 5. ç¼–è¯‘å¹¶æ‰§è¡Œã€‚ ä»¥ä¸Šæ­¥éª¤å¯ä»¥å¸®åŠ©ä½ æ„å»º _LangGraph_ çš„çŠ¶æ€å›¾ã€‚ Â§Â§ç›¸å…³é—®é¢˜Â§Â§ 1. _LangGraph_ çŠ¶æ€ _æ¨¡å¼_ ä¸­å¦‚ä½• _å®šä¹‰_ å­—æ®µçš„æ›´æ–°ç­–ç•¥ï¼Ÿ 2. åœ¨ _LangGraph_ ä¸­ï¼Œå¦‚ä½•å®ç°å¤šä¸ªæ™ºèƒ½ä½“ä¹‹é—´çš„çŠ¶æ€å…±äº«ï¼Ÿ 3. _LangGraph_ çš„çŠ¶æ€å›¾ä¸ä¼ ç»Ÿçš„æœ‰é™çŠ¶æ€æœº(FSM)æœ‰ä½•åŒºåˆ«ï¼Ÿ 4. åœ¨ _LangGraph_ ä¸­ï¼Œå¦‚ä½•å¤„ç†çŠ¶æ€æ›´æ–°æ—¶çš„å¹¶å‘å†²çªï¼Ÿ</think>### _LangGraph_ çŠ¶æ€æ„å»ºæŒ‡å— åœ¨ _LangGraph_ ä¸­æ„å»ºçŠ¶æ€æ˜¯å®ç°æœ‰çŠ¶æ€å¤šæ™ºèƒ½ä½“ç³»ç»Ÿçš„æ ¸å¿ƒï¼Œä»¥ä¸‹æ˜¯æ„å»ºæ­¥éª¤å’Œå…³é”®æ¦‚å¿µï¼š #### 1. **_å®šä¹‰_ çŠ¶æ€ _æ¨¡å¼_ï¼ˆ_State_ Schemaï¼‰** çŠ¶æ€ _æ¨¡å¼_ æ˜¯ä¸€ä¸ªè‡ª _å®šä¹‰_ ç±»ï¼Œç”¨äºæè¿°æ™ºèƒ½ä½“å·¥ä½œæµä¸­çš„æ•°æ®ç»“æ„å’Œç±»å‹ï¼š ```python from typing import TypedDict, Annotated, Sequence from _langgraph_.graph.message import add_messages class _Agent_ _State_(TypedDict): user_query: str _agent_ _response: Annotated[str, lambda x, y: y] # è¦†ç›–å¼æ›´æ–° chat_history: Annotated[Sequence[str], add_messages] # è¿½åŠ å¼æ›´æ–° tools_used: list ``` **å…³é”®ç‰¹æ€§**ï¼š - **å­—æ®µç±»å‹å£°æ˜**ï¼šæ¯ä¸ªå­—æ®µ _å®šä¹‰_ æ•°æ®ç±»å‹ï¼ˆå¦‚`str`, `list`ç­‰ï¼‰ - **æ›´æ–°ç­–ç•¥**ï¼ˆé€šè¿‡`Annotated`æŒ‡å®šï¼‰ï¼š - `add_messages`ï¼šè¿½åŠ æ•°æ®ï¼ˆé€‚åˆèŠå¤©å†å²ï¼‰ - `lambda x, y: y`ï¼šè¦†ç›–æ›´æ–°ï¼ˆé€‚åˆæœ€æ–°ç»“æœï¼‰ - **çŠ¶æ€æŒä¹…åŒ–**ï¼šçŠ¶æ€ä¼šåœ¨èŠ‚ç‚¹é—´è‡ªåŠ¨ä¼ é€’å’Œæ›´æ–°[^1] #### 2. **åˆå§‹åŒ–çŠ¶æ€å›¾** ```python from _langgraph_.graph import _State_ Graph # åˆ›å»ºçŠ¶æ€å›¾å®ä¾‹ graph = _State_ Graph(_Agent_ _State_) # æ·»åŠ èŠ‚ç‚¹ï¼ˆæ™ºèƒ½ä½“åŠŸèƒ½å•å…ƒï¼‰ graph.add_node("query_analyzer", analyze_query) graph.add_node("tool_executor", execute_tools) graph.add_node("response_generator", generate_response) # è®¾ç½®èŠ‚ç‚¹å…³ç³» graph.add_edge("query_analyzer", "tool_executor") graph.add_edge("tool_executor", "response_generator") graph.set_finish_point("response_generator") # ç¼–è¯‘å¯æ‰§è¡Œå›¾ app = graph.compile() ``` #### 3. **èŠ‚ç‚¹å‡½æ•°è®¾è®¡** æ¯ä¸ªèŠ‚ç‚¹æ¥æ”¶å½“å‰çŠ¶æ€ï¼Œè¿”å›çŠ¶æ€æ›´æ–°ï¼š ```python def execute_tools(_state_: _Agent_ _State_) -> dict: """å·¥å…·æ‰§è¡ŒèŠ‚ç‚¹ç¤ºä¾‹""" tools = select_tools(_state_["user_query"]) results = [tool.run() for tool in tools] return { "tools_used": tools, # æ›´æ–°å·¥å…·åˆ—è¡¨ "_agent_ _response": results[0] # æ›´æ–°æœ€æ–°ç»“æœ } ``` #### 4. **æ‰§è¡ŒçŠ¶æ€å·¥ä½œæµ** ```python # åˆå§‹åŒ–çŠ¶æ€ initial_ _state_ = _Agent_ _State_( user_query="å¦‚ä½•è®¡ç®—GDPï¼Ÿ", _agent_ _response="", chat_history=[], tools_used=[] ) # æ‰§è¡Œå·¥ä½œæµ final_ _state_ = app.invoke(initial_ _state_) print(final_ _state_["_agent_ _response"]) ``` #### 5. **é«˜çº§åŠŸèƒ½** - **æ¡ä»¶åˆ†æ”¯**ï¼šä½¿ç”¨`add_conditional_edges`å®ç°åŠ¨æ€è·¯ç”± ```python graph.add_conditional_edges( "query_analyzer", decide_next_node, # è¿”å›"tool_executor"æˆ–"response_generator" {"need_tools": "tool_executor", "direct_answer": "response_generator"} ) ``` - **å¾ªç¯æ§åˆ¶**ï¼šé€šè¿‡`add_edge`åˆ›å»ºå¾ªç¯å®ç°å¤šè½®äº¤äº’ - **å¤šæ™ºèƒ½ä½“åä½œ**ï¼šä¸åŒèŠ‚ç‚¹å¯å¯¹åº”ä¸åŒæ™ºèƒ½ä½“ï¼Œå…±äº«çŠ¶æ€å¯¹è±¡ #### æœ€ä½³å®è·µ 1. **çŠ¶æ€æœ€å°åŒ–**ï¼šåªå­˜å‚¨å¿…è¦æ•°æ®ï¼Œé¿å…è¿‡åº¦å¤æ‚çš„çŠ¶æ€ç»“æ„ 2. **æ›´æ–°ç­–ç•¥**ï¼šæ ¹æ®å­—æ®µç‰¹æ€§é€‰æ‹©è¿½åŠ ï¼ˆå†å²æ•°æ®ï¼‰æˆ–è¦†ç›–ï¼ˆæœ€æ–°ç»“æœï¼‰ 3. **é”™è¯¯å¤„ç†**ï¼šåœ¨èŠ‚ç‚¹ä¸­æ·»åŠ çŠ¶æ€å›æ»šæœºåˆ¶ 4. **çŠ¶æ€å¿«ç…§**ï¼šå®šæœŸæŒä¹…åŒ–çŠ¶æ€ï¼Œæ”¯æŒæ–­ç‚¹ç»­è·‘ > ç¤ºä¾‹åº”ç”¨åœºæ™¯ï¼šå®¢æˆ·æœåŠ¡ç³»ç»Ÿå¯åŒ…å«`é—®é¢˜åˆ†ç±»`â†’`æ•°æ®åº“æŸ¥è¯¢`â†’`ç»“æœç”Ÿæˆ`ä¸‰ä¸ªèŠ‚ç‚¹ï¼ŒçŠ¶æ€å¯¹è±¡ä¼ é€’ç”¨æˆ·é—®é¢˜ã€æŸ¥è¯¢ç»“æœã€å›å¤å†…å®¹ç­‰æ•°æ®[^1]ã€‚](https://wenku.csdn.net/answer/6jxfhfex3v)\n\n*   [å…³äºæˆ‘ä»¬](https://www.csdn.net/company/index.html#about)\n*   [æ‹›è´¤çº³å£«](https://www.csdn.net/company/index.html#recruit)\n*   [å•†åŠ¡åˆä½œ](https://fsc-p05.txscrm.com/T8PN8SFII7W)\n*   [å¯»æ±‚æŠ¥é“](https://marketing.csdn.net/questions/Q2202181748074189855)\n*   ![Image 57](https://g.csdnimg.cn/common/csdn-footer/images/tel.png)400-660-0108\n*   ![Image 58](https://g.csdnimg.cn/common/csdn-footer/images/email.png)[kefu@csdn.net](mailto:webmaster@csdn.net)\n*   ![Image 59](https://g.csdnimg.cn/common/csdn-footer/images/cs.png)[åœ¨çº¿å®¢æœ](https://csdn.s2.udesk.cn/im_client/?web_plugin_id=29181)\n*    å·¥ä½œæ—¶é—´ 8:30-22:00 \n\n*   ![Image 60](https://g.csdnimg.cn/common/csdn-footer/images/badge.png)[å…¬å®‰å¤‡æ¡ˆå·11010502030143](http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=11010502030143)\n*   [äº¬ICPå¤‡19004658å·](http://beian.miit.gov.cn/publish/query/indexFirst.action)\n*   [äº¬ç½‘æ–‡ã€”2020ã€•1039-165å·](https://csdnimg.cn/release/live_fe/culture_license.png)\n*   [ç»è¥æ€§ç½‘ç«™å¤‡æ¡ˆä¿¡æ¯](https://csdnimg.cn/cdn/content-toolbar/csdn-ICP.png)\n*   [åŒ—äº¬äº’è”ç½‘è¿æ³•å’Œä¸è‰¯ä¿¡æ¯ä¸¾æŠ¥ä¸­å¿ƒ](http://www.bjjubao.org/)\n*   [å®¶é•¿ç›‘æŠ¤](https://download.csdn.net/tutelage/home)\n*   [ç½‘ç»œ110æŠ¥è­¦æœåŠ¡](https://cyberpolice.mps.gov.cn/)\n*   [ä¸­å›½äº’è”ç½‘ä¸¾æŠ¥ä¸­å¿ƒ](http://www.12377.cn/)\n*   [Chromeå•†åº—ä¸‹è½½](https://chrome.google.com/webstore/detail/csdn%E5%BC%80%E5%8F%91%E8%80%85%E5%8A%A9%E6%89%8B/kfkdboecolemdjodhmhmcibjocfopejo?hl=zh-CN)\n*   [è´¦å·ç®¡ç†è§„èŒƒ](https://blog.csdn.net/blogdevteam/article/details/126135357)\n*   [ç‰ˆæƒä¸å…è´£å£°æ˜](https://www.csdn.net/company/index.html#statement)\n*   [ç‰ˆæƒç”³è¯‰](https://blog.csdn.net/blogdevteam/article/details/90369522)\n*   [å‡ºç‰ˆç‰©è®¸å¯è¯](https://img-home.csdnimg.cn/images/20250103023206.png)\n*   [è¥ä¸šæ‰§ç…§](https://img-home.csdnimg.cn/images/20250103023201.png)\n*   Â©1999-2026åŒ—äº¬åˆ›æ–°ä¹çŸ¥ç½‘ç»œæŠ€æœ¯æœ‰é™å…¬å¸\n\n[![Image 61](https://profile-avatar.csdnimg.cn/12627a5b12dd4935a293f4608c5806d4_qq_43588095.jpg!1)](https://blog.csdn.net/qq_43588095)\n\n[ä¸Šæœ‰æ™¨å…‰](https://blog.csdn.net/qq_43588095 "ä¸Šæœ‰æ™¨å…‰")\n\nåšå®¢ç­‰çº§ ![Image 62](https://csdnimg.cn/identity/blog5.png)\n\nç é¾„7å¹´\n\n[91 åŸåˆ›](https://blog.csdn.net/qq_43588095)1604 ç‚¹èµ 1588 æ”¶è— 5330 ç²‰ä¸\n\n[å…³æ³¨](https://blog.csdn.net/qq_43588095/article/details/147479946)\n\n[ç§ä¿¡](https://im.csdn.net/chat/qq_43588095)\n\n[![Image 63](https://i-operation.csdnimg.cn/images/d5d144f1d1904560adf54c48ec13c5b4.png)](https://ai.csdn.net/workbench/wallet?utm_source=xtai_slb_bloglb)\n\n[](https://wwads.cn/click/bait)[![Image 64: ä¸‡ç»´å¹¿å‘Šè”ç›Ÿ](https://cdn.wwads.cn/creatives/ocZcBmiI9GrrBWWbGauozCvDuNbfUf79yINPx1AP.jpg)](https://wwads.cn/click/bundle?code=OjwIpJp7uaB2SfOUMJIHqtYLJzicsH)\n\n[å…éƒ¨ç½²\\è¿ç»´\\è´¦å·\\æ”¯ä»˜ç³»ç»Ÿå¼€å‘ï¼Œè®©ä½ ç”¨Cursoråˆ¶ä½œå¯æ”¶è´¹çš„AIæ™ºèƒ½ä½“ï¼](https://wwads.cn/click/bundle?code=OjwIpJp7uaB2SfOUMJIHqtYLJzicsH)[![Image 65](https://blog.csdn.net/qq_43588095/article/details/147479946)å¹¿å‘Š](https://wwads.cn/?utm_source=property-175&utm_medium=footer "ç‚¹å‡»äº†è§£ä¸‡ç»´å¹¿å‘Šè”ç›Ÿ")\n\n[](https://blog.csdn.net/qq_43588095/article/details/147479946 "éšè—å¹¿å‘Š")\n\n![Image 66](https://kunyu.csdn.net/1.png?p=56&adId=1071043&adBlockFlag=0&a=1071043&c=0&k=LangGraph%E4%B8%ADState%E7%9A%84%E5%AE%9A%E4%B9%89%E6%A8%A1%E5%BC%8F&spm=1001.2101.3001.5000&articleId=147479946&d=1&t=3&u=a5d2e34815a24cb4879456c525bd7633)\n\n### çƒ­é—¨æ–‡ç« \n\n*   [DeepSeek æ¨¡å‹å¯¹æ¯”ï¼ˆR1 vs V3 vs V3-0324ï¼‰ ![Image 67](https://csdnimg.cn/release/blogv2/dist/pc/img/readCountWhite.png)7257](https://blog.csdn.net/qq_43588095/article/details/146748702)\n*   [LLaMA - Factoryå®‰è£…éƒ¨ç½²åŠå¾®è°ƒæµç¨‹ ![Image 68](https://csdnimg.cn/release/blogv2/dist/pc/img/readCountWhite.png)4255](https://blog.csdn.net/qq_43588095/article/details/146547831)\n*   [LLamaFactoryåç«¯PPOå¾®è°ƒå®æ“ ![Image 69](https://csdnimg.cn/release/blogv2/dist/pc/img/readCountWhite.png)3995](https://blog.csdn.net/qq_43588095/article/details/146604113)\n*   [LLaMA-Factory æ¨¡å‹å¾®è°ƒæŒ‡ä»¤å‚æ•°è¯¦è§£ ![Image 70](https://csdnimg.cn/release/blogv2/dist/pc/img/readCountWhite.png)3772](https://blog.csdn.net/qq_43588095/article/details/146572550)\n*   [LangGraphä¸­çš„äº‹ä»¶æµ ![Image 71](https://csdnimg.cn/release/blogv2/dist/pc/img/readCountWhite.png)2433](https://blog.csdn.net/qq_43588095/article/details/147635246)\n\n### åˆ†ç±»ä¸“æ \n\n*   [![Image 72](https://i-blog.csdnimg.cn/columns/default/20201014180756724.png?x-oss-process=image/resize,m_fixed,h_64,w_64) å¤§æ¨¡å‹Agentå¼€å‘](https://blog.csdn.net/qq_43588095/category_12933023.html)53ç¯‡\n*   [![Image 73](https://i-blog.csdnimg.cn/columns/default/20201014180756738.png?x-oss-process=image/resize,m_fixed,h_64,w_64) DeepSeekç³»åˆ—ç¬”è®°](https://blog.csdn.net/qq_43588095/category_12931550.html)8ç¯‡\n*   [![Image 74](https://i-blog.csdnimg.cn/columns/default/20201014180756930.png?x-oss-process=image/resize,m_fixed,h_64,w_64) å¾®è°ƒè¯¾ç¨‹ç¬”è®°](https://blog.csdn.net/qq_43588095/category_12928611.html)30ç¯‡\n\n ä¸Šä¸€ç¯‡ï¼š [LangGraphä¸­å¦‚ä½•æ¥å…¥å¤§æ¨¡å‹åšé—®ç­”æµç¨‹](https://blog.csdn.net/qq_43588095/article/details/147479709) ä¸‹ä¸€ç¯‡ï¼š [LangGraphä¸­ä½¿ç”¨å­—å…¸ç±»å‹å®šä¹‰çŠ¶æ€æ„å»ºå›¾ç»“æ„](https://blog.csdn.net/qq_43588095/article/details/147479990)\n\n### æœ€æ–°è¯„è®º\n\n*   [LangGraphä¹‹Tool Calling Agent ä¸­ToolNodeçš„ä½¿ç”¨](https://blog.csdn.net/qq_43588095/article/details/147633960#comments_37789141)\n[æœ¨å¸›:](https://blog.csdn.net/u010380026)å¥½æ–‡ï¼ä½†æ˜¯result_1å’Œ2çš„ç”Ÿæˆä»£ç æ˜¯ä¸æ˜¯æœ‰ç‚¹é—®é¢˜\n\n### å¤§å®¶åœ¨çœ‹\n\n*   [2006å¹´Hintonè®ºæ–‡ï¼šæ·±åº¦å­¦ä¹ ç ´å†°èµ·ç‚¹ ![Image 75](https://csdnimg.cn/release/blogv2/dist/pc/img/readCountWhite.png)986](https://blog.csdn.net/jeffsonfu/article/details/158152445)\n*   [Flask+Vue3å­¦ç”Ÿä¿¡æ¯ç®¡ç†ç³»ç»Ÿ](https://blog.csdn.net/caoli201314/article/details/158234142)\n*   [Transformerï¼šè·¨æ¨¡æ€AIæ ¸å¿ƒæ¶æ„ ![Image 76](https://csdnimg.cn/release/blogv2/dist/pc/img/readCountWhite.png)1093](https://blog.csdn.net/jeffsonfu/article/details/157688935)\n*   [ç¥ç»ç½‘ç»œå…­åå¹´æ¼”è¿›å²](https://blog.csdn.net/jeffsonfu/article/details/158208812)\n*   [æ¢¯åº¦ä¸‹é™åŠä¸»æµä¼˜åŒ–ç®—æ³•è¯¦è§£](https://blog.csdn.net/jeffsonfu/article/details/158234538)\n\n### æœ€æ–°æ–‡ç« \n\n*   [LangGraphä¸­çš„äº‹ä»¶æµ](https://blog.csdn.net/qq_43588095/article/details/147635246)\n*   [LangGraphä¸­å¦‚ä½•ä½¿ç”¨æµå¼è¾“å‡º](https://blog.csdn.net/qq_43588095/article/details/147635070)\n*   [LangGraphæ¡ˆä¾‹å®æ“ï¼šæ„å»ºå¤æ‚å·¥å…·åº”ç”¨çš„ReActè‡ªæ²»ä»£ç†ï¼ˆå«ä»£ç ï¼‰](https://blog.csdn.net/qq_43588095/article/details/147634669)\n\n[2025å¹´ 91ç¯‡](https://blog.csdn.net/qq_43588095?type=blog&year=2025&month=04)\n\n![Image 77](https://kunyu.csdn.net/1.png?p=57&adId=1086623&adBlockFlag=0&a=1086623&c=0&k=LangGraph%E4%B8%ADState%E7%9A%84%E5%AE%9A%E4%B9%89%E6%A8%A1%E5%BC%8F&spm=1001.2101.3001.5001&articleId=147479946&d=1&t=3&u=45ac8718cd754d28a20ea1e56f2520e9)\n\n### ç›®å½•\n\n1.   [ä¸€ã€LangGraphæ¡†æ¶æ ¸å¿ƒè¦ç‚¹å›é¡¾](https://blog.csdn.net/qq_43588095/article/details/147479946#t0)\n2.   [äºŒã€Stateçš„å…³é”®ä½œç”¨åŠæ¶ˆæ¯ä¼ é€’æœºåˆ¶](https://blog.csdn.net/qq_43588095/article/details/147479946#t1)\n3.   [ä¸‰ã€Stateçš„å®šä¹‰æ¨¡å¼ä¸ä»£ç å®ç°ç¤ºä¾‹](https://blog.csdn.net/qq_43588095/article/details/147479946#t2)\n\nå±•å¼€å…¨éƒ¨![Image 78](https://csdnimg.cn/release/blogv2/dist/pc/img/arrowup-line-bot-White.png)\n\næ”¶èµ·![Image 79](https://csdnimg.cn/release/blogv2/dist/pc/img/arrowup-line-top-White.png)\n\n![Image 80](https://kunyu.csdn.net/1.png?p=530&adId=1086624&adBlockFlag=0&a=1086624&c=0&k=LangGraph%E4%B8%ADState%E7%9A%84%E5%AE%9A%E4%B9%89%E6%A8%A1%E5%BC%8F&spm=1001.2101.3001.4647&articleId=147479946&d=1&t=3&u=e41726bf44e74f4d9f03f7a1cb21f59e)\n\n### ç›®å½•\n\n1.   [ä¸€ã€LangGraphæ¡†æ¶æ ¸å¿ƒè¦ç‚¹å›é¡¾](https://blog.csdn.net/qq_43588095/article/details/147479946#t0)\n2.   [äºŒã€Stateçš„å…³é”®ä½œç”¨åŠæ¶ˆæ¯ä¼ é€’æœºåˆ¶](https://blog.csdn.net/qq_43588095/article/details/147479946#t1)\n3.   [ä¸‰ã€Stateçš„å®šä¹‰æ¨¡å¼ä¸ä»£ç å®ç°ç¤ºä¾‹](https://blog.csdn.net/qq_43588095/article/details/147479946#t2)\n\nå±•å¼€å…¨éƒ¨![Image 81](https://csdnimg.cn/release/blogv2/dist/pc/img/arrowup-line-bot-White.png)\n\næ”¶èµ·![Image 82](https://csdnimg.cn/release/blogv2/dist/pc/img/arrowup-line-top-White.png)\n\n[](https://wwads.cn/click/bait)[![Image 83: ä¸‡ç»´å¹¿å‘Šè”ç›Ÿ](https://cdn.wwads.cn/creatives/ocZcBmiI9GrrBWWbGauozCvDuNbfUf79yINPx1AP.jpg)](https://wwads.cn/click/bundle?code=OjwIpJp7uaB2SfOUMJIHqtYLJzicsH)\n\n[å…éƒ¨ç½²\\è¿ç»´\\è´¦å·\\æ”¯ä»˜ç³»ç»Ÿå¼€å‘ï¼Œè®©ä½ ç”¨Cursoråˆ¶ä½œå¯æ”¶è´¹çš„AIæ™ºèƒ½ä½“ï¼](https://wwads.cn/click/bundle?code=OjwIpJp7uaB2SfOUMJIHqtYLJzicsH)[![Image 84](https://blog.csdn.net/qq_43588095/article/details/147479946)å¹¿å‘Š](https://wwads.cn/?utm_source=property-175&utm_medium=footer "ç‚¹å‡»äº†è§£ä¸‡ç»´å¹¿å‘Šè”ç›Ÿ")\n\n[](https://blog.csdn.net/qq_43588095/article/details/147479946 "éšè—å¹¿å‘Š")\n\n![Image 85](https://kunyu.csdn.net/1.png?p=479&adId=1071044&adBlockFlag=0&a=1071044&c=0&k=LangGraph%E4%B8%ADState%E7%9A%84%E5%AE%9A%E4%B9%89%E6%A8%A1%E5%BC%8F&spm=1001.2101.3001.4834&articleId=147479946&d=1&t=3&u=56412dcc2f554eaba763e3b763a50e70)\n\n ä¸Šä¸€ç¯‡ï¼š [LangGraphä¸­å¦‚ä½•æ¥å…¥å¤§æ¨¡å‹åšé—®ç­”æµç¨‹](https://blog.csdn.net/qq_43588095/article/details/147479709) ä¸‹ä¸€ç¯‡ï¼š [LangGraphä¸­ä½¿ç”¨å­—å…¸ç±»å‹å®šä¹‰çŠ¶æ€æ„å»ºå›¾ç»“æ„](https://blog.csdn.net/qq_43588095/article/details/147479990)\n\n### åˆ†ç±»ä¸“æ \n\n*   [![Image 86](https://i-blog.csdnimg.cn/columns/default/20201014180756724.png?x-oss-process=image/resize,m_fixed,h_64,w_64) å¤§æ¨¡å‹Agentå¼€å‘](https://blog.csdn.net/qq_43588095/category_12933023.html)53ç¯‡\n*   [![Image 87](https://i-blog.csdnimg.cn/columns/default/20201014180756738.png?x-oss-process=image/resize,m_fixed,h_64,w_64) DeepSeekç³»åˆ—ç¬”è®°](https://blog.csdn.net/qq_43588095/category_12931550.html)8ç¯‡\n*   [![Image 88](https://i-blog.csdnimg.cn/columns/default/20201014180756930.png?x-oss-process=image/resize,m_fixed,h_64,w_64) å¾®è°ƒè¯¾ç¨‹ç¬”è®°](https://blog.csdn.net/qq_43588095/category_12928611.html)30ç¯‡\n\n[å±•å¼€å…¨éƒ¨![Image 89](https://csdnimg.cn/release/blogv2/dist/pc/img/arrowup-line-bot-White.png)](https://blog.csdn.net/qq_43588095/article/details/147479946)[æ”¶èµ·![Image 90](https://csdnimg.cn/release/blogv2/dist/pc/img/arrowup-line-top-White.png)](https://blog.csdn.net/qq_43588095/article/details/147479946)\n\nç™»å½•åæ‚¨å¯ä»¥äº«å—ä»¥ä¸‹æƒç›Šï¼š\n\n*   ![Image 91](blob:http://localhost/e891c3a7c1a92038da15617ead1c0096)å…è´¹å¤åˆ¶ä»£ç \n*   ![Image 92](blob:http://localhost/3d84693e43989ca72c63590d38052fc8)å’Œåšä¸»å¤§Väº’åŠ¨\n*   ![Image 93](blob:http://localhost/a746ba3bd4746d1ec8acd6b5071ccf00)ä¸‹è½½æµ·é‡èµ„æº\n*   ![Image 94](blob:http://localhost/7cd6e3cbe7e0076d0b9199193b4b832d)å‘åŠ¨æ€/å†™æ–‡ç« /åŠ å…¥ç¤¾åŒº\n\nÃ—ç«‹å³ç™»å½•\n\nè¯„è®º![Image 95](https://csdnimg.cn/release/blogv2/dist/pc/img/closeBt.png)\n\n![Image 96](https://csdnimg.cn/release/blogv2/dist/pc/img/commentArrowLeftWhite.png)è¢«æŠ˜å çš„ æ¡è¯„è®º [ä¸ºä»€ä¹ˆè¢«æŠ˜å ?](https://blogdev.blog.csdn.net/article/details/122245662)[![Image 97](https://csdnimg.cn/release/blogv2/dist/pc/img/iconPark.png)åˆ°ã€çŒæ°´ä¹å›­ã€‘å‘è¨€](https://bbs.csdn.net/forums/FreeZone)\n\n[æŸ¥çœ‹æ›´å¤šè¯„è®º![Image 98](https://csdnimg.cn/release/blogv2/dist/pc/img/commentArrowDownWhite.png)](https://blog.csdn.net/qq_43588095/article/details/147479946)\n\n æ·»åŠ çº¢åŒ… [](https://blog.csdn.net/qq_43588095/article/details/147479946)\n\nç¥ç¦è¯­ \n\n[](https://blog.csdn.net/qq_43588095/article/details/147479946)\n\nè¯·å¡«å†™çº¢åŒ…ç¥ç¦è¯­æˆ–æ ‡é¢˜\n\nçº¢åŒ…æ•°é‡ \n\nä¸ª\n\nçº¢åŒ…ä¸ªæ•°æœ€å°ä¸º10ä¸ª\n\nçº¢åŒ…æ€»é‡‘é¢ \n\nå…ƒ\n\nçº¢åŒ…é‡‘é¢æœ€ä½5å…ƒ\n\nä½™é¢æ”¯ä»˜ \n\n å½“å‰ä½™é¢ 3.43 å…ƒ [å‰å¾€å……å€¼ >](https://i.csdn.net/#/wallet/balance/recharge)\n\n éœ€æ”¯ä»˜ï¼š10.00 å…ƒ \n\nå–æ¶ˆ ç¡®å®š\n\n![Image 99](https://blog.csdn.net/qq_43588095/article/details/147479946)\n\næˆå°±ä¸€äº¿æŠ€æœ¯äºº!\n\n é¢†å–åä½ ä¼šè‡ªåŠ¨æˆä¸ºåšä¸»å’Œçº¢åŒ…ä¸»çš„ç²‰ä¸ [è§„åˆ™](https://blogdev.blog.csdn.net/article/details/128932621)\n\n[![Image 100](https://profile-avatar.csdnimg.cn/default.jpg!2)](https://blog.csdn.net/qq_43588095/article/details/147479946)\n\nhope_wisdom\n\n å‘å‡ºçš„çº¢åŒ… \n\nå®ä»˜ å…ƒ\n\n[ä½¿ç”¨ä½™é¢æ”¯ä»˜](javascript:;)\n\n![Image 101](https://csdnimg.cn/release/blogv2/dist/pc/img/pay-time-out.png)ç‚¹å‡»é‡æ–°è·å–\n\n![Image 102](https://csdnimg.cn/release/blogv2/dist/pc/img/weixin.png)![Image 103](https://csdnimg.cn/release/blogv2/dist/pc/img/zhifubao.png)![Image 104](https://csdnimg.cn/release/blogv2/dist/pc/img/jingdong.png)æ‰«ç æ”¯ä»˜\n\né’±åŒ…ä½™é¢ 0\n\n![Image 105](https://csdnimg.cn/release/blogv2/dist/pc/img/pay-help.png)\n\næŠµæ‰£è¯´æ˜ï¼š\n\n1.ä½™é¢æ˜¯é’±åŒ…å……å€¼çš„è™šæ‹Ÿè´§å¸ï¼ŒæŒ‰ç…§1:1çš„æ¯”ä¾‹è¿›è¡Œæ”¯ä»˜é‡‘é¢çš„æŠµæ‰£ã€‚\n\n 2.ä½™é¢æ— æ³•ç›´æ¥è´­ä¹°ä¸‹è½½ï¼Œå¯ä»¥è´­ä¹°VIPã€ä»˜è´¹ä¸“æ åŠè¯¾ç¨‹ã€‚\n\n[![Image 106](https://csdnimg.cn/release/blogv2/dist/pc/img/recharge.png)ä½™é¢å……å€¼](https://i.csdn.net/#/wallet/balance/recharge)\n\n![Image 107](https://blog.csdn.net/qq_43588095/article/details/147479946)\n\nç¡®å®š å–æ¶ˆ![Image 108](https://csdnimg.cn/release/blogv2/dist/pc/img/closeBt.png)\n\nä¸¾æŠ¥\n\n![Image 109](https://csdnimg.cn/release/blogv2/dist/pc/img/closeBlack.png)\n\né€‰æ‹©ä½ æƒ³è¦ä¸¾æŠ¥çš„å†…å®¹ï¼ˆå¿…é€‰ï¼‰\n\n*   å†…å®¹æ¶‰é»„\n*   æ”¿æ²»ç›¸å…³\n*   å†…å®¹æŠ„è¢­\n*   æ¶‰å«Œå¹¿å‘Š\n*   å†…å®¹ä¾µæƒ\n*   ä¾®è¾±è°©éª‚\n*   æ ·å¼é—®é¢˜\n*   å…¶ä»–\n\nåŸæ–‡é“¾æ¥ï¼ˆå¿…å¡«ï¼‰\n\nè¯·é€‰æ‹©å…·ä½“åŸå› ï¼ˆå¿…é€‰ï¼‰\n\n*   åŒ…å«ä¸å®ä¿¡æ¯\n*   æ¶‰åŠä¸ªäººéšç§\n\nè¯·é€‰æ‹©å…·ä½“åŸå› ï¼ˆå¿…é€‰ï¼‰\n\n*   ä¾®è¾±è°©éª‚\n*   è¯½è°¤\n\nè¯·é€‰æ‹©å…·ä½“åŸå› ï¼ˆå¿…é€‰ï¼‰\n\n*   æ¬å®¶æ ·å¼\n*   åšæ–‡æ ·å¼\n\nè¡¥å……è¯´æ˜ï¼ˆé€‰å¡«ï¼‰\n\nå–æ¶ˆ\n\nç¡®å®š\n\n[![Image 110](https://i-operation.csdnimg.cn/images/23189f0255c74da0aead8ae1842c6f39.gif)](https://ai.csdn.net/workbench/wallet?utm_source=xtai_slb_blogxf_ty)[![Image 111](https://csdnimg.cn/release/blogv2/dist/pc/img/toolbar/Group.png)ç‚¹å‡»ä½“éªŒ DeepSeekR1æ»¡è¡€ç‰ˆ](https://ai.csdn.net/chat?utm_source=cknow_pc_blogdetail&spm=1001.2101.3001.10583)[![Image 112](https://g.csdnimg.cn/side-toolbar/3.6/images/mobile.png) ä¸‹è½½APP ![Image 113: ç¨‹åºå‘˜éƒ½åœ¨ç”¨çš„ä¸­æ–‡ITæŠ€æœ¯äº¤æµç¤¾åŒº](https://g.csdnimg.cn/side-toolbar/3.6/images/qr_app.png) ç¨‹åºå‘˜éƒ½åœ¨ç”¨çš„ä¸­æ–‡ITæŠ€æœ¯äº¤æµç¤¾åŒº å…¬ä¼—å· ![Image 114: ä¸“ä¸šçš„ä¸­æ–‡ IT æŠ€æœ¯ç¤¾åŒºï¼Œä¸åƒä¸‡æŠ€æœ¯äººå…±æˆé•¿](https://g.csdnimg.cn/side-toolbar/3.6/images/qr_wechat.png) ä¸“ä¸šçš„ä¸­æ–‡ IT æŠ€æœ¯ç¤¾åŒºï¼Œä¸åƒä¸‡æŠ€æœ¯äººå…±æˆé•¿ è§†é¢‘å· ![Image 115: å…³æ³¨ã€CSDNã€‘è§†é¢‘å·ï¼Œè¡Œä¸šèµ„è®¯ã€æŠ€æœ¯åˆ†äº«ç²¾å½©ä¸æ–­ï¼Œç›´æ’­å¥½ç¤¼é€ä¸åœï¼](https://g.csdnimg.cn/side-toolbar/3.6/images/qr_video.png) å…³æ³¨ã€CSDNã€‘è§†é¢‘å·ï¼Œè¡Œä¸šèµ„è®¯ã€æŠ€æœ¯åˆ†äº«ç²¾å½©ä¸æ–­ï¼Œç›´æ’­å¥½ç¤¼é€ä¸åœï¼](https://blog.csdn.net/qq_43588095/article/details/147479946)[![Image 116](https://g.csdnimg.cn/side-toolbar/3.6/images/customer.png)å®¢æœ](https://blog.csdn.net/qq_43588095/article/details/147479946)[![Image 117](https://g.csdnimg.cn/side-toolbar/3.6/images/totop.png)è¿”å›é¡¶éƒ¨](https://blog.csdn.net/qq_43588095/article/details/147479946)\n\n[![Image 118](https://csdnimg.cn/release/blogv2/dist/pc/img/quoteClose1White.png)](https://blog.csdn.net/qq_43588095/article/details/147479946)\n\n![Image 119](https://i-blog.csdnimg.cn/direct/34c5cd13225746f28209b80e750f3d85.png#pic_center)\n\n-è¿˜åŸ+1:1 è¿˜åŸ', 'doi': '', 'published_date': None, 'pdf_url': '', 'url': 'https://blog.csdn.net/qq_43588095/article/details/147479946', 'source': 'tavily', 'categories': ['web_search'], 'keywords': [], 'citations': 0, 'references': [], 'extra': {'score': 0.99999726, 'saved_path': None}}], 'save_path': '/home/qinshan/widthresearch/data/downloads'}
2026-02-21 19:57:14,029 - __main__ - INFO - handle_download: searcher=TavilySearch, input_papers=1, save_path=/home/qinshan/widthresearch/data/downloads
2026-02-21 19:57:14,030 - __main__ - INFO - handle_download: downloaded=1
2026-02-21 19:57:14,030 - __main__ - INFO - call_tool payload: source_tool=tavily_download, result_type=papers, count=1
2026-02-21 19:57:14,030 - __main__ - INFO - call_tool: name=tavily_download, result_type=papers, count=1
2026-02-21 19:57:14,030 - __main__ - DEBUG - call_tool payload sample: {'paper_id': '', 'title': 'LangGraphä¸­Stateçš„å®šä¹‰æ¨¡å¼ - CSDNåšå®¢', 'authors': [], 'abstract': 'LangGraphä¸­Stateçš„å®šä¹‰æ¨¡å¼_langgraphè·å–state-CSDNåšå®¢\n===============\n\n[![Image 1: CSDNé¦–é¡µ](https://img-home.csdnimg.cn/images/20201124032511.png)](https://www.csdn.net/)\n\n*   [åšå®¢](https://blog.csdn.net/)\n*   [ä¸‹è½½](https://download.csdn.net/)\n*   [ç¤¾åŒº](https://devpress.csdn.net/)\n*   [![Image 2](https://img-home.csdnimg.cn/images/20240829093757.png)GitCode](https://link.csdn.net/?target=https%3A%2F%2Fgitcode.com%3Futm_source%3Dcsdn_toolbar)\n*   [![Image 3](https://i-operation.csdnimg.cn/images/3c66245675ae423e9cc897dc790b8ac9.png)GPUç®—åŠ› ![Image 4](https://i-operation.csdnimg.cn/images/d8d2f104eeeb4a428045d2b34d72ed13.png)](https://ai.csdn.net/)\n*   [æ›´å¤š](https://blog.csdn.net/qq_43588095/article/details/147479946)[ä¼šè®®](https://www.bagevent.com/event/9117243 "ä¼šè®®")[å­¦ä¹ ](https://edu.csdn.net/?utm_source=zhuzhantoolbar "é«˜è´¨é‡è¯¾ç¨‹Â·å¤§ä¼šäº‘ä¼šå‘˜")[![Image 5](https://i-operation.csdnimg.cn/images/77c4dd7a760a493498bee1d336b064c0.png)InsCode](https://inscode.net/?utm_source=csdn_blog_top_bar "InsCode") \n\næœç´¢\nAI æœç´¢\n\n[ç™»å½•](https://blog.csdn.net/qq_43588095/article/details/147479946)\n\nç™»å½•åæ‚¨å¯ä»¥ï¼š\n\n*   å¤åˆ¶ä»£ç å’Œä¸€é”®è¿è¡Œ\n*   ä¸åšä¸»å¤§Væ·±åº¦äº’åŠ¨\n*   è§£é”æµ·é‡ç²¾é€‰èµ„æº\n*   è·å–å‰æ²¿æŠ€æœ¯èµ„è®¯\n\n[ç«‹å³ç™»å½•](https://blog.csdn.net/qq_43588095/article/details/147479946)\n\n[![Image 6](https://i-operation.csdnimg.cn/images/f9098e9320264ddc85f274234b2f0c6a.png)æ–°å®¢å¼€é€šä¼šå‘˜ ç«‹å‡60![Image 7](https://i-operation.csdnimg.cn/images/97f199b02b604390ab516e4897fb5bfe.png)](https://mall.csdn.net/vip?utm_source=dl_hover)\n\n[ä¼šå‘˜Â·æ–°äººç¤¼åŒ… ![Image 8](https://i-operation.csdnimg.cn/images/105eda9d414f4250a7c3fe45be3cd15f.png)](https://mall.csdn.net/vip?utm_source=260206_vip_toolbarhyzx_hy)\n\n[æ¶ˆæ¯](https://i.csdn.net/#/msg/index)\n\n[åˆ›ä½œä¸­å¿ƒ](https://mp.csdn.net/ "åˆ›ä½œä¸­å¿ƒ")\n\n[åˆ›ä½œ](https://mp.csdn.net/edit)\n\n[![Image 9](https://i-operation.csdnimg.cn/images/6e41bd372d1f4ec39b3cd36ab95046c4.png)](https://mp.csdn.net/edit)![Image 10](https://i-operation.csdnimg.cn/images/43349e98a45341699652b0b6fa4ea541.png)![Image 11](https://i-operation.csdnimg.cn/images/0f13ec529b6b4195ad99894f76653e56.png)\n\nLangGraphä¸­Stateçš„å®šä¹‰æ¨¡å¼\n====================\n\næœ€æ–°æ¨èæ–‡ç« äº 2025-12-01 20:03:17 å‘å¸ƒ\n\nåŸåˆ› äº 2025-04-24 15:32:41 å‘å¸ƒÂ·897 é˜…è¯»\n\nÂ·![Image 12](https://csdnimg.cn/release/blogv2/dist/pc/img/newHeart2023Active.png)![Image 13](https://csdnimg.cn/release/blogv2/dist/pc/img/newHeart2023Black.png) 5 \n\nÂ·[![Image 14](https://csdnimg.cn/release/blogv2/dist/pc/img/tobarCollect2.png)![Image 15](https://csdnimg.cn/release/blogv2/dist/pc/img/tobarCollectionActive2.png) 5](https://blog.csdn.net/qq_43588095/article/details/147479946)Â·\n\nCC 4.0 BY-SAç‰ˆæƒ\n\n ç‰ˆæƒå£°æ˜ï¼šæœ¬æ–‡ä¸ºåšä¸»åŸåˆ›æ–‡ç« ï¼Œéµå¾ª[CC 4.0 BY-SA](http://creativecommons.org/licenses/by-sa/4.0/)ç‰ˆæƒåè®®ï¼Œè½¬è½½è¯·é™„ä¸ŠåŸæ–‡å‡ºå¤„é“¾æ¥å’Œæœ¬å£°æ˜ã€‚ \n\næ–‡ç« æ ‡ç­¾ï¼š\n[#äººå·¥æ™ºèƒ½](https://so.csdn.net/so/search/s.do?q=%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD&t=all&o=vip&s=&l=&f=&viparticle=&from_tracking_code=tag_word&from_code=app_blog_art)[#å¤§æ¨¡å‹](https://so.csdn.net/so/search/s.do?q=%E5%A4%A7%E6%A8%A1%E5%9E%8B&t=all&o=vip&s=&l=&f=&viparticle=&from_tracking_code=tag_word&from_code=app_blog_art)[#Agent](https://so.csdn.net/so/search/s.do?q=Agent&t=all&o=vip&s=&l=&f=&viparticle=&from_tracking_code=tag_word&from_code=app_blog_art)[#LangGraph](https://so.csdn.net/so/search/s.do?q=LangGraph&t=all&o=vip&s=&l=&f=&viparticle=&from_tracking_code=tag_word&from_code=app_blog_art)\n\n[![Image 16](https://i-blog.csdnimg.cn/columns/default/20201014180756724.png?x-oss-process=image/resize,m_fixed,h_224,w_224)å¤§æ¨¡å‹Agentå¼€å‘ ä¸“æ æ”¶å½•è¯¥å†…å®¹](https://blog.csdn.net/qq_43588095/category_12933023.html "å¤§æ¨¡å‹Agentå¼€å‘")\n\n53 ç¯‡æ–‡ç« \n\n[è®¢é˜…ä¸“æ ](https://blog.csdn.net/qq_43588095/article/details/147479946)\n\n#### [](https://blog.csdn.net/qq_43588095/article/details/147479946)[](https://blog.csdn.net/qq_43588095/article/details/147479946)ä¸€ã€LangGraph æ¡†æ¶æ ¸å¿ƒè¦ç‚¹å›é¡¾\n\n1.   **åº•å±‚åŸç†ä¸ä¼˜åŠ¿**\n    *   LangGraphé‡‡ç”¨å›¾ç»“æ„æ›¿ä»£LangChainæ„å»ºAI Agentè¿è¡ŒçŠ¶æ€ï¼Œå¥‘åˆå¤§æ¨¡å‹æŠ€æœ¯å‘å±•è¶‹åŠ¿ã€‚\n    *   å‡­å€Ÿå¾ªç¯å›¾å’Œåˆ†æ”¯çŠ¶æ€ï¼Œèƒ½çµæ´»æ„å»ºagentå†…éƒ¨æµè½¬è¿‡ç¨‹ï¼Œé€‚ç”¨äºå¤æ‚AI Agentåº”ç”¨å¼€å‘ã€‚\n\n2.   **æ ¸å¿ƒç»„ä»¶è§£æ**\n    *   **èŠ‚ç‚¹ï¼ˆNodeï¼‰**ï¼šä½œä¸ºç‹¬ç«‹å‡½æ•°ï¼Œå¯æ ¹æ®ä¸šåŠ¡éœ€æ±‚è°ƒç”¨å¤§æ¨¡å‹æˆ–å…¶ä»–é€»è¾‘ï¼Œå°è£…å…·ä½“æ‰§è¡Œé€»è¾‘ã€‚\n    *   **è¾¹ï¼ˆEdgeï¼‰**ï¼šç”¨äºè¿æ¥å„ä¸ªèŠ‚ç‚¹ï¼Œæ˜ç¡®ä¸šåŠ¡æµçš„æ‰§è¡Œé¡ºåºã€‚\n    *   **çŠ¶æ€ï¼ˆStateï¼‰**ï¼šè´Ÿè´£åœ¨èŠ‚ç‚¹é—´ä¼ é€’ä¿¡æ¯ï¼Œå¯¹ç»´æŒå›¾çš„æŒç»­è¿è¡Œèµ·ç€å…³é”®ä½œç”¨ ã€‚\n\n3.   **åº”ç”¨åœºæ™¯å¤æ‚åº¦å·®å¼‚**\n    *   **ç®€å•åœºæ™¯**ï¼šå¦‚å¤§æ¨¡å‹é—®ç­”æµç¨‹ï¼Œå¯ç”±START - Node - ENDæ„æˆï¼Œåœ¨Nodeä¸­å°è£…å¤§æ¨¡å‹æ¥å…¥é€»è¾‘å³å¯ã€‚\n    *   **å¤æ‚åœºæ™¯**ï¼šæ¶‰åŠå¤šä»»åŠ¡å¤„ç†ã€å¤šæ•°æ®æµç¨‹ä»¥åŠå¤šagentååŒå·¥ä½œï¼Œå€ŸåŠ©åˆ†æ”¯å’Œå¾ªç¯å®ç°ã€‚åˆ†æ”¯ä¾æ®ç”¨æˆ·è¾“å…¥é€‰æ‹©ä¸åŒå¤„ç†é€»è¾‘ï¼Œå¾ªç¯åˆ™åœ¨èŠ‚ç‚¹è¾“å‡ºä¸é¢„æœŸæ—¶ï¼Œä½¿èŠ‚ç‚¹è¿”å›é‡æ–°å¤„ç†ã€‚\n\n#### [](https://blog.csdn.net/qq_43588095/article/details/147479946)[](https://blog.csdn.net/qq_43588095/article/details/147479946)äºŒã€Stateçš„å…³é”®ä½œç”¨åŠ[æ¶ˆæ¯ä¼ é€’](https://so.csdn.net/so/search?q=%E6%B6%88%E6%81%AF%E4%BC%A0%E9%80%92&spm=1001.2101.3001.7020)æœºåˆ¶\n\n1.   **æ ¸å¿ƒåœ°ä½å‡¸æ˜¾**\n\n    *   LangGraphåº•å±‚å›¾ç®—æ³•ä¾é æ¶ˆæ¯ä¼ é€’æœºåˆ¶å®šä¹‰å’Œæ‰§è¡Œå›¾çš„äº¤äº’æµç¨‹ï¼ŒStateä½œä¸ºæ¶ˆæ¯ä¼ é€’çš„è½½ä½“ï¼Œç›´æ¥å†³å®šå›¾èƒ½å¦æŒç»­è¿è¡Œã€‚\n    *   Stateä¸å·¥å…·è°ƒç”¨ã€äººæœºäº¤äº’ã€ä¸Šä¸‹æ–‡å†å²ä¿¡æ¯ç®¡ç†ç­‰é«˜çº§åŠŸèƒ½å¯†åˆ‡ç›¸å…³ã€‚\n\n2.   **æ¶ˆæ¯ä¼ é€’è¯¦ç»†è¿‡ç¨‹**ï¼šä»¥ç®€å•å›¾çŠ¶æ€ä¸ºä¾‹ï¼ŒSTARTèŠ‚ç‚¹æ¥æ”¶ç”¨æˆ·è¾“å…¥ã€‚![Image 17: åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/direct/34c5cd13225746f28209b80e750f3d85.png#pic_center)\n\n    *   åˆå§‹çŠ¶æ€å‡è®¾ä¸º`{"message":[{"x":10}]}`,æ¶ˆæ¯ç»è¾¹ä¼ é€’è‡³Node 1ã€‚\n    *   Node 1å¯¹`x`è¿›è¡ŒåŠ ä¸€æ“ä½œï¼ŒçŠ¶æ€æ›´æ–°ä¸º`{"message":[{"x":10},{"x":11}]}`,éšåä¼ é€’åˆ°Node 2ã€‚\n    *   Node 2æ¥æ”¶åˆ°æ›´æ–°åçš„çŠ¶æ€ï¼Œå¯¹`x`æ‰§è¡Œå‡äºŒæ“ä½œå¾—åˆ°`y=9` ï¼Œæœ€ç»ˆçŠ¶æ€å˜ä¸º`{"message":[{"x":10},{"x":11},{"y":9}]}`,é€šè¿‡ENDèŠ‚ç‚¹è¾“å‡ºç»™ç”¨æˆ·ç«¯ã€‚\n\n3.   **å¹¿æ’­æœºåˆ¶è§£æ**\n\n    *   LangGraphçš„çŠ¶æ€ä¸ºå…±äº«çŠ¶æ€ï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½å…·å¤‡è¯»å–å’Œå†™å…¥æƒé™ã€‚\n    *   å½“æŸä¸ªèŠ‚ç‚¹æ›´æ–°çŠ¶æ€æ—¶ï¼Œä¼šé€šè¿‡å¹¿æ’­æœºåˆ¶é€šçŸ¥å…¶ä»–èŠ‚ç‚¹ï¼Œä½¿å…¶ä»–èŠ‚ç‚¹èƒ½å¤Ÿæ®æ­¤è°ƒæ•´è‡ªèº«è¡Œä¸ºã€‚\n\n#### [](https://blog.csdn.net/qq_43588095/article/details/147479946)[](https://blog.csdn.net/qq_43588095/article/details/147479946)ä¸‰ã€Stateçš„å®šä¹‰æ¨¡å¼ä¸ä»£ç å®ç°ç¤ºä¾‹\n\n1.   **åŸºäºå­—å…¸ç±»å‹çš„å®šä¹‰æ¨¡å¼**ï¼šä»å¼€å‘è€…è§†è§’çœ‹ï¼ŒStateæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªå­—å…¸ï¼Œå…¶é”®å€¼ä¸ºåˆ—è¡¨ã€‚æ¯æ¬¡æ›´æ–°æ—¶ï¼Œä¼šå‘åˆ—è¡¨ä¸­æ·»åŠ æ–°å€¼ï¼Œä»¥æ­¤æ”¯æ’‘åç»­èŠ‚ç‚¹çš„è¿è¡Œã€‚\n2.   **ä»£ç å®ç°æ­¥éª¤**\n    *   ä½¿ç”¨`StateGraph`ç±»å®šä¹‰çŠ¶æ€ï¼Œåˆ›å»º`StateGraph`å®ä¾‹ã€‚\n\n    *   å®šä¹‰`addition`å’Œ`subtraction`å‡½æ•°ï¼Œåˆ†åˆ«å®ç°å¯¹çŠ¶æ€çš„åŠ ä¸€å’Œå‡äºŒæ“ä½œã€‚\n\n    *   é€šè¿‡`add_node`æ–¹æ³•æ·»åŠ èŠ‚ç‚¹ï¼Œåˆ©ç”¨`add_edge`æ–¹æ³•è¿æ¥èŠ‚ç‚¹ã€‚\n\n    *   æœ€åè°ƒç”¨`compile`æ–¹æ³•ï¼Œå°†`StateGraph`è½¬æ¢ä¸ºå¯è¿è¡Œçš„å›¾ç»“æ„ã€‚\n\n[å…³æ³¨åšä¸»å³å¯é˜…è¯»å…¨æ–‡![Image 18](https://csdnimg.cn/release/blogv2/dist/pc/img/arrowDownAttend.png)](https://blog.csdn.net/qq_43588095/article/details/147479946)\n\n![Image 19](https://csdnimg.cn/release/blogv2/dist/pc/img/vip-limited-close-newWhite.png)\n\n ç¡®å®šè¦æ”¾å¼ƒæœ¬æ¬¡æœºä¼šï¼Ÿ \n\nç¦åˆ©å€’è®¡æ—¶\n\n_:_ _:_\n\n![Image 20](https://csdnimg.cn/release/blogv2/dist/pc/img/vip-limited-close-roup.png)ç«‹å‡ Â¥\n\næ™®é€šVIPå¹´å¡å¯ç”¨\n\n[ç«‹å³ä½¿ç”¨](https://mall.csdn.net/vip)\n\n[![Image 21](https://profile-avatar.csdnimg.cn/12627a5b12dd4935a293f4608c5806d4_qq_43588095.jpg!1) ä¸Šæœ‰æ™¨å…‰](https://blog.csdn.net/qq_43588095)\n\n[å…³æ³¨](javascript:;)[å…³æ³¨](https://blog.csdn.net/qq_43588095/article/details/147479946)\n\n*   [![Image 22](https://csdnimg.cn/release/blogv2/dist/pc/img/tobarThumbUpactive.png)![Image 23](https://csdnimg.cn/release/blogv2/dist/pc/img/toolbar/like-active.png)![Image 24](https://csdnimg.cn/release/blogv2/dist/pc/img/toolbar/like.png) 5](https://blog.csdn.net/qq_43588095/article/details/147479946)ç‚¹èµ \n*   [![Image 25](https://csdnimg.cn/release/blogv2/dist/pc/img/toolbar/unlike-active.png)![Image 26](https://csdnimg.cn/release/blogv2/dist/pc/img/toolbar/unlike.png)](https://blog.csdn.net/qq_43588095/article/details/147479946)è¸© \n*   [![Image 27](https://csdnimg.cn/release/blogv2/dist/pc/img/toolbar/collect-active.png)![Image 28](https://csdnimg.cn/release/blogv2/dist/pc/img/toolbar/collect.png)![Image 29](https://csdnimg.cn/release/blogv2/dist/pc/img/newCollectActive.png) 5](javascript:;) æ”¶è—    è§‰å¾—è¿˜ä¸é”™?  ä¸€é”®æ”¶è— ![Image 30](https://csdnimg.cn/release/blogv2/dist/pc/img/collectionCloseWhite.png)  \n*   [![Image 31](https://csdnimg.cn/release/blogv2/dist/pc/img/toolbar/comment.png) 0](https://blog.csdn.net/qq_43588095/article/details/147479946#commentBox)è¯„è®º \n*   [![Image 32](https://csdnimg.cn/release/blogv2/dist/pc/img/toolbar/share.png)åˆ†äº«](javascript:;)[å¤åˆ¶é“¾æ¥](https://blog.csdn.net/qq_43588095/article/details/147479946) [åˆ†äº«åˆ° QQ](https://blog.csdn.net/qq_43588095/article/details/147479946) [åˆ†äº«åˆ°æ–°æµªå¾®åš](https://blog.csdn.net/qq_43588095/article/details/147479946) ![Image 33](https://blog.csdn.net/qq_43588095/article/details/147479946) ![Image 34](https://csdnimg.cn/release/blogv2/dist/pc/img/share/icon-wechat.png)æ‰«ä¸€æ‰«     \n*   [![Image 35](https://csdnimg.cn/release/blogv2/dist/pc/img/toolbar/more.png)](https://blog.csdn.net/qq_43588095/article/details/147479946)[![Image 36](https://csdnimg.cn/release/blogv2/dist/pc/img/toolbar/report.png)ä¸¾æŠ¥](https://blog.csdn.net/qq_43588095/article/details/147479946) [![Image 37](https://csdnimg.cn/release/blogv2/dist/pc/img/toolbar/report.png)ä¸¾æŠ¥](https://blog.csdn.net/qq_43588095/article/details/147479946)  \n\n[ä¸“æ ç›®å½•](https://blog.csdn.net/qq_43588095/article/details/147479946)\n\n![Image 38](https://kunyu.csdn.net/1.png?p=58&adBlockFlag=0&adId=1083251&a=1083251&c=3768339&k=LangGraph%E4%B8%ADState%E7%9A%84%E5%AE%9A%E4%B9%89%E6%A8%A1%E5%BC%8F&spm=1001.2101.3001.5002&articleId=147479946&d=1&t=3&u=3b9ed406de834dd990615eddf4447285)\n\n[_LangGraph_ ä¸­ _State_ çŠ¶æ€ _æ¨¡å¼_ è¯¦è§£](https://blog.csdn.net/qq_52053775/article/details/154745080)\n\n[qq_52053775çš„åšå®¢](https://blog.csdn.net/qq_52053775)\n\n11-12![Image 39](https://csdnimg.cn/release/blogv2/dist/pc/img/readCountWhite.png) 219 \n\n[_LangGraph_ æ¡†æ¶é€šè¿‡èŠ‚ç‚¹ã€è¾¹å’ŒçŠ¶æ€çš„ç»„åˆæ„å»ºAIä»£ç†ï¼Œå…¶ä¸­çŠ¶æ€ï¼ˆ_State_ï¼‰ä½œä¸ºæ ¸å¿ƒè½½ä½“å®ç°ä¿¡æ¯ä¼ é€’å’ŒåŠŸèƒ½æ”¯æ’‘ã€‚çŠ¶æ€é‡‡ç”¨å…±äº«å­—å…¸æ•°æ®ç»“æ„ï¼ŒèŠ‚ç‚¹å¯è¯»å†™çŠ¶æ€å¹¶å¹¿æ’­æ›´æ–°ï¼Œç¡®ä¿æ•°æ®æµåŠ¨ã€‚æ¡†æ¶æ”¯æŒå¤šç§å¯è§†åŒ–æ–¹æ³•ï¼ˆMermaid/Graphviz/Pyppeteerï¼‰å±•ç°èŠ‚ç‚¹å…³ç³»ã€‚Reducerå‡½æ•°æœºåˆ¶å…è®¸ä¸ºçŠ¶æ€é”® _å®šä¹‰_ ç‹¬ç«‹æ›´æ–°é€»è¾‘ï¼ˆè¦†ç›–/ç´¯åŠ ç­‰ï¼‰ï¼Œç»“åˆTypedDictä¿éšœç±»å‹å®‰å…¨ï¼Œé€‚ç”¨äºå¯¹è¯å†å²ç®¡ç†ç­‰åœºæ™¯ã€‚ä¸“ç”¨MessageGraphå­ç±»é€šè¿‡add_messages Reduceræ™ºèƒ½åˆå¹¶æ¶ˆæ¯åˆ—è¡¨ï¼Œä¼˜åŒ–å¯¹è¯åº”ç”¨](https://blog.csdn.net/qq_52053775/article/details/154745080)\n\n[](https://blog.csdn.net/qq_43588095/article/details/147479946)\n\nå‚ä¸è¯„è®º æ‚¨è¿˜æœªç™»å½•ï¼Œè¯·å…ˆ ç™»å½• åå‘è¡¨æˆ–æŸ¥çœ‹è¯„è®º\n\n[_LangGraph_ ç®€å•è®²è§£ç¤ºä¾‹â€”â€”_State_ã€Nodeã€Edge_ _langgraph_ ç¤ºä¾‹](https://blog.csdn.net/m0_50481455/article/details/156418156)\n\n2-11\n\n[_LangGraph_ ç®€å•è®²è§£ç¤ºä¾‹â€”â€”_State_ã€Nodeã€Edge _LangGraph_ çš„æ ¸å¿ƒä¸»è¦æ˜¯Graph,å®ƒæ˜¯â¼€ä¸ªæœ‰å‘â½†ç¯å›¾,â½¤äºæè¿°ä»»åŠ¡ä¹‹é—´çš„ä¾èµ–å…³ç³»ã€‚ ä¸»è¦åŒ…å«ä¸‰ä¸ªåŸºæœ¬å…ƒç´ : Â· _State_:ä¸€ç§æ•°æ®ç»“æ„ Â·Node:å¤„ç†æ•°æ®çš„èŠ‚ç‚¹,_LangGraph_ ä¸­é€šå¸¸æ˜¯ä¸€ä¸ªpythonå‡½æ•°,ä»¥ _State_ ä¸ºè¾“å…¥,ç»è¿‡ä¸€äº›æ“ä½œå¤„ç†å,è¿”å›æ›´æ–°åçš„ _State_](https://blog.csdn.net/m0_50481455/article/details/156418156)\n\n[æ”¶è—å¤‡ç”¨!_LangGraph_ æ ¸å¿ƒä¹‹ _State_ çŠ¶æ€ç®¡ç†å…¨è§£æ,å°ç™½ä¹Ÿèƒ½ä¸Šæ‰‹ _å¤§æ¨¡å‹_ å¼€å‘...](https://blog.csdn.net/m0_57081622/article/details/156422976)\n\n2-1\n\n[from _langgraph_.graph import _State_ Graph, START, END # _å®šä¹‰_ ç¬¬ä¸€ä¸ªèŠ‚ç‚¹:åŠ æ³• def addition(_state_): """ è¿™ä¸ªå‡½æ•°ä¼šæ”¶åˆ°å½“å‰çš„ _state_(ä¸€ä¸ªå­—å…¸)ä»é‡Œé¢å–å‡ºxçš„å€¼,åŠ 1åè¿”å› """ print(f"åŠ æ³•èŠ‚ç‚¹æ”¶åˆ°çš„ _state_: {_state_}") current_x = _state_["x"] new_x = current_x + 1 # åªè¿”å›æ›´æ–°çš„éƒ¨åˆ†,ä¸ç”¨...](https://blog.csdn.net/m0_57081622/article/details/156422976)\n\n[_LangGraph_ å­¦ä¹ ç¬”è®° â€” _LangGraph_ ä¸­ _State_ çŠ¶æ€ _æ¨¡å¼_](https://blog.csdn.net/Lucky_mzc/article/details/149914049)\n\n[Lucky_mzcçš„åšå®¢](https://blog.csdn.net/Lucky_mzc)\n\n08-05![Image 40](https://csdnimg.cn/release/blogv2/dist/pc/img/readCountWhite.png) 2064 \n\n[æœ¬æ–‡æ·±å…¥è§£æäº† _LangGraph_ æ¡†æ¶ä¸­çš„çŠ¶æ€ç®¡ç†æœºåˆ¶ï¼Œé‡ç‚¹æ¢è®¨äº† _State_ å’ŒReducerå‡½æ•°çš„æ ¸å¿ƒä½œç”¨ã€‚_LangGraph_ é€šè¿‡èŠ‚ç‚¹(Node)å’Œè¾¹(Edge)æ„å»ºå·¥ä½œæµï¼Œå…¶ä¸­çŠ¶æ€(_State_)ä½œä¸ºå…³é”®è½½ä½“åœ¨èŠ‚ç‚¹é—´ä¼ é€’ä¿¡æ¯ã€‚æ–‡ç« è¯¦ç»†ä»‹ç»äº†ä¸‰ç§çŠ¶æ€ _å®šä¹‰_ æ–¹å¼ï¼šå­—å…¸ç±»å‹ã€TypedDictç±»å‹å’ŒMessageGraphä¸“ç”¨ç±»å‹ï¼Œå¹¶åˆ†æäº†Reducerå‡½æ•°å¦‚ä½•æ§åˆ¶çŠ¶æ€æ›´æ–°é€»è¾‘ã€‚ç‰¹åˆ«é˜è¿°äº†add_messagesè¿™ä¸€é«˜çº§Reducerå‡½æ•°çš„å®ç°åŸç†ï¼Œå®ƒèƒ½æ™ºèƒ½å¤„ç†æ¶ˆæ¯çš„è¿½åŠ å’Œæ›´æ–°ã€‚é€šè¿‡å¤šä¸ªä»£ç ç¤ºä¾‹å±•ç¤ºäº†ä¸åŒåœºæ™¯ä¸‹çš„çŠ¶æ€](https://blog.csdn.net/Lucky_mzc/article/details/149914049)\n\n[_LangGraph_ èŠ‚ç‚¹è¿”å› _State_ ï¼Œ æ•°æ®è‡ªåŠ¨æ‹¼æ¥åŸç†](https://blog.csdn.net/weixin_44705554/article/details/147470995)\n\n[AI Agent é¦–å¸­ä½“éªŒå®˜](https://blog.csdn.net/weixin_44705554)\n\n04-24![Image 41](https://csdnimg.cn/release/blogv2/dist/pc/img/readCountWhite.png) 1251 \n\n[_å®šä¹‰_ çŠ¶æ€åˆå¹¶å‡½æ•°# _å®šä¹‰_ çŠ¶æ€ç±»å‹messages: Annotated[List[BaseMessage], add_messages] # ä½¿ç”¨æ³¨è§£æŒ‡å®šåˆå¹¶ç­–ç•¥# èŠ‚ç‚¹å‡½æ•° _å®šä¹‰_"""åˆ†ç±»ç”¨æˆ·è¯·æ±‚çš„ç±»å‹"""# æç¤ºæ¨¡æ¿ç”¨äºåˆ†ç±»ä»»åŠ¡("system", "ä½ æ˜¯ä¸€ä¸ªä»»åŠ¡åˆ†ç±»å™¨ã€‚æ ¹æ®ç”¨æˆ·çš„è¯·æ±‚ï¼Œç¡®å®šå®ƒæ˜¯å“ªç§ç±»å‹çš„ä»»åŠ¡ã€‚\\nè¾“å‡ºæ ¼å¼å¿…é¡»æ˜¯JSONï¼ŒåŒ…å«å­—æ®µ\'task_type\'ï¼Œå€¼ä¸º\'search\'(æœç´¢ç±»)ã€\'calculation\'(è®¡ç®—ç±»)æˆ–\'general\'(ä¸€èˆ¬é—®ç­”)ã€‚"),](https://blog.csdn.net/weixin_44705554/article/details/147470995)\n\n[_LangGraph_ ç³»åˆ—3ï¼š_State_ ä¸GraphåŸºç¡€â€”â€”_LangGraph_ çš„æ™ºèƒ½å·¥ä½œæµå¼•æ“ æœ€æ–°å‘å¸ƒ](https://devpress.csdn.net/v1/article/detail/155461000)\n\n[æ²›å“¥å„¿çš„ä¸“æ ](https://blog.csdn.net/m290345792)\n\n12-01![Image 42](https://csdnimg.cn/release/blogv2/dist/pc/img/readCountWhite.png) 1274 \n\n[åœ¨ _LangGraph_ ä¸­ï¼Œ**çŠ¶æ€ï¼ˆ_State_ï¼‰** å’Œ **å›¾ï¼ˆGraphï¼‰** ä¸æ˜¯è¾…åŠ©æ¦‚å¿µï¼Œè€Œæ˜¯æ•´ä¸ªæ™ºèƒ½ä½“ç³»ç»Ÿçš„â€œéª¨æ¶â€ä¸â€œç¥ç»ç³»ç»Ÿâ€ã€‚è®¸å¤šå¼€å‘è€…è¯¯ä»¥ä¸º _LangGraph_ åªæ˜¯â€œæŠŠå‡½æ•°è¿èµ·æ¥â€ï¼Œç»“æœåœ¨å¤æ‚åœºæ™¯ä¸­é­é‡çŠ¶æ€æ··ä¹±ã€æµç¨‹å¤±æ§ã€è°ƒè¯•æ— é—¨ã€‚å®é™…ä¸Šï¼Œ_LangGraph_ çš„æ ¸å¿ƒä¼˜åŠ¿åœ¨äºï¼š**é€šè¿‡å¼ºç±»å‹çŠ¶æ€ + æ˜¾å¼å›¾ç»“æ„ï¼Œå°† LLM çš„ä¸ç¡®å®šæ€§è¡Œä¸ºçº¦æŸåœ¨å¯éªŒè¯ã€å¯ä¸­æ–­ã€å¯é‡æ”¾çš„ç¡®å®šæ€§æ¡†æ¶å†…**ã€‚æœ¬æ–‡å°†å¸¦ä½ ç©¿é€ API è¡¨å±‚ï¼Œç†è§£ _State_ ä¸ Graph çš„è®¾è®¡å“²å­¦ï¼Œå¹¶æŒæ¡æ„å»ºå¥å£® AI å·¥ä½œæµ](https://devpress.csdn.net/v1/article/detail/155461000)\n\n[ã€_LangGraph_ã€‘ä»€ä¹ˆæ˜¯ _State_ Graph](https://devpress.csdn.net/v1/article/detail/147962997)\n\n[å½¬å½¬ä¾ çš„åšå®¢](https://blog.csdn.net/u013172930)\n\n05-14![Image 43](https://csdnimg.cn/release/blogv2/dist/pc/img/readCountWhite.png) 2237 \n\n[_langgraph_.graph._State_ Graph æ˜¯ _LangGraph_ åº“ä¸­çš„æ ¸å¿ƒç±»ï¼Œç”¨äº _å®šä¹‰_ å’Œç®¡ç†åŸºäºçŠ¶æ€çš„æœ‰å‘å›¾å·¥ä½œæµã€‚å®ƒæ˜¯ _LangGraph_ çš„ä¸»è¦æ„å»ºå—ï¼Œå…è®¸å¼€å‘è€…é€šè¿‡èŠ‚ç‚¹ï¼ˆNodesï¼‰ã€è¾¹ï¼ˆEdgesï¼‰å’ŒçŠ¶æ€ï¼ˆ_State_ï¼‰æ„é€ å¤æ‚çš„å·¥ä½œæµï¼Œç‰¹åˆ«é€‚åˆä¸å¤§å‹è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰ç»“åˆçš„åœºæ™¯ã€‚å…³é”®ç‚¹åŒ…æ‹¬ï¼šä½¿ç”¨ TypedDict æˆ–ç±» _å®šä¹‰_ çŠ¶æ€ã€‚é€šè¿‡ add_node å’Œ add_edge æ„å»ºå›¾ã€‚æ”¯æŒæ¡ä»¶è¾¹å’Œå¾ªç¯ï¼Œé€‚åº”åŠ¨æ€é€»è¾‘ã€‚ç¼–è¯‘åé€šè¿‡ invoke æˆ– stream æ‰§è¡Œã€‚é€šè¿‡ä»£ç ç¤ºä¾‹ï¼Œå¯ä»¥çœ‹åˆ°](https://devpress.csdn.net/v1/article/detail/147962997)\n\n[ã€å°ç™½æ•™ç¨‹ã€‘ä»é›¶å¼€å§‹å­¦ Dify - ä¸‡å­—è¯¦è§£ Dify å¾ªç¯å’Œè¿­ä»£çš„å®ç°æœºåˆ¶ï¼Œå»ºè®®æ”¶è—ï¼ï¼ï¼](https://devpress.csdn.net/v1/article/detail/149931957)\n\n[bugyinyinçš„åšå®¢](https://blog.csdn.net/bugyinyin)\n\n08-05![Image 44](https://csdnimg.cn/release/blogv2/dist/pc/img/readCountWhite.png) 2660 \n\n[Dify æ˜¯ä¸€ä¸ªå¼ºå¤§çš„ AI åº”ç”¨å¼€å‘å¹³å°ï¼Œå…¶å·¥ä½œæµå¼•æ“æ”¯æŒå¤æ‚çš„å¾ªç¯å’Œè¿­ä»£æ“ä½œã€‚æ¥ä¸‹æ¥å°†æ·±å…¥åˆ†æ Dify ä¸­å¾ªç¯å’Œè¿­ä»£çš„å®ç°æœºåˆ¶ã€‚](https://devpress.csdn.net/v1/article/detail/149931957)\n\n[ã€_LangGraph_ã€‘_langgraph_.graph._State_ Graph ç±»çš„å±æ€§å’Œæ–¹æ³•](https://devpress.csdn.net/v1/article/detail/147963138)\n\n[å½¬å½¬ä¾ çš„åšå®¢](https://blog.csdn.net/u013172930)\n\n05-14![Image 45](https://csdnimg.cn/release/blogv2/dist/pc/img/readCountWhite.png) 2158 \n\n[_langgraph_.graph._State_ Graph æ˜¯ _LangGraph_ çš„æ ¸å¿ƒç±»ï¼Œç”¨äº _å®šä¹‰_ åŸºäºçŠ¶æ€çš„å·¥ä½œæµå›¾ã€‚å…¶ä¸»è¦åŠŸèƒ½åŒ…æ‹¬ï¼šé€šè¿‡ add_node å’Œ add_edge æ„å»ºå›¾ç»“æ„ã€‚é€šè¿‡ add_conditional_edges å®ç°åŠ¨æ€åˆ†æ”¯ã€‚é€šè¿‡ set_entry_point å’Œ set_finish_point æŒ‡å®šæ‰§è¡Œè·¯å¾„ã€‚é€šè¿‡ compile ç”Ÿæˆå¯æ‰§è¡Œçš„ CompiledGraphã€‚](https://devpress.csdn.net/v1/article/detail/147963138)\n\n[_LangGraph_ ä¸­çš„ _State_ ç®¡ç†](https://blog.csdn.net/qq_41472205/article/details/144097203)\n\n[The cure for boredom is curiosity. This is the log of its adventures.](https://blog.csdn.net/qq_41472205)\n\n11-27![Image 46](https://csdnimg.cn/release/blogv2/dist/pc/img/readCountWhite.png) 3266 \n\n[_å®šä¹‰_ æ•´ä¸ªå›¾çš„çŠ¶æ€ï¼ˆè¿™æ˜¯åœ¨èŠ‚ç‚¹é—´å…±äº«çš„å…¬å…±çŠ¶æ€ï¼‰a: strreturn {"a": 123 # æ— æ•ˆ# _å®šä¹‰_ è¾“å…¥çŠ¶æ€çš„æ¶æ„# _å®šä¹‰_ è¾“å‡ºçŠ¶æ€çš„æ¶æ„# _å®šä¹‰_ æ•´ä½“æ¶æ„ï¼Œç»“åˆè¾“å…¥å’Œè¾“å‡ºpass# ç¤ºä¾‹ç­”æ¡ˆå’Œä¸€ä¸ªé¢å¤–çš„é”®# æ•´ä¸ªå›¾çš„çŠ¶æ€ï¼ˆè¿™æ˜¯åœ¨èŠ‚ç‚¹é—´å…±äº«çš„å…¬å…±çŠ¶æ€ï¼‰a: str# node_1çš„è¾“å‡ºåŒ…å«ç§æœ‰æ•°æ®ï¼Œä¸å±äºæ•´ä½“çŠ¶æ€ã€‚](https://blog.csdn.net/qq_41472205/article/details/144097203)\n\n[_LangGraph_ æ¡†æ¶ä¸­æ€æ · _å®šä¹‰_ å·¥å…·tools](https://blog.csdn.net/qq_41185191/article/details/147717846)\n\n[ai agentçŸ¥è¯†](https://blog.csdn.net/qq_41185191)\n\n05-05![Image 47](https://csdnimg.cn/release/blogv2/dist/pc/img/readCountWhite.png) 1446 \n\n[å·¥å…·æ˜¯ä¸€ç§å°è£…å‡½æ•°åŠå…¶è¾“å…¥ _æ¨¡å¼_ çš„æ–¹æ³•ï¼Œå¯ä»¥å°†å…¶ä¼ é€’ç»™æ”¯æŒå·¥å…·è°ƒç”¨çš„èŠå¤©æ¨¡å‹ã€‚è¿™ä½¿å¾—æ¨¡å‹èƒ½å¤Ÿé€šè¿‡ç‰¹å®šçš„è¾“å…¥è¯·æ±‚æ‰§è¡Œè¯¥å‡½æ•°ã€‚](https://blog.csdn.net/qq_41185191/article/details/147717846)\n\n[ã€_langgraph_ ç³»åˆ—-1---æ¦‚å¿µè¯¦è§£ã€‘ä»€ä¹ˆæ˜¯ _State_|Nodes|EdgesNode|Reducers](https://blog.csdn.net/weixin_45222582/article/details/143637608)\n\n[weixin_45222582çš„åšå®¢](https://blog.csdn.net/weixin_45222582)\n\n11-09![Image 48](https://csdnimg.cn/release/blogv2/dist/pc/img/readCountWhite.png) 971 \n\n[ã€ä»£ç ã€‘ã€_langgraph_ åè¯è¯¦ç»†è§£é‡Šã€‘ä»€ä¹ˆæ˜¯ _State_|Nodes|EdgesNode|_State_|Reducersã€‚](https://blog.csdn.net/weixin_45222582/article/details/143637608)\n\n[_LangGraph_ çˆ¶å­å›¾ _æ¨¡å¼_ è¯¦è§£](https://blog.csdn.net/Cheer_RIO/article/details/151192412)\n\n[Cheer_RIOçš„åšå®¢](https://blog.csdn.net/Cheer_RIO)\n\n09-04![Image 49](https://csdnimg.cn/release/blogv2/dist/pc/img/readCountWhite.png) 637 \n\n[_LangGraph_ çˆ¶å­å›¾ _æ¨¡å¼_ æ˜¯ä¸€ç§æ¨¡å—åŒ–æ¶æ„ï¼Œå…è®¸çˆ¶å›¾å’Œå­å›¾æ‹¥æœ‰ä¸åŒçš„çŠ¶æ€ç»“æ„ã€‚å…³é”®ç‚¹åŒ…æ‹¬ï¼š çŠ¶æ€éš”ç¦»ï¼šçˆ¶å›¾å’Œå­å›¾å„è‡ª _å®šä¹‰_ çŠ¶æ€ _æ¨¡å¼_ï¼ˆå¦‚Parent _State_ å’ŒSubgraphMessages _State_ï¼‰ èŠ‚ç‚¹è°ƒç”¨ï¼šçˆ¶å›¾ä¸­ä¸“é—¨èŠ‚ç‚¹ï¼ˆcall_subgraphï¼‰è´Ÿè´£ï¼š è½¬æ¢çˆ¶å›¾çŠ¶æ€ä¸ºå­å›¾æ ¼å¼ è°ƒç”¨å­å›¾å¤„ç† å°†å­å›¾è¾“å‡ºè½¬å›çˆ¶å›¾æ ¼å¼ æ ¸å¿ƒä¼˜åŠ¿ï¼š æ¨¡å—åŒ–è®¾è®¡ï¼Œå­å›¾å¯å¤ç”¨ çŠ¶æ€ç»“æ„è§£è€¦ æ”¯æŒå¤æ‚å¤„ç†æµç¨‹ å…¸å‹åº”ç”¨åœºæ™¯ï¼šå¤šä»£ç†ç³»ç»Ÿã€åˆ†é˜¶æ®µå·¥ä½œæµã€æ•°æ®å¤„ç†ç®¡é“ç­‰ è¯¥ _æ¨¡å¼_ é€šè¿‡çŠ¶æ€è½¬æ¢å®ç°çµæ´»é›†æˆï¼Œæ˜¯æ„å»ºå¤æ‚ _LangGraph_](https://blog.csdn.net/Cheer_RIO/article/details/151192412)\n\n[[_LangGraph_ æ•™ç¨‹]_LangGraph_ 05â€”â€”_LangGraph_ çŠ¶æ€ _æ¨¡å¼_ _State_ è¯¦è§£](https://blog.csdn.net/m0_69281817/article/details/147600438)\n\n[m0_69281817çš„åšå®¢](https://blog.csdn.net/m0_69281817)\n\n04-29![Image 50](https://csdnimg.cn/release/blogv2/dist/pc/img/readCountWhite.png) 2565 \n\n[åœ¨ _LangGraph_ æ¡†æ¶é‡Œï¼Œä¸ç®¡æ„å»ºçš„ä»£ç†æ˜¯ç®€å•è¿˜æ˜¯å¤æ‚ï¼Œå½’æ ¹ç»“åº•éƒ½æ˜¯å€ŸåŠ©èŠ‚ç‚¹ï¼ˆNodeï¼‰å’Œè¾¹ï¼ˆEdgeï¼‰æ¥æ„å»ºä¸€ä¸ªå®Œæ•´çš„å›¾ï¼ˆGraphï¼‰ã€‚ä½† _LangGraph_ çš„æ ¸å¿ƒä»æ¥ä¸åœ¨äºå¦‚ä½•å»ç•Œå®šèŠ‚ç‚¹ä¸è¾¹ï¼Œè€Œæ˜¯åœ¨äºã€‚_LangGraph_ çš„åº•å±‚å›¾ç®—æ³•ä¾æ‰˜æœºåˆ¶æ¥ _å®šä¹‰_ å’Œæ‰§è¡Œå›¾ä¸­çš„äº¤äº’æµç¨‹ï¼Œåœ¨è¿™ä¸€è¿‡ç¨‹ä¸­ï¼ŒçŠ¶æ€ï¼ˆ_State_ï¼‰ç»„ä»¶æ‹…å½“ç€å…³é”®çš„è½½ä½“è§’è‰²ï¼Œä¸»è¦è´Ÿè´£åœ¨å›¾çš„å„ä¸ªèŠ‚ç‚¹ä¹‹é—´ä¼ é€’ä¿¡æ¯ï¼Œåƒæ ¸å¿ƒåŠŸèƒ½ä¸­çš„å·¥å…·ä½¿ç”¨ã€è®°å¿†èƒ½åŠ›ä»¥åŠäººæœºäº¤äº’ç­‰ï¼Œéƒ½å¾—ä¾ä»— _State_ æ¥è¾¾æˆå¹¶åŠ ä»¥ç»´æŠ¤ã€‚](https://blog.csdn.net/m0_69281817/article/details/147600438)\n\n[ã€AIå¼€å‘ã€‘_LangGraph_ åŸºç¡€](https://blog.csdn.net/qq_44899247/article/details/139657152)\n\n[qq_44899247çš„åšå®¢](https://blog.csdn.net/qq_44899247)\n\n06-14![Image 51](https://csdnimg.cn/release/blogv2/dist/pc/img/readCountWhite.png) 3287 \n\n[åœ¨ _LangGraph_ ä¸­æœ‰ä¸‰ä¸ªé‡è¦å…ƒç´ ã€‚](https://blog.csdn.net/qq_44899247/article/details/139657152)\n\n[æ·±å…¥è§£æ _LangGraph_ æ ¸å¿ƒæŠ€æœ¯ï¼šçŠ¶æ€ï¼ˆ_State_ï¼‰](https://jigang.blog.csdn.net/article/details/152449616)\n\n[æ²¡äº‹å­¦AIçš„åšå®¢](https://blog.csdn.net/ZuanShi1111)\n\n10-04![Image 52](https://csdnimg.cn/release/blogv2/dist/pc/img/readCountWhite.png) 956 \n\n[æ‘˜è¦ï¼š _LangGraph_ æ¡†æ¶ä¸­çš„â€œçŠ¶æ€ï¼ˆ_State_ï¼‰â€æ˜¯å·¥ä½œæµçš„æ ¸å¿ƒæ•°æ®æ¢çº½ï¼Œæ‰¿æ‹…åŠ¨æ€è®°å¿†ã€æ•°æ®æµè½¬å’Œä¸€è‡´æ€§ä¿éšœçš„å…³é”®è§’è‰²ã€‚å…¶ç»“æ„åŒ–é”®å€¼å¯¹è®¾è®¡æ”¯æŒå¤šç§æ•°æ®ç±»å‹ï¼Œå¹¶é€šè¿‡é¢„ _å®šä¹‰_ ä¸è‡ª _å®šä¹‰_ å­—æ®µé€‚åº”ä¸åŒåœºæ™¯ã€‚çŠ¶æ€å…·å¤‡åŠ¨æ€æ›´æ–°ã€ç‰ˆæœ¬è¿½æº¯å’Œçµæ´»æ‰©å±•ä¸‰å¤§ç‰¹æ€§ï¼Œç¡®ä¿èŠ‚ç‚¹é—´æ•°æ®å®æ—¶åŒæ­¥ï¼Œæ”¯æŒå†å²çŠ¶æ€å›æº¯ï¼Œå¹¶èƒ½éšä¸šåŠ¡éœ€æ±‚æ‰©å±•å­—æ®µã€‚ç†è§£çŠ¶æ€çš„ _å®šä¹‰_ã€ç»“æ„ä¸ç®¡ç†æœºåˆ¶ï¼Œæ˜¯ä¼˜åŒ– _LangGraph_ å·¥ä½œæµè®¾è®¡ä¸æ•…éšœæ’æŸ¥çš„åŸºç¡€ã€‚](https://jigang.blog.csdn.net/article/details/152449616)\n\n[æ·±å…¥ç†è§£ _LangGraph_ï¼šæ™ºèƒ½ä½“å·¥ä½œæµçš„å›¾æ¨¡å‹è®¾è®¡ä¸å®è·µ](https://devpress.csdn.net/v1/article/detail/148798103)\n\n[ä½‘ç»çš„åšå®¢](https://blog.csdn.net/The_Thieves)\n\n06-20![Image 53](https://csdnimg.cn/release/blogv2/dist/pc/img/readCountWhite.png) 1611 \n\n[è¾¹æ˜¯æµç¨‹çš„ "å¯¼èˆªç³»ç»Ÿ"ï¼Œæ ¹æ®çŠ¶æ€å†³å®šä¸‹ä¸€ä¸ªæ‰§è¡Œçš„èŠ‚ç‚¹ï¼špythonè¿è¡Œ# æ ¹æ®å¤„ç†é˜¶æ®µé€‰æ‹©ä¸‹ä¸€ä¸ªèŠ‚ç‚¹else:è¾¹å¯ä»¥æ˜¯å›ºå®šè½¬ç§»æˆ–æ¡ä»¶åˆ†æ”¯ï¼Œå†³å®šäº†èŠ‚ç‚¹é—´çš„æ‰§è¡Œé¡ºåºã€‚æ ¸å¿ƒå…³ç³»æ€»ç»“ï¼šèŠ‚ç‚¹è´Ÿè´£å¤„ç†ä¸šåŠ¡é€»è¾‘ï¼Œè¾¹æ§åˆ¶æµç¨‹èµ°å‘ï¼ŒçŠ¶æ€åˆ™æ˜¯è´¯ç©¿å§‹ç»ˆçš„ä¿¡æ¯è½½ä½“ã€‚è¿™ç§è®¾è®¡è®©å¤æ‚å¾ªç¯æµç¨‹å˜å¾—å¯æ§ï¼Œå°±åƒç”¨ç”µè·¯å›¾è§„åˆ’ç”µæµè·¯å¾„ã€‚ä½¿ç”¨ Annotated ä¸ºå­—æ®µæŒ‡å®š Reducer å‡½æ•°ï¼Œä¾‹å¦‚åˆ—è¡¨è¿½åŠ ï¼špythonè¿è¡Œ# ä½¿ç”¨addå‡½æ•°å®ç°åˆ—è¡¨åˆå¹¶# åˆå§‹çŠ¶æ€ _state_ = {"logs": ["ç³»ç»Ÿå¯åŠ¨"]}](https://devpress.csdn.net/v1/article/detail/148798103)\n\n[LangChain æœ€è¿‘å‘å¸ƒçš„ä¸€ä¸ªé‡è¦åŠŸèƒ½ï¼š_LangGraph_](https://blog.csdn.net/2301_78285120/article/details/136028408)\n\n[2301_78285120çš„åšå®¢](https://blog.csdn.net/2301_78285120)\n\n02-04![Image 54](https://csdnimg.cn/release/blogv2/dist/pc/img/readCountWhite.png) 3599 \n\n[next: strã€‚](https://blog.csdn.net/2301_78285120/article/details/136028408)\n\n[_LangGraph_ï¼šæ„å»ºå¤æ‚æ™ºèƒ½ä½“åº”ç”¨çš„å…¨é¢æŒ‡å—](https://devpress.csdn.net/v1/article/detail/139862000)\n\n[å…¨ä¸–ç•Œçš„åšå®¢](https://blog.csdn.net/qq_40999403)\n\n06-21![Image 55](https://csdnimg.cn/release/blogv2/dist/pc/img/readCountWhite.png) 6790 \n\n[å›¾ï¼ˆGraphï¼‰æ˜¯ä¸€ç§æ•°æ®ç»“æ„ï¼Œç”±èŠ‚ç‚¹ï¼ˆNodeï¼‰å’Œè¾¹ï¼ˆEdgeï¼‰ç»„æˆã€‚èŠ‚ç‚¹è¡¨ç¤ºå®ä½“æˆ–å¯¹è±¡ï¼Œè¾¹è¡¨ç¤ºèŠ‚ç‚¹ä¹‹é—´çš„å…³ç³»ã€‚å›¾å¯ä»¥ç”¨äºè¡¨ç¤ºå¤æ‚çš„å…³ç³»å’Œæµç¨‹ï¼Œå¹¿æ³›åº”ç”¨äºè®¡ç®—æœºç§‘å­¦å’Œ _äººå·¥æ™ºèƒ½_ é¢†åŸŸã€‚åœ¨ _LangGraph_ ä¸­ï¼Œå›¾è¢«ç”¨äºè¡¨ç¤ºå’Œæ„å»ºå¤æ‚çš„æ™ºèƒ½ä½“åº”ç”¨ã€‚æ¯ä¸ªèŠ‚ç‚¹ä»£è¡¨ä¸€ä¸ªæ“ä½œæˆ–æ­¥éª¤ï¼Œè¾¹è¡¨ç¤ºèŠ‚ç‚¹ä¹‹é—´çš„ä¾èµ–å…³ç³»ã€‚é€šè¿‡ _å®šä¹‰_ èŠ‚ç‚¹å’Œè¾¹ï¼Œå¼€å‘è€…å¯ä»¥æ„å»ºå¤æ‚çš„æµç¨‹å’Œé€»è¾‘ã€‚# _å®šä¹‰_ ä¸€ä¸ªå›¾# æ·»åŠ èŠ‚ç‚¹# æ·»åŠ è¾¹# è¿è¡Œå›¾åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ _å®šä¹‰_ äº†ä¸€ä¸ªç®€å•çš„å›¾ï¼Œå®ƒåŒ…å«ä¸‰ä¸ªèŠ‚ç‚¹å’Œä¸¤æ¡è¾¹ã€‚](https://devpress.csdn.net/v1/article/detail/139862000)\n\n[ã€LLM _å¤§æ¨¡å‹_ã€‘LangChainæ¡†æ¶ï¼š_Agent_ ä¹‹ _LangGraph_ çš„ä½¿ç”¨](https://devpress.csdn.net/v1/article/detail/140799030)\n\n[DEVELOPERAAçš„åšå®¢](https://blog.csdn.net/DEVELOPERAA)\n\n07-30![Image 56](https://csdnimg.cn/release/blogv2/dist/pc/img/readCountWhite.png) 3402 \n\n[LangChainçš„æ ¸å¿ƒä¼˜åŠ¿åœ¨äºå…¶èƒ½å¤Ÿè½»æ¾æ„å»ºè‡ª _å®šä¹‰_ é“¾ï¼Œè¿™äº›é“¾é€šå¸¸æ˜¯çº¿æ€§çš„ï¼Œç±»ä¼¼äºæœ‰å‘æ— ç¯å›¾ï¼ˆDAGï¼‰ï¼Œæ¯ä¸ªæ­¥éª¤éƒ½ä¸¥æ ¼æŒ‰é¡ºåºæ‰§è¡Œï¼Œæ¯ä¸ªä»»åŠ¡åªæœ‰ä¸€ä¸ªè¾“å‡ºå’Œä¸€ä¸ªåç»­ä»»åŠ¡ï¼Œå½¢æˆä¸€ä¸ªæ²¡æœ‰å¾ªç¯çš„çº¿æ€§æµç¨‹ã€‚](https://devpress.csdn.net/v1/article/detail/140799030)\n\n[_langGraph_ _state_ æ„å»º](https://wenku.csdn.net/answer/6jxfhfex3v)\n\n08-27\n\n[<think>æˆ‘ä»¬æ­£åœ¨è®¨è®ºå¦‚ä½•æ„å»º _LangGraph_ çš„çŠ¶æ€ã€‚æ ¹æ®å¼•ç”¨å†…å®¹ï¼Œ_LangGraph_ ç”¨äºæ„å»ºæœ‰çŠ¶æ€çš„å¤šæ™ºèƒ½ä½“åº”ç”¨ç¨‹åºï¼Œå…¶æ ¸å¿ƒæ¦‚å¿µä¹‹ä¸€æ˜¯çŠ¶æ€å›¾(_State_ Graph)ã€‚çŠ¶æ€å›¾éœ€è¦ _å®šä¹‰_ ä¸€ä¸ªçŠ¶æ€å¯¹è±¡ï¼Œè¯¥å¯¹è±¡ä¼šåœ¨å›¾çš„å„ä¸ªèŠ‚ç‚¹ä¹‹é—´ä¼ é€’å’Œæ›´æ–°ã€‚ åœ¨ _LangGraph_ ä¸­ï¼Œæ„å»ºçŠ¶æ€é€šå¸¸æ¶‰åŠä»¥ä¸‹æ­¥éª¤ï¼š 1. _å®šä¹‰_ çŠ¶æ€ _æ¨¡å¼_ï¼ˆ_State_ Schemaï¼‰ï¼šä¸€ä¸ªè‡ª _å®šä¹‰_ çš„ç±»ï¼Œç”¨äºæè¿°çŠ¶æ€ä¸­åŒ…å«å“ªäº›å­—æ®µã€‚æ¯ä¸ªå­—æ®µè¡¨ç¤ºæ™ºèƒ½ä½“å·¥ä½œæµä¸­çš„ä¸€éƒ¨åˆ†æ•°æ®ã€‚ 2. åˆå§‹åŒ–çŠ¶æ€å›¾ï¼šä½¿ç”¨ _å®šä¹‰_ çš„çŠ¶æ€ _æ¨¡å¼_ åˆ›å»ºä¸€ä¸ª _State_ Graphå®ä¾‹ã€‚ 3. æ·»åŠ èŠ‚ç‚¹ï¼šèŠ‚ç‚¹æ˜¯å¤„ç†çŠ¶æ€çš„å‡½æ•°ï¼Œæ¯ä¸ªèŠ‚ç‚¹å¯ä»¥è¯»å–å’Œä¿®æ”¹çŠ¶æ€ä¸­çš„ç‰¹å®šå­—æ®µã€‚ 4. _å®šä¹‰_ è¾¹ï¼šåŒ…æ‹¬æ¡ä»¶è¾¹ï¼ˆconditional edgesï¼‰å’Œæ™®é€šè¾¹ï¼Œç”¨äºæ§åˆ¶æµç¨‹çš„èµ°å‘ã€‚ ä¸‹é¢æˆ‘ä»¬è¯¦ç»†è¯´æ˜å¦‚ä½•æ„å»ºçŠ¶æ€ã€‚ ### 1. _å®šä¹‰_ çŠ¶æ€ _æ¨¡å¼_ çŠ¶æ€ _æ¨¡å¼_ æ˜¯ä¸€ä¸ªç±»ï¼Œé€šå¸¸ä½¿ç”¨`TypedDict`æˆ–æ™®é€šçš„ç±»ï¼ˆä½†éœ€è¦ç»§æ‰¿è‡ª`typing.TypedDict`ï¼‰æ¥ _å®šä¹‰_ã€‚åœ¨ _LangGraph_ ä¸­ï¼ŒçŠ¶æ€æ˜¯ä¸€ä¸ªå­—å…¸èˆ¬çš„å¯¹è±¡ï¼Œå…¶é”®æ˜¯å­—ç¬¦ä¸²ï¼Œå€¼å¯ä»¥æ˜¯ä»»æ„ç±»å‹ï¼Œä½†é€šå¸¸æˆ‘ä»¬ä¼šæ˜ç¡®æŒ‡å®šæ¯ä¸ªå­—æ®µçš„ç±»å‹ã€‚ ä¾‹å¦‚ï¼Œå‡è®¾æˆ‘ä»¬æ­£åœ¨æ„å»ºä¸€ä¸ªç®€å•çš„èŠå¤©æœºå™¨äººï¼ŒçŠ¶æ€å¯èƒ½åŒ…å«ç”¨æˆ·è¾“å…¥å’ŒèŠå¤©å†å²ã€‚æˆ‘ä»¬å¯ä»¥è¿™æ · _å®šä¹‰_ çŠ¶æ€ï¼š ```python from typing import TypedDict, List, Annotated from _langgraph_.graph.message import add_messages class _State_(TypedDict): user_input: str chat_history: Annotated[List[str], add_messages] ``` æ³¨æ„ï¼šè¿™é‡Œä½¿ç”¨äº†`Annotated`ç±»å‹ï¼Œè¿™æ˜¯ä¸ºäº†åœ¨çŠ¶æ€æ›´æ–°æ—¶ä½¿ç”¨ç‰¹å®šçš„æ›´æ–°ç­–ç•¥ã€‚`add_messages`æ˜¯ _LangGraph_ æä¾›çš„ä¸€ç§æ›´æ–°ç­–ç•¥ï¼Œç”¨äºåœ¨åˆ—è¡¨ä¸­è¿½åŠ æ¶ˆæ¯ï¼ˆè€Œä¸æ˜¯è¦†ç›–ï¼‰ã€‚_LangGraph_ æ”¯æŒå¤šç§æ›´æ–°ç­–ç•¥ï¼Œå¦‚è¦†ç›–ã€è¿½åŠ ç­‰ã€‚ ### 2. åˆå§‹åŒ–çŠ¶æ€å›¾ åˆ›å»ºçŠ¶æ€å›¾å®ä¾‹ï¼Œå¹¶ä¼ å…¥çŠ¶æ€ç±»ä½œä¸ºå‚æ•°ï¼š ```python from _langgraph_.graph import _State_ Graph graph = _State_ Graph(_State_) ``` ### 3. æ·»åŠ èŠ‚ç‚¹ èŠ‚ç‚¹æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒæ¥æ”¶å½“å‰çŠ¶æ€ï¼ˆä¸€ä¸ªå­—å…¸ï¼ŒåŒ…å«çŠ¶æ€ _æ¨¡å¼_ ä¸­ _å®šä¹‰_ çš„å­—æ®µï¼‰ä½œä¸ºè¾“å…¥ï¼Œå¹¶è¿”å›ä¸€ä¸ªåŒ…å«æ›´æ–°åçŠ¶æ€å­—æ®µçš„å­—å…¸ï¼ˆæˆ–ç›´æ¥è¿”å›æ›´æ–°åçš„çŠ¶æ€å¯¹è±¡ï¼‰ã€‚è¿™ä¸ªè¿”å›çš„å­—å…¸å°†ç”¨äºæ›´æ–°æ•´ä¸ªçŠ¶æ€ï¼ˆæ ¹æ®æ›´æ–°ç­–ç•¥ï¼‰ã€‚ ä¾‹å¦‚ï¼Œæˆ‘ä»¬æ·»åŠ ä¸€ä¸ªèŠ‚ç‚¹æ¥å¤„ç†ç”¨æˆ·è¾“å…¥ï¼š ```python def process_input(_state_: _State_) -> dict: # è¿™é‡Œå¯ä»¥å¤„ç†ç”¨æˆ·è¾“å…¥ï¼Œä¾‹å¦‚è°ƒç”¨LLMç­‰ processed = _state_[\'user_input\'].upper() # ç®€å•ç¤ºä¾‹ï¼šå°†è¾“å…¥è½¬ä¸ºå¤§å†™ return {\'processed_input\': processed} # æ³¨æ„ï¼šè¿™é‡Œè¿”å›çš„å­—æ®µéœ€è¦ä¸çŠ¶æ€ _æ¨¡å¼_ åŒ¹é…ï¼Ÿä½†æ³¨æ„ï¼Œæˆ‘ä»¬ _å®šä¹‰_ çš„çŠ¶æ€ _æ¨¡å¼_ ä¸­å¹¶æ²¡æœ‰\'processed_input\'ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦è°ƒæ•´çŠ¶æ€ _æ¨¡å¼_ æˆ–èŠ‚ç‚¹è¡Œä¸ºã€‚ # è°ƒæ•´çŠ¶æ€ _æ¨¡å¼_ï¼šå¦‚æœæˆ‘ä»¬å¸Œæœ›çŠ¶æ€ä¸­åŒ…å«å¤„ç†åçš„è¾“å…¥ï¼Œæˆ‘ä»¬éœ€è¦åœ¨çŠ¶æ€ _æ¨¡å¼_ ä¸­å¢åŠ å­—æ®µã€‚ ``` å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦é‡æ–°è€ƒè™‘çŠ¶æ€ _æ¨¡å¼_ çš„è®¾è®¡ã€‚é€šå¸¸ï¼ŒçŠ¶æ€ _æ¨¡å¼_ åº”è¯¥åŒ…å«å·¥ä½œæµä¸­æ‰€æœ‰èŠ‚ç‚¹å¯èƒ½è¯»å†™çš„æ•°æ®ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬ä¿®æ”¹çŠ¶æ€ _æ¨¡å¼_ï¼š ```python class _State_(TypedDict): user_input: str chat_history: Annotated[List[str], add_messages] processed_input: str # æ–°å¢å­—æ®µ ``` ç„¶åè°ƒæ•´èŠ‚ç‚¹å‡½æ•°ï¼š ```python def process_input(_state_: _State_) -> dict: processed = _state_[\'user_input\'].upper() return {\'processed_input\': processed} # è¿”å›è¦æ›´æ–°çš„å­—æ®µ ``` ç„¶åå°†èŠ‚ç‚¹æ·»åŠ åˆ°å›¾ä¸­ï¼š ```python graph.add_node("process_input", process_input) ``` ### 4. _å®šä¹‰_ è¾¹ æˆ‘ä»¬éœ€è¦è®¾ç½®èµ·å§‹èŠ‚ç‚¹å’Œè¾¹ï¼Œä»¥åŠæ¡ä»¶è¾¹ï¼ˆå¦‚æœéœ€è¦å¾ªç¯ï¼‰ã€‚ä¾‹å¦‚ï¼š ```python graph.set_entry_point("process_input") # è®¾ç½®å…¥å£èŠ‚ç‚¹ graph.set_finish_point("process_input") # å¦‚æœåªæœ‰ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå¯ä»¥ç›´æ¥è®¾ç½®ä¸ºç»“æŸç‚¹ # å¦‚æœæœ‰å¤šä¸ªèŠ‚ç‚¹ï¼Œæˆ‘ä»¬éœ€è¦æ·»åŠ è¾¹æ¥è¿æ¥å®ƒä»¬ï¼Œä¾‹å¦‚ï¼š # graph.add_edge(\'node1\', \'node2\') ``` ### 5. ç¼–è¯‘å›¾ æœ€åï¼Œç¼–è¯‘å›¾ä»¥åˆ›å»ºå¯æ‰§è¡Œçš„å·¥ä½œæµï¼š ```python app = graph.compile() ``` ### 6. æ‰§è¡Œå›¾ ä½¿ç”¨åˆå§‹çŠ¶æ€è°ƒç”¨å›¾ï¼š ```python initial_ _state_ = _State_(user_input="hello", chat_history=[], processed_input="") result = app.invoke(initial_ _state_) ``` ### æ³¨æ„äº‹é¡¹ - çŠ¶æ€æ›´æ–°ç­–ç•¥ï¼šåœ¨ _å®šä¹‰_ çŠ¶æ€å­—æ®µæ—¶ï¼Œä½¿ç”¨`Annotated`å¯ä»¥æŒ‡å®šæ›´æ–°ç­–ç•¥ã€‚ä¾‹å¦‚ï¼Œ`add_messages`è¡¨ç¤ºè¿½åŠ æ¶ˆæ¯ï¼Œè€Œé»˜è®¤ç­–ç•¥æ˜¯è¦†ç›–ï¼ˆå¦‚æœä¸ç”¨`Annotated`ï¼Œåˆ™ç›´æ¥è¦†ç›–ï¼‰ã€‚ - èŠ‚ç‚¹å‡½æ•°è¿”å›çš„å­—å…¸ä¸­çš„æ¯ä¸ªé”®å¿…é¡»ä¸çŠ¶æ€ _æ¨¡å¼_ ä¸­çš„æŸä¸ªå­—æ®µåå¯¹åº”ï¼Œå¹¶ä¸”å€¼ç±»å‹è¦åŒ¹é…ã€‚è¿”å›çš„å­—å…¸ä¸­åªéœ€è¦åŒ…å«éœ€è¦æ›´æ–°çš„å­—æ®µï¼Œä¸éœ€è¦è¿”å›æ•´ä¸ªçŠ¶æ€ã€‚ ### ç¤ºä¾‹ï¼šå¸¦æ¡ä»¶è¾¹çš„å¾ªç¯ å‡è®¾æˆ‘ä»¬æƒ³è®©æ™ºèƒ½ä½“åœ¨æ»¡è¶³æ¡ä»¶æ—¶å¾ªç¯æ‰§è¡Œã€‚æˆ‘ä»¬å¯ä»¥æ·»åŠ ä¸€ä¸ªæ¡ä»¶è¾¹ã€‚ é¦–å…ˆï¼Œ_å®šä¹‰_ ä¸¤ä¸ªèŠ‚ç‚¹ï¼šä¸€ä¸ªå¤„ç†èŠ‚ç‚¹ï¼Œä¸€ä¸ªåˆ¤æ–­æ˜¯å¦ç»“æŸçš„èŠ‚ç‚¹ã€‚ ```python def should_continue(_state_: _State_) -> str: # æ ¹æ®çŠ¶æ€åˆ¤æ–­æ˜¯å¦ç»§ç»­ if _state_[\'processed_input\'] == "QUIT": return "end" else: return "continue" def process_node(_state_: _State_) -> dict: # è¿™é‡Œæ¨¡æ‹Ÿå¤„ç†ï¼Œæ¯æ¬¡å°†processed_inputåŠ ä¸Šä¸€ä¸ªæ„Ÿå¹å·ï¼Œç›´åˆ°é‡åˆ°QUIT new_processed = _state_[\'processed_input\'] + "!" return {\'processed_input\': new_processed} # æ·»åŠ èŠ‚ç‚¹ graph.add_node("process", process_node) graph.add_node("check_end", should_continue) # æ³¨æ„ï¼šè¿™ä¸ªèŠ‚ç‚¹å®é™…ä¸Šæ˜¯ä¸€ä¸ªæ¡ä»¶å‡½æ•°ï¼Œä½†ä¹Ÿå¯ä»¥ä½œä¸ºèŠ‚ç‚¹æ·»åŠ  # è®¾ç½®å…¥å£ graph.set_entry_point("process") # æ·»åŠ è¾¹ï¼šä»processåˆ°check_end graph.add_edge("process", "check_end") # æ·»åŠ æ¡ä»¶è¾¹ï¼šæ ¹æ®check_endèŠ‚ç‚¹çš„è¿”å›å€¼å†³å®šä¸‹ä¸€æ­¥ graph.add_conditional_edges( "check_end", should_continue, # è¿™ä¸ªå‡½æ•°è¿”å›å­—ç¬¦ä¸²ï¼Œè¡¨ç¤ºä¸‹ä¸€ä¸ªèŠ‚ç‚¹æˆ–ç»“æŸ { "continue": "process", # å¦‚æœè¿”å›"continue"ï¼Œåˆ™å›åˆ°processèŠ‚ç‚¹ "end": END # ç»“æŸ } ) ``` æ³¨æ„ï¼šæ¡ä»¶è¾¹å‡½æ•°ï¼ˆ`should_continue`ï¼‰çš„è¿”å›å€¼æ˜¯å­—ç¬¦ä¸²ï¼Œè¿™äº›å­—ç¬¦ä¸²æ˜ å°„åˆ°ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„åç§°æˆ–`END`ï¼ˆè¡¨ç¤ºç»“æŸï¼‰ã€‚ ### æ€»ç»“ æ„å»º _LangGraph_ çŠ¶æ€çš„å…³é”®æ­¥éª¤ï¼š 1. è®¾è®¡çŠ¶æ€ _æ¨¡å¼_ï¼ˆTypedDictï¼‰ï¼ŒåŒ…å«æ‰€æœ‰éœ€è¦ä¼ é€’çš„æ•°æ®å­—æ®µã€‚ 2. åˆ›å»ºçŠ¶æ€å›¾å®ä¾‹ã€‚ 3. æ·»åŠ èŠ‚ç‚¹ï¼ˆå¤„ç†å‡½æ•°ï¼‰ï¼Œæ¯ä¸ªèŠ‚ç‚¹è´Ÿè´£æ›´æ–°çŠ¶æ€çš„ä¸€éƒ¨åˆ†ã€‚ 4. è®¾ç½®è¾¹ï¼ˆåŒ…æ‹¬æ¡ä»¶è¾¹ï¼‰ä»¥æ§åˆ¶æµç¨‹ã€‚ 5. ç¼–è¯‘å¹¶æ‰§è¡Œã€‚ ä»¥ä¸Šæ­¥éª¤å¯ä»¥å¸®åŠ©ä½ æ„å»º _LangGraph_ çš„çŠ¶æ€å›¾ã€‚ Â§Â§ç›¸å…³é—®é¢˜Â§Â§ 1. _LangGraph_ çŠ¶æ€ _æ¨¡å¼_ ä¸­å¦‚ä½• _å®šä¹‰_ å­—æ®µçš„æ›´æ–°ç­–ç•¥ï¼Ÿ 2. åœ¨ _LangGraph_ ä¸­ï¼Œå¦‚ä½•å®ç°å¤šä¸ªæ™ºèƒ½ä½“ä¹‹é—´çš„çŠ¶æ€å…±äº«ï¼Ÿ 3. _LangGraph_ çš„çŠ¶æ€å›¾ä¸ä¼ ç»Ÿçš„æœ‰é™çŠ¶æ€æœº(FSM)æœ‰ä½•åŒºåˆ«ï¼Ÿ 4. åœ¨ _LangGraph_ ä¸­ï¼Œå¦‚ä½•å¤„ç†çŠ¶æ€æ›´æ–°æ—¶çš„å¹¶å‘å†²çªï¼Ÿ</think>### _LangGraph_ çŠ¶æ€æ„å»ºæŒ‡å— åœ¨ _LangGraph_ ä¸­æ„å»ºçŠ¶æ€æ˜¯å®ç°æœ‰çŠ¶æ€å¤šæ™ºèƒ½ä½“ç³»ç»Ÿçš„æ ¸å¿ƒï¼Œä»¥ä¸‹æ˜¯æ„å»ºæ­¥éª¤å’Œå…³é”®æ¦‚å¿µï¼š #### 1. **_å®šä¹‰_ çŠ¶æ€ _æ¨¡å¼_ï¼ˆ_State_ Schemaï¼‰** çŠ¶æ€ _æ¨¡å¼_ æ˜¯ä¸€ä¸ªè‡ª _å®šä¹‰_ ç±»ï¼Œç”¨äºæè¿°æ™ºèƒ½ä½“å·¥ä½œæµä¸­çš„æ•°æ®ç»“æ„å’Œç±»å‹ï¼š ```python from typing import TypedDict, Annotated, Sequence from _langgraph_.graph.message import add_messages class _Agent_ _State_(TypedDict): user_query: str _agent_ _response: Annotated[str, lambda x, y: y] # è¦†ç›–å¼æ›´æ–° chat_history: Annotated[Sequence[str], add_messages] # è¿½åŠ å¼æ›´æ–° tools_used: list ``` **å…³é”®ç‰¹æ€§**ï¼š - **å­—æ®µç±»å‹å£°æ˜**ï¼šæ¯ä¸ªå­—æ®µ _å®šä¹‰_ æ•°æ®ç±»å‹ï¼ˆå¦‚`str`, `list`ç­‰ï¼‰ - **æ›´æ–°ç­–ç•¥**ï¼ˆé€šè¿‡`Annotated`æŒ‡å®šï¼‰ï¼š - `add_messages`ï¼šè¿½åŠ æ•°æ®ï¼ˆé€‚åˆèŠå¤©å†å²ï¼‰ - `lambda x, y: y`ï¼šè¦†ç›–æ›´æ–°ï¼ˆé€‚åˆæœ€æ–°ç»“æœï¼‰ - **çŠ¶æ€æŒä¹…åŒ–**ï¼šçŠ¶æ€ä¼šåœ¨èŠ‚ç‚¹é—´è‡ªåŠ¨ä¼ é€’å’Œæ›´æ–°[^1] #### 2. **åˆå§‹åŒ–çŠ¶æ€å›¾** ```python from _langgraph_.graph import _State_ Graph # åˆ›å»ºçŠ¶æ€å›¾å®ä¾‹ graph = _State_ Graph(_Agent_ _State_) # æ·»åŠ èŠ‚ç‚¹ï¼ˆæ™ºèƒ½ä½“åŠŸèƒ½å•å…ƒï¼‰ graph.add_node("query_analyzer", analyze_query) graph.add_node("tool_executor", execute_tools) graph.add_node("response_generator", generate_response) # è®¾ç½®èŠ‚ç‚¹å…³ç³» graph.add_edge("query_analyzer", "tool_executor") graph.add_edge("tool_executor", "response_generator") graph.set_finish_point("response_generator") # ç¼–è¯‘å¯æ‰§è¡Œå›¾ app = graph.compile() ``` #### 3. **èŠ‚ç‚¹å‡½æ•°è®¾è®¡** æ¯ä¸ªèŠ‚ç‚¹æ¥æ”¶å½“å‰çŠ¶æ€ï¼Œè¿”å›çŠ¶æ€æ›´æ–°ï¼š ```python def execute_tools(_state_: _Agent_ _State_) -> dict: """å·¥å…·æ‰§è¡ŒèŠ‚ç‚¹ç¤ºä¾‹""" tools = select_tools(_state_["user_query"]) results = [tool.run() for tool in tools] return { "tools_used": tools, # æ›´æ–°å·¥å…·åˆ—è¡¨ "_agent_ _response": results[0] # æ›´æ–°æœ€æ–°ç»“æœ } ``` #### 4. **æ‰§è¡ŒçŠ¶æ€å·¥ä½œæµ** ```python # åˆå§‹åŒ–çŠ¶æ€ initial_ _state_ = _Agent_ _State_( user_query="å¦‚ä½•è®¡ç®—GDPï¼Ÿ", _agent_ _response="", chat_history=[], tools_used=[] ) # æ‰§è¡Œå·¥ä½œæµ final_ _state_ = app.invoke(initial_ _state_) print(final_ _state_["_agent_ _response"]) ``` #### 5. **é«˜çº§åŠŸèƒ½** - **æ¡ä»¶åˆ†æ”¯**ï¼šä½¿ç”¨`add_conditional_edges`å®ç°åŠ¨æ€è·¯ç”± ```python graph.add_conditional_edges( "query_analyzer", decide_next_node, # è¿”å›"tool_executor"æˆ–"response_generator" {"need_tools": "tool_executor", "direct_answer": "response_generator"} ) ``` - **å¾ªç¯æ§åˆ¶**ï¼šé€šè¿‡`add_edge`åˆ›å»ºå¾ªç¯å®ç°å¤šè½®äº¤äº’ - **å¤šæ™ºèƒ½ä½“åä½œ**ï¼šä¸åŒèŠ‚ç‚¹å¯å¯¹åº”ä¸åŒæ™ºèƒ½ä½“ï¼Œå…±äº«çŠ¶æ€å¯¹è±¡ #### æœ€ä½³å®è·µ 1. **çŠ¶æ€æœ€å°åŒ–**ï¼šåªå­˜å‚¨å¿…è¦æ•°æ®ï¼Œé¿å…è¿‡åº¦å¤æ‚çš„çŠ¶æ€ç»“æ„ 2. **æ›´æ–°ç­–ç•¥**ï¼šæ ¹æ®å­—æ®µç‰¹æ€§é€‰æ‹©è¿½åŠ ï¼ˆå†å²æ•°æ®ï¼‰æˆ–è¦†ç›–ï¼ˆæœ€æ–°ç»“æœï¼‰ 3. **é”™è¯¯å¤„ç†**ï¼šåœ¨èŠ‚ç‚¹ä¸­æ·»åŠ çŠ¶æ€å›æ»šæœºåˆ¶ 4. **çŠ¶æ€å¿«ç…§**ï¼šå®šæœŸæŒä¹…åŒ–çŠ¶æ€ï¼Œæ”¯æŒæ–­ç‚¹ç»­è·‘ > ç¤ºä¾‹åº”ç”¨åœºæ™¯ï¼šå®¢æˆ·æœåŠ¡ç³»ç»Ÿå¯åŒ…å«`é—®é¢˜åˆ†ç±»`â†’`æ•°æ®åº“æŸ¥è¯¢`â†’`ç»“æœç”Ÿæˆ`ä¸‰ä¸ªèŠ‚ç‚¹ï¼ŒçŠ¶æ€å¯¹è±¡ä¼ é€’ç”¨æˆ·é—®é¢˜ã€æŸ¥è¯¢ç»“æœã€å›å¤å†…å®¹ç­‰æ•°æ®[^1]ã€‚](https://wenku.csdn.net/answer/6jxfhfex3v)\n\n*   [å…³äºæˆ‘ä»¬](https://www.csdn.net/company/index.html#about)\n*   [æ‹›è´¤çº³å£«](https://www.csdn.net/company/index.html#recruit)\n*   [å•†åŠ¡åˆä½œ](https://fsc-p05.txscrm.com/T8PN8SFII7W)\n*   [å¯»æ±‚æŠ¥é“](https://marketing.csdn.net/questions/Q2202181748074189855)\n*   ![Image 57](https://g.csdnimg.cn/common/csdn-footer/images/tel.png)400-660-0108\n*   ![Image 58](https://g.csdnimg.cn/common/csdn-footer/images/email.png)[kefu@csdn.net](mailto:webmaster@csdn.net)\n*   ![Image 59](https://g.csdnimg.cn/common/csdn-footer/images/cs.png)[åœ¨çº¿å®¢æœ](https://csdn.s2.udesk.cn/im_client/?web_plugin_id=29181)\n*    å·¥ä½œæ—¶é—´ 8:30-22:00 \n\n*   ![Image 60](https://g.csdnimg.cn/common/csdn-footer/images/badge.png)[å…¬å®‰å¤‡æ¡ˆå·11010502030143](http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=11010502030143)\n*   [äº¬ICPå¤‡19004658å·](http://beian.miit.gov.cn/publish/query/indexFirst.action)\n*   [äº¬ç½‘æ–‡ã€”2020ã€•1039-165å·](https://csdnimg.cn/release/live_fe/culture_license.png)\n*   [ç»è¥æ€§ç½‘ç«™å¤‡æ¡ˆä¿¡æ¯](https://csdnimg.cn/cdn/content-toolbar/csdn-ICP.png)\n*   [åŒ—äº¬äº’è”ç½‘è¿æ³•å’Œä¸è‰¯ä¿¡æ¯ä¸¾æŠ¥ä¸­å¿ƒ](http://www.bjjubao.org/)\n*   [å®¶é•¿ç›‘æŠ¤](https://download.csdn.net/tutelage/home)\n*   [ç½‘ç»œ110æŠ¥è­¦æœåŠ¡](https://cyberpolice.mps.gov.cn/)\n*   [ä¸­å›½äº’è”ç½‘ä¸¾æŠ¥ä¸­å¿ƒ](http://www.12377.cn/)\n*   [Chromeå•†åº—ä¸‹è½½](https://chrome.google.com/webstore/detail/csdn%E5%BC%80%E5%8F%91%E8%80%85%E5%8A%A9%E6%89%8B/kfkdboecolemdjodhmhmcibjocfopejo?hl=zh-CN)\n*   [è´¦å·ç®¡ç†è§„èŒƒ](https://blog.csdn.net/blogdevteam/article/details/126135357)\n*   [ç‰ˆæƒä¸å…è´£å£°æ˜](https://www.csdn.net/company/index.html#statement)\n*   [ç‰ˆæƒç”³è¯‰](https://blog.csdn.net/blogdevteam/article/details/90369522)\n*   [å‡ºç‰ˆç‰©è®¸å¯è¯](https://img-home.csdnimg.cn/images/20250103023206.png)\n*   [è¥ä¸šæ‰§ç…§](https://img-home.csdnimg.cn/images/20250103023201.png)\n*   Â©1999-2026åŒ—äº¬åˆ›æ–°ä¹çŸ¥ç½‘ç»œæŠ€æœ¯æœ‰é™å…¬å¸\n\n[![Image 61](https://profile-avatar.csdnimg.cn/12627a5b12dd4935a293f4608c5806d4_qq_43588095.jpg!1)](https://blog.csdn.net/qq_43588095)\n\n[ä¸Šæœ‰æ™¨å…‰](https://blog.csdn.net/qq_43588095 "ä¸Šæœ‰æ™¨å…‰")\n\nåšå®¢ç­‰çº§ ![Image 62](https://csdnimg.cn/identity/blog5.png)\n\nç é¾„7å¹´\n\n[91 åŸåˆ›](https://blog.csdn.net/qq_43588095)1604 ç‚¹èµ 1588 æ”¶è— 5330 ç²‰ä¸\n\n[å…³æ³¨](https://blog.csdn.net/qq_43588095/article/details/147479946)\n\n[ç§ä¿¡](https://im.csdn.net/chat/qq_43588095)\n\n[![Image 63](https://i-operation.csdnimg.cn/images/d5d144f1d1904560adf54c48ec13c5b4.png)](https://ai.csdn.net/workbench/wallet?utm_source=xtai_slb_bloglb)\n\n[](https://wwads.cn/click/bait)[![Image 64: ä¸‡ç»´å¹¿å‘Šè”ç›Ÿ](https://cdn.wwads.cn/creatives/ocZcBmiI9GrrBWWbGauozCvDuNbfUf79yINPx1AP.jpg)](https://wwads.cn/click/bundle?code=OjwIpJp7uaB2SfOUMJIHqtYLJzicsH)\n\n[å…éƒ¨ç½²\\è¿ç»´\\è´¦å·\\æ”¯ä»˜ç³»ç»Ÿå¼€å‘ï¼Œè®©ä½ ç”¨Cursoråˆ¶ä½œå¯æ”¶è´¹çš„AIæ™ºèƒ½ä½“ï¼](https://wwads.cn/click/bundle?code=OjwIpJp7uaB2SfOUMJIHqtYLJzicsH)[![Image 65](https://blog.csdn.net/qq_43588095/article/details/147479946)å¹¿å‘Š](https://wwads.cn/?utm_source=property-175&utm_medium=footer "ç‚¹å‡»äº†è§£ä¸‡ç»´å¹¿å‘Šè”ç›Ÿ")\n\n[](https://blog.csdn.net/qq_43588095/article/details/147479946 "éšè—å¹¿å‘Š")\n\n![Image 66](https://kunyu.csdn.net/1.png?p=56&adId=1071043&adBlockFlag=0&a=1071043&c=0&k=LangGraph%E4%B8%ADState%E7%9A%84%E5%AE%9A%E4%B9%89%E6%A8%A1%E5%BC%8F&spm=1001.2101.3001.5000&articleId=147479946&d=1&t=3&u=a5d2e34815a24cb4879456c525bd7633)\n\n### çƒ­é—¨æ–‡ç« \n\n*   [DeepSeek æ¨¡å‹å¯¹æ¯”ï¼ˆR1 vs V3 vs V3-0324ï¼‰ ![Image 67](https://csdnimg.cn/release/blogv2/dist/pc/img/readCountWhite.png)7257](https://blog.csdn.net/qq_43588095/article/details/146748702)\n*   [LLaMA - Factoryå®‰è£…éƒ¨ç½²åŠå¾®è°ƒæµç¨‹ ![Image 68](https://csdnimg.cn/release/blogv2/dist/pc/img/readCountWhite.png)4255](https://blog.csdn.net/qq_43588095/article/details/146547831)\n*   [LLamaFactoryåç«¯PPOå¾®è°ƒå®æ“ ![Image 69](https://csdnimg.cn/release/blogv2/dist/pc/img/readCountWhite.png)3995](https://blog.csdn.net/qq_43588095/article/details/146604113)\n*   [LLaMA-Factory æ¨¡å‹å¾®è°ƒæŒ‡ä»¤å‚æ•°è¯¦è§£ ![Image 70](https://csdnimg.cn/release/blogv2/dist/pc/img/readCountWhite.png)3772](https://blog.csdn.net/qq_43588095/article/details/146572550)\n*   [LangGraphä¸­çš„äº‹ä»¶æµ ![Image 71](https://csdnimg.cn/release/blogv2/dist/pc/img/readCountWhite.png)2433](https://blog.csdn.net/qq_43588095/article/details/147635246)\n\n### åˆ†ç±»ä¸“æ \n\n*   [![Image 72](https://i-blog.csdnimg.cn/columns/default/20201014180756724.png?x-oss-process=image/resize,m_fixed,h_64,w_64) å¤§æ¨¡å‹Agentå¼€å‘](https://blog.csdn.net/qq_43588095/category_12933023.html)53ç¯‡\n*   [![Image 73](https://i-blog.csdnimg.cn/columns/default/20201014180756738.png?x-oss-process=image/resize,m_fixed,h_64,w_64) DeepSeekç³»åˆ—ç¬”è®°](https://blog.csdn.net/qq_43588095/category_12931550.html)8ç¯‡\n*   [![Image 74](https://i-blog.csdnimg.cn/columns/default/20201014180756930.png?x-oss-process=image/resize,m_fixed,h_64,w_64) å¾®è°ƒè¯¾ç¨‹ç¬”è®°](https://blog.csdn.net/qq_43588095/category_12928611.html)30ç¯‡\n\n ä¸Šä¸€ç¯‡ï¼š [LangGraphä¸­å¦‚ä½•æ¥å…¥å¤§æ¨¡å‹åšé—®ç­”æµç¨‹](https://blog.csdn.net/qq_43588095/article/details/147479709) ä¸‹ä¸€ç¯‡ï¼š [LangGraphä¸­ä½¿ç”¨å­—å…¸ç±»å‹å®šä¹‰çŠ¶æ€æ„å»ºå›¾ç»“æ„](https://blog.csdn.net/qq_43588095/article/details/147479990)\n\n### æœ€æ–°è¯„è®º\n\n*   [LangGraphä¹‹Tool Calling Agent ä¸­ToolNodeçš„ä½¿ç”¨](https://blog.csdn.net/qq_43588095/article/details/147633960#comments_37789141)\n[æœ¨å¸›:](https://blog.csdn.net/u010380026)å¥½æ–‡ï¼ä½†æ˜¯result_1å’Œ2çš„ç”Ÿæˆä»£ç æ˜¯ä¸æ˜¯æœ‰ç‚¹é—®é¢˜\n\n### å¤§å®¶åœ¨çœ‹\n\n*   [2006å¹´Hintonè®ºæ–‡ï¼šæ·±åº¦å­¦ä¹ ç ´å†°èµ·ç‚¹ ![Image 75](https://csdnimg.cn/release/blogv2/dist/pc/img/readCountWhite.png)986](https://blog.csdn.net/jeffsonfu/article/details/158152445)\n*   [Flask+Vue3å­¦ç”Ÿä¿¡æ¯ç®¡ç†ç³»ç»Ÿ](https://blog.csdn.net/caoli201314/article/details/158234142)\n*   [Transformerï¼šè·¨æ¨¡æ€AIæ ¸å¿ƒæ¶æ„ ![Image 76](https://csdnimg.cn/release/blogv2/dist/pc/img/readCountWhite.png)1093](https://blog.csdn.net/jeffsonfu/article/details/157688935)\n*   [ç¥ç»ç½‘ç»œå…­åå¹´æ¼”è¿›å²](https://blog.csdn.net/jeffsonfu/article/details/158208812)\n*   [æ¢¯åº¦ä¸‹é™åŠä¸»æµä¼˜åŒ–ç®—æ³•è¯¦è§£](https://blog.csdn.net/jeffsonfu/article/details/158234538)\n\n### æœ€æ–°æ–‡ç« \n\n*   [LangGraphä¸­çš„äº‹ä»¶æµ](https://blog.csdn.net/qq_43588095/article/details/147635246)\n*   [LangGraphä¸­å¦‚ä½•ä½¿ç”¨æµå¼è¾“å‡º](https://blog.csdn.net/qq_43588095/article/details/147635070)\n*   [LangGraphæ¡ˆä¾‹å®æ“ï¼šæ„å»ºå¤æ‚å·¥å…·åº”ç”¨çš„ReActè‡ªæ²»ä»£ç†ï¼ˆå«ä»£ç ï¼‰](https://blog.csdn.net/qq_43588095/article/details/147634669)\n\n[2025å¹´ 91ç¯‡](https://blog.csdn.net/qq_43588095?type=blog&year=2025&month=04)\n\n![Image 77](https://kunyu.csdn.net/1.png?p=57&adId=1086623&adBlockFlag=0&a=1086623&c=0&k=LangGraph%E4%B8%ADState%E7%9A%84%E5%AE%9A%E4%B9%89%E6%A8%A1%E5%BC%8F&spm=1001.2101.3001.5001&articleId=147479946&d=1&t=3&u=45ac8718cd754d28a20ea1e56f2520e9)\n\n### ç›®å½•\n\n1.   [ä¸€ã€LangGraphæ¡†æ¶æ ¸å¿ƒè¦ç‚¹å›é¡¾](https://blog.csdn.net/qq_43588095/article/details/147479946#t0)\n2.   [äºŒã€Stateçš„å…³é”®ä½œç”¨åŠæ¶ˆæ¯ä¼ é€’æœºåˆ¶](https://blog.csdn.net/qq_43588095/article/details/147479946#t1)\n3.   [ä¸‰ã€Stateçš„å®šä¹‰æ¨¡å¼ä¸ä»£ç å®ç°ç¤ºä¾‹](https://blog.csdn.net/qq_43588095/article/details/147479946#t2)\n\nå±•å¼€å…¨éƒ¨![Image 78](https://csdnimg.cn/release/blogv2/dist/pc/img/arrowup-line-bot-White.png)\n\næ”¶èµ·![Image 79](https://csdnimg.cn/release/blogv2/dist/pc/img/arrowup-line-top-White.png)\n\n![Image 80](https://kunyu.csdn.net/1.png?p=530&adId=1086624&adBlockFlag=0&a=1086624&c=0&k=LangGraph%E4%B8%ADState%E7%9A%84%E5%AE%9A%E4%B9%89%E6%A8%A1%E5%BC%8F&spm=1001.2101.3001.4647&articleId=147479946&d=1&t=3&u=e41726bf44e74f4d9f03f7a1cb21f59e)\n\n### ç›®å½•\n\n1.   [ä¸€ã€LangGraphæ¡†æ¶æ ¸å¿ƒè¦ç‚¹å›é¡¾](https://blog.csdn.net/qq_43588095/article/details/147479946#t0)\n2.   [äºŒã€Stateçš„å…³é”®ä½œç”¨åŠæ¶ˆæ¯ä¼ é€’æœºåˆ¶](https://blog.csdn.net/qq_43588095/article/details/147479946#t1)\n3.   [ä¸‰ã€Stateçš„å®šä¹‰æ¨¡å¼ä¸ä»£ç å®ç°ç¤ºä¾‹](https://blog.csdn.net/qq_43588095/article/details/147479946#t2)\n\nå±•å¼€å…¨éƒ¨![Image 81](https://csdnimg.cn/release/blogv2/dist/pc/img/arrowup-line-bot-White.png)\n\næ”¶èµ·![Image 82](https://csdnimg.cn/release/blogv2/dist/pc/img/arrowup-line-top-White.png)\n\n[](https://wwads.cn/click/bait)[![Image 83: ä¸‡ç»´å¹¿å‘Šè”ç›Ÿ](https://cdn.wwads.cn/creatives/ocZcBmiI9GrrBWWbGauozCvDuNbfUf79yINPx1AP.jpg)](https://wwads.cn/click/bundle?code=OjwIpJp7uaB2SfOUMJIHqtYLJzicsH)\n\n[å…éƒ¨ç½²\\è¿ç»´\\è´¦å·\\æ”¯ä»˜ç³»ç»Ÿå¼€å‘ï¼Œè®©ä½ ç”¨Cursoråˆ¶ä½œå¯æ”¶è´¹çš„AIæ™ºèƒ½ä½“ï¼](https://wwads.cn/click/bundle?code=OjwIpJp7uaB2SfOUMJIHqtYLJzicsH)[![Image 84](https://blog.csdn.net/qq_43588095/article/details/147479946)å¹¿å‘Š](https://wwads.cn/?utm_source=property-175&utm_medium=footer "ç‚¹å‡»äº†è§£ä¸‡ç»´å¹¿å‘Šè”ç›Ÿ")\n\n[](https://blog.csdn.net/qq_43588095/article/details/147479946 "éšè—å¹¿å‘Š")\n\n![Image 85](https://kunyu.csdn.net/1.png?p=479&adId=1071044&adBlockFlag=0&a=1071044&c=0&k=LangGraph%E4%B8%ADState%E7%9A%84%E5%AE%9A%E4%B9%89%E6%A8%A1%E5%BC%8F&spm=1001.2101.3001.4834&articleId=147479946&d=1&t=3&u=56412dcc2f554eaba763e3b763a50e70)\n\n ä¸Šä¸€ç¯‡ï¼š [LangGraphä¸­å¦‚ä½•æ¥å…¥å¤§æ¨¡å‹åšé—®ç­”æµç¨‹](https://blog.csdn.net/qq_43588095/article/details/147479709) ä¸‹ä¸€ç¯‡ï¼š [LangGraphä¸­ä½¿ç”¨å­—å…¸ç±»å‹å®šä¹‰çŠ¶æ€æ„å»ºå›¾ç»“æ„](https://blog.csdn.net/qq_43588095/article/details/147479990)\n\n### åˆ†ç±»ä¸“æ \n\n*   [![Image 86](https://i-blog.csdnimg.cn/columns/default/20201014180756724.png?x-oss-process=image/resize,m_fixed,h_64,w_64) å¤§æ¨¡å‹Agentå¼€å‘](https://blog.csdn.net/qq_43588095/category_12933023.html)53ç¯‡\n*   [![Image 87](https://i-blog.csdnimg.cn/columns/default/20201014180756738.png?x-oss-process=image/resize,m_fixed,h_64,w_64) DeepSeekç³»åˆ—ç¬”è®°](https://blog.csdn.net/qq_43588095/category_12931550.html)8ç¯‡\n*   [![Image 88](https://i-blog.csdnimg.cn/columns/default/20201014180756930.png?x-oss-process=image/resize,m_fixed,h_64,w_64) å¾®è°ƒè¯¾ç¨‹ç¬”è®°](https://blog.csdn.net/qq_43588095/category_12928611.html)30ç¯‡\n\n[å±•å¼€å…¨éƒ¨![Image 89](https://csdnimg.cn/release/blogv2/dist/pc/img/arrowup-line-bot-White.png)](https://blog.csdn.net/qq_43588095/article/details/147479946)[æ”¶èµ·![Image 90](https://csdnimg.cn/release/blogv2/dist/pc/img/arrowup-line-top-White.png)](https://blog.csdn.net/qq_43588095/article/details/147479946)\n\nç™»å½•åæ‚¨å¯ä»¥äº«å—ä»¥ä¸‹æƒç›Šï¼š\n\n*   ![Image 91](blob:http://localhost/e891c3a7c1a92038da15617ead1c0096)å…è´¹å¤åˆ¶ä»£ç \n*   ![Image 92](blob:http://localhost/3d84693e43989ca72c63590d38052fc8)å’Œåšä¸»å¤§Väº’åŠ¨\n*   ![Image 93](blob:http://localhost/a746ba3bd4746d1ec8acd6b5071ccf00)ä¸‹è½½æµ·é‡èµ„æº\n*   ![Image 94](blob:http://localhost/7cd6e3cbe7e0076d0b9199193b4b832d)å‘åŠ¨æ€/å†™æ–‡ç« /åŠ å…¥ç¤¾åŒº\n\nÃ—ç«‹å³ç™»å½•\n\nè¯„è®º![Image 95](https://csdnimg.cn/release/blogv2/dist/pc/img/closeBt.png)\n\n![Image 96](https://csdnimg.cn/release/blogv2/dist/pc/img/commentArrowLeftWhite.png)è¢«æŠ˜å çš„ æ¡è¯„è®º [ä¸ºä»€ä¹ˆè¢«æŠ˜å ?](https://blogdev.blog.csdn.net/article/details/122245662)[![Image 97](https://csdnimg.cn/release/blogv2/dist/pc/img/iconPark.png)åˆ°ã€çŒæ°´ä¹å›­ã€‘å‘è¨€](https://bbs.csdn.net/forums/FreeZone)\n\n[æŸ¥çœ‹æ›´å¤šè¯„è®º![Image 98](https://csdnimg.cn/release/blogv2/dist/pc/img/commentArrowDownWhite.png)](https://blog.csdn.net/qq_43588095/article/details/147479946)\n\n æ·»åŠ çº¢åŒ… [](https://blog.csdn.net/qq_43588095/article/details/147479946)\n\nç¥ç¦è¯­ \n\n[](https://blog.csdn.net/qq_43588095/article/details/147479946)\n\nè¯·å¡«å†™çº¢åŒ…ç¥ç¦è¯­æˆ–æ ‡é¢˜\n\nçº¢åŒ…æ•°é‡ \n\nä¸ª\n\nçº¢åŒ…ä¸ªæ•°æœ€å°ä¸º10ä¸ª\n\nçº¢åŒ…æ€»é‡‘é¢ \n\nå…ƒ\n\nçº¢åŒ…é‡‘é¢æœ€ä½5å…ƒ\n\nä½™é¢æ”¯ä»˜ \n\n å½“å‰ä½™é¢ 3.43 å…ƒ [å‰å¾€å……å€¼ >](https://i.csdn.net/#/wallet/balance/recharge)\n\n éœ€æ”¯ä»˜ï¼š10.00 å…ƒ \n\nå–æ¶ˆ ç¡®å®š\n\n![Image 99](https://blog.csdn.net/qq_43588095/article/details/147479946)\n\næˆå°±ä¸€äº¿æŠ€æœ¯äºº!\n\n é¢†å–åä½ ä¼šè‡ªåŠ¨æˆä¸ºåšä¸»å’Œçº¢åŒ…ä¸»çš„ç²‰ä¸ [è§„åˆ™](https://blogdev.blog.csdn.net/article/details/128932621)\n\n[![Image 100](https://profile-avatar.csdnimg.cn/default.jpg!2)](https://blog.csdn.net/qq_43588095/article/details/147479946)\n\nhope_wisdom\n\n å‘å‡ºçš„çº¢åŒ… \n\nå®ä»˜ å…ƒ\n\n[ä½¿ç”¨ä½™é¢æ”¯ä»˜](javascript:;)\n\n![Image 101](https://csdnimg.cn/release/blogv2/dist/pc/img/pay-time-out.png)ç‚¹å‡»é‡æ–°è·å–\n\n![Image 102](https://csdnimg.cn/release/blogv2/dist/pc/img/weixin.png)![Image 103](https://csdnimg.cn/release/blogv2/dist/pc/img/zhifubao.png)![Image 104](https://csdnimg.cn/release/blogv2/dist/pc/img/jingdong.png)æ‰«ç æ”¯ä»˜\n\né’±åŒ…ä½™é¢ 0\n\n![Image 105](https://csdnimg.cn/release/blogv2/dist/pc/img/pay-help.png)\n\næŠµæ‰£è¯´æ˜ï¼š\n\n1.ä½™é¢æ˜¯é’±åŒ…å……å€¼çš„è™šæ‹Ÿè´§å¸ï¼ŒæŒ‰ç…§1:1çš„æ¯”ä¾‹è¿›è¡Œæ”¯ä»˜é‡‘é¢çš„æŠµæ‰£ã€‚\n\n 2.ä½™é¢æ— æ³•ç›´æ¥è´­ä¹°ä¸‹è½½ï¼Œå¯ä»¥è´­ä¹°VIPã€ä»˜è´¹ä¸“æ åŠè¯¾ç¨‹ã€‚\n\n[![Image 106](https://csdnimg.cn/release/blogv2/dist/pc/img/recharge.png)ä½™é¢å……å€¼](https://i.csdn.net/#/wallet/balance/recharge)\n\n![Image 107](https://blog.csdn.net/qq_43588095/article/details/147479946)\n\nç¡®å®š å–æ¶ˆ![Image 108](https://csdnimg.cn/release/blogv2/dist/pc/img/closeBt.png)\n\nä¸¾æŠ¥\n\n![Image 109](https://csdnimg.cn/release/blogv2/dist/pc/img/closeBlack.png)\n\né€‰æ‹©ä½ æƒ³è¦ä¸¾æŠ¥çš„å†…å®¹ï¼ˆå¿…é€‰ï¼‰\n\n*   å†…å®¹æ¶‰é»„\n*   æ”¿æ²»ç›¸å…³\n*   å†…å®¹æŠ„è¢­\n*   æ¶‰å«Œå¹¿å‘Š\n*   å†…å®¹ä¾µæƒ\n*   ä¾®è¾±è°©éª‚\n*   æ ·å¼é—®é¢˜\n*   å…¶ä»–\n\nåŸæ–‡é“¾æ¥ï¼ˆå¿…å¡«ï¼‰\n\nè¯·é€‰æ‹©å…·ä½“åŸå› ï¼ˆå¿…é€‰ï¼‰\n\n*   åŒ…å«ä¸å®ä¿¡æ¯\n*   æ¶‰åŠä¸ªäººéšç§\n\nè¯·é€‰æ‹©å…·ä½“åŸå› ï¼ˆå¿…é€‰ï¼‰\n\n*   ä¾®è¾±è°©éª‚\n*   è¯½è°¤\n\nè¯·é€‰æ‹©å…·ä½“åŸå› ï¼ˆå¿…é€‰ï¼‰\n\n*   æ¬å®¶æ ·å¼\n*   åšæ–‡æ ·å¼\n\nè¡¥å……è¯´æ˜ï¼ˆé€‰å¡«ï¼‰\n\nå–æ¶ˆ\n\nç¡®å®š\n\n[![Image 110](https://i-operation.csdnimg.cn/images/23189f0255c74da0aead8ae1842c6f39.gif)](https://ai.csdn.net/workbench/wallet?utm_source=xtai_slb_blogxf_ty)[![Image 111](https://csdnimg.cn/release/blogv2/dist/pc/img/toolbar/Group.png)ç‚¹å‡»ä½“éªŒ DeepSeekR1æ»¡è¡€ç‰ˆ](https://ai.csdn.net/chat?utm_source=cknow_pc_blogdetail&spm=1001.2101.3001.10583)[![Image 112](https://g.csdnimg.cn/side-toolbar/3.6/images/mobile.png) ä¸‹è½½APP ![Image 113: ç¨‹åºå‘˜éƒ½åœ¨ç”¨çš„ä¸­æ–‡ITæŠ€æœ¯äº¤æµç¤¾åŒº](https://g.csdnimg.cn/side-toolbar/3.6/images/qr_app.png) ç¨‹åºå‘˜éƒ½åœ¨ç”¨çš„ä¸­æ–‡ITæŠ€æœ¯äº¤æµç¤¾åŒº å…¬ä¼—å· ![Image 114: ä¸“ä¸šçš„ä¸­æ–‡ IT æŠ€æœ¯ç¤¾åŒºï¼Œä¸åƒä¸‡æŠ€æœ¯äººå…±æˆé•¿](https://g.csdnimg.cn/side-toolbar/3.6/images/qr_wechat.png) ä¸“ä¸šçš„ä¸­æ–‡ IT æŠ€æœ¯ç¤¾åŒºï¼Œä¸åƒä¸‡æŠ€æœ¯äººå…±æˆé•¿ è§†é¢‘å· ![Image 115: å…³æ³¨ã€CSDNã€‘è§†é¢‘å·ï¼Œè¡Œä¸šèµ„è®¯ã€æŠ€æœ¯åˆ†äº«ç²¾å½©ä¸æ–­ï¼Œç›´æ’­å¥½ç¤¼é€ä¸åœï¼](https://g.csdnimg.cn/side-toolbar/3.6/images/qr_video.png) å…³æ³¨ã€CSDNã€‘è§†é¢‘å·ï¼Œè¡Œä¸šèµ„è®¯ã€æŠ€æœ¯åˆ†äº«ç²¾å½©ä¸æ–­ï¼Œç›´æ’­å¥½ç¤¼é€ä¸åœï¼](https://blog.csdn.net/qq_43588095/article/details/147479946)[![Image 116](https://g.csdnimg.cn/side-toolbar/3.6/images/customer.png)å®¢æœ](https://blog.csdn.net/qq_43588095/article/details/147479946)[![Image 117](https://g.csdnimg.cn/side-toolbar/3.6/images/totop.png)è¿”å›é¡¶éƒ¨](https://blog.csdn.net/qq_43588095/article/details/147479946)\n\n[![Image 118](https://csdnimg.cn/release/blogv2/dist/pc/img/quoteClose1White.png)](https://blog.csdn.net/qq_43588095/article/details/147479946)\n\n![Image 119](https://i-blog.csdnimg.cn/direct/34c5cd13225746f28209b80e750f3d85.png#pic_center)\n\n-è¿˜åŸ+1:1 è¿˜åŸ', 'doi': '', 'published_date': None, 'pdf_url': '', 'url': 'https://blog.csdn.net/qq_43588095/article/details/147479946', 'source': 'tavily', 'categories': ['web_search'], 'keywords': [], 'citations': 0, 'references': [], 'extra': {'score': 0.99999726, 'saved_path': '/home/qinshan/widthresearch/data/downloads/tavily_LangGraphä¸­.md'}}
2026-02-21 19:57:14,112 - __main__ - INFO - call_tool: name=exa_context_download, args={'papers': [{'paper_id': '', 'title': 'LangGraphdçš„ç»†èŠ‚å¤§å…¨â€”â€”å¦‚ä½•å®šä¹‰æˆ–è€…æ›´æ–°çŠ¶æ€åŸåˆ› - CSDNåšå®¢', 'authors': [], 'abstract': '\n \n æˆ‘ä»¬è¿™èŠ‚æ¥æ¢è®¨ä¸€ä¸‹å¦‚ä½•ä»èŠ‚ç‚¹æ›´æ–°å›¾çŠ¶æ€ä¸€äº›åŸºæœ¬çš„æ–¹å¼å’Œéœ€è¦æ³¨æ„çš„ç»†èŠ‚ï¼ŒåŒå­¦ä»¬è·Ÿéšæˆ‘ä¸€èµ·è¿›å…¥ Graph çš„ä¸–ç•Œã€‚ \nåœ¨ LangGraph ä¸­ï¼ŒState å¯ä»¥æ˜¯ TypedDictã€Pydantic æ¨¡å‹æˆ– dataclassã€‚è¿™äº›ç»“æ„ä¸»è¦ç”¨äºæè¿°çŠ¶æ€çš„ç±»å‹ï¼Œå¹¶ä½¿å¾—çŠ¶æ€çš„ç®¡ç†æ›´åŠ æ¸…æ™°å’Œæœ‰åºã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸åŒçš„æ–¹å¼æ¥å®šä¹‰çŠ¶æ€ã€‚ \nä¸‹é¢æˆ‘åˆ†åˆ«ä¸¾ä¸€ä¸ª TypedDictã€Pydantic æ¨¡å‹å’Œ dataclass çš„ä¾‹å­æ¥è¯´æ˜ï¼š \nTypedDict æ˜¯ Python ä¸­çš„ä¸€ç§ç±»å‹ï¼Œç”¨äºè¡¨ç¤ºå­—å…¸ç»“æ„ï¼Œå¹¶èƒ½æŒ‡å®šå­—å…¸ä¸­æ¯ä¸ªé”®çš„ç±»å‹ \n from typing import TypedDict\n class State ( TypedDict): \n name: str \n age: int \n active: bool \n # åˆ›å»ºçŠ¶æ€å®ä¾‹ \nstate: State = { \n "name": "Alice", \n "age": 30, \n "active": True \n} \n print ( state) \n \n Pydantic æ˜¯ä¸€ä¸ªéå¸¸å¼ºå¤§çš„æ•°æ®éªŒè¯å’Œè§£æåº“ï¼Œå¯ä»¥å°†æ•°æ®è½¬æ¢æˆ Pydantic æ¨¡å‹å®ä¾‹ï¼Œå¹¶è¿›è¡Œç±»å‹æ£€æŸ¥å’ŒéªŒè¯ \n from pydantic import BaseModel\n class State ( BaseModel): \n name: str \n age: int \n active: bool \n # åˆ›å»ºçŠ¶æ€å®ä¾‹ \nstate = State ( name = "Bob", age = 25, active = False) \n print ( state) \n \n åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼ŒState æ˜¯ä¸€ä¸ªç»§æ‰¿è‡ª BaseModel çš„ Pydantic æ¨¡å‹ã€‚Pydantic è‡ªåŠ¨ä¸ºæ¨¡å‹å­—æ®µæä¾›äº†ç±»å‹éªŒè¯ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ State(name=â€œBobâ€, age=25, active=False) æ¥åˆ›å»ºä¸€ä¸ªå®ä¾‹ï¼ŒPydantic ä¼šç¡®ä¿ç±»å‹æ­£ç¡®ã€‚ \ndataclass æ˜¯ Python 3.7 å¼•å…¥çš„æ ‡å‡†åº“ï¼Œæä¾›äº†ä¸€ç§ç®€å•çš„æ–¹å¼æ¥å®šä¹‰ç±»ï¼Œå¹¶è‡ªåŠ¨ç”Ÿæˆå¸¸ç”¨çš„æ–¹æ³•ï¼ˆå¦‚ init ã€ repr ç­‰ï¼‰ \n from dataclasses import dataclass\n @dataclass \n class State: \n name: str \n age: int \n active: bool \n # åˆ›å»ºçŠ¶æ€å®ä¾‹ \nstate = State ( name = "Charlie", age = 40, active = True) \n print ( state) \n \n åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼ŒState æ˜¯ä¸€ä¸ªç®€å•çš„ dataclassï¼Œå®ƒå…·æœ‰ä¸‰ä¸ªå­—æ®µï¼šnameã€age å’Œ activeã€‚dataclass ä¼šè‡ªåŠ¨ç”Ÿæˆ init æ–¹æ³•ï¼Œæ‰€ä»¥ä½ å¯ä»¥ç›´æ¥é€šè¿‡ State(name=â€œCharlieâ€, age=40, active=True) æ¥åˆ›å»ºå®ä¾‹ã€‚ \nåœ¨æˆ‘ä»¬langraphä¸­ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œå›¾çš„è¾“å…¥å’Œè¾“å‡ºç»“æ„å°†æ˜¯ç›¸åŒçš„ï¼Œä¸”çŠ¶æ€å†³å®šäº†è¯¥ç»“æ„ã€‚ \næˆ‘ä»¬å®šä¹‰ä¸€ä¸ªç®€å•çš„ State ä¾‹å­ï¼š \n from langchain_core. messages import AnyMessage\n from typing_extensions import TypedDict\n class State ( TypedDict): \n messages: list [ AnyMessage] \n extra_field: int \n \n è¿™ä¸ªçŠ¶æ€ä¿å­˜è·Ÿè¸ªäº†ä¸€ç³»åˆ—æ¶ˆæ¯å¯¹è±¡ï¼Œå¹¶ä¸”è¿˜æœ‰ä¸€ä¸ªé¢å¤–çš„æ•´æ•°å­—æ®µã€‚ \n å®šä¹‰å›¾å½¢ç»“æ„ \n è®©æˆ‘ä»¬æ„å»ºä¸€ä¸ªåŒ…å«å•ä¸ªèŠ‚ç‚¹çš„å›¾ã€‚æˆ‘ä»¬çš„èŠ‚ç‚¹åªæ˜¯ä¸€ä¸ª Python å‡½æ•°ï¼Œå®ƒè¯»å–å›¾çš„çŠ¶æ€å¹¶å¯¹å…¶è¿›è¡Œæ›´æ–°ã€‚è¿™ä¸ªå‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°å°†å§‹ç»ˆæ˜¯çŠ¶æ€ï¼š \n from langchain_core. messages import AIMessage\n def node ( state: State): \n messages = state [ "messages"] \n new_message = AIMessage ( "Hello!") \n return { "messages": messages + [ new_message], "extra_field": 10} \n \n å®šä¹‰èŠ‚ç‚¹åªæ˜¯å°†æ¶ˆæ¯é™„åŠ åˆ°æˆ‘ä»¬çš„æ¶ˆæ¯åˆ—è¡¨ä¸­ï¼Œç„¶åå¡«å……ä¸€ä¸ªé¢å¤–çš„å­—æ®µã€‚ \næ¥ä¸‹æ¥ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°†å®šä¹‰ä¸€ä¸ªç®€å•çš„å›¾ï¼Œå…¶ä¸­åŒ…å«æˆ‘ä»¬ä¹‹å‰åˆ›å»ºçš„èŠ‚ç‚¹ã€‚æˆ‘ä»¬å°†ä½¿ç”¨ StateGraph æ¥å®šä¹‰ä¸€ä¸ªæ“ä½œè¯¥çŠ¶æ€çš„å›¾ï¼Œå¹¶ä½¿ç”¨ add_node å°†æˆ‘ä»¬çš„èŠ‚ç‚¹æ·»åŠ åˆ°å›¾ä¸­ã€‚ \n from langgraph. graph import StateGraph\ngraph_builder = StateGraph ( State) \ngraph_builder. add_node ( node) \ngraph_builder. set_entry_point ( "node") \ngraph = graph_builder. compile () \n \n æ‰§è¡Œä¸‹é¢å¯è§†åŒ–ï¼š \n from IPython. display import Image, display\ndisplay ( Image ( graph. get_graph (). draw_mermaid_png ())) \n \n \nåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬çš„å›¾åªæ˜¯æ‰§è¡Œä¸€ä¸ªèŠ‚ç‚¹ã€‚ \n ä½¿ç”¨å›¾ \n æˆ‘ä»¬æ¥è°ƒç”¨å®ƒï¼ŒåŒå­¦ä»¬è¿˜è®°å¾—ä¸ï¼š \n from langchain_core. messages import HumanMessage\nresult = graph. invoke ( { "messages": [ HumanMessage ( "Hi")]}) \n // æ‰“å° result\n \n å¾—åˆ°ï¼š \n { \'messages\': [ HumanMessage ( content = \'Hi\', additional_kwargs = {}, response_metadata = {}), \n AIMessage ( content = \'Hello!\', additional_kwargs = {}, response_metadata = {})], \n \'extra_field\': 10} \n \n è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæˆ‘ä»¬æ‰§è¡Œä¸Šé¢å®šä¹‰çš„ graph ï¼Œæˆ‘ä»¬æ˜¯é€šè¿‡æ›´æ–°çŠ¶æ€çš„å•ä¸ªå­—æ®µå¯åŠ¨äº†è°ƒç”¨ã€‚åœ¨è°ƒç”¨ç»“æœä¸­ï¼Œæˆ‘ä»¬æ¥æ”¶åˆ°æ•´ä¸ªçŠ¶æ€ã€‚ \nä¸ºäº†æ–¹ä¾¿æˆ‘ä»¬æŸ¥çœ‹ï¼Œæˆ‘ä»¬æ¢ä¸€ç§æ‰“å°æ–¹å¼ï¼š \n for message in result [ "messages"]: \n message. pretty_print () \n \n å¾—åˆ°ä¸‹é¢ç»“æœ \n ================================[1m Human Message [0m=================================\nHi\n==================================[1m Ai Message [0m==================================\nHello!\n \n é€šè¿‡ reducer å¤„ç†çŠ¶æ€æ›´æ–°ã€‚ \n åœ¨çŠ¶æ€ä¸­çš„æ¯ä¸ªé”®å¯ä»¥æœ‰è‡ªå·±çš„ç‹¬ç«‹ reducer å‡½æ•°ï¼Œç”¨äºæ§åˆ¶èŠ‚ç‚¹çš„æ›´æ–°å¦‚ä½•åº”ç”¨ã€‚å¦‚æœæ²¡æœ‰æ˜¾å¼æŒ‡å®š reducer å‡½æ•°ï¼Œåˆ™é»˜è®¤å‡è®¾æ‰€æœ‰å¯¹è¯¥é”®çš„æ›´æ–°éƒ½ä¼šè¦†ç›–å…¶å½“å‰å€¼ã€‚å¯¹äº TypedDict çŠ¶æ€æ¶æ„ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡åœ¨çŠ¶æ€çš„ç›¸åº”å­—æ®µä¸Šä½¿ç”¨ reducer å‡½æ•°æ³¨è§£æ¥å®šä¹‰ reducersã€‚ \nåœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬çš„èŠ‚ç‚¹é€šè¿‡å‘ messages é”®é™„åŠ ä¸€æ¡æ¶ˆæ¯æ¥æ›´æ–°çŠ¶æ€ã€‚åœ¨ä¸‹é¢çš„ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬ä¸ºè¿™ä¸ªé”®æ·»åŠ äº†ä¸€ä¸ª reducerï¼Œä½¿å¾—æ›´æ–°ä¼šè‡ªåŠ¨åœ°é™„åŠ æ¶ˆæ¯ï¼š \n from typing_extensions import Annotated\n def add ( left, right): \n """Can also import `add` from the `operator` built-in.""" \n return left + right\n class State ( TypedDict): \n messages: Annotated [ list [ AnyMessage], add] \n extra_field: int \n \n æˆ‘ä»¬çš„èŠ‚ç‚¹å¯ä»¥ç®€åŒ–æˆï¼š \n def node ( state: State): \n new_message = AIMessage ( "Hello!") \n return { "messages": [ new_message], "extra_field": 10} \n \n ç„¶åå®šä¹‰å¹¶æ‰§è¡Œæˆ‘ä»¬çš„graphï¼š \n from langgraph. graph import START\ngraph = StateGraph ( State). add_node ( node). add_edge ( START, "node"). compile () \nresult = graph. invoke ( { "messages": [ HumanMessage ( "Hi")]}) \n for message in result [ "messages"]: \n message. pretty_print () \n \n å¾—åˆ°ç»“æœ \n ================================[1m Human Message [0m=================================\nHi\n==================================[1m Ai Message [0m==================================\nHello!\n \n æ›´æ–°çš„æ¶ˆæ¯å°±è‡ªåŠ¨çš„é™„åŠ åˆ°åé¢äº†ã€‚ \n MessagesState \n å¦‚æœæˆ‘ä»¬å¸Œæœ›æ›´æ–°çŠ¶æ€ä¸­å·²æœ‰çš„æ¶ˆæ¯ã€‚å¹¶ä¸”è¿˜æƒ³æ¥å—æ¶ˆæ¯æ ¼å¼çš„ç®€å†™ï¼Œä¾‹å¦‚ OpenAI æ ¼å¼ã€‚è¯¥æ€ä¹ˆåšå‘¢ï¼Ÿ \nLangGraph åŒ…å«ä¸€ä¸ªå†…ç½®çš„ reducer add_messagesï¼Œå®ƒå¤„ç†äº†è¿™äº›è€ƒè™‘äº‹é¡¹ï¼š \n from langgraph. graph. message import add_messages\n class State ( TypedDict): \n messages: Annotated [ list [ AnyMessage], add_messages] \n extra_field: int \n def node ( state: State): \n new_message = AIMessage ( "Hello!") \n return { "messages": [ new_message], "extra_field": 10} \ngraph = StateGraph ( State). add_node ( node). set_entry_point ( "node"). compile () \n \n æˆ‘ä»¬æ¥æ‰§è¡Œå®ƒï¼š \n input_message = { "role": "user", "content": "Hi"} \nresult = graph. invoke ( { <', 'doi': '', 'published_date': '2025-02-06T00:00:00+00:00', 'pdf_url': '', 'url': 'https://blog.csdn.net/weixin_40143861/article/details/145483735', 'source': 'exa_context', 'categories': [], 'keywords': [], 'citations': 0, 'references': [], 'extra': {}}], 'save_path': '/home/qinshan/widthresearch/data/downloads'}
2026-02-21 19:57:14,113 - __main__ - INFO - handle_download: searcher=ExaSearcherContext, input_papers=1, save_path=/home/qinshan/widthresearch/data/downloads
2026-02-21 19:57:14,113 - __main__ - INFO - handle_download: downloaded=1
2026-02-21 19:57:14,113 - __main__ - INFO - call_tool payload: source_tool=exa_context_download, result_type=papers, count=1
2026-02-21 19:57:14,113 - __main__ - INFO - call_tool: name=exa_context_download, result_type=papers, count=1
2026-02-21 19:57:14,113 - __main__ - DEBUG - call_tool payload sample: {'paper_id': '', 'title': 'LangGraphdçš„ç»†èŠ‚å¤§å…¨â€”â€”å¦‚ä½•å®šä¹‰æˆ–è€…æ›´æ–°çŠ¶æ€åŸåˆ› - CSDNåšå®¢', 'authors': [], 'abstract': '\n \n æˆ‘ä»¬è¿™èŠ‚æ¥æ¢è®¨ä¸€ä¸‹å¦‚ä½•ä»èŠ‚ç‚¹æ›´æ–°å›¾çŠ¶æ€ä¸€äº›åŸºæœ¬çš„æ–¹å¼å’Œéœ€è¦æ³¨æ„çš„ç»†èŠ‚ï¼ŒåŒå­¦ä»¬è·Ÿéšæˆ‘ä¸€èµ·è¿›å…¥ Graph çš„ä¸–ç•Œã€‚ \nåœ¨ LangGraph ä¸­ï¼ŒState å¯ä»¥æ˜¯ TypedDictã€Pydantic æ¨¡å‹æˆ– dataclassã€‚è¿™äº›ç»“æ„ä¸»è¦ç”¨äºæè¿°çŠ¶æ€çš„ç±»å‹ï¼Œå¹¶ä½¿å¾—çŠ¶æ€çš„ç®¡ç†æ›´åŠ æ¸…æ™°å’Œæœ‰åºã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸åŒçš„æ–¹å¼æ¥å®šä¹‰çŠ¶æ€ã€‚ \nä¸‹é¢æˆ‘åˆ†åˆ«ä¸¾ä¸€ä¸ª TypedDictã€Pydantic æ¨¡å‹å’Œ dataclass çš„ä¾‹å­æ¥è¯´æ˜ï¼š \nTypedDict æ˜¯ Python ä¸­çš„ä¸€ç§ç±»å‹ï¼Œç”¨äºè¡¨ç¤ºå­—å…¸ç»“æ„ï¼Œå¹¶èƒ½æŒ‡å®šå­—å…¸ä¸­æ¯ä¸ªé”®çš„ç±»å‹ \n from typing import TypedDict\n class State ( TypedDict): \n name: str \n age: int \n active: bool \n # åˆ›å»ºçŠ¶æ€å®ä¾‹ \nstate: State = { \n "name": "Alice", \n "age": 30, \n "active": True \n} \n print ( state) \n \n Pydantic æ˜¯ä¸€ä¸ªéå¸¸å¼ºå¤§çš„æ•°æ®éªŒè¯å’Œè§£æåº“ï¼Œå¯ä»¥å°†æ•°æ®è½¬æ¢æˆ Pydantic æ¨¡å‹å®ä¾‹ï¼Œå¹¶è¿›è¡Œç±»å‹æ£€æŸ¥å’ŒéªŒè¯ \n from pydantic import BaseModel\n class State ( BaseModel): \n name: str \n age: int \n active: bool \n # åˆ›å»ºçŠ¶æ€å®ä¾‹ \nstate = State ( name = "Bob", age = 25, active = False) \n print ( state) \n \n åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼ŒState æ˜¯ä¸€ä¸ªç»§æ‰¿è‡ª BaseModel çš„ Pydantic æ¨¡å‹ã€‚Pydantic è‡ªåŠ¨ä¸ºæ¨¡å‹å­—æ®µæä¾›äº†ç±»å‹éªŒè¯ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ State(name=â€œBobâ€, age=25, active=False) æ¥åˆ›å»ºä¸€ä¸ªå®ä¾‹ï¼ŒPydantic ä¼šç¡®ä¿ç±»å‹æ­£ç¡®ã€‚ \ndataclass æ˜¯ Python 3.7 å¼•å…¥çš„æ ‡å‡†åº“ï¼Œæä¾›äº†ä¸€ç§ç®€å•çš„æ–¹å¼æ¥å®šä¹‰ç±»ï¼Œå¹¶è‡ªåŠ¨ç”Ÿæˆå¸¸ç”¨çš„æ–¹æ³•ï¼ˆå¦‚ init ã€ repr ç­‰ï¼‰ \n from dataclasses import dataclass\n @dataclass \n class State: \n name: str \n age: int \n active: bool \n # åˆ›å»ºçŠ¶æ€å®ä¾‹ \nstate = State ( name = "Charlie", age = 40, active = True) \n print ( state) \n \n åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼ŒState æ˜¯ä¸€ä¸ªç®€å•çš„ dataclassï¼Œå®ƒå…·æœ‰ä¸‰ä¸ªå­—æ®µï¼šnameã€age å’Œ activeã€‚dataclass ä¼šè‡ªåŠ¨ç”Ÿæˆ init æ–¹æ³•ï¼Œæ‰€ä»¥ä½ å¯ä»¥ç›´æ¥é€šè¿‡ State(name=â€œCharlieâ€, age=40, active=True) æ¥åˆ›å»ºå®ä¾‹ã€‚ \nåœ¨æˆ‘ä»¬langraphä¸­ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œå›¾çš„è¾“å…¥å’Œè¾“å‡ºç»“æ„å°†æ˜¯ç›¸åŒçš„ï¼Œä¸”çŠ¶æ€å†³å®šäº†è¯¥ç»“æ„ã€‚ \næˆ‘ä»¬å®šä¹‰ä¸€ä¸ªç®€å•çš„ State ä¾‹å­ï¼š \n from langchain_core. messages import AnyMessage\n from typing_extensions import TypedDict\n class State ( TypedDict): \n messages: list [ AnyMessage] \n extra_field: int \n \n è¿™ä¸ªçŠ¶æ€ä¿å­˜è·Ÿè¸ªäº†ä¸€ç³»åˆ—æ¶ˆæ¯å¯¹è±¡ï¼Œå¹¶ä¸”è¿˜æœ‰ä¸€ä¸ªé¢å¤–çš„æ•´æ•°å­—æ®µã€‚ \n å®šä¹‰å›¾å½¢ç»“æ„ \n è®©æˆ‘ä»¬æ„å»ºä¸€ä¸ªåŒ…å«å•ä¸ªèŠ‚ç‚¹çš„å›¾ã€‚æˆ‘ä»¬çš„èŠ‚ç‚¹åªæ˜¯ä¸€ä¸ª Python å‡½æ•°ï¼Œå®ƒè¯»å–å›¾çš„çŠ¶æ€å¹¶å¯¹å…¶è¿›è¡Œæ›´æ–°ã€‚è¿™ä¸ªå‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°å°†å§‹ç»ˆæ˜¯çŠ¶æ€ï¼š \n from langchain_core. messages import AIMessage\n def node ( state: State): \n messages = state [ "messages"] \n new_message = AIMessage ( "Hello!") \n return { "messages": messages + [ new_message], "extra_field": 10} \n \n å®šä¹‰èŠ‚ç‚¹åªæ˜¯å°†æ¶ˆæ¯é™„åŠ åˆ°æˆ‘ä»¬çš„æ¶ˆæ¯åˆ—è¡¨ä¸­ï¼Œç„¶åå¡«å……ä¸€ä¸ªé¢å¤–çš„å­—æ®µã€‚ \næ¥ä¸‹æ¥ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°†å®šä¹‰ä¸€ä¸ªç®€å•çš„å›¾ï¼Œå…¶ä¸­åŒ…å«æˆ‘ä»¬ä¹‹å‰åˆ›å»ºçš„èŠ‚ç‚¹ã€‚æˆ‘ä»¬å°†ä½¿ç”¨ StateGraph æ¥å®šä¹‰ä¸€ä¸ªæ“ä½œè¯¥çŠ¶æ€çš„å›¾ï¼Œå¹¶ä½¿ç”¨ add_node å°†æˆ‘ä»¬çš„èŠ‚ç‚¹æ·»åŠ åˆ°å›¾ä¸­ã€‚ \n from langgraph. graph import StateGraph\ngraph_builder = StateGraph ( State) \ngraph_builder. add_node ( node) \ngraph_builder. set_entry_point ( "node") \ngraph = graph_builder. compile () \n \n æ‰§è¡Œä¸‹é¢å¯è§†åŒ–ï¼š \n from IPython. display import Image, display\ndisplay ( Image ( graph. get_graph (). draw_mermaid_png ())) \n \n \nåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬çš„å›¾åªæ˜¯æ‰§è¡Œä¸€ä¸ªèŠ‚ç‚¹ã€‚ \n ä½¿ç”¨å›¾ \n æˆ‘ä»¬æ¥è°ƒç”¨å®ƒï¼ŒåŒå­¦ä»¬è¿˜è®°å¾—ä¸ï¼š \n from langchain_core. messages import HumanMessage\nresult = graph. invoke ( { "messages": [ HumanMessage ( "Hi")]}) \n // æ‰“å° result\n \n å¾—åˆ°ï¼š \n { \'messages\': [ HumanMessage ( content = \'Hi\', additional_kwargs = {}, response_metadata = {}), \n AIMessage ( content = \'Hello!\', additional_kwargs = {}, response_metadata = {})], \n \'extra_field\': 10} \n \n è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæˆ‘ä»¬æ‰§è¡Œä¸Šé¢å®šä¹‰çš„ graph ï¼Œæˆ‘ä»¬æ˜¯é€šè¿‡æ›´æ–°çŠ¶æ€çš„å•ä¸ªå­—æ®µå¯åŠ¨äº†è°ƒç”¨ã€‚åœ¨è°ƒç”¨ç»“æœä¸­ï¼Œæˆ‘ä»¬æ¥æ”¶åˆ°æ•´ä¸ªçŠ¶æ€ã€‚ \nä¸ºäº†æ–¹ä¾¿æˆ‘ä»¬æŸ¥çœ‹ï¼Œæˆ‘ä»¬æ¢ä¸€ç§æ‰“å°æ–¹å¼ï¼š \n for message in result [ "messages"]: \n message. pretty_print () \n \n å¾—åˆ°ä¸‹é¢ç»“æœ \n ================================[1m Human Message [0m=================================\nHi\n==================================[1m Ai Message [0m==================================\nHello!\n \n é€šè¿‡ reducer å¤„ç†çŠ¶æ€æ›´æ–°ã€‚ \n åœ¨çŠ¶æ€ä¸­çš„æ¯ä¸ªé”®å¯ä»¥æœ‰è‡ªå·±çš„ç‹¬ç«‹ reducer å‡½æ•°ï¼Œç”¨äºæ§åˆ¶èŠ‚ç‚¹çš„æ›´æ–°å¦‚ä½•åº”ç”¨ã€‚å¦‚æœæ²¡æœ‰æ˜¾å¼æŒ‡å®š reducer å‡½æ•°ï¼Œåˆ™é»˜è®¤å‡è®¾æ‰€æœ‰å¯¹è¯¥é”®çš„æ›´æ–°éƒ½ä¼šè¦†ç›–å…¶å½“å‰å€¼ã€‚å¯¹äº TypedDict çŠ¶æ€æ¶æ„ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡åœ¨çŠ¶æ€çš„ç›¸åº”å­—æ®µä¸Šä½¿ç”¨ reducer å‡½æ•°æ³¨è§£æ¥å®šä¹‰ reducersã€‚ \nåœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬çš„èŠ‚ç‚¹é€šè¿‡å‘ messages é”®é™„åŠ ä¸€æ¡æ¶ˆæ¯æ¥æ›´æ–°çŠ¶æ€ã€‚åœ¨ä¸‹é¢çš„ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬ä¸ºè¿™ä¸ªé”®æ·»åŠ äº†ä¸€ä¸ª reducerï¼Œä½¿å¾—æ›´æ–°ä¼šè‡ªåŠ¨åœ°é™„åŠ æ¶ˆæ¯ï¼š \n from typing_extensions import Annotated\n def add ( left, right): \n """Can also import `add` from the `operator` built-in.""" \n return left + right\n class State ( TypedDict): \n messages: Annotated [ list [ AnyMessage], add] \n extra_field: int \n \n æˆ‘ä»¬çš„èŠ‚ç‚¹å¯ä»¥ç®€åŒ–æˆï¼š \n def node ( state: State): \n new_message = AIMessage ( "Hello!") \n return { "messages": [ new_message], "extra_field": 10} \n \n ç„¶åå®šä¹‰å¹¶æ‰§è¡Œæˆ‘ä»¬çš„graphï¼š \n from langgraph. graph import START\ngraph = StateGraph ( State). add_node ( node). add_edge ( START, "node"). compile () \nresult = graph. invoke ( { "messages": [ HumanMessage ( "Hi")]}) \n for message in result [ "messages"]: \n message. pretty_print () \n \n å¾—åˆ°ç»“æœ \n ================================[1m Human Message [0m=================================\nHi\n==================================[1m Ai Message [0m==================================\nHello!\n \n æ›´æ–°çš„æ¶ˆæ¯å°±è‡ªåŠ¨çš„é™„åŠ åˆ°åé¢äº†ã€‚ \n MessagesState \n å¦‚æœæˆ‘ä»¬å¸Œæœ›æ›´æ–°çŠ¶æ€ä¸­å·²æœ‰çš„æ¶ˆæ¯ã€‚å¹¶ä¸”è¿˜æƒ³æ¥å—æ¶ˆæ¯æ ¼å¼çš„ç®€å†™ï¼Œä¾‹å¦‚ OpenAI æ ¼å¼ã€‚è¯¥æ€ä¹ˆåšå‘¢ï¼Ÿ \nLangGraph åŒ…å«ä¸€ä¸ªå†…ç½®çš„ reducer add_messagesï¼Œå®ƒå¤„ç†äº†è¿™äº›è€ƒè™‘äº‹é¡¹ï¼š \n from langgraph. graph. message import add_messages\n class State ( TypedDict): \n messages: Annotated [ list [ AnyMessage], add_messages] \n extra_field: int \n def node ( state: State): \n new_message = AIMessage ( "Hello!") \n return { "messages": [ new_message], "extra_field": 10} \ngraph = StateGraph ( State). add_node ( node). set_entry_point ( "node"). compile () \n \n æˆ‘ä»¬æ¥æ‰§è¡Œå®ƒï¼š \n input_message = { "role": "user", "content": "Hi"} \nresult = graph. invoke ( { <', 'doi': '', 'published_date': '2025-02-06T00:00:00+00:00', 'pdf_url': '', 'url': 'https://blog.csdn.net/weixin_40143861/article/details/145483735', 'source': 'exa_context', 'categories': [], 'keywords': [], 'citations': 0, 'references': [], 'extra': {'saved_path': '/home/qinshan/widthresearch/data/downloads/exa_LangGraphd.md'}}
2026-02-21 20:08:32,616 - __main__ - INFO - call_tool: name=exa_summary_search, args={'query': 'LangGraph advanced techniques best practices', 'type': 'auto'}
2026-02-21 20:08:32,616 - __main__ - INFO - handle_search: searcher=ExaSearcherSummary, query=LangGraph advanced techniques best practices, search_type=auto
2026-02-21 20:08:47,894 - __main__ - INFO - handle_search: returned=1
2026-02-21 20:08:47,894 - __main__ - INFO - call_tool payload: source_tool=exa_summary_search, result_type=papers, count=1
2026-02-21 20:08:47,894 - __main__ - INFO - call_tool: name=exa_summary_search, result_type=papers, count=1
2026-02-21 20:08:47,895 - __main__ - DEBUG - call_tool payload sample: {'paper_id': '', 'title': 'LangGraph Best Practices for Production-Ready AI Workflows', 'authors': [], 'abstract': 'The LinkedIn post by Anjaiah Methuku outlines advanced best practices for implementing LangGraph in production-ready AI workflows. Key recommendations include:\n\n1. **State Management**: Keep state minimal and predictable using TypedDict or Pydantic. Treat nodes as pure functions for easier testing and validation.\n2. **Flow Control**: Use simple edges for linear flows and limit conditional edges. Implement guards against infinite loops and delegate tasks to specialized agents.\n3. **Memory Persistence**: Ensure durable state persistence with systems like PostgreSQL and use thread-scoped keys for memory management.\n4. **Performance Optimization**: Select appropriate streaming modes based on UI requirements and parallelize independent tasks to enhance throughput.\n5. **Error Handling**: Develop a multi-level error strategy with bounded retries and fallback paths for failures.\n6. **Human-in-the-Loop**: Design workflows to allow human intervention when necessary, ensuring deterministic paths for resuming processes.\n7. **Testing**: Test the entire graph logic rather than individual functions, using mocks for external tools to ensure robust pipelines.\n8. **Deployment**: Utilize environment variables for configuration and enable distributed tracing for better observability in production.\n\nThese practices aim to enhance the reliability, efficiency, and maintainability of AI workflows using LangGraph.', 'doi': '', 'published_date': '2026-01-01T00:00:00+00:00', 'pdf_url': '', 'url': 'https://www.linkedin.com/posts/anjaiahmethuku_langgraph-best-practices-swarnendu-de-activity-7412479320243388416-Lwre', 'source': 'exa_summary', 'categories': [], 'keywords': [], 'citations': 0, 'references': [], 'extra': {}}
2026-02-21 20:10:00,095 - __main__ - INFO - call_tool: name=wikipedia_search, args={'query': 'LangGraph æµç¨‹æ§åˆ¶çš„é«˜çº§æ¨¡å¼æœ‰å“ªäº›ï¼ŒåŒ…æ‹¬æ¡ä»¶è·¯ç”±ã€å¹¶è¡Œåˆ†æ”¯ã€å¾ªç¯æ§åˆ¶å’Œäººæœºåä½œçš„å®ç°æ–¹æ³•'}
2026-02-21 20:10:00,095 - __main__ - INFO - handle_search: searcher=WikipediaSearcher, query=LangGraph æµç¨‹æ§åˆ¶çš„é«˜çº§æ¨¡å¼æœ‰å“ªäº›ï¼ŒåŒ…æ‹¬æ¡ä»¶è·¯ç”±ã€å¹¶è¡Œåˆ†æ”¯ã€å¾ªç¯æ§åˆ¶å’Œäººæœºåä½œçš„å®ç°æ–¹æ³•, search_type=None
2026-02-21 20:10:00,931 - __main__ - INFO - call_tool: name=tavily_search, args={'query': 'åœ¨ LangGraph ä¸­å¦‚ä½•è®¾è®¡é«˜æ•ˆçš„çŠ¶æ€ç®¡ç†æ¨¡å¼ï¼ŒåŒ…æ‹¬çŠ¶æ€ç»“æ„è®¾è®¡ã€çŠ¶æ€æ›´æ–°ç­–ç•¥å’Œè·¨èŠ‚ç‚¹çŠ¶æ€ä¼ é€’'}
2026-02-21 20:10:00,931 - __main__ - INFO - handle_search: searcher=TavilySearch, query=åœ¨ LangGraph ä¸­å¦‚ä½•è®¾è®¡é«˜æ•ˆçš„çŠ¶æ€ç®¡ç†æ¨¡å¼ï¼ŒåŒ…æ‹¬çŠ¶æ€ç»“æ„è®¾è®¡ã€çŠ¶æ€æ›´æ–°ç­–ç•¥å’Œè·¨èŠ‚ç‚¹çŠ¶æ€ä¼ é€’, search_type=None
2026-02-21 20:10:01,066 - __main__ - INFO - call_tool: name=wikipedia_search, args={'query': 'LangGraph å†…å­˜æŒä¹…åŒ–çš„æœ€ä½³å®è·µæœ‰å“ªäº›ï¼ŒåŒ…æ‹¬ Checkpointer ä¸ Store çš„é€‰æ‹©ç­–ç•¥ã€å¼‚æ­¥æŒä¹…åŒ–é…ç½®å’Œè·¨ä¼šè¯è®°å¿†ç®¡ç†'}
2026-02-21 20:10:01,066 - __main__ - INFO - handle_search: searcher=WikipediaSearcher, query=LangGraph å†…å­˜æŒä¹…åŒ–çš„æœ€ä½³å®è·µæœ‰å“ªäº›ï¼ŒåŒ…æ‹¬ Checkpointer ä¸ Store çš„é€‰æ‹©ç­–ç•¥ã€å¼‚æ­¥æŒä¹…åŒ–é…ç½®å’Œè·¨ä¼šè¯è®°å¿†ç®¡ç†, search_type=None
2026-02-21 20:10:01,079 - __main__ - INFO - call_tool: name=wikipedia_search, args={'query': 'åœ¨ LangGraph ä¸­å¦‚ä½•è®¾è®¡é«˜æ•ˆçš„çŠ¶æ€ç®¡ç†æ¨¡å¼ï¼ŒåŒ…æ‹¬çŠ¶æ€ç»“æ„è®¾è®¡ã€çŠ¶æ€æ›´æ–°ç­–ç•¥å’Œè·¨èŠ‚ç‚¹çŠ¶æ€ä¼ é€’'}
2026-02-21 20:10:01,079 - __main__ - INFO - handle_search: searcher=WikipediaSearcher, query=åœ¨ LangGraph ä¸­å¦‚ä½•è®¾è®¡é«˜æ•ˆçš„çŠ¶æ€ç®¡ç†æ¨¡å¼ï¼ŒåŒ…æ‹¬çŠ¶æ€ç»“æ„è®¾è®¡ã€çŠ¶æ€æ›´æ–°ç­–ç•¥å’Œè·¨èŠ‚ç‚¹çŠ¶æ€ä¼ é€’, search_type=None
2026-02-21 20:10:01,139 - __main__ - INFO - call_tool: name=exa_context_search, args={'query': 'LangGraph å†…å­˜æŒä¹…åŒ–çš„æœ€ä½³å®è·µæœ‰å“ªäº›ï¼ŒåŒ…æ‹¬ Checkpointer ä¸ Store çš„é€‰æ‹©ç­–ç•¥ã€å¼‚æ­¥æŒä¹…åŒ–é…ç½®å’Œè·¨ä¼šè¯è®°å¿†ç®¡ç†'}
2026-02-21 20:10:01,140 - __main__ - INFO - handle_search: searcher=ExaSearcherContext, query=LangGraph å†…å­˜æŒä¹…åŒ–çš„æœ€ä½³å®è·µæœ‰å“ªäº›ï¼ŒåŒ…æ‹¬ Checkpointer ä¸ Store çš„é€‰æ‹©ç­–ç•¥ã€å¼‚æ­¥æŒä¹…åŒ–é…ç½®å’Œè·¨ä¼šè¯è®°å¿†ç®¡ç†, search_type=None
2026-02-21 20:10:01,225 - __main__ - WARNING - handle_search: returned=0 for query=LangGraph æµç¨‹æ§åˆ¶çš„é«˜çº§æ¨¡å¼æœ‰å“ªäº›ï¼ŒåŒ…æ‹¬æ¡ä»¶è·¯ç”±ã€å¹¶è¡Œåˆ†æ”¯ã€å¾ªç¯æ§åˆ¶å’Œäººæœºåä½œçš„å®ç°æ–¹æ³•
2026-02-21 20:10:01,226 - __main__ - INFO - call_tool payload: source_tool=wikipedia_search, result_type=papers, count=0
2026-02-21 20:10:01,226 - __main__ - INFO - call_tool: name=wikipedia_search, result_type=papers, count=0
2026-02-21 20:10:01,282 - __main__ - INFO - call_tool: name=tavily_search, args={'query': 'LangGraph å†…å­˜æŒä¹…åŒ–çš„æœ€ä½³å®è·µæœ‰å“ªäº›ï¼ŒåŒ…æ‹¬ Checkpointer ä¸ Store çš„é€‰æ‹©ç­–ç•¥ã€å¼‚æ­¥æŒä¹…åŒ–é…ç½®å’Œè·¨ä¼šè¯è®°å¿†ç®¡ç†'}
2026-02-21 20:10:01,283 - __main__ - INFO - handle_search: searcher=TavilySearch, query=LangGraph å†…å­˜æŒä¹…åŒ–çš„æœ€ä½³å®è·µæœ‰å“ªäº›ï¼ŒåŒ…æ‹¬ Checkpointer ä¸ Store çš„é€‰æ‹©ç­–ç•¥ã€å¼‚æ­¥æŒä¹…åŒ–é…ç½®å’Œè·¨ä¼šè¯è®°å¿†ç®¡ç†, search_type=None
2026-02-21 20:10:01,346 - __main__ - INFO - call_tool: name=tavily_search, args={'query': 'LangGraph æµç¨‹æ§åˆ¶çš„é«˜çº§æ¨¡å¼æœ‰å“ªäº›ï¼ŒåŒ…æ‹¬æ¡ä»¶è·¯ç”±ã€å¹¶è¡Œåˆ†æ”¯ã€å¾ªç¯æ§åˆ¶å’Œäººæœºåä½œçš„å®ç°æ–¹æ³•'}
2026-02-21 20:10:01,346 - __main__ - INFO - call_tool: name=exa_context_search, args={'query': 'LangGraph æµç¨‹æ§åˆ¶çš„é«˜çº§æ¨¡å¼æœ‰å“ªäº›ï¼ŒåŒ…æ‹¬æ¡ä»¶è·¯ç”±ã€å¹¶è¡Œåˆ†æ”¯ã€å¾ªç¯æ§åˆ¶å’Œäººæœºåä½œçš„å®ç°æ–¹æ³•'}
2026-02-21 20:10:01,347 - __main__ - INFO - handle_search: searcher=TavilySearch, query=LangGraph æµç¨‹æ§åˆ¶çš„é«˜çº§æ¨¡å¼æœ‰å“ªäº›ï¼ŒåŒ…æ‹¬æ¡ä»¶è·¯ç”±ã€å¹¶è¡Œåˆ†æ”¯ã€å¾ªç¯æ§åˆ¶å’Œäººæœºåä½œçš„å®ç°æ–¹æ³•, search_type=None
2026-02-21 20:10:01,347 - __main__ - INFO - handle_search: searcher=ExaSearcherContext, query=LangGraph æµç¨‹æ§åˆ¶çš„é«˜çº§æ¨¡å¼æœ‰å“ªäº›ï¼ŒåŒ…æ‹¬æ¡ä»¶è·¯ç”±ã€å¹¶è¡Œåˆ†æ”¯ã€å¾ªç¯æ§åˆ¶å’Œäººæœºåä½œçš„å®ç°æ–¹æ³•, search_type=None
2026-02-21 20:10:01,399 - __main__ - INFO - call_tool: name=exa_context_search, args={'query': 'åœ¨ LangGraph ä¸­å¦‚ä½•è®¾è®¡é«˜æ•ˆçš„çŠ¶æ€ç®¡ç†æ¨¡å¼ï¼ŒåŒ…æ‹¬çŠ¶æ€ç»“æ„è®¾è®¡ã€çŠ¶æ€æ›´æ–°ç­–ç•¥å’Œè·¨èŠ‚ç‚¹çŠ¶æ€ä¼ é€’'}
2026-02-21 20:10:01,400 - __main__ - INFO - handle_search: searcher=ExaSearcherContext, query=åœ¨ LangGraph ä¸­å¦‚ä½•è®¾è®¡é«˜æ•ˆçš„çŠ¶æ€ç®¡ç†æ¨¡å¼ï¼ŒåŒ…æ‹¬çŠ¶æ€ç»“æ„è®¾è®¡ã€çŠ¶æ€æ›´æ–°ç­–ç•¥å’Œè·¨èŠ‚ç‚¹çŠ¶æ€ä¼ é€’, search_type=None
2026-02-21 20:10:02,122 - __main__ - WARNING - handle_search: returned=0 for query=åœ¨ LangGraph ä¸­å¦‚ä½•è®¾è®¡é«˜æ•ˆçš„çŠ¶æ€ç®¡ç†æ¨¡å¼ï¼ŒåŒ…æ‹¬çŠ¶æ€ç»“æ„è®¾è®¡ã€çŠ¶æ€æ›´æ–°ç­–ç•¥å’Œè·¨èŠ‚ç‚¹çŠ¶æ€ä¼ é€’
2026-02-21 20:10:02,123 - __main__ - INFO - call_tool payload: source_tool=wikipedia_search, result_type=papers, count=0
2026-02-21 20:10:02,123 - __main__ - INFO - call_tool: name=wikipedia_search, result_type=papers, count=0
2026-02-21 20:10:02,490 - __main__ - WARNING - handle_search: returned=0 for query=LangGraph å†…å­˜æŒä¹…åŒ–çš„æœ€ä½³å®è·µæœ‰å“ªäº›ï¼ŒåŒ…æ‹¬ Checkpointer ä¸ Store çš„é€‰æ‹©ç­–ç•¥ã€å¼‚æ­¥æŒä¹…åŒ–é…ç½®å’Œè·¨ä¼šè¯è®°å¿†ç®¡ç†
2026-02-21 20:10:02,490 - __main__ - INFO - call_tool payload: source_tool=wikipedia_search, result_type=papers, count=0
2026-02-21 20:10:02,490 - __main__ - INFO - call_tool: name=wikipedia_search, result_type=papers, count=0
2026-02-21 20:10:07,532 - __main__ - INFO - handle_search: returned=1
2026-02-21 20:10:07,532 - __main__ - INFO - call_tool payload: source_tool=exa_context_search, result_type=papers, count=1
2026-02-21 20:10:07,532 - __main__ - INFO - call_tool: name=exa_context_search, result_type=papers, count=1
2026-02-21 20:10:07,533 - __main__ - DEBUG - call_tool payload sample: {'paper_id': '', 'title': "LangGraphæœ€ä½³å®è·µï¼šæ„å»ºå¯é æœ‰çŠ¶æ€AIä»£ç†çš„å…³é”®ç­–ç•¥ | Ningto's Blog", 'authors': [], 'abstract': 'LangGraphæœ€ä½³å®è·µï¼šæ„å»ºå¯é æœ‰çŠ¶æ€AIä»£ç†çš„å…³é”®ç­–ç•¥ | Ningto\'s Blog\n\nç›®å½•\n\n- å‚è€ƒèµ„æ–™\n- å››ã€æ€»ç»“\n- ä¸‰ã€å®æˆ˜æ¡ˆä¾‹ï¼šæ„å»ºæœ‰çŠ¶æ€å¯¹è¯ä»£ç†\n- 6. ä¼˜åŒ–æ¨¡å‹ä¸å·¥å…·è°ƒç”¨\n- 5. ç”¨LangSmithå®ç°å¯è§†åŒ–è°ƒè¯•\n- 4. ä¸¥æ ¼æ§åˆ¶äººæœºåä½œï¼ˆHuman-in-the-Loopï¼‰\n- 3. åˆ©ç”¨å­å›¾ï¼ˆSubgraphï¼‰å®ç°æ¨¡å—åŒ–\n- 2. å¼ºåˆ¶ä½¿ç”¨æ£€æŸ¥ç‚¹ï¼ˆCheckpointï¼‰\n- 1. è®¾è®¡æ¸…æ™°çš„çŠ¶æ€ç»“æ„ï¼ˆState Designï¼‰\n- äºŒã€æ ¸å¿ƒæœ€ä½³å®è·µ\n- ä¸€ã€å‰è¨€\n- LangGraphæœ€ä½³å®è·µï¼šæ„å»ºå¯é æœ‰çŠ¶æ€AIä»£ç†çš„å…³é”®ç­–ç•¥\n\n# LangGraphæœ€ä½³å®è·µï¼šæ„å»ºå¯é æœ‰çŠ¶æ€AIä»£ç†çš„å…³é”®ç­–ç•¥\n\n## ä¸€ã€å‰è¨€\n\nLangGraphä½œä¸ºä¸“æ³¨äºé•¿æœŸè¿è¡Œã€æœ‰çŠ¶æ€AIä»£ç†çš„ä½çº§åˆ«ç¼–æ’æ¡†æ¶ï¼Œå…¶æ ¸å¿ƒä»·å€¼åœ¨äºè§£å†³ä¼ ç»Ÿæ— çŠ¶æ€ä»£ç†çš„ç—›ç‚¹ï¼ˆå¦‚çŠ¶æ€ä¸¢å¤±ã€è°ƒè¯•å›°éš¾ã€æ— æ³•æŒä¹…åŒ–ç­‰ï¼‰ã€‚è¦å……åˆ†å‘æŒ¥LangGraphçš„ä¼˜åŠ¿ï¼Œéœ€éµå¾ªä¸€ç³»åˆ—æœ€ä½³å®è·µï¼Œæ¶µç›–çŠ¶æ€ç®¡ç†ã€æµç¨‹è®¾è®¡ã€è°ƒè¯•ä¼˜åŒ–ç­‰å¤šä¸ªç»´åº¦ã€‚æœ¬æ–‡ç»“åˆå®˜æ–¹æ–‡æ¡£åŠå®æˆ˜ç»éªŒï¼Œæ€»ç»“äº†LangGraphå¼€å‘çš„å…³é”®ç­–ç•¥ã€‚\n\n## äºŒã€æ ¸å¿ƒæœ€ä½³å®è·µ\n\n### 1. è®¾è®¡æ¸…æ™°çš„çŠ¶æ€ç»“æ„ï¼ˆState Designï¼‰\n\nçŠ¶æ€æ˜¯LangGraphçš„æ ¸å¿ƒï¼Œéœ€ç»“æ„åŒ–ã€å¯æ‰©å±•ï¼Œé¿å…å†—ä½™æˆ–æ¨¡ç³Šã€‚å»ºè®®å°†çŠ¶æ€åˆ†ä¸ºä»¥ä¸‹æ¨¡å—ï¼š\n\n- æ§åˆ¶ä¿¡å·ï¼ˆControl Signalsï¼‰ï¼šç”¨äºæµç¨‹æ§åˆ¶çš„ä¸´æ—¶çŠ¶æ€ï¼ˆå¦‚`{"need_human_approval":true}`ï¼‰ï¼ŒæŒ‡ç¤ºä»£ç†æ˜¯å¦éœ€è¦æš‚åœç­‰å¾…äººç±»ä»‹å…¥ã€‚\n- é•¿æœŸè®°å¿†ï¼ˆLong-term Memoryï¼‰ï¼šä¿å­˜è·¨ä¼šè¯çš„ç”¨æˆ·åå¥½ã€ä»»åŠ¡è¿›åº¦ç­‰ï¼ˆå¦‚`{"user_preference":"å–œæ¬¢ç®€æ´å›ç­”","task_progress":"å®Œæˆæ•°æ®æ”¶é›†"}`ï¼‰ï¼Œéœ€å®šæœŸæŒä¹…åŒ–ï¼ˆå¦‚å­˜å…¥æ•°æ®åº“ï¼‰ã€‚\n- å·¥å…·è°ƒç”¨è®°å½•ï¼ˆTool Callsï¼‰ï¼šå­˜å‚¨ä»£ç†è°ƒç”¨å·¥å…·çš„è¾“å…¥/è¾“å‡ºï¼ˆå¦‚`[{"tool":"get_weather","input":"æ—§é‡‘å±±","output":"æ™´å¤©"}]`ï¼‰ï¼Œä¾¿äºå›æº¯å·¥å…·ä½¿ç”¨æƒ…å†µã€‚\n- å¯¹è¯ä¸Šä¸‹æ–‡ï¼ˆMessagesï¼‰ï¼šä¿å­˜ç”¨æˆ·ä¸ä»£ç†çš„äº¤äº’å†å²ï¼ˆå¦‚`[{"role":"user","content":"..."}]`ï¼‰ï¼Œç”¨äºæ¨¡å‹ç†è§£ä¸Šä¸‹æ–‡ã€‚\n\nç¤ºä¾‹ï¼š\n\n```\nfrom langgraph.schema import StateGraph\nfrom typing import TypedDict, List\nfrom langgraph.schema import Message\n\n# å®šä¹‰å¼ºç±»å‹çŠ¶æ€ç»“æ„\nclass AgentState(TypedDict):\n    messages: List[Message]          # å¯¹è¯å†å²\n    tool_calls: List[dict]           # å·¥å…·è°ƒç”¨è®°å½•\n    long_term_memory: dict           # é•¿æœŸè®°å¿†\n    need_human_approval: bool        # äººæœºåä½œä¿¡å·\n\n```\n\n### 2. å¼ºåˆ¶ä½¿ç”¨æ£€æŸ¥ç‚¹ï¼ˆCheckpointï¼‰\n\næ£€æŸ¥ç‚¹æ˜¯LangGraphæŒä¹…åŒ–æ‰§è¡Œçš„å…³é”®ï¼Œéœ€åœ¨å…³é”®èŠ‚ç‚¹ï¼ˆå¦‚å·¥å…·è°ƒç”¨å‰ã€çŠ¶æ€å˜æ›´åï¼‰ä¿å­˜çŠ¶æ€ï¼Œç¡®ä¿ä»»åŠ¡ä¸­æ–­åå¯æ¢å¤ã€‚\n\næ¨èåœºæ™¯ï¼š\n\n- é«˜é£é™©æ“ä½œï¼ˆå¦‚èµ„é‡‘è½¬è´¦ã€å†…å®¹ç”Ÿæˆï¼‰ï¼šæ“ä½œå‰ä¿å­˜æ£€æŸ¥ç‚¹ï¼Œé¿å…é”™è¯¯æ— æ³•å›æ»šï¼›\n- é•¿æœŸä»»åŠ¡ï¼ˆå¦‚æ•°æ®çˆ¬å–ã€å¤šè½®å¯¹è¯ï¼‰ï¼šæ¯å®Œæˆä¸€ä¸ªå­ä»»åŠ¡ä¿å­˜ä¸€æ¬¡æ£€æŸ¥ç‚¹ï¼›\n\nç¤ºä¾‹ï¼š\n\n```\nfrom langgraph.checkpoint import LocalCheckpointSaver\n\n# åˆå§‹åŒ–æœ¬åœ°æ£€æŸ¥ç‚¹ä¿å­˜å™¨\ncheckpoint_saver = LocalCheckpointSaver(directory="./langgraph_checkpoints")\n\n# åˆ›å»ºå¸¦æ£€æŸ¥ç‚¹çš„çŠ¶æ€å›¾\nstate_graph = StateGraph(AgentState).with_checkpoint(checkpoint_saver)\n\n```\n\n### 3. åˆ©ç”¨å­å›¾ï¼ˆSubgraphï¼‰å®ç°æ¨¡å—åŒ–\n\nå­å›¾æ˜¯LangGraphä»£ç å¤ç”¨çš„æ ¸å¿ƒæœºåˆ¶ï¼Œå°†å¤æ‚æµç¨‹æ‹†åˆ†ä¸ºç‹¬ç«‹å­æ¨¡å—ï¼ˆå¦‚â€œç”¨æˆ·æ„å›¾è¯†åˆ«â€â€œå·¥å…·è°ƒç”¨â€â€œç»“æœæ•´ç†â€ï¼‰ï¼Œé™ä½ç»´æŠ¤æˆæœ¬ã€‚\n\næ¨èåœºæ™¯ï¼š\n\n- å¯é…ç½®æµç¨‹ï¼ˆå¦‚ä¸åŒç”¨æˆ·è§’è‰²å¯¹åº”ä¸åŒå­å›¾ï¼‰ï¼›\n- é‡å¤æµç¨‹ï¼ˆå¦‚â€œè·å–ç”¨æˆ·ä¿¡æ¯â†’è°ƒç”¨å·¥å…·â†’ç”Ÿæˆå›ç­”â€ï¼‰ï¼›\n\nç¤ºä¾‹ï¼š\n\n```\nfrom langgraph import Subgraph\n\n# å®šä¹‰â€œå·¥å…·è°ƒç”¨â€å­å›¾\nclass ToolSubgraph(Subgraph):\n    def __init__(self):\n        super().__init__()\n        self.add_node("call_tool", self._call_tool)\n        self.add_node("parse_result", self._parse_result)\n        self.add_edge("call_tool", "parse_result")\n\n    def _call_tool(self, state: AgentState) -> AgentState:\n        # å·¥å…·è°ƒç”¨é€»è¾‘\n        return state\n\n    def _parse_result(self, state: AgentState) -> AgentState:\n        # ç»“æœè§£æé€»è¾‘\n        return state\n\n# å°†å­å›¾åµŒå…¥ä¸»å›¾\nmain_graph = StateGraph(AgentState)\nmain_graph.add_subgraph(ToolSubgraph(), name="tool_flow")\n\n```\n\n### 4. ä¸¥æ ¼æ§åˆ¶äººæœºåä½œï¼ˆHuman-in-the-Loopï¼‰\n\nLangGraphæ”¯æŒäººç±»åœ¨ä»»æ„èŠ‚ç‚¹ä»‹å…¥ï¼Œéœ€åˆç†è®¾è®¡ä»‹å…¥æ—¶æœºï¼Œé¿å…è¿‡åº¦ä¾èµ–äººç±»æˆ–å¿½ç•¥é£é™©ã€‚\n\næ¨èåœºæ™¯ï¼š\n\n- æ¨¡ç³ŠæŸ¥è¯¢ï¼ˆå¦‚ç”¨æˆ·æ„å›¾ä¸æ˜ç¡®ï¼‰ï¼šè¯·æ±‚äººç±»è¡¥å……ä¿¡æ¯ï¼›\n- é«˜é£é™©å†³ç­–ï¼ˆå¦‚å†…å®¹å®¡æ ¸ã€èµ„é‡‘æ“ä½œï¼‰ï¼šåœ¨å†³ç­–å‰æš‚åœï¼Œç­‰å¾…äººç±»ç¡®è®¤ï¼›\n\nç¤ºä¾‹ï¼š\n\n```\nfrom langgraph import HumanNode\n\n# å®šä¹‰äººç±»å®¡æ‰¹èŠ‚ç‚¹\nhuman_approval_node = HumanNode(\n    input_schema={"approval": bool},  # äººç±»è¾“å…¥ schemaï¼ˆæ˜¯å¦æ‰¹å‡†ï¼‰\n    output_schema={"approved": bool} # è¾“å‡º schemaï¼ˆå®¡æ‰¹ç»“æœï¼‰\n)\n\n# åœ¨æµç¨‹ä¸­æ’å…¥äººç±»èŠ‚ç‚¹\nstate_graph.add_edge("decide", human_approval_node)\nstate_graph.add_edge(human_approval_node, "execute_action")\n\n```\n\n### 5. ç”¨LangSmithå®ç°å¯è§†åŒ–è°ƒè¯•\n\nLangSmithæ˜¯LangGraphçš„è°ƒè¯•åˆ©å™¨ï¼Œéœ€å…¨ç¨‹ä½¿ç”¨å…¶è®°å½•æ‰§è¡Œè½¨è¿¹ã€çŠ¶æ€å˜åŒ–ã€å·¥å…·è°ƒç”¨ç­‰ä¿¡æ¯ï¼Œå¿«é€Ÿå®šä½é—®é¢˜ã€‚\n\nå…³é”®åŠŸèƒ½ï¼š\n\n- é”™è¯¯å®šä½ï¼šæ ‡è®°æ‰§è¡Œä¸­çš„é”™è¯¯ï¼ˆå¦‚å·¥å…·è°ƒç”¨å¤±è´¥ã€çŠ¶æ€å¼‚å¸¸ï¼‰ï¼›\n- æ€§èƒ½åˆ†æï¼šç»Ÿè®¡æ¯ä¸€æ­¥çš„æ‰§è¡Œæ—¶é—´ï¼ˆå¦‚æ¨¡å‹è°ƒç”¨è€—æ—¶ã€å·¥å…·è°ƒç”¨è€—æ—¶ï¼‰ï¼›\n- è½¨è¿¹å›æ”¾ï¼šæŸ¥çœ‹ä»£ç†æ¯ä¸€æ­¥çš„çŠ¶æ€å˜åŒ–ï¼ˆå¦‚`messages`æ–°å¢ã€`tool_calls`æ›´æ–°ï¼‰ï¼›\n\nç¤ºä¾‹ï¼š\n\n```\nfrom langsmith import Client\n\n# åˆå§‹åŒ–LangSmithå®¢æˆ·ç«¯ï¼ˆéœ€è®¾ç½®ç¯å¢ƒå˜é‡LANGSMITH_API_KEYï¼‰\nlangsmith_client = Client()\n\n# åˆ›å»ºä»£ç†æ—¶å…³è”LangSmith\nagent = create_react_agent(\n    model="anthropic:claude-3-7-sonnet-latest",\n    tools=[get_weather],\n    prompt="ä½ æ˜¯ä¸€ä¸ªhelpfulçš„åŠ©ç†",\n    langsmith_client=langsmith_client\n)\n\n```\n\n### 6. ä¼˜åŒ–æ¨¡å‹ä¸å·¥å…·è°ƒç”¨\n\nå·¥å…·è°ƒç”¨ç­–ç•¥ï¼š\n\n- ç¼“å­˜ç»“æœï¼šå¯¹é¢‘ç¹è°ƒç”¨çš„å·¥å…·ï¼ˆå¦‚å›ºå®šæ•°æ®æŸ¥è¯¢ï¼‰ç¼“å­˜ç»“æœï¼Œæé«˜æ•ˆç‡ï¼›\n- æ‰¹é‡è°ƒç”¨ï¼šå°†å¤šä¸ªå·¥å…·è°ƒç”¨åˆå¹¶ä¸ºä¸€æ¬¡ï¼ˆå¦‚åŒæ—¶è·å–å¤©æ°”å’Œæ–°é—»ï¼‰ï¼Œå‡å°‘æ¨¡å‹è°ƒç”¨æ¬¡æ•°ï¼›\n\n## ä¸‰ã€å®æˆ˜æ¡ˆä¾‹ï¼šæ„å»ºæœ‰çŠ¶æ€å¯¹è¯ä»£ç†\n\nä»¥ä¸‹æ˜¯ä¸€ä¸ªç»“åˆä¸Šè¿°æœ€ä½³å®è·µçš„å¯¹è¯ä»£ç†ç¤ºä¾‹ï¼š\n\n```\nfrom langgraph import StateGraph, HumanNode\nfrom langgraph.schema import Message\nfrom langgraph.checkpoint import LocalCheckpointSaver\nfrom langsmith import Client\nfrom typing import TypedDict, List\n\n# å®šä¹‰çŠ¶æ€ç»“æ„\nclass ConversationState(TypedDict):\n    messages: List[Message]\n    tool_calls: List[dict]\n    user_preference: dict\n    need_human_approval: bool\n\n# åˆå§‹åŒ–ä¾èµ–\ncheckpoint_saver = LocalCheckpointSaver(directory="./checkpoints")\nlangsmith_client = Client()\n\n# å®šä¹‰èŠ‚ç‚¹å‡½æ•°\ndef decide_next_step(state: ConversationState) -> str:\n    """å†³å®šä¸‹ä¸€æ­¥æ“ä½œ"""\n    last_msg = state["messages"][-1]\n    if "å¤©æ°”" in last_msg.content:\n        return "call_weather_tool"\n    elif "æ•æ„Ÿå†…å®¹" in last_msg.content:\n        state["need_human_approval"] = True\n        return "human_approval"\n    else:\n        return "direct_answer"\n\ndef call_weather_tool(state: ConversationState) -> ConversationState:\n    """è°ƒç”¨å¤©æ°”å·¥å…·"""\n    city = last_msg.content.split("å¤©æ°”")[0].strip()\n    weather = get_weather(city)  # å‡è®¾get_weatheræ˜¯å·¥å…·å‡½æ•°\n    state["tool_calls"].append({"tool": "get_weather", "input": city, "output": weather})\n    state["messages"].append(Message(role="assistant", content=f"å¤©æ°”ç»“æœï¼š{weather}"))\n    return state\n\n# åˆ›å»ºçŠ¶æ€å›¾\ngraph = StateGraph(ConversationState)\n\n# æ·»åŠ èŠ‚ç‚¹\ngraph.add_node("decide", decide_next_step)\ngraph.add_node("call_weather_tool", call_weather_tool)\ngraph.add_node("human_approval", HumanNode(input_schema={"approval": bool}))\ngraph.add_node("direct_answer", lambda state: state)\n\n# æ·»åŠ è¾¹\ngraph.add_edge("decide", "call_weather_tool")\ngraph.add_edge("decide", "human_approval")\ngraph.add_edge("decide", "direct_answer")\ngraph.add_edge("human_approval", "direct_answer")\ngraph.add_edge("call_weather_tool", "direct_answer")\n\n# è®¾ç½®å…¥å£èŠ‚ç‚¹\ngraph.set_entry_point("decide")\n\n# ç¼–è¯‘å›¾ï¼ˆå¸¦æ£€æŸ¥ç‚¹ä¸LangSmithï¼‰\ncompiled_graph = graph.compile(\n    checkpoint_saver=checkpoint_saver,\n    langsmith_client=langsmith_client\n)\n\n# è¿è¡Œä»£ç†\ninitial_state = {\n    "messages": [Message(role="user", content="åŒ—äº¬çš„å¤©æ°”æ€ä¹ˆæ ·ï¼Ÿ")],\n    "tool_calls": [],\n    "user_preference": {},\n    "need_human_approval": False\n}\nresult = compiled_graph.invoke(initial_state)\n\nprint(result["messages"][-1].content)\n\n```\n\n## å››ã€æ€»ç»“\n\nLangGraphçš„æœ€ä½³å®è·µå›´ç»•â€œæœ‰çŠ¶æ€ã€å¯æŒä¹…åŒ–ã€å¯è°ƒè¯•â€å±•å¼€ï¼Œæ ¸å¿ƒæ˜¯è®¾è®¡æ¸…æ™°çš„çŠ¶æ€ç»“æ„ã€å¼ºåˆ¶ä½¿ç”¨æ£€æŸ¥ç‚¹ã€åˆ©ç”¨å­å›¾æ¨¡å—åŒ–ã€åˆç†å¼•å…¥äººæœºåä½œåŠç”¨LangSmithè°ƒè¯•ã€‚è¿™äº›ç­–ç•¥èƒ½å¸®åŠ©å¼€å‘è€…æ„å»ºå¯é ã€å¯æ‰©å±•çš„AIä»£ç†ï¼Œé€‚ç”¨äºé•¿æœŸå¯¹è¯ã€æ•°æ®å¤„ç†ã€æ™ºèƒ½åŠ©æ‰‹ç­‰åœºæ™¯ã€‚\n\n## å‚è€ƒèµ„æ–™\n\n- LangGraphå®æˆ˜ç¤ºä¾‹ï¼š [https://github.com/langchain-ai/langgraph/tree/main/examples] \n- LangSmithè°ƒè¯•æŒ‡å—ï¼š [https://docs.smith.langchain.com/] \n- LangGraphå®˜æ–¹æ–‡æ¡£ï¼š [https://langgraph.ai/docs/] \n- é”™è¯¯å¤„ç†ï¼šå·¥å…·è°ƒç”¨å¤±è´¥æ—¶ï¼ˆå¦‚APIè¶…æ—¶ï¼‰ï¼Œéœ€é‡è¯•æˆ– fallback åˆ°é»˜è®¤å€¼ï¼Œå¹¶è®°å½•é”™è¯¯ä¿¡æ¯ï¼ˆå¦‚`{"tool_error":"API timeout","timestamp":"2024-05-01 10:00:00"}`ï¼‰ã€‚\n\n## ä¸Šä¸€ç¯‡æ–‡ç« \n\n[Docker & Docker Composeéƒ¨ç½²ä¸æ’æŸ¥å¸¸ç”¨å‘½ä»¤æ€»ç»“] \n\n## ä¸‹ä¸€ç¯‡æ–‡ç« \n\n[LangGraphå…¥é—¨æŒ‡å—ï¼šæ„å»ºé•¿æœŸè¿è¡Œçš„æœ‰çŠ¶æ€AIä»£ç†] \n\n[â† è¿”å›åšå®¢åˆ—è¡¨]', 'doi': '', 'published_date': '2025-09-10T00:00:00+00:00', 'pdf_url': '', 'url': 'https://www.ningto.com/blog/2025/langGraph-best-practices-strategies-for-reliable-stateful-ai-agents-2025-09-10', 'source': 'exa_context', 'categories': [], 'keywords': [], 'citations': 0, 'references': [], 'extra': {}}
2026-02-21 20:10:07,568 - __main__ - INFO - handle_search: returned=1
2026-02-21 20:10:07,568 - __main__ - INFO - call_tool payload: source_tool=exa_context_search, result_type=papers, count=1
2026-02-21 20:10:07,568 - __main__ - INFO - call_tool: name=exa_context_search, result_type=papers, count=1
2026-02-21 20:10:07,568 - __main__ - DEBUG - call_tool payload sample: {'paper_id': '', 'title': 'Multi-Agentå…¨é¢çˆ†å‘ï¼ä¸€æ–‡è¯¦è§£å¤šæ™ºèƒ½ä½“æ ¸å¿ƒæ¶æ„åŠLangGraphæ¡†æ¶', 'authors': [], 'abstract': 'Multi-Agentå…¨é¢çˆ†å‘ï¼ä¸€æ–‡è¯¦è§£å¤šæ™ºèƒ½ä½“æ ¸å¿ƒæ¶æ„åŠLangGraphæ¡†æ¶-è…¾è®¯äº‘å¼€å‘è€…ç¤¾åŒº-è…¾è®¯äº‘\n[] \n[è…¾è®¯äº‘å¼€å‘è€…] \n## Multi-Agentå…¨é¢çˆ†å‘ï¼ä¸€æ–‡è¯¦è§£å¤šæ™ºèƒ½ä½“æ ¸å¿ƒæ¶æ„åŠLangGraphæ¡†æ¶\n**å…³æ³¨ä½œè€…\n[*è…¾è®¯äº‘*] \n[*å¼€å‘è€…ç¤¾åŒº*] \n[æ–‡æ¡£] [å»ºè®®åé¦ˆ] [æ§åˆ¶å°] \nç™»å½•/æ³¨å†Œ\n[é¦–é¡µ] \nå­¦ä¹ æ´»åŠ¨ä¸“åŒºåœˆå±‚å·¥å…·[MCPå¹¿åœº![]] \næ–‡ç« /ç­”æ¡ˆ/æŠ€æœ¯å¤§ç‰›æœç´¢**\næœç´¢**å…³é—­**\nå‘å¸ƒè…¾è®¯äº‘å¼€å‘è€…**\n**\n**\n**\n**\n[ç¤¾åŒºé¦–é¡µ] &gt;[ä¸“æ ] &gt;Multi-Agentå…¨é¢çˆ†å‘ï¼ä¸€æ–‡è¯¦è§£å¤šæ™ºèƒ½ä½“æ ¸å¿ƒæ¶æ„åŠLangGraphæ¡†æ¶\n# Multi-Agentå…¨é¢çˆ†å‘ï¼ä¸€æ–‡è¯¦è§£å¤šæ™ºèƒ½ä½“æ ¸å¿ƒæ¶æ„åŠLangGraphæ¡†æ¶\n![ä½œè€…å¤´åƒ] \nè…¾è®¯äº‘å¼€å‘è€…**å…³æ³¨\nå‘å¸ƒäº2025-12-16 14:32:39\nå‘å¸ƒäº2025-12-16 14:32:39\n8991\nä¸¾æŠ¥**æ–‡ç« è¢«æ”¶å½•äºä¸“æ ï¼š[ã€è…¾è®¯äº‘å¼€å‘è€…ã€‘] ã€è…¾è®¯äº‘å¼€å‘è€…ã€‘\néšç€å¤§æ¨¡å‹çš„å¿«é€Ÿå‘å±•ï¼Œæ„å»ºæ™ºèƒ½ä½“å·²æˆä¸ºå¤§æ¨¡å‹åº”ç”¨æœ€åŸºæœ¬çš„èƒ½åŠ›äº†ï¼Œç„¶è€Œï¼Œå•æ™ºèƒ½ä½“åœ¨å¤„ç†å¤æ‚ã€å¤šæ­¥éª¤ä»»åŠ¡æ—¶å¾€å¾€å­˜åœ¨å±€é™æ€§ã€‚ä¸ºäº†åº”å¯¹è¿™ä¸€æŒ‘æˆ˜ï¼Œå¤šæ™ºèƒ½ä½“ç³»ç»Ÿåº”è¿è€Œç”Ÿï¼Œå®ƒé€šè¿‡å¤šä¸ªæ™ºèƒ½ä½“ååŒå·¥ä½œçš„æ–¹å¼ï¼Œå°†å¤æ‚ä»»åŠ¡åˆ†è§£ä¸ºå¤šä¸ªå­ä»»åŠ¡ï¼Œç”±ä¸åŒçš„æ™ºèƒ½ä½“åˆ†åˆ«å¤„ç†ï¼Œæœ€ç»ˆåˆå¹¶ç»“æœå¹¶è¿”å›ã€‚LangGraphä½œä¸ºLangChainç”Ÿæ€ç³»ç»Ÿçš„é‡è¦æ‰©å±•ï¼Œé€šè¿‡å¼•å…¥æœ‰å‘å›¾æ¨¡å‹é‡æ„äº†ä¼ ç»Ÿæ™ºèƒ½ä½“çš„å·¥ä½œæµæ¶æ„ï¼Œå°†å¤æ‚çš„å¤šæ­¥éª¤äº¤äº’å’Œå†³ç­–è¿‡ç¨‹æ¨¡å—åŒ–ï¼Œæ˜¯ç›®å‰ä¸»æµçš„å¤šæ™ºèƒ½ä½“é›†æˆæ¡†æ¶ä¹‹ä¸€ã€‚\nå…³æ³¨è…¾è®¯äº‘å¼€å‘è€…ï¼Œä¸€æ‰‹æŠ€æœ¯å¹²è´§æå‰è§£é”ğŸ‘‡![] \næœ¬æ–‡ä¸»è¦ä»‹ç»å¤šæ™ºèƒ½ä½“é›†æˆæ¡†æ¶LangGraphçš„ç›¸å…³æ¦‚å¿µåŠä½¿ç”¨ï¼Œå…³äºå¤§æ¨¡å‹åº”ç”¨å¼€å‘çš„åŸºæœ¬çš„æµç¨‹å¯ä»¥é˜…è¯»ï¼š[ã€Š] [GitHub 12w Starç¥å™¨ï¼ä¸€æ–‡è¯¦è§£å¤§æ¨¡å‹é›†æˆæ¡†æ¶LangChain] [ã€‹] ï¼Œè¯¦ç»†ä»‹ç»äº†æ„å»ºå¤§æ¨¡å‹åº”ç”¨çš„æ­¥éª¤åŠæ¦‚å¿µï¼ˆæç¤ºè¯æ¨¡ç‰ˆã€è¾“å‡ºè§£æå™¨ã€è®°å¿†ã€å·¥å…·ã€Agentã€RAGç­‰ï¼‰\n## **01ã€LangGraphæ¦‚è¿°**\n1.1 ä»€ä¹ˆæ˜¯LangGraph\nLangGraph æ˜¯LangChain ç”Ÿæ€çš„ä¸€éƒ¨åˆ†ï¼Œä¸“é—¨ç”¨äºæ„å»ºåŸºäºå¤§æ¨¡å‹ï¼ˆLLMï¼‰çš„å¤æ‚ã€æœ‰çŠ¶æ€ã€å¤šæ™ºèƒ½ä½“åº”ç”¨çš„æ¡†æ¶ï¼Œæ ¸å¿ƒæ€æƒ³æ˜¯**å°†åº”ç”¨çš„å·¥ä½œæµç¨‹æŠ½è±¡ä¸ºä¸€ä¸ªæœ‰å‘å›¾ç»“æ„ï¼Œé€šè¿‡èŠ‚ç‚¹å’Œè¾¹æ¥å®šä¹‰ä»»åŠ¡çš„æ‰§è¡Œæ­¥éª¤å’Œé€»è¾‘æµï¼Œ**ä»è€Œæä¾›äº†è¿œè¶…ä¼ ç»Ÿçº¿æ€§é“¾å¼è°ƒç”¨çš„çµæ´»æ€§å’Œæ§åˆ¶åŠ›ã€‚ç›¸æ¯”ä¼ ç»Ÿçš„çº¿æ€§æ‰§è¡Œæ¨¡å¼ï¼Œ**LangGraph æ”¯æŒæ¡ä»¶åˆ†æ”¯ã€å¾ªç¯ã€å¹¶è¡Œç­‰å¤æ‚æ§åˆ¶æµï¼Œèƒ½å¤Ÿå®ç°çŠ¶æ€æŒä¹…åŒ–ã€æ–­ç‚¹ç»­è·‘ã€æ—¶é—´æ—…è¡Œã€äººæœºåä½œç­‰é«˜çº§åŠŸèƒ½ï¼Œå¹¶æä¾›äº†å¤šæ™ºèƒ½ä½“åä½œã€å±‚çº§æ¶æ„ç­‰å¤šç§æ¶æ„æ¨¡å¼ã€‚**åœ¨å®é™…åº”ç”¨ä¸­ï¼ŒLangGraphå·²æˆåŠŸåº”ç”¨äºæ™ºèƒ½å®¢æœã€è‡ªåŠ¨åŒ–è¿ç»´ã€ç ”ç©¶ Agent ç­‰åœºæ™¯ï¼Œå±•ç°å‡ºå“è¶Šçš„é€‚åº”æ€§å’Œæ‰©å±•æ€§ã€‚**LangGraphåœ¨Githubä¸Šçš„çƒ­åº¦å˜åŒ–**\n![] \n1.2 ä¸ºä»€ä¹ˆä½¿ç”¨LangGraph\nLangGraph ç›¸æ¯”ä¼ ç»Ÿçš„çº¿æ€§æ‰§è¡Œæ¨¡å¼å…·æœ‰æ˜¾è‘—çš„æŠ€æœ¯ä¼˜åŠ¿ã€‚1. LangGraph æä¾›äº†å¼ºå¤§çš„çŠ¶æ€ç®¡ç†æœºåˆ¶ï¼Œå…è®¸Agent åœ¨ä¸åŒèŠ‚ç‚¹ä¹‹é—´ä¼ é€’å’Œç»´æŠ¤ä¿¡æ¯ï¼Œä»è€Œå®ç°é•¿æœŸçš„è®°å¿†å’Œå¤šè½®å¯¹è¯èƒ½åŠ›ã€‚è¿™ç§é›†ä¸­å¼çš„çŠ¶æ€ç®¡ç†é¿å…äº†ä¼ ç»Ÿæ–¹æ³•ä¸­çŠ¶æ€åˆ†æ•£åœ¨å¤šä¸ªå˜é‡ä¸­çš„é—®é¢˜ï¼Œæé«˜äº†ç³»ç»Ÿçš„å¯ç»´æŠ¤æ€§å’Œå¯è§‚æµ‹æ€§ã€‚2. é€šè¿‡å®šä¹‰èŠ‚ç‚¹å’Œè¾¹ï¼Œå¯ä»¥ç²¾ç¡®æ§åˆ¶Agent çš„æ‰§è¡Œé€»è¾‘ï¼ŒåŒ…æ‹¬æ¡ä»¶åˆ†æ”¯ã€å¾ªç¯å’Œå¹¶è¡Œæ‰§è¡Œç­‰3. LangGraph èƒ½å¤Ÿæ— ç¼é›†æˆå„ç§å¤–éƒ¨å·¥å…·ï¼ˆå¦‚æœç´¢å¼•æ“ã€æ•°æ®åº“ã€API ç­‰ï¼‰ï¼Œè®©Agent èƒ½å¤Ÿè·å–å®æ—¶ä¿¡æ¯ã€æ‰§è¡Œç‰¹å®šæ“ä½œï¼Œæå¤§åœ°æ‰©å±•äº†LLM çš„èƒ½åŠ›è¾¹ç•Œã€‚4. å›¾ç»“æ„ä½¿å¾—Agent çš„è¿è¡Œè·¯å¾„æ¸…æ™°å¯è§ï¼Œä¾¿äºç†è§£Agent çš„å†³ç­–è¿‡ç¨‹ï¼Œå¹¶åœ¨å‡ºç°é—®é¢˜æ—¶è¿›è¡Œå¿«é€Ÿå®šä½å’Œè°ƒè¯•ã€‚5. æ¨¡å—åŒ–ä¸å¯å¤ç”¨æ€§ã€‚æ¯ä¸ªèŠ‚ç‚¹éƒ½å¯ä»¥æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„ã€å¯å¤ç”¨çš„ç»„ä»¶ï¼Œç»´æŠ¤æ€§é«˜ä¸”æ˜“äºæ‰©å±•ã€‚é€šè¿‡å­å›¾æœºåˆ¶ï¼Œå¤æ‚çš„å·¥ä½œæµå¯ä»¥è¢«åˆ†è§£ä¸ºå¤šä¸ªå¯ç‹¬ç«‹å¼€å‘å’Œæµ‹è¯•çš„æ¨¡å—ï¼Œæé«˜äº†å¼€å‘å’Œæµ‹è¯•æ•ˆç‡ã€‚1.3 å®‰è£…ä½¿ç”¨å®‰è£…LangGraph\nä»£ç è¯­è¨€ï¼šjavascript\nå¤åˆ¶```\n`pip install -U langgraph`\n```\nä½¿ç”¨LangGraphåˆ›å»ºä¸€ä¸ªç®€å•çš„Agent\nä»£ç è¯­è¨€ï¼šjavascript\nå¤åˆ¶```\n`def get\\_weather(city: str) -&gt;&gt; str:\n&quot;&quot;&quot;&quot;&quot;&quot;è·å–æŒ‡å®šåŸå¸‚çš„å¤©æ°”ä¿¡æ¯ã€‚\nArgs:\ncity: åŸå¸‚åç§°Returns:\nè¿”å›è¯¥åŸå¸‚çš„å¤©æ°”æè¿°&quot;&quot;&quot;&quot;&quot;&quot;\nreturn f&quot;&quot;ä»Šå¤©{city}æ˜¯æ™´å¤©&quot;&quot;\n# åˆ›å»ºæ¨¡å‹model = ChatOpenAI(\nmodel\\_name=model\\_name,\nbase\\_url=base\\_url,\napi\\_key=api\\_key\n)\n# ä½¿ç”¨LangGraphæä¾›çš„APIåˆ›å»ºAgent\nagent = create\\_react\\_agent(\nmodel=model, # æ·»åŠ æ¨¡å‹tools=[get\\_weather], # æ·»åŠ å·¥å…·prompt=&quot;&quot;ä½ æ˜¯ä¸€ä¸ªå¤©æ°”åŠ©æ‰‹&quot;&quot;\n)\nhuman\\_message = HumanMessage(content=&quot;&quot;ä»Šå¤©æ·±åœ³å¤©æ°”æ€ä¹ˆæ ·ï¼Ÿ&quot;&quot;)\nresponse = agent.invoke(\n{&quot;&quot;messages&quot;&quot;: [human\\_message]}\n)\nprint(response)`\n```\n![] \n**è¿è¡Œæ¨¡å¼ï¼š**Agentå¯ä»¥é€šè¿‡ä¸¤ç§ä¸»è¦æ¨¡å¼æ‰§è¡Œ\n1. **åŒæ­¥ï¼š**ä½¿ç”¨ .invoke() æˆ–.stream()\n2. **å¼‚æ­¥ï¼š**ä½¿ç”¨ await .ainvoke() æˆ–async for é…åˆ.astream()\n**æœ€å¤§è¿­ä»£æ¬¡æ•°ï¼š**ä¸ºäº†é¿å…Agentæ— é™å¾ªç¯æ‰§è¡Œï¼Œå¯ä»¥è®¾ç½®ä¸€ä¸ªé€’å½’é™åˆ¶\nä»£ç è¯­è¨€ï¼šjavascript\nå¤åˆ¶```\n`response = agent.invoke(\n{&quot;&quot;messages&quot;&quot;: [{&quot;&quot;role&quot;&quot;: &quot;&quot;user&quot;&quot;, &quot;&quot;content&quot;&quot;: &quot;&quot;é¢„å®šä¸€ä¸ªæ·±åœ³åˆ°åŒ—äº¬çš„æœºç¥¨&quot;&quot;}]},\n{&quot;&quot;recursion\\_limit&quot;&quot;: 10} # æŒ‡å®šæœ€å¤§è¿­ä»£æ¬¡æ•°)`\n```\n## **02ã€LangGraphæ ¸å¿ƒ**\n2.1 Graphï¼ˆå›¾ï¼‰\n![]<image_link>\nå›¾æ˜¯ä¸€ç§ç”±èŠ‚ç‚¹å’Œè¾¹ç»„æˆçš„ç”¨äºæè¿°èŠ‚ç‚¹ä¹‹é—´å…³ç³»çš„æ•°æ®ç»“æ„ï¼Œåˆ†ä¸ºæ— å‘å›¾å’Œæœ‰å‘å›¾ï¼Œæœ‰å‘å›¾æ˜¯å¸¦æœ‰æ–¹å‘çš„å›¾ã€‚LangGraphé€šè¿‡æœ‰å‘å›¾å®šä¹‰AIå·¥ä½œæµä¸­çš„æ‰§è¡Œæ­¥éª¤å’Œæ‰§è¡Œé¡ºåºï¼Œä»è€Œå®ç°å¤æ‚ã€æœ‰çŠ¶æ€ã€å¯å¾ªç¯çš„åº”ç”¨ç¨‹åºé€»è¾‘ã€‚\n2.2 LangGraphæ ¸å¿ƒè¦ç´ ï¼ˆStateã€Edgeã€Nodeï¼‰\n**1ã€Stateï¼ˆçŠ¶æ€ï¼‰**\nåœ¨LangGraphä¸­ï¼Œ**Stateæ˜¯ä¸€ä¸ªè´¯ç©¿æ•´ä¸ªå·¥ä½œæµæ‰§è¡Œè¿‡ç¨‹ä¸­çš„å…±äº«æ•°æ®çš„ç»“æ„**ï¼Œä»£è¡¨å½“å‰å¿«ç…§ï¼Œå®ƒå­˜å‚¨äº†ä»å·¥ä½œæµå¼€å§‹åˆ°ç»“æŸçš„æ‰€æœ‰å¿…è¦çš„ä¿¡æ¯ï¼ˆå†å²å¯¹è¯ã€æ£€ç´¢åˆ°çš„æ–‡æ¡£ã€å·¥å…·æ‰§è¡Œç»“æœç­‰ï¼‰ï¼Œåœ¨å„ä¸ªèŠ‚ç‚¹ä¸­å…±äº«ï¼Œä¸”æ¯ä¸ªèŠ‚ç‚¹éƒ½å¯ä»¥ä¿®æ”¹ã€‚Stateå¯ä»¥æ˜¯TypedDictç±»å‹ï¼Œä¹Ÿå¯ä»¥æ˜¯pydanticä¸­çš„BaseModelç±»å‹ã€‚\nä»£ç è¯­è¨€ï¼šjavascript\nå¤åˆ¶```\n`# å®šä¹‰çŠ¶æ€class GraphState(TypedDict):\nprocess\\_data: dict # é»˜è®¤æ›´æ–°ç­–ç•¥ä¸ºæ›¿æ¢ï¼ˆåç»­ä¼šè®²æ›´æ–°ç­–ç•¥ï¼‰# åˆ›å»ºä¸€ä¸ªçŠ¶æ€å›¾ï¼Œå¹¶æŒ‡å®šçŠ¶æ€graph = StateGraph(GraphState)`\n```\n**2ã€Nodeï¼ˆèŠ‚ç‚¹ï¼‰**\nNodeæ˜¯LangGraphä¸­çš„ä¸€ä¸ªåŸºæœ¬å¤„ç†å•å…ƒï¼Œä»£è¡¨å·¥ä½œæµä¸­çš„ä¸€ä¸ªæ“ä½œæ­¥éª¤ï¼Œå¯ä»¥æ˜¯ä¸€ä¸ªAgentã€è°ƒç”¨å¤§æ¨¡å‹ã€å·¥å…·æˆ–ä¸€ä¸ªå‡½æ•°ï¼ˆè¯´ç™½äº†å°±æ˜¯ç»‘å®šä¸€ä¸ªå‡½æ•°ï¼Œå…·ä½“é€»è¾‘å¯ä»¥å¹²ä»»ä½•äº‹æƒ…ï¼‰ã€‚\n**Nodeçš„è®¾è®¡åŸåˆ™ï¼š**\n* **å•ä¸€èŒè´£åŸåˆ™ï¼š**æ¯ä¸ªèŠ‚ç‚¹åº”è¯¥åªè´Ÿè´£ä¸€é¡¹èŒè´£ï¼Œé¿å…åŠŸèƒ½è¿‡äºå¤æ‚\n* **æ— çŠ¶æ€è®¾è®¡ï¼š**èŠ‚ç‚¹æœ¬èº«ä¸åº”è¯¥ä¿å­˜çŠ¶æ€ï¼Œæ‰€æœ‰æ•°æ®éƒ½é€šè¿‡è¾“å…¥çŠ¶æ€ä¼ é€’\n* **å¹‚ç­‰æ€§ï¼š**ç›¸åŒçš„è¾“å…¥åº”è¯¥äº§ç”Ÿç›¸åŒçš„è¾“å‡ºï¼Œç¡®ä¿å¯é‡è¯•æ€§\n* **å¯æµ‹è¯•æ€§ï¼š**èŠ‚ç‚¹é€»è¾‘åº”è¯¥æ˜“äºå•å…ƒæµ‹è¯•\nå¦‚ä¸‹æ˜¯æ·»åŠ ä¸€ä¸ªèŠ‚ç‚¹çš„ä¾‹å­ï¼šä»£ç è¯­è¨€ï¼šjavascript\nå¤åˆ¶```\n`# å®šä¹‰ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå…¥å‚ä¸ºstate\ndef input\\_node(state: GraphState) -&gt;&gt; GraphState:\nprint(state)\nreturn {&quot;&quot;process\\_data&quot;&quot;: {&quot;&quot;input&quot;&quot;: &quot;&quot;input\\_value&quot;&quot;}}\n# å®šä¹‰å¸¦å‚æ•°çš„nodeèŠ‚ç‚¹\ndef process\\_node(state: dict, param1: int, param2: str) -&gt;&gt; dict:\nprint(state, param1, param2)\nreturn {&quot;&quot;process\\_data&quot;&quot;: {&quot;&quot;process&quot;&quot;: &quot;&quot;process\\_value&quot;&quot;}}\ngraph = StateGraph(GraphState)\n# æ·»åŠ inpuèŠ‚ç‚¹\ngraph.add\\_node(&quot;&quot;input&quot;&quot;, input\\_node)\n# ç»™process\\_nodeèŠ‚ç‚¹ç»‘å®šå‚æ•°\nprocess\\_with\\_params = partial(process\\_node, param1=100, param2=&quot;&quot;test&quot;&quot;)\n# æ·»åŠ å¸¦å‚æ•°çš„nodeèŠ‚ç‚¹\ngraph.add\\_node(&quot;&quot;process&quot;&quot;, process\\_with\\_params)`\n```\n**ç‰¹æ®ŠèŠ‚ç‚¹ï¼š**\nåœ¨LangGraphä¸­æœ‰ä¸¤ä¸ªç‰¹æ®Šçš„èŠ‚ç‚¹ \\_\\_START\\_\\_ ï¼ˆå¼€å§‹èŠ‚ç‚¹ï¼‰å’Œ\\_\\_END\\_\\_ï¼ˆç»“æŸèŠ‚ç‚¹ï¼‰\n**\\_\\_START\\_\\_èŠ‚ç‚¹ï¼š**å¼€å§‹èŠ‚ç‚¹ï¼Œç¡®å®šåº”è¯¥é¦–å…ˆè°ƒç”¨å“ªäº›èŠ‚ç‚¹ã€‚\nä»£ç è¯­è¨€ï¼šjavascript\nå¤åˆ¶```\n`from langgraph.graph import START\n# ç¬¬ä¸€ä¸ªæ‰§è¡Œçš„èŠ‚ç‚¹æ˜¯node\\_start\ngraph.add\\_edge(START, &quot;&quot;node\\_start&quot;&quot;)`\n```\nä¹Ÿå¯ä»¥é€šè¿‡graph.set\\_entry\\_point(&quot;&quot;node\\_start&quot;&quot;) å‡½æ•°è®¾ç½®èµ·å§‹èŠ‚ç‚¹ï¼Œç­‰ä»·äºgraph.add\\_edge(START, &quot;&quot;node\\_start&quot;&quot;)\n**\\_\\_END\\_\\_èŠ‚ç‚¹ï¼š**ç»ˆæ­¢èŠ‚ç‚¹ï¼Œè¡¨ç¤ºåç»­æ²¡æœ‰å…¶ä»–èŠ‚ç‚¹å¯ä»¥ç»§ç»­æ‰§è¡Œäº†ï¼ˆéå¿…é¡»ï¼‰ã€‚\nä»£ç è¯­è¨€ï¼šjavascript\nå¤åˆ¶```\n`from langgraph.graph import END\n# node\\_end èŠ‚ç‚¹æ‰§è¡Œåï¼Œæ²¡æœ‰åç»­èŠ‚ç‚¹äº†graph.add\\_edge(&quot;&quot;node\\_a&quot;&quot;, END)`\n```\nä¹Ÿå¯ä»¥é€šè¿‡graph.set\\_finish\\_point(&quot;&quot;node\\_end&quot;&quot;) å‡½æ•°è®¾ç½®ç»“æŸèŠ‚ç‚¹ï¼Œç­‰ä»·äºgraph.add\\_edge(&quot;&quot;node\\_start&quot;&quot;ï¼Œ END)\n**é”™è¯¯å¤„ç†å’Œé‡è¯•æœºåˆ¶ï¼š**\nLangGraphè¿˜æä¾›äº†é”™è¯¯å¤„ç†å’Œé‡è¯•æœºåˆ¶æ¥æŒ‡å®šé‡è¯•æ¬¡æ•°ã€é‡è¯•é—´éš”ã€é‡è¯•å¼‚å¸¸ç­‰ï¼Œç”¨äºä¿è¯ç³»ç»Ÿçš„å¯é æ€§ã€‚\nä»£ç è¯­è¨€ï¼šjavascript\nå¤åˆ¶```\n`# é‡è¯•ç­–ç•¥retry\\_policy = RetryPolicy(\nmax\\_attempts=3, # æœ€å¤§é‡è¯•æ¬¡æ•°initial\\_interval=1, # åˆå§‹é—´éš”jitter=True, # æŠ–åŠ¨ï¼ˆæ·»åŠ éšæœºæ€§é¿å…é‡è¯•é£æš´ï¼‰backoff\\_factor=2, # é€€é¿ä¹˜æ•°ï¼ˆæ¯æ¬¡é‡è¯•é—´éš”æ—¶é—´çš„å¢é•¿å€æ•°ï¼‰retry\\_on=[RequestException, Timeout] # åªé‡è¯•è¿™äº›å¼‚å¸¸)\ngraph.add\\_node(&quot;&quot;process&quot;&quot;, process\\_node, retry=retry\\_policy)`\n```\n**èŠ‚ç‚¹ç¼“å­˜ï¼š**\nLangGraph æ”¯æŒæ ¹æ®èŠ‚ç‚¹è¾“å…¥å¯¹èŠ‚ç‚¹è¿›è¡Œç¼“å­˜ï¼Œç”¨äºåŠ å¿«èŠ‚ç‚¹çš„å“åº”é€Ÿåº¦1. **ç¼“å­˜é”®ä¸å‘½ä¸­ï¼š**å½“ä¸€ä¸ªèŠ‚ç‚¹å¼€å§‹æ‰§è¡Œæ—¶ï¼Œç³»ç»Ÿä¼šä½¿ç”¨å…¶é…ç½®çš„ key\\_func æ ¹æ®å½“å‰èŠ‚ç‚¹çš„è¾“å…¥æ•°æ®ç”Ÿæˆä¸€ä¸ªå”¯ä¸€çš„é”®ã€‚LangGraph ä¼šæ£€æŸ¥ç¼“å­˜ä¸­æ˜¯å¦å­˜åœ¨è¿™ä¸ªé”®ã€‚å¦‚æœå­˜åœ¨ï¼ˆç¼“å­˜å‘½ä¸­ï¼‰ï¼Œåˆ™ç›´æ¥è¿”å›ä¹‹å‰å­˜å‚¨çš„ç»“æœï¼Œè·³è¿‡è¯¥èŠ‚ç‚¹çš„å®é™…æ‰§è¡Œã€‚å¦‚æœä¸å­˜åœ¨ï¼ˆç¼“å­˜æœªå‘½ä¸­ï¼‰ï¼Œåˆ™æ­£å¸¸æ‰§è¡ŒèŠ‚ç‚¹å‡½æ•°ï¼Œå¹¶å°†ç»“æœä¸ç¼“å­˜é”®å…³è”åå­˜å…¥ç¼“å­˜ã€‚2. **ç¼“å­˜æœ‰æ•ˆæœŸï¼š**ttl å‚æ•°èƒ½æ§åˆ¶ç¼“å­˜çš„æœ‰æ•ˆæœŸã€‚ä¾‹å¦‚ï¼Œå¯¹äºä¾èµ–å®æ—¶æ•°æ®çš„å¤©æ°”æŸ¥è¯¢èŠ‚ç‚¹ï¼Œå¯ä»¥è®¾ç½®è¾ƒçŸ­çš„ttlï¼ˆå¦‚60ç§’ï¼‰ã€‚è€Œå¯¹äºå¤„ç†é™æ€ä¿¡æ¯æˆ–å˜åŒ–ä¸é¢‘ç¹æ•°æ®çš„èŠ‚ç‚¹ï¼Œåˆ™å¯ä»¥è®¾ç½®è¾ƒé•¿çš„ ttlç”šè‡³ä¸è®¾ç½®ï¼ˆNoneï¼‰ï¼Œè®©ç¼“å­˜æ°¸ä¹…æœ‰æ•ˆï¼Œç›´åˆ°æ‰‹åŠ¨æ¸…é™¤\nä»£ç è¯­è¨€ï¼šjavascript\nå¤åˆ¶```\n`class State(TypedDict):\nx: int\nresult: int\nbuilder = StateGraph(State)\ndef expensive\\_node(state: State) -&gt;&gt; dict[str, int]:\n# æ¨¡æ‹Ÿè€—æ—¶time.sleep(2)\nreturn {&quot;&quot;result&quot;&quot;: state[&quot;&quot;x&quot;&quot;] \\* 2}\n#æ·»åŠ èŠ‚ç‚¹ï¼Œå¹¶æŒ‡å®šç¼“å­˜ç­–ç•¥\nbuilder.add\\_node(&quot;&quot;expensive\\_node&quot;&quot;, expensive\\_node, cache\\_policy=CachePolicy(ttl=3))\nbuilder.set\\_entry\\_point(&quot;&quot;expensive\\_node&quot;&quot;)\nbuilder.set\\_finish\\_point(&quot;&quot;expensive\\_node&quot;&quot;)\ngraph = builder.compile(cache=InMemoryCache())`\n```\n**3ã€Edgeï¼ˆè¾¹ï¼‰**\nEdgeå®šä¹‰äº†èŠ‚ç‚¹ä¹‹é—´çš„è¿æ¥å’Œæ‰§è¡Œé¡ºåºï¼Œä»¥åŠä¸åŒèŠ‚ç‚¹ä¹‹é—´æ˜¯å¦‚ä½•é€šè®¯çš„ï¼Œä¸€ä¸ªèŠ‚ç‚¹å¯ä»¥æœ‰å¤šä¸ªå‡ºè¾¹ï¼ˆæŒ‡å‘å¤šä¸ªèŠ‚ç‚¹ï¼‰ï¼Œå¤šä¸ªèŠ‚ç‚¹ä¹Ÿå¯ä»¥æŒ‡å‘åŒä¸€ä¸ªèŠ‚ç‚¹ï¼ˆMap-Reduceï¼‰ï¼Œå¦‚ä¸‹æ˜¯æ·»åŠ è¾¹çš„ä»£ç ï¼š\nä»£ç è¯­è¨€ï¼šjavascript\nå¤åˆ¶```\n`# æ·»åŠ å›ºå®šè¾¹ï¼Œæ‰§è¡Œé¡ºåºï¼šstart -&gt;&gt; input -&gt;&gt; process -&gt;&gt; output -&gt;&gt; end\ngraph.add\\_edge(START, &quot;&quot;input&quot;&quot;)\ngraph.add\\_edge(&quot;&quot;input&quot;&quot;, &quot;&quot;process&quot;&quot;)\ngraph.add\\_edge(&quot;&quot;process&quot;&quot;, &quot;&quot;output&quot;&quot;)\ngraph.add\\_edge(&quot;&quot;output&quot;&quot;, END)\n# ç¼–è¯‘å›¾ï¼Œä¿è¯ç”Ÿæˆçš„å›¾æ˜¯æ­£ç¡®çš„ï¼Œå¦‚æœæ·»åŠ äº†è¾¹ï¼Œæ²¡æ·»åŠ èŠ‚ç‚¹ï¼Œä¼šæŠ¥é”™app = graph.compile()\napp.invoke({})`\n```\n**4ã€æ„å»ºä¸€ä¸ªå®Œæ•´çš„å›¾**\nå›¾çš„æ„å»ºæµç¨‹ï¼š1ã€åˆå§‹åŒ–ä¸€ä¸ªStateGraphå®ä¾‹ã€‚2ã€æ·»åŠ èŠ‚ç‚¹ã€‚3ã€å®šä¹‰è¾¹ï¼Œå°†æ‰€æœ‰çš„èŠ‚ç‚¹è¿æ¥èµ·æ¥ã€‚4ã€è®¾ç½®ç‰¹æ®ŠèŠ‚ç‚¹ï¼Œå…¥å£å’Œå‡ºå£ï¼ˆå¯é€‰ï¼‰ã€‚5ã€ç¼–è¯‘å›¾ã€‚6ã€æ‰§è¡Œå·¥ä½œæµã€‚\nä»£ç è¯­è¨€ï¼šjavascript\nå¤åˆ¶```\n`# å®šä¹‰çŠ¶æ€class GraphState(TypedDict):\nprocess\\_data: dict\ndef input\\_node(state: GraphState) -&gt;&gt; GraphState:\nprint(state)\nreturn {&quot;&quot;process\\_data&quot;&quot;: {&quot;&quot;input&quot;&quot;: &quot;&quot;input\\_value&quot;&quot;}}\ndef output\\_node(state: GraphState) -&gt;&gt; GraphState:\nprint(state)\nreturn {&quot;&quot;process\\_data&quot;&quot;: {&quot;&quot;output&quot;&quot;: &quot;&quot;output\\_value&quot;&quot;}}\ndef process\\_node(state: dict) -&gt;&gt; dict:\nprint(state)\nreturn {&quot;&quot;process\\_data&quot;&quot;: {&quot;&quot;process&quot;&quot;: &quot;&quot;process\\_value&quot;&quot;}}\n# åˆ›å»ºä¸€ä¸ªçŠ¶æ€å›¾ï¼Œå¹¶æŒ‡å®šçŠ¶æ€graph = StateGraph(GraphState)\n# æ·»åŠ inputã€processã€outputèŠ‚ç‚¹\ngraph.add\\_node(&quot;&quot;input&quot;&quot;, input\\_node)\ngraph.add\\_node(&quot;&quot;process&quot;&quot;, process\\_node)\ngraph.add\\_node(&quot;&quot;output&quot;&quot;, output\\_node)\n# æ·»åŠ å›ºå®šè¾¹ï¼Œæ‰§è¡Œé¡ºåºï¼šstart -&gt;&gt; input -&gt;&gt; process -&gt;&gt; output -&gt;&gt; end\ngraph.add\\_edge(START, &quot;&quot;input&quot;&quot;)\ngraph.add\\_edge(&quot;&quot;input&quot;&quot;, &quot;&quot;process&quot;&quot;)\ngraph.add\\_edge(&quot;&quot;process&quot;&quot;, &quot;&quot;output&quot;&quot;)\ngraph.add\\_edge(&quot;&quot;output&quot;&quot;, END)\n# ç¼–è¯‘å›¾ï¼Œä¿è¯ç”Ÿæˆçš„å›¾æ˜¯æ­£ç¡®çš„ï¼Œå¦‚æœæ·»åŠ äº†è¾¹ï¼Œæ²¡æ·»åŠ èŠ‚ç‚¹ï¼Œä¼šæŠ¥é”™app = graph.compile()# æ‰§è¡Œapp.invoke({})`\n```\n![]<image_link>\n2.3 çŠ¶æ€åˆå¹¶ç­–ç•¥ï¼ˆReducersï¼‰\nLangGraphå·¥ä½œæµä¸­ï¼ŒStateä½œä¸ºè´¯ç©¿æ•´ä¸ªèŠ‚ç‚¹ä¹‹é—´å…±äº«æ•°æ®çš„ç»“æ„ï¼Œæ¯ä¸€ä¸ªèŠ‚ç‚¹éƒ½å¯ä»¥è¯»å–å½“å‰Stateçš„æ•°æ®ï¼Œå¹¶ä¸”å¯ä»¥æ›´æ–°ã€‚**Reduceræ˜¯å®šä¹‰å¤šä¸ªèŠ‚ç‚¹ä¹‹é—´Stateå¦‚ä½•æ›´æ–°çš„ï¼ˆè¦†ç›–ã€åˆå¹¶ã€æ·»åŠ ç­‰ï¼‰ã€‚**\n**1ã€ç›´æ¥è¦†ç›–ï¼š**å¦‚æœæ²¡æœ‰ä¸ºçŠ¶æ€å­—æ®µæŒ‡å®š Reducerï¼Œé»˜è®¤ä¼šè¦†ç›–æ›´æ–°ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåæ‰§è¡Œçš„èŠ‚ç‚¹è¿”å›çš„å€¼ä¼šç›´æ¥è¦†ç›–å…ˆæ‰§è¡ŒèŠ‚ç‚¹çš„å€¼ï¼Œå³ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„Stateæ•°æ®æ˜¯ä¸Šä¸€ä¸ªèŠ‚ç‚¹çš„è¿”å›ã€‚\nä»£ç è¯­è¨€ï¼šjavascript\nå¤åˆ¶```\n`class OverrideState(TypedDict):\nprocess\\_data : dict # æœªæŒ‡å®šåˆå¹¶ç­–ç•¥ï¼Œé»˜è®¤è¦†ç›–ï¼Œä¸Šä¸€ä¸ªèŠ‚ç‚¹çš„è¿”å›æ˜¯ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„å€¼`\n```\n**2ã€Annotatedï¼šä½¿ç”¨ç±»å‹æ³¨è§£æŒ‡å®šåˆå¹¶ç­–ç•¥**\nä»£ç è¯­è¨€ï¼šjavascript\nå¤åˆ¶```\n`class AddState(TypedDict):\ndata\\_int: Annotated[int, add] # æ•°å­—ç›¸åŠ data\\_list: Annotated[list, add] # åˆå¹¶ä¸¤ä¸ªåˆ—è¡¨data\\_str: Annotated[str, add] # å­—ç¬¦ä¸²æ‹¼æ¥def add\\_node1(state: AddState) -&gt;&gt; AddState:\nprint(state)\nreturn {&quot;&quot;data\\_int&quot;&quot;: 1, &quot;&quot;data\\_list&quot;&quot;: [1], &quot;&quot;data\\_str&quot;&quot;: &quot;&quot;hello &quot;&quot;}\ndef add\\_node2(state: AddState) -&gt;&gt; AddState:\nprint(state)\nreturn {&quot;&quot;data\\_int&quot;&quot;: 2, &quot;&quot;data\\_list&quot;&quot;: [2], &quot;&quot;data\\_str&quot;&quot;: &quot;&quot;world&quot;&quot;}`\n```\n**3ã€å†…ç½®Reducerï¼šadd\\_messagesï¼ˆæ¶ˆæ¯åˆ—è¡¨åˆå¹¶ï¼‰**\nLangGraphæä¾›çš„ä¸“ç”¨Reducerå‡½æ•°ï¼Œèƒ½æ™ºèƒ½çš„åˆå¹¶æ¶ˆæ¯åˆ—è¡¨ï¼Œä¸åªæ˜¯ç®€å•çš„è¿½åŠ ï¼Œadd\\_messagesèƒ½å¤Ÿä¿è¯æ¶ˆæ¯åˆ—è¡¨æ­£ç¡®è¢«ç´¯è®¡ï¼Œå¸¸ç”¨åœ¨å¤šè½®å¯¹è¯ç³»ç»Ÿä¸­ï¼Œä¸»è¦é€»è¾‘åŒ…æ‹¬ï¼š\n* **è¿½åŠ æ–°æ¶ˆæ¯ï¼š**å¦‚æœæ–°æ¶ˆæ¯çš„ ID ä¸åœ¨ç°æœ‰åˆ—è¡¨ä¸­ï¼Œåˆ™å°†å…¶è¿½åŠ åˆ°åˆ—è¡¨æœ«å°¾ã€‚* **è¦†ç›–æ—§æ¶ˆæ¯ï¼š**å¦‚æœæ–°æ¶ˆæ¯çš„ ID ä¸åˆ—è¡¨ä¸­æŸæ¡ç°æœ‰æ¶ˆæ¯çš„ID ç›¸åŒï¼Œåˆ™ç”¨æ–°æ¶ˆæ¯æ›¿æ¢æ‰æ—§æ¶ˆæ¯ã€‚ç”¨äºå¤„ç†å·¥å…·è°ƒç”¨ä¸­é—´ç»“æœæˆ–æ›´æ–°æµå¼ç”Ÿæˆçš„ä¸´æ—¶æ¶ˆæ¯ã€‚* **è‡ªåŠ¨ç±»å‹è½¬æ¢ï¼š**å¦‚æœä¼ å…¥ä¸€ä¸ªå­—ç¬¦ä¸²ï¼ˆå¦‚ &quot;&quot;Hello World&quot;&quot;ï¼‰ï¼Œadd\\_messagesä¼šè‡ªåŠ¨å°†å…¶è½¬æ¢ä¸ºHumanMessageï¼ˆç”¨æˆ·æ¶ˆæ¯ï¼‰\nä»£ç è¯­è¨€ï¼šjavascript\nå¤åˆ¶```\n`class MessageState(TypedDict):\n# æ¶ˆæ¯åˆ—è¡¨,ä½¿ç”¨add\\_messagesåˆå¹¶æ¶ˆæ¯åˆ—è¡¨\nmessages: Annotated[list,', 'doi': '', 'published_date': '2025-12-16T00:00:00+00:00', 'pdf_url': '', 'url': 'https://cloud.tencent.com/developer/article/2601752', 'source': 'exa_context', 'categories': [], 'keywords': [], 'citations': 0, 'references': [], 'extra': {}}
2026-02-21 20:10:07,619 - __main__ - INFO - handle_search: returned=1
2026-02-21 20:10:07,619 - __main__ - INFO - call_tool payload: source_tool=exa_context_search, result_type=papers, count=1
2026-02-21 20:10:07,619 - __main__ - INFO - call_tool: name=exa_context_search, result_type=papers, count=1
2026-02-21 20:10:07,620 - __main__ - DEBUG - call_tool payload sample: {'paper_id': '', 'title': 'Multi-Agentç³»ç»Ÿæ„å»ºåˆæ¢ï¼šåŸºäºLangGraphçš„é•¿çŸ­æœŸè®°å¿†ç®¡ç†å®è·µæŒ‡å—', 'authors': [], 'abstract': 'Multi-Agentç³»ç»Ÿæ„å»ºåˆæ¢ï¼šåŸºäºLangGraphçš„é•¿çŸ­æœŸè®°å¿†ç®¡ç†å®è·µæŒ‡å— - çŸ¥ä¹[] \n\u200b[ç›´ç­”] \nåˆ‡æ¢æ¨¡å¼ç™»å½•/æ³¨å†Œ\n# Multi-Agentç³»ç»Ÿæ„å»ºåˆæ¢ï¼šåŸºäºLangGraphçš„é•¿çŸ­æœŸè®°å¿†ç®¡ç†å®è·µæŒ‡å—\n[![è…¾è®¯æŠ€æœ¯å·¥ç¨‹]] \n[è…¾è®¯æŠ€æœ¯å·¥ç¨‹] [\u200b![]] \nç¼–ç¨‹è¯é¢˜ä¸‹çš„ä¼˜ç§€ç­”ä¸»ä½œè€…ï¼šadacyang\n> å¦‚ä½•è®©AIæ™ºèƒ½ä½“ï¼ˆAgentï¼‰åƒäººç±»ä¸€æ ·æ‹¥æœ‰æŒä¹…çš„è®°å¿†ï¼Œä»è€Œåœ¨å¤æ‚çš„è¿ç»­ä»»åŠ¡ä¸­ä¿æŒä¸Šä¸‹æ–‡æ„ŸçŸ¥å’Œæ·±åº¦ç†è§£ï¼Ÿè¿™å·²æˆä¸ºæ„å»ºé«˜çº§æ™ºèƒ½ä½“çš„æ ¸å¿ƒæŒ‘æˆ˜ã€‚æœ¬æ–‡å°†æ·±å…¥æ¢è®¨Agent Memoryçš„æ ¸å¿ƒæ¦‚å¿µï¼Œå¹¶èšç„¦äº\n> LangGraph\n> æ¡†æ¶ä¸‹çš„é•¿çŸ­æœŸè®°å¿†å®ç°ï¼Œè¯¦è§£çŸ­æœŸä¼šè¯ä¸é•¿æœŸçŸ¥è¯†çš„å­˜å‚¨ã€ç®¡ç†ã€è¯­ä¹‰æ£€ç´¢ç­‰æŠ€å·§ã€‚æ›´è¿›ä¸€æ­¥åœ°ï¼Œæˆ‘ä»¬å°†é€šè¿‡ä¸€ä¸ªå¼•å…¥> MCPåè®®\n> çš„å®æˆ˜æ¡ˆä¾‹ï¼Œæ‰‹æŠŠæ‰‹å¸¦ä½ æ„å»ºä¸€ä¸ªçœŸå®çš„èåˆé•¿è®°å¿†æœºåˆ¶çš„Multi-Agentç³»ç»Ÿï¼Œç›´è§‚å±•ç¤ºä¸­æ–­ã€è®°å¿†ä¸åä½œçš„èåˆã€‚\nåŸºäºå¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰çš„æ™ºèƒ½ä½“ï¼ˆAgentï¼‰ç³»ç»Ÿä¸­ï¼Œè®°å¿†æœºåˆ¶æ˜¯å®ç°æŒç»­ã€è¿è´¯å’Œä¸ªæ€§åŒ–äº¤äº’çš„æ ¸å¿ƒåŸºçŸ³ï¼Œé€šè¿‡è®°å¿†ï¼Œå¯ä»¥è®©Agentè®°ä½è¿‡å¾€çš„äº¤äº’ï¼Œä¿æŒä¸Šä¸‹æ–‡çš„ä¸€è‡´æ€§ï¼Œå¹¶èƒ½ä»åé¦ˆä¸­å­¦ä¹ ï¼Œé€‚åº”ç”¨æˆ·çš„åå¥½ã€‚\n**æœ¬æ–‡æ ¸å¿ƒè¦ç‚¹æ¦‚è¿°ï¼š**\n1.ä»‹ç»Agent Memoryçš„åŸºæœ¬æƒ…å†µ\n2.LangGraphé•¿çŸ­æœŸè®°å¿†è¯¦è§£åŠæ¡ˆä¾‹è¯´æ˜ï¼šåŒ…å«çŸ­æœŸè®°å¿†å®ç°ã€ç®¡ç†æ–¹æ³•ï¼Œé•¿æœŸè®°å¿†çš„å®ç°æ–¹æ³•ï¼Œä»¥åŠæ­å»ºäº†èåˆpostgresæ•°æ®åº“ã€é›†æˆEmbeddingæœåŠ¡è¿›è¡Œè¯­ä¹‰æœç´¢ç­‰å¯ç”¨äºç”Ÿäº§ç¯å¢ƒçš„çœŸå®æ¡ˆä¾‹ã€‚\n3.å¼•å…¥MCPåè®®æ„å»ºçœŸå®çš„Agenté•¿è®°å¿†åº”ç”¨ï¼šæ­å»ºä¸€ä¸ªåŸºäºsupervisoræ¶æ„ï¼Œé›†æˆä¸­æ–­æœºåˆ¶ã€é•¿çŸ­æœŸè®°å¿†æœºåˆ¶çš„multi-agentç³»ç»Ÿã€‚\n### **è®°å¿†æœºåˆ¶ä»‹ç»**\n### **Agent Memoryæ˜¯ä»€ä¹ˆï¼Ÿ**\n![] \nä¸Šå›¾ä¸­ï¼ˆæ¥æºäºMem0[1]ï¼‰ï¼Œå·¦è¾¹æ˜¯æ²¡æœ‰Memoryçš„agentï¼Œå³è¾¹æ˜¯æœ‰Memoryçš„agentï¼Œåè€…å¯ä»¥æ ¹æ®ç”¨æˆ·çš„è¿‡å¾€ä¿¡æ¯ï¼ˆç´ é£Ÿä¸»ä¹‰è€…ã€ä¸å–œæ¬¢ä¹³åˆ¶å“ï¼‰ç»™å‡ºæ›´åˆç†çš„å“åº”ï¼ˆä¸å«ä¹³åˆ¶å“çš„ç´ é£Ÿèœå•ï¼‰ï¼Œè€Œå‰è€…çš„å›ç­”æ˜¾ç„¶æ˜¯ä¸åˆé€‚çš„ã€‚\nç®€å•æ¥è¯´ï¼ŒMemoryæ˜¯èµ‹äºˆAgentè®°å¿†èƒ½åŠ›çš„æŠ€æœ¯å’Œæ¶æ„ï¼Œèƒ½å¤Ÿè®©Agentåƒäººä¸€æ ·è®°ä½è¿‡å»çš„äº¤äº’ã€å­¦åˆ°çš„çŸ¥è¯†ã€æ‰§è¡Œè¿‡çš„ä»»åŠ¡åŠæœªæ¥çš„è®¡åˆ’ï¼Œæ˜¯å°†ä¸€ä¸ªLLMè½¬å˜ä¸ºèƒ½å¤Ÿæ‰§è¡Œå¤æ‚ã€é•¿æœŸä»»åŠ¡çš„çœŸæ­£â€æ™ºèƒ½ä½“â€œçš„æ ¸å¿ƒæ‰€åœ¨ã€‚\n### **å…³äºAgent Memoryæˆ‘ä»¬éœ€è¦è€ƒè™‘ä»€ä¹ˆï¼Ÿ**\nå¦‚ä½•è·å–è®°å¿†ï¼šé€šè¿‡å’Œç”¨æˆ·äº¤äº’ã€ç¯å¢ƒäº¤äº’...\næ€ä¹ˆç»„ç»‡è®°å¿†ï¼šæ¨¡å‹å‚æ•°ã€æ¨¡å‹ä¸Šä¸‹æ–‡ã€æ•°æ®åº“æ€ä¹ˆåˆ©ç”¨è®°å¿†ï¼šRAGã€Few-shot...\n### **æœ‰å“ªäº›Memoryç±»å‹ï¼Ÿ**\nå…³äºMemoryçš„åˆ†ç±»ï¼Œæœ‰è®¸å¤šç§åˆ†ç±»ä½“ç³»ï¼Œè¿™é‡Œæˆ‘ä»¬åªè®¨è®ºæœ€å¸¸è§åŠæœ€æ˜“äºç†è§£çš„ã€‚\næ­£å¦‚äººç±»åˆ©ç”¨é•¿çŸ­æœŸè®°å¿†è¿›è¡Œæœ‰æ•ˆçš„äº¤äº’å’Œå­¦ä¹ ä¸€æ ·ï¼ŒAgentçš„è®°å¿†æœºåˆ¶é€šå¸¸åˆ’åˆ†ä¸ºçŸ­æœŸè®°å¿†ï¼ˆshort-term memoryï¼‰å’Œé•¿æœŸè®°å¿†(long-term memory)ï¼ŒçŸ­æœŸè®°å¿†å†³å®šäº†Agentåœ¨å¾®è§‚ä»»åŠ¡ä¸Šçš„å³æ—¶è¡¨ç°ï¼Œè€Œé•¿æœŸè®°å¿†åˆ™ä½œä¸ºæŒä¹…çŸ¥è¯†åº“ï¼Œå†³å®šäº†Agentåœ¨å®è§‚æ—¶é—´å°ºåº¦ä¸Šçš„æ™ºèƒ½æ·±åº¦å’Œä¸ªæ€§åŒ–æ°´å¹³ï¼Œé€šè¿‡ä¸¤è€…é…åˆï¼ŒAgentæ‰èƒ½è¡¨ç°å‡ºè¿è´¯æ€§ã€ä¸Šä¸‹æ–‡æ„ŸçŸ¥èƒ½åŠ›ï¼Œæ‰ä¼šæ˜¾å¾—æ›´æ™ºèƒ½ã€‚\n### **Agent Memoryå¦‚ä½•å·¥ä½œï¼Ÿ**\nAgenté€šå¸¸é€šè¿‡ä»¥ä¸‹å‡ æ­¥æ¥æœ‰æ•ˆåœ°ç®¡ç†è®°å¿†ï¼Œä½¿å¾—æ¯æ¬¡äºç”¨æˆ·çš„äº¤äº’éƒ½æ›´åŠ ç²¾å‡†æ™ºèƒ½ï¼š\n1. è®°å¿†å­˜å‚¨ï¼šé€šè¿‡è®¾è®¡ä¸€ç³»åˆ—ç­–ç•¥æ¥å­˜å‚¨é‡è¦çš„äº¤äº’ä¿¡æ¯ï¼Œè¿™äº›ä¿¡æ¯å¯èƒ½æ¥æºäºå¯¹è¯å†…å®¹ã€å†å²æ•°æ®æˆ–ä»»åŠ¡è¦æ±‚ç­‰ç­‰ã€‚2. è®°å¿†æ›´æ–°ï¼šè®°å¿†ä¼šéšç€äº¤äº’çš„å‘ç”Ÿï¼Œä¸æ–­åœ°è¿›è¡Œæ›´æ–°ï¼Œä¾‹å¦‚ç”¨æˆ·çš„åå¥½ã€æœ€æ–°çš„è¿‘å†µç­‰ç­‰ã€‚è®°å¿†æ›´æ–°ä½¿å¾—Agentèƒ½å¤Ÿä¸æ–­ä¼˜åŒ–å…¶å“åº”ã€‚\n3. è®°å¿†æ£€ç´¢ï¼šAgentæ ¹æ®å½“ä¸‹çš„éœ€æ±‚ï¼Œå»è®°å¿†ä¸­æ£€ç´¢éœ€è¦çš„è®°å¿†å†…å®¹ï¼Œä»è€Œæä¾›æ›´åŠ æ™ºèƒ½çš„å›å¤ã€‚### **Agent Memoryæ€ä¹ˆå®ç°ï¼Ÿ**\n1. ç‰©ç†å¤–æŒ‚ï¼šå³å¤–ç½®æ•°æ®åº“å’ŒRAGï¼Œéœ€è¦æ£€ç´¢å½“å‰queryç›¸å…³çš„å†…å®¹ï¼Œä¾‹å¦‚ï¼šMem0ã€ACEã€‚å¥½å¤„æ˜¯å³æ’å³ç”¨ï¼Œåå¤„æ˜¯ä¸å¤Ÿend-to-end\n2. Memory as Reasoning / Toolï¼šé€šè¿‡è®­ç»ƒReasoningæˆ–Toolçš„æ–¹å¼åŠ¨æ€æ›´æ–°contextï¼Œä¾‹å¦‚ï¼šMemAgentã€memory-R1ã€‚å¥½å¤„æ˜¯æ›´æ¥è¿‘end-to-endï¼Œä½†ä¸æ˜¯å¾ˆçµæ´»ã€‚\n3.å‚æ•°æ›´æ–°ï¼šLLMæœ¬èº«å°±æ˜¯ä¸€ä¸ªMemoryä½“ï¼Œæ‰€æœ‰å‚æ•°éƒ½æ˜¯å®ƒçš„Memoryï¼Œé€šè¿‡æ›´æ–°å‚æ•°æ¥æ›´æ–°è®°å¿†ï¼Œè¿™ç§æ–¹å¼æ˜¯æœ€æœ¬è´¨çš„ï¼Œä½†ä¹Ÿæ˜¯æœ€éš¾å®ç°çš„ã€‚\n### **LangGraphä¸­çš„è®°å¿†ç®¡ç†**\nLangGraph[2]ä½œä¸ºä¸€æ¬¾é¢å‘å¤šæ™ºèƒ½ä½“åä½œä¸çŠ¶æ€ç®¡ç†çš„æ¡†æ¶ï¼Œå…¶è®¾è®¡äº†å·§å¦™çš„è®°å¿†ç®¡ç†ç³»ç»Ÿï¼Œæ—¨åœ¨ä¸ºAgentæä¾›åœ¨ä¸åŒäº¤äº’ä¸­å­˜å‚¨ã€æ£€ç´¢å’Œåˆ©ç”¨ä¿¡æ¯çš„èƒ½åŠ›ã€‚å®ƒåŒºåˆ†äº†ä¸¤ç§ä¸»è¦çš„è®°å¿†ç±»å‹ï¼šçŸ­æœŸè®°å¿†å’Œé•¿æœŸè®°å¿†ã€‚åœ¨å®é™…ä½¿ç”¨ä¸­ï¼Œé€šè¿‡è¿™ä¸¤ç§è®°å¿†ååŒï¼Œæ—¢èƒ½ä¿éšœå®æ—¶ä»»åŠ¡çš„é«˜æ•ˆæ‰§è¡Œï¼Œåˆæ”¯æŒäº†è·¨ä»»åŠ¡ã€è·¨å‘¨æœŸçš„ç»éªŒå¤ç”¨ã€‚\nâ—short-term memoryï¼ˆé€šè¿‡Checkpointerå®ç°ï¼‰ï¼šé’ˆå¯¹å•ä¸ªå¯¹è¯çº¿ç¨‹ï¼Œæ ¸å¿ƒä»·å€¼åœ¨äºä¿éšœå¯¹è¯çš„ä¸´æ—¶æ€§ï¼Œä½¿å¾—Agentèƒ½å¤Ÿè·Ÿè¸ªä¼šè¯ä¸­çš„å¤šè½®å¯¹è¯ï¼Œå¯ä»¥åœ¨è¯¥çº¿ç¨‹å†…çš„ä»»ä½•æ—¶åˆ»è¢«å›å¿†ã€‚\nâ—long-term memoryï¼ˆé€šè¿‡Storeå®ç°ï¼‰ï¼šå¯ä»¥è·¨å¯¹è¯çº¿ç¨‹å…±äº«ï¼Œå¯ä»¥åœ¨ä»»ä½•æ—¶é—´ï¼Œä»»ä½•çº¿ç¨‹ä¸­è¢«å›å¿†ï¼Œè€Œä¸åƒçŸ­æœŸè®°å¿†å±€é™äºå•ä¸ªå¯¹è¯ã€‚\n![] \né€šè¿‡ä¸‹è¡¨ï¼Œå¯ä»¥æ›´æ¸…æ™°çš„çœ‹åˆ°ä¸¤è€…çš„åŒºåˆ«ï¼š||short-term memory|long-term memory|\nç›®çš„|ç»´æŒå¯¹è¯ä¸Šä¸‹æ–‡|å­˜å‚¨è·¨ä¼šè¯çš„æŒä¹…åŒ–äº‹å®ã€åå¥½å’ŒçŸ¥è¯†|\næŒä¹…æ€§|ä¼šè¯çº§åˆ«ï¼ˆå¯ä»¥ä¸´æ—¶ï¼Œå¯ä»¥æŒä¹…ï¼‰|åº”ç”¨çº§åˆ«ï¼ˆå§‹ç»ˆæŒä¹…ï¼‰|\nä½œç”¨åŸŸ|å•ä¸€ä¼šè¯|è·¨ä¼šè¯ã€è·¨ç”¨æˆ·|\næŒä¹…åŒ–æ–¹å¼|æ£€æŸ¥ç‚¹ï¼ˆcheckpointï¼‰|å­˜å‚¨ï¼ˆStoreï¼‰|\næ›´æ–°æœºåˆ¶|è‡ªåŠ¨ï¼ˆåœ¨æ¯ä¸ªå›¾æ­¥éª¤åä¿å­˜çŠ¶æ€ï¼‰|æ‰‹åŠ¨/æ˜¾å¼|\nå…¸å‹ç”¨é€”|å¯¹è¯å†å²ã€ä¸­é—´çŠ¶æ€|ç”¨æˆ·åå¥½ã€çŸ¥è¯†åº“ã€è¯­ä¹‰è®°å¿†|\n![] ### **LangGraphè®°å¿†çš„æ¶æ„åŸºç¡€**\nè¦æƒ³æ›´å¥½çš„ç†è§£LangGraphä¸­çš„è®°å¿†æœºåˆ¶ï¼Œé¦–å…ˆéœ€è¦ç†è§£å…¶æ”¯æŒåŒè½¨è®°å¿†ç³»ç»Ÿçš„æ ¸å¿ƒæ¦‚å¿µã€‚\n### **Checkpointer**\nLangGraphæœ‰ä¸€ä¸ªå†…ç½®çš„æŒä¹…åŒ–ï¼ˆPersistenceï¼‰å±‚ï¼Œé€šè¿‡checkpointerå®ç°ï¼Œèƒ½å¤ŸæŒä¹…åŒ–å­˜å‚¨å›¾çŠ¶æ€ï¼Œè¿™ä½¿å¾—å¼€å‘è®°å¿†åŠŸèƒ½å’Œäººç±»å¹²é¢„åŠŸèƒ½æˆä¸ºå¯èƒ½ã€‚\nå½“ä½¿ç”¨æ£€æŸ¥ç‚¹ç¼–è¯‘ä¸€ä¸ªå›¾æ—¶ï¼Œæ£€æŸ¥ç‚¹ä¼šåœ¨æ¯ä¸ªsuper-stepä¿å­˜å›¾çŠ¶æ€çš„checkpointï¼Œè¿™äº›checkpointè¢«ä¿å­˜åˆ°ä¸€ä¸ªthreadä¸­ï¼Œå¯ä»¥åœ¨å›¾æ‰§è¡Œåè®¿é—®ã€‚å› ä¸ºthreadså…è®¸åœ¨æ‰§è¡Œåè®¿é—®å›¾çš„çŠ¶æ€ï¼Œæ‰€ä»¥å¯ä»¥å®ç°è®°å¿†ã€äººæœºåä½œã€æ—¶é—´æ—…è¡Œã€å®¹é”™ç­‰å¤šç§å¼ºå¤§çš„åŠŸèƒ½ã€‚\n![] \nå·¥ä½œæµç¨‹ï¼š```\n`ç”¨æˆ·è¾“å…¥ â†’[èŠ‚ç‚¹ 1] â†’ğŸ’¾ä¿å­˜çŠ¶æ€â†’[èŠ‚ç‚¹ 2] â†’ğŸ’¾ä¿å­˜çŠ¶æ€â†’è¾“å‡ºâ†“â†“Checkpoint 1 Checkpoint 2`\n```\n### **Thread**\nä¸ºäº†ç®¡ç†å¤šä¸ªç‹¬ç«‹çš„å¯¹è¯ï¼ŒLangGraphä½¿ç”¨äº†threadçš„æ¦‚å¿µã€‚thread\\_idæ˜¯ç”±checkpointerä¿å­˜çš„æ¯ä¸ªcheckpointçš„å”¯ä¸€idï¼Œæ˜¯æ¿€æ´»å’ŒåŒºåˆ†ä¸åŒå¯¹è¯çº¿ç¨‹çš„å”¯ä¸€keyã€‚åœ¨è°ƒç”¨å›¾çš„invokeæˆ–streamæ–¹æ³•æ—¶ï¼Œé€šè¿‡configurableå­—å…¸ä¼ å…¥ä¸€ä¸ªthread\\_idï¼Œå°±ä»£è¡¨è¿™æ¬¡æ“ä½œå±äºthread\\_idè¿™ä¸ªç‰¹å®šçš„å¯¹è¯ã€‚\n### **Store**\nå¦‚ä¸Šæ‰€è¿°ï¼Œå›¾çŠ¶æ€å¯ä»¥ç”±checkpointeråœ¨æ¯ä¸ªsuper-stepå†™å…¥çº¿ç¨‹ï¼Œä»è€Œå®ç°çŠ¶æ€çš„æŒä¹…åŒ–ã€‚ä½†æ˜¯ï¼Œå¦‚æœæƒ³åœ¨å¤šä¸ªçº¿ç¨‹ä¹‹é—´ä¿ç•™ä¸€äº›ä¿¡æ¯çš„è¯ï¼Œé‚£ä¹ˆå°±éœ€è¦ç”¨åˆ°Storeã€‚Storeæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªæš´éœ²ç»™å›¾èŠ‚ç‚¹å’Œå·¥å…·çš„é”®å€¼æ•°æ®åº“ï¼Œä¸checkpointerçš„è‡ªåŠ¨åŒ–å¿«ç…§ä¸åŒï¼ŒStoreéœ€è¦æ˜¾å¼å’Œä¸»åŠ¨çš„è¿›è¡Œæ“ä½œã€‚\n![]<image_link>### **Namespace**\nStoreä¸­çš„æ•°æ®é€šå¸¸é€šè¿‡æ›´æŒä¹…çš„æ ‡è¯†æ¥ç»„ç»‡ã€‚user\\_idæ˜¯æœ€å¸¸è§çš„ï¼Œç”¨äºå…³è”ç”¨æˆ·çš„æ‰€æœ‰ä¿¡æ¯ï¼Œæ­¤å¤–ï¼Œnamespaceæä¾›äº†ä¸€ç§æ•°æ®éš”ç¦»æœºåˆ¶ï¼Œä¾‹å¦‚ï¼Œä½¿ç”¨ä½¿ç”¨ (â€œmemoriesâ€, user\\_id) è¿™æ ·çš„å…ƒç»„ä½œä¸ºå‘½åç©ºé—´ï¼Œå¯ä»¥å°†ç”¨æˆ·çš„è®°å¿†ä¸å…¶ä»–ç±»å‹çš„æ•°æ®ï¼ˆå¦‚ç”¨æˆ·åå¥½(â€œpreferencesâ€, user\\_id)ï¼‰æ¸…æ™°åœ°åˆ†ç¦»å¼€æ¥ï¼Œé¿å…æ•°æ®å†²çªï¼Œä¿æŒçŸ¥è¯†åº“çš„æ•´æ´æœ‰åºã€‚\n### **çŸ­æœŸè®°å¿†è¯¦è§£**\n### **InMemorySaverå†…å­˜ä¼šè¯ä¸´æ—¶å­˜å‚¨**\nå¯¹äºå¼€å‘ã€åŸå‹è®¾è®¡å’Œæµ‹è¯•é˜¶æ®µï¼Œæœ€ç®€å•å¿«æ·çš„æ–¹å¼æ˜¯ä½¿ç”¨InMemorySaverã€‚å®ƒå°†æ‰€æœ‰çš„å¯¹è¯çŠ¶æ€å­˜å‚¨åœ¨å†…å­˜ä¸­çš„ä¸€ä¸ªPythonå­—å…¸é‡Œã€‚\n1.**è®¾ç½®è®°å¿†ç®¡ç†æ£€æŸ¥ç‚¹**\n```\n`from langchain\\_openai import ChatOpenAI\nfrom langchain.chat\\_models import init\\_chat\\_model\nfrom langgraph.checkpoint.memory import InMemorySaver\nfrom langgraph.prebuilt import create\\_react\\_agent\n# åˆå§‹åŒ–æ£€æŸ¥ç‚¹ä¿å­˜å™¨checkpointer = InMemorySaver()`\n```\n2.**å®šä¹‰å¤§æ¨¡å‹å¹¶åˆ›å»ºagent**\n```\n`BASE\\_URL=&#34;&#34;&#34;&#34; TOKEN=&#34;&#34;&#34;&#34;\nMODEL\\_NAME=&#34;&#34;&#34;&#34;\nmodel = init\\_chat\\_model(\nmodel=MODEL\\_NAME,\nmodel\\_provider=&#34;&#34;openai&#34;&#34;, base\\_url=BASE\\_URL,\napi\\_key=TOKEN,\ntemperature=0,\n)\nagent = create\\_react\\_agent(\nmodel=model,\ntools=[],\n# ä¼ å…¥æ£€æŸ¥ç‚¹ï¼Œæ˜¯å°†æŒä¹…åŒ–èƒ½åŠ›â€œæ³¨å…¥â€å›¾çš„å…³é”®æ­¥éª¤ã€‚ç¼–è¯‘åçš„graphå¯¹è±¡ç°åœ¨å…·å¤‡äº†çŠ¶æ€ç®¡ç†çš„èƒ½åŠ›ã€‚\ncheckpointer=checkpointer\n)`\n```\nå¦‚æœæ˜¯åº•å±‚è‡ªå®šä¹‰apiåœ¨å›¾æ„å»ºé˜¶æ®µä¼ å…¥æ£€æŸ¥ç‚¹çš„ä»£ç æ˜¯graph = builder.compile(checkpointer=checkpointer)ã€‚\n3.**çŸ­æœŸè®°å¿†-å†…å­˜åç«¯**\n```\n`config = {&#34;&#34;configurable&#34;&#34;: {&#34;&#34;thread\\_id&#34;&#34;: &#34;&#34;1&#34;&#34;}} # æ¿€æ´»è®°å¿†æœºåˆ¶çš„æ ¸å¿ƒã€‚å¦‚æœæ²¡æœ‰æä¾›thread\\_idï¼Œæ¯æ¬¡invokeè°ƒç”¨éƒ½å°†æ˜¯æ— çŠ¶æ€çš„ï¼Œåªè¦ä½¿ç”¨ç›¸åŒçš„thread\\_idï¼ŒLangGraphå°±ä¼šåœ¨å¤šæ¬¡è°ƒç”¨ä¹‹é—´ç»´æŒå¯¹è¯çŠ¶æ€\nresponse = agent.invoke(\n{&#34;&#34;messages&#34;&#34;: [{&#34;&#34;role&#34;&#34;: &#34;&#34;user&#34;&#34;, &#34;&#34;content&#34;&#34;: &#34;&#34;ä½ å¥½ï¼Œæˆ‘å«adaï¼&#34;&#34;}]},\nconfig\n)\nprint(f&#34;&#34;thread1\\_bot\\_answerï¼š{response[&#39;&#39;messages&#39;&#39;][-1].content}&#34;&#34;)\nresponse = agent.invoke(\n{&#34;&#34;messages&#34;&#34;: [{&#34;&#34;role&#34;&#34;: &#34;&#34;user&#34;&#34;, &#34;&#34;content&#34;&#34;: &#34;&#34;ä½ å¥½ï¼Œè¯·é—®ä½ è¿˜è®°å¾—æˆ‘å«ä»€ä¹ˆåå­—ä¹ˆï¼Ÿ&#34;&#34;}]},\nconfig\n)\nprint(&#39;&#39;------------çº¿ç¨‹1------------------&#39;&#39;)\nprint(f&#34;&#34;thread1\\_bot\\_answerï¼š{response[&#39;&#39;messages&#39;&#39;][-1].content}&#34;&#34;)\nnew\\_config = {&#34;&#34;configurable&#34;&#34;: {&#34;&#34;thread\\_id&#34;&#34;: &#34;&#34;2&#34;&#34;}}\nresponse = agent.invoke(\n{&#34;&#34;messages&#34;&#34;: [{&#34;&#34;role&#34;&#34;: &#34;&#34;user&#34;&#34;, &#34;&#34;content&#34;&#34;: &#34;&#34;ä½ å¥½ï¼Œè¯·é—®ä½ è¿˜è®°å¾—æˆ‘å«ä»€ä¹ˆåå­—ä¹ˆï¼Ÿ&#34;&#34;}]},\nnew\\_config\n)\nprint(&#39;&#39;------------çº¿ç¨‹2------------------&#39;&#39;)\nprint(f&#34;&#34;thread2\\_bot\\_answerï¼š{response[&#39;&#39;messages&#39;&#39;][-1].content}&#34;&#34;)`\n```\næ‰§è¡Œä¸Šé¢ä»£ç ï¼Œå¯ä»¥çœ‹åˆ°è¾“å‡ºå¦‚ä¸‹ï¼š```\n`thread1\\_bot\\_answerï¼šä½ å¥½ï¼ŒAdaï¼å¾ˆé«˜å…´è®¤è¯†ä½ ï¼ğŸ˜Š\nè¿™æ˜¯ä¸€ä¸ªå¾ˆç¾çš„åå­—å‘¢ï¼æœ‰ä»€ä¹ˆæˆ‘å¯ä»¥å¸®åŠ©ä½ çš„å—ï¼Ÿæ— è®ºæ˜¯æƒ³èŠèŠå¤©ï¼Œè¿˜æ˜¯æœ‰ä»»ä½•é—®é¢˜éœ€è¦è§£ç­”ï¼Œæˆ‘éƒ½å¾ˆä¹æ„ä¸ºä½ æä¾›å¸®åŠ©ã€‚------------çº¿ç¨‹1------------------\nthread1\\_bot\\_answerï¼šå½“ç„¶è®°å¾—ï¼ä½ åˆšæ‰å‘Šè¯‰æˆ‘ä½ å« Adaï½å¾ˆé«˜å…´å†æ¬¡å’Œä½ æ‰“æ‹›å‘¼ï¼ğŸ˜Š\n------------çº¿ç¨‹2------------------\nthread2\\_bot\\_answerï¼šä½ å¥½ï¼å¾ˆæŠ±æ­‰ï¼Œæˆ‘æ— æ³•è®°ä½ä¹‹å‰å¯¹è¯ä¸­çš„ä¸ªäººä¿¡æ¯ï¼Œæ¯”å¦‚ä½ çš„åå­—ã€‚è¿™æ˜¯ä¸ºäº†ä¿æŠ¤ä½ çš„éšç§ï¼Œæ‰€ä»¥æˆ‘ä¸ä¼šä¿ç•™è¿™ç±»æ•°æ®ã€‚ä½ å¯ä»¥å‘Šè¯‰æˆ‘ä½ çš„åå­—ï¼Œæˆ–è€…ä»»ä½•ä½ æƒ³è®©æˆ‘ç§°å‘¼ä½ çš„æ–¹å¼ï¼Œæˆ‘ä¼šå¾ˆä¹æ„åœ¨è¿™æ¬¡çš„å¯¹è¯ä¸­ä½¿ç”¨å®ƒï¼ğŸ˜Š`\n```\n**çŸ­æœŸè®°å¿†ä¸çº¿ç¨‹ç›¸å…³ï¼Œåœ¨å¯¹è¯æ—¶ï¼Œéœ€è¦åœ¨é…ç½®ä¸­ä¼ å…¥thread\\_id**ã€‚é€šè¿‡ä¸Šé¢çš„ç»“æœæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œå½“æˆ‘ä»¬ä¼ å…¥ç›¸åŒçš„thread\\_idæ—¶ï¼Œagentå°±å¯ä»¥è®°ä½ç”¨æˆ·çš„åå­—ï¼Œç„¶è€Œå½“æˆ‘ä»¬æ›´æ¢thread\\_idæ—¶ï¼Œagentå°±ä¸è®°å¾—ç”¨æˆ·çš„åå­—äº†ã€‚\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ**InMemorySaverå°†æ‰€æœ‰çŠ¶æ€éƒ½ä¿å­˜åœ¨å†…å­˜ä¸­**ï¼Œä¸€æ—¦ç¨‹åºç»ˆæ­¢ï¼Œé‚£ä¹ˆæ‰€æœ‰å¯¹è¯å†å²éƒ½ä¼šæ¶ˆå¤±ã€‚\n### **æ•°æ®åº“æŒä¹…åŒ–å­˜å‚¨**\nå¯ä»¥å‘ç°ï¼Œä¸Šé¢ä¸€å°èŠ‚çš„ä»£ç åœ¨åº”ç”¨ç¨‹åºç»“æŸåå†å¯åŠ¨ï¼Œè®°å¿†å°±åˆæ¶ˆå¤±äº†ã€‚è¿™æ˜¯å› ä¸ºInMemorySaverä»…ä»…æ˜¯æŠŠè®°å¿†ä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œåº”ç”¨ç¨‹åºç»“æŸåé‡Šæ”¾å†…å­˜è®°å¿†å°±æ¶ˆå¤±äº†ã€‚åœ¨ç”Ÿäº§ç¯å¢ƒä¸­å¸¸å¸¸ä½¿ç”¨æ•°æ®åº“æ”¯æŒçš„æ£€æŸ¥ç‚¹è®°å½•å™¨æŒä¹…åŒ–ä¿å­˜è®°å¿†ï¼Œä»¥ä¿è¯æ•°æ®çš„å¯é æ€§å’ŒæœåŠ¡çš„è¿ç»­æ€§ã€‚\nè¿™é‡Œæˆ‘ä»¬ä»¥postgresæ•°æ®åº“ä¸ºä¾‹æ¥è¯´æ˜ï¼Œæ€ä¹ˆæŒä¹…åŒ–åœ°ä¿å­˜è®°å¿†æ•°æ®ã€‚\n1.é¦–å…ˆå®‰è£…ä»¥ä¸‹ä¾èµ–ï¼š\n```\n`pip install -U &#34;psycopg[binary,pool]&#34; langgraph-checkpoint-postgres`\n```\n2.å®‰è£…postgresæ•°æ®åº“ï¼Œå…·ä½“çš„å®‰è£…æ–¹æ³•å¯ä»¥å‚è€ƒï¼š[Linuxä¸‹å®‰è£…PostgreSQL\\_linuxå®‰è£…postgresql-CSDNåšå®¢] ã€‚è¿™é‡Œé€‰æ‹©ä»¥æºç çš„æ–¹å¼è¿›è¡Œå®‰è£…ï¼Œå®‰è£…åŒ…ä»å®˜ç½‘ï¼ˆ[PostgreSQL: Downloads] ï¼‰ä¸‹è½½ï¼Œé€‰æ‹©æœ€æ–°çš„postgresql-18.0.tar.gzã€‚\n3.å®‰è£…æ•°æ®åº“æˆåŠŸåï¼Œç¼–ç å¦‚ä¸‹ä»£ç ã€‚\nDB\\_URIæ˜¯æ•°æ®åº“è¿æ¥çš„URLã€‚æƒ³è¦è‡ªåŠ¨ä¿å­˜åœ¨æ•°æ®åº“ä¸­çš„Stateéœ€è¦åœ¨PostgresSaver.from\\_conn\\_string(DB\\_URI)ä¸Šä¸‹æ–‡ä¸­æ“ä½œã€‚\n```\n`from langchain.chat\\_models import init\\_chat\\_model\nfrom langgraph.graph import StateGraph, MessagesState, START\nfrom langgraph.checkpoint.postgres import PostgresSaver\nBASE\\_URL=&#34;&#34;&#34;&#34; TOKEN=&#34;&#34;&#34;&#34;\nMODEL\\_NAME=&#34;&#34;&#34;&#34;\nmodel = init\\_chat\\_model(\nmodel=MODEL\\_NAME,\nmodel\\_provider=&#34;&#34;openai&#34;&#34;, base\\_url=BASE\\_URL,\napi\\_key=TOKEN,\ntemperature=0,\n)\nDB\\_URI = &#34;&#34;postgresql://postgres:postgres@localhost:5432/postgres?sslmode=disable&#34;&#34;\nwith PostgresSaver.from\\_conn\\_string(DB\\_URI) as checkpointer:\ncheckpointer.setup() # ç¬¬ä¸€æ¬¡è°ƒç”¨æ—¶å¿…é¡»è¦setup()\ndef call\\_model(state: MessagesState):\nresponse = model.invoke(state[&#34;&#34;messages&#34;&#34;])\nreturn {&#34;&#34;messages&#34;&#34;: response}\nbuilder = StateGraph(MessagesState)\nbuilder.add\\_node(call\\_model)\nbuilder.add\\_edge(START, &#34;&#34;call\\_model&#34;&#34;)\ngraph = builder.compile(checkpointer=checkpointer)\nconfig = {\n&#34;&#34;configurable&#34;&#34;: {\n&#34;&#34;thread\\_id&#34;&#34;: &#34;&#34;1&#34;&#34;\n}\n}\nresponse = graph.invoke(\n{&#34;&#34;messages&#34;&#34;: [{&#34;&#34;role&#34;&#34;: &#34;&#34;user&#34;&#34;, &#34;&#34;content&#34;&#34;: &#34;&#34;ä½ å¥½ï¼Œæˆ‘å«adaï¼&#34;&#34;}]},\nconfig\n)\nprint(response[&#39;&#39;messages&#39;&#39;][-1].content)\nresponse = graph.invoke(\n{&#34;&#34;messages&#34;&#34;: [{&#34;&#34;role&#34;&#34;: &#34;&#34;user&#34;&#34;, &#34;&#34;content&#34;&#34;: &#34;&#34;ä½ å¥½ï¼Œè¯·é—®ä½ è¿˜è®°å¾—æˆ‘å«ä»€ä¹ˆåå­—ä¹ˆï¼Ÿ&#34;&#34;}]},\nconfig\n)\nprint(response[&#39;&#39;messages&#39;&#39;][-1].content)`\n```\nè¿è¡Œä¸€æ¬¡ä¸Šè¿°ä»£ç åï¼Œå…³é—­åº”ç”¨ç¨‹åºåé‡å¯ï¼Œå†æ¬¡è¿è¡Œä¸Šè¿°ä»£ç ï¼Œprintç»“æœå¦‚ä¸‹ï¼š\n```\n`bot\\_answer\\_1ï¼šä½ å¥½ï¼ŒAdaï¼å¾ˆé«˜å…´å†æ¬¡è§åˆ°ä½ ï¼ğŸ˜Š\nä½ çš„åå­—çœŸåŠ¨å¬ï¼ä»Šå¤©æœ‰ä»€ä¹ˆæˆ‘å¯ä»¥å¸®ä½ è§£ç­”æˆ–è€…æƒ³èŠçš„è¯é¢˜å—ï¼Ÿbot\\_answer\\_2ï¼šå½“ç„¶è®°å¾—ï¼ä½ å‘Šè¯‰æˆ‘ä½ å« \\*\\*Ada\\*\\*ã€‚å¾ˆé«˜å…´å†æ¬¡å’Œä½ æ‰“æ‹›å‘¼ï¼ğŸ˜Š`\n```\nå¯ä»¥çœ‹åˆ°ï¼Œè®°å¿†å·²ç»è¢«ä¿å­˜äº†ã€‚æˆ‘ä»¬æ£€æŸ¥æ•°æ®åº“å¯ä»¥å‘ç°ï¼Œpostgresæ•°æ®åº“ä¸­å‡ºç°äº†å››ä¸ªè¡¨ï¼š\n![] \nä¸Šè¿°è¡¨ä¸­ï¼Œcheckpointsè¡¨æ˜¯â€çŠ¶æ€å¿«ç…§â€œè¡¨ï¼Œæ¯å½“ç¨‹åºæ‰§è¡Œä¸€ä¸ªstepæ—¶ï¼Œå®ƒå°±ä¼šåœ¨è¿™å¼ è¡¨ä¸­åˆ›å»ºä¸€æ¡æ–°è®°å½•ï¼Œè¿™æ¡è®°å½•å°±æ˜¯ä¸€ä¸ªæ£€æŸ¥ç‚¹çš„å¿«ç…§ã€‚æŸ¥è¯¢è¯¥è¡¨ï¼Œå¯ä»¥å¾—åˆ°å¦‚ä¸‹ç»“æœï¼š\n![] \næ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ¥åˆ†ææ¯ä¸€åˆ—çš„å«ä¹‰ï¼š![] |åˆ—å|å«ä¹‰|ä¸¾ä¾‹è¯´æ˜|\nthread\\_id|çº¿ç¨‹ID|ä¸Šè¡¨ä¸­ï¼Œæ‰€æœ‰thread\\_idéƒ½ä¸º1ï¼Œè¡¨ç¤ºè¿™äº›è®°å½•éƒ½å±äºåŒä¸€ä¸ªä¼šè¯æµ|\ncheckpoint\\_ns|æ£€æŸ¥ç‚¹å‘½åç©ºé—´ï¼ˆNamespaceï¼‰ï¼Œç”¨äºå¯¹æ£€æŸ¥ç‚¹è¿›è¡Œåˆ†ç»„æˆ–åˆ†ç±»|ä¸Šè¡¨ä¸­éƒ½æ˜¯ç©ºçš„ï¼Œè¡¨ç¤ºæœªä½¿ç”¨æˆ–ä½¿ç”¨äº†é»˜è®¤çš„å‘½åç©ºé—´|\ncheckpoint\\_id|æ£€æŸ¥ç‚¹çš„å”¯ä¸€æ ‡è¯†ç¬¦ï¼Œè¯¥è®°å½•çš„ä¸»é”®||\nparent\\_checkpoint\\_id|çˆ¶æ£€æŸ¥ç‚¹çš„IDï¼Œå®ƒå°†æ£€æŸ¥ç‚¹é“¾æ¥èµ·æ¥|ç¬¬ä¸€æ¡è®°å½•çš„parent\\_checkpoint\\_idæ˜¯ç©ºçš„ï¼Œä»£è¡¨æ˜¯æ•´ä¸ªæµç¨‹çš„èµ·ç‚¹ã€‚|\ncheckpoint|æ ¸å¿ƒçŠ¶æ€æ•°æ®ï¼Œæ˜¯ä¸€ä¸ªjsonå¯¹è±¡ã€‚|tsä»£è¡¨æ—¶é—´æˆ³ï¼›channel\\_valuesä»£è¡¨é€šé“å€¼ï¼Œå¯ä»¥ç†è§£ä¸ºå·¥ä½œæµä¸­çš„å˜é‡å€¼ï¼›updated\\_channelsä»£è¡¨åœ¨å½“å‰è¿™æ­¥ä¸­è¢«ä¿®æ”¹è¿‡çš„é€šé“|\nmetadata|è¯¥æ£€æŸ¥ç‚¹æœ¬èº«çš„å…ƒæ•°æ®|stepè¡¨ç¤ºè¿™æ˜¯å·¥ä½œæµçš„ç¬¬å‡ æ­¥ï¼›sourceè¡¨æ¥æºï¼Œ&#34;input&#34;æŒ‡å¤–å¤–éƒ¨è¾“å…¥ï¼Œ&#34;loop&#34;æŒ‡å·¥ä½œæµå†…éƒ¨å¾ªç¯æˆ–æŸä¸ªèŠ‚ç‚¹æ‰§è¡Œçš„ç»“æœ|\nç†è§£äº†ä¸Šé¢checkpointsè¡¨åï¼Œé‚£ä¹ˆä¸ç¦ä¼šé—®ï¼ŒçœŸæ­£çš„æ¶ˆæ¯å†…å®¹è¢«å­˜åˆ°äº†å“ªé‡Œå‘¢ï¼ŸçœŸæ­£çš„æ¶ˆæ¯å†…å®¹å­˜å‚¨åœ¨checkpoint\\_writesè¡¨ä¸­ï¼Œå¦‚ä¸‹ï¼š\n![] \né™¤äº†PostgreSQLä¹‹å¤–ï¼ŒLangGraphè¿˜æ”¯æŒMongoDBã€Redisç­‰æ•°æ®åº“ã€‚\n### **å­å›¾ä¸­çš„è®°å¿†**\nå½“æ„å»ºå¤æ‚çš„ã€ç”±å¤šä¸ªå­å›¾åµŒå¥—è€Œæˆçš„åº”ç”¨æ—¶ï¼Œéœ€è¦æ›´çµæ´»çš„è®°å¿†ç®¡ç†ç­–ç•¥ã€‚â—è®°å¿†ç»§æ‰¿ï¼ˆé»˜è®¤ï¼‰ï¼šé»˜è®¤æƒ…å†µä¸‹ï¼Œå­å›¾ä¼šç»§æ‰¿å…¶çˆ¶å›¾çš„checkpointerã€‚è¿™æ„å‘³ç€æ•´ä¸ªåµŒå¥—å›¾å…±äº«åŒä¸€ä¸ªå¯¹è¯çŠ¶æ€ï¼Œæ•°æ®å¯ä»¥åœ¨çˆ¶å­å›¾ä¹‹é—´æ— ç¼æµåŠ¨ã€‚è¿™å¯¹äºå°†ä¸€ä¸ªå¤§å‹ä»»åŠ¡åˆ†è§£ä¸ºå¤šä¸ªæ¨¡å—åŒ–å­ä»»åŠ¡éå¸¸æœ‰ç”¨ã€‚\nâ—è®°å¿†éš”ç¦»ï¼šåœ¨æŸäº›åœºæ™¯ä¸‹ï¼Œä¾‹å¦‚æ„å»ºå¤šæ™ºèƒ½ä½“ç³»ç»Ÿï¼Œå¸Œæœ›æ¯ä¸ªæ™ºèƒ½ä½“ï¼ˆç”±ä¸€ä¸ªå­å›¾è¡¨ç¤ºï¼‰æ‹¥æœ‰è‡ªå·±ç‹¬ç«‹çš„å†…å­˜ç©ºé—´ï¼Œäº’ä¸å¹²æ‰°ã€‚æ­¤æ—¶ï¼Œå¯ä»¥åœ¨ç¼–è¯‘å­å›¾æ—¶è®¾ç½®checkpointer=Trueã€‚\nå¦‚ä¸‹ä»£ç ï¼Œå¯ä»¥åœ¨å­å›¾ä¸­ç›´æ¥ä½¿ç”¨çˆ¶å›¾çš„çŸ­æœŸè®°å¿†ï¼š```\n`from langgraph.graph import START, StateGraph\nfrom langgraph.checkpoint.memory import InMemorySaver\nfrom typing import TypedDict\nclass State(TypedDict):\nfoo: str\n# å­å›¾def subgraph\\_node\\_1(state: State):\nreturn {&#34;&#34;foo&#34;&#34;: state[&#34;&#34;foo&#34;&#34;] + &#34;&#34;bar&#34;&#34;}\nsubgraph\\_builder = StateGraph(State)\nsubgraph\\_builder.add\\_node(subgraph\\_node\\_1)\nsubgraph\\_builder.add\\_edge(START, &#34;&#34;subgraph\\_node\\_1&#34;&#34;', 'doi': '', 'published_date': '2025-12-08T00:00:00+00:00', 'pdf_url': '', 'url': 'https://zhuanlan.zhihu.com/p/1981392181592871894', 'source': 'exa_context', 'categories': [], 'keywords': [], 'citations': 0, 'references': [], 'extra': {}}
2026-02-21 20:10:09,314 - __main__ - WARNING - handle_search: returned=0 for query=LangGraph æµç¨‹æ§åˆ¶çš„é«˜çº§æ¨¡å¼æœ‰å“ªäº›ï¼ŒåŒ…æ‹¬æ¡ä»¶è·¯ç”±ã€å¹¶è¡Œåˆ†æ”¯ã€å¾ªç¯æ§åˆ¶å’Œäººæœºåä½œçš„å®ç°æ–¹æ³•
2026-02-21 20:10:09,314 - __main__ - INFO - call_tool payload: source_tool=tavily_search, result_type=papers, count=0
2026-02-21 20:10:09,315 - __main__ - INFO - call_tool: name=tavily_search, result_type=papers, count=0
2026-02-21 20:10:09,359 - __main__ - WARNING - handle_search: returned=0 for query=LangGraph å†…å­˜æŒä¹…åŒ–çš„æœ€ä½³å®è·µæœ‰å“ªäº›ï¼ŒåŒ…æ‹¬ Checkpointer ä¸ Store çš„é€‰æ‹©ç­–ç•¥ã€å¼‚æ­¥æŒä¹…åŒ–é…ç½®å’Œè·¨ä¼šè¯è®°å¿†ç®¡ç†
2026-02-21 20:10:09,359 - __main__ - INFO - call_tool payload: source_tool=tavily_search, result_type=papers, count=0
2026-02-21 20:10:09,359 - __main__ - INFO - call_tool: name=tavily_search, result_type=papers, count=0
2026-02-21 20:10:09,832 - __main__ - INFO - handle_search: returned=1
2026-02-21 20:10:09,832 - __main__ - INFO - call_tool payload: source_tool=tavily_search, result_type=papers, count=1
2026-02-21 20:10:09,832 - __main__ - INFO - call_tool: name=tavily_search, result_type=papers, count=1
2026-02-21 20:10:09,833 - __main__ - DEBUG - call_tool payload sample: {'paper_id': '', 'title': 'åŸºäºLangGraphçš„StateçŠ¶æ€æ¨¡å¼è®¾è®¡- æŒ‡å—- gccbuaa', 'authors': [], 'abstract': '![](https://img2024.cnblogs.com/blog/35695/202506/35695-20250620221146444-645204917.webp)\n![åšå®¢å›­logo](//assets.cnblogs.com/logo.svg)\n![æœç´¢](//assets.cnblogs.com/icons/search.svg)\n![æœç´¢](//assets.cnblogs.com/icons/enter.svg)\n![æœç´¢](//assets.cnblogs.com/icons/search.svg)\n![æœç´¢](//assets.cnblogs.com/icons/search.svg)\n![å†™éšç¬”](//assets.cnblogs.com/icons/newpost.svg)\n![æˆ‘çš„åšå®¢](//assets.cnblogs.com/icons/myblog.svg)\n![çŸ­æ¶ˆæ¯](//assets.cnblogs.com/icons/message.svg)\n![ç®€æ´æ¨¡å¼](//assets.cnblogs.com/icons/lite-mode-on.svg)\n![ç”¨æˆ·å¤´åƒ](//assets.cnblogs.com/icons/avatar-default.svg)\n![è¿”å›ä¸»é¡µ](/skins/custom/images/logo.gif)\n\n# [gccbuaa](https://www.cnblogs.com/gccbuaa)\n\n## \n\n![è®¢é˜…](/skins/coffee/images/xml.gif)\n\n# [langGraphä»å…¥é—¨åˆ°ç²¾é€šï¼ˆå››ï¼‰â€”â€”åŸºäºLangGraphçš„StateçŠ¶æ€æ¨¡å¼è®¾è®¡ - æŒ‡å—](https://www.cnblogs.com/gccbuaa/p/19616522 "å‘å¸ƒäº 2026-02-14 20:02")\n\n### 1 å¯¼è¯­\n\nåœ¨æ„å»ºAI Agentæ—¶ï¼ŒçŠ¶æ€ï¼ˆStateï¼‰æ˜¯è¿æ¥å„ä¸ªèŠ‚ç‚¹çš„çµé­‚ã€‚**LangGraph** é‡‡ç”¨æ¶ˆæ¯ä¼ é€’æœºåˆ¶æ¥é©±åŠ¨ç¨‹åºçš„è¿è¡Œï¼Œè€Œ `State` åˆ™æ˜¯ä¿¡æ¯çš„è½½ä½“ã€‚æœ¬æ–‡å°†æ·±å…¥æ¢è®¨ LangGraph ä¸­æœ€åŸºç¡€ä¹Ÿæœ€æ ¸å¿ƒçš„éƒ¨åˆ†â€”â€”**Stateçš„å®šä¹‰æ¨¡å¼è®¾è®¡**ã€‚é€šè¿‡å­¦ä¹ æœ¬æ–‡ï¼Œä½ å°†æŒæ¡å¦‚ä½•åˆ©ç”¨å­—å…¸å’Œ `TypedDict` æ„å»ºå¯é çš„å›¾çŠ¶æ€ï¼Œç†è§£èŠ‚ç‚¹é—´æ•°æ®æµåŠ¨çš„åº•å±‚é€»è¾‘ï¼Œä¸ºå¼€å‘å¤æ‚å¤šä»£ç†ç³»ç»Ÿæ‰“ä¸‹åšå®åŸºç¡€ã€‚\n\n`State`\n`TypedDict`\n\n### 2 æŠ€æœ¯æ ˆæ¸…å•\n\n### 3 é¡¹ç›®æ ¸å¿ƒåŸç†\n\nLangGraph çš„æ ¸å¿ƒåœ¨äº**çŠ¶æ€ç®¡ç†**ã€‚State æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªå…±äº«çš„æ•°æ®ç»“æ„ï¼Œå®ƒåœ¨å›¾ä¸­ä»å·¦å‘å³æµåŠ¨ã€‚æ¯ä¸ªèŠ‚ç‚¹æ‰§è¡Œå®Œæ¯•åï¼Œä¼šå°†æ›´æ–°çš„éƒ¨åˆ†â€œå¹¿æ’­â€ç»™çŠ¶æ€ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒçŠ¶æ€æ›´æ–°é‡‡ç”¨**è¦†ç›–æœºåˆ¶**ï¼ˆOverwritingï¼‰ï¼Œä½†é€šè¿‡ **Reducer å‡½æ•°**ï¼ˆå¦‚ `operator.add`ï¼‰ï¼Œæˆ‘ä»¬å¯ä»¥å®ç°æ›´å¤æ‚çš„é€»è¾‘ï¼Œä¾‹å¦‚æ¶ˆæ¯çš„**è‡ªåŠ¨è¿½åŠ **ã€‚  \n**åœ¨`AI Agent`åº”ç”¨ç¨‹åºçš„è®¾è®¡ä¸­ï¼Œåœºæ™¯çš„å¤æ‚æ€§ç›´æ¥å†³å®šäº†æ„å»ºå›¾çš„å¤æ‚åº¦ã€‚**ä¾‹å¦‚ï¼Œæœ€ç®€å•çš„åœºæ™¯å¯èƒ½ä»…æ¶‰åŠä¸€ä¸ªå¤§æ¨¡å‹çš„é—®ç­”æµç¨‹ï¼Œå½¢å¼ä¸ºï¼šSTART -> Node -> ENDï¼ˆå…¶ä¸­å¤§æ¨¡å‹çš„äº¤äº’é€»è¾‘è¢«å°è£…åœ¨Nodeä¸­ï¼‰ã€‚è€Œæ›´å¤æ‚çš„åœºæ™¯åˆ™å¯èƒ½æ¶‰åŠå¤šä¸ª`AI Agent`çš„ååŒå·¥ä½œï¼ŒåŒ…æ‹¬å¤šä¸ªåˆ†æ”¯å’Œå¾ªç¯çš„æ„æˆã€‚æ— è®ºæ˜¯ç®€å•è¿˜æ˜¯å¤æ‚çš„å›¾ï¼Œ`LangGraph`çš„ä»·å€¼æ°¸è¿œä¸åœ¨äºå¦‚ä½•å»å®šä¹‰èŠ‚ç‚¹ï¼Œå¦‚ä½•å»å®šä¹‰è¾¹ï¼Œè€Œæ˜¯åœ¨äº**å¦‚ä½•æœ‰æ•ˆç®¡ç†å„ä¸ªèŠ‚ç‚¹çš„è¾“å…¥å’Œè¾“å‡ºï¼Œä»¥ä¿æŒå›¾çš„æŒç»­è¿è¡ŒçŠ¶æ€**ã€‚`LangGraph`çš„**åº•å±‚å›¾ç®—æ³•é‡‡ç”¨æ¶ˆæ¯ä¼ é€’æœºåˆ¶æ¥å®šä¹‰å’Œæ‰§è¡Œè¿™äº›å›¾ä¸­çš„äº¤äº’æµç¨‹ï¼Œå…¶ä¸­çŠ¶æ€ï¼ˆStateï¼‰ç»„ä»¶æ‰®æ¼”ç€å…³é”®çš„è½½ä½“è§’è‰²ï¼Œè´Ÿè´£åœ¨å›¾çš„å„ä¸ªèŠ‚ç‚¹ä¹‹é—´ä¼ é€’ä¿¡æ¯**ã€‚è¿™ä¹Ÿå°±æ„å‘³ç€ï¼Œ`LangGraph`æ¡†æ¶çš„æ ¸å¿ƒåœ¨äº`State`çš„æœ‰æ•ˆä½¿ç”¨å’ŒæŒæ¡ã€‚åœ¨å¤æ‚çš„åº”ç”¨ä¸­ï¼Œ`State`ç»„ä»¶éœ€è¦å­˜å‚¨å’Œç®¡ç†çš„ä¿¡æ¯é‡ä¼šæ˜¾è‘—å¢åŠ ã€‚æ ¸å¿ƒåŠŸèƒ½å¦‚å·¥å…·ä½¿ç”¨ã€è®°å¿†èƒ½åŠ›å’Œäººæœºäº¤äº’ç­‰ï¼Œéƒ½ä¾èµ–`State`æ¥å®ç°å’Œç»´æŠ¤ã€‚æ‰€ä»¥ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å¯¹`LangGragh`æ¡†æ¶çš„æ¢ç´¢ï¼Œéƒ½å°†ç´§å¯†å›´ç»•`State`çš„å®ç°å’Œåº”ç”¨æœºåˆ¶å±•å¼€ï¼Œè¿™åŒ…æ‹¬`LangGraph`å†…ç½®å°è£…å¥½çš„å·¥å…·/æ–¹æ³•çš„ä½¿ç”¨ï¼Œä»¥åŠæˆ‘ä»¬è‡ªå®šä¹‰æ„å»ºåŠŸèƒ½æ—¶çš„å®ç°æ–¹æ³•ã€‚\n\n`operator.add`\n`AI Agent`\n`AI Agent`\n`LangGraph`\n`LangGraph`\n`LangGraph`\n`State`\n`State`\n`State`\n`LangGragh`\n`State`\n`LangGraph`\n\n![](https://i-blog.csdnimg.cn/direct/323b3953781743a8971e9cb44390bfb8.png)  \n`LangGraph`æ„å»ºçš„å›¾ä¸­çš„æ¯ä¸ªèŠ‚ç‚¹éƒ½å…·å¤‡è®¿é—®ã€è¯»å–å’Œå†™å…¥çŠ¶æ€çš„æƒé™ã€‚å½“æŸä¸€ä¸ªèŠ‚ç‚¹å»ä¿®æ”¹çŠ¶æ€æ—¶ï¼Œå®ƒä¼šå°†æ­¤ä¿¡æ¯å¹¿æ’­åˆ°å›¾ä¸­çš„æ‰€æœ‰å…¶ä»–èŠ‚ç‚¹ã€‚è¿™ç§å¹¿æ’­æœºåˆ¶å…è®¸å…¶ä»–èŠ‚ç‚¹å“åº”çŠ¶æ€çš„å˜åŒ–å¹¶ç›¸åº”åœ°è°ƒæ•´å…¶è¡Œä¸ºã€‚å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œä»åˆå§‹çŠ¶æ€ï¼ˆInitial Stateï¼‰å¼€å§‹ï¼Œå…¶ä¸­åŒ…å«äº†ä¸€æ¡æ¶ˆæ¯ { â€œxâ€: â€œ10â€ }ï¼Œéšç€æ¶ˆæ¯åœ¨èŠ‚ç‚¹é—´é€šè¿‡è¾¹ä¼ é€’ï¼Œæ¯ä¸ªèŠ‚ç‚¹æ ¹æ®å…¶é€»è¾‘å¯¹çŠ¶æ€è¿›è¡Œæ›´æ–°ã€‚Node 1 å’Œ Node 2 åˆ†åˆ«å¯¹çŠ¶æ€è¿›è¡Œäº†å¤„ç†å’Œå˜æ›´ï¼Œç»“æœæ˜¯åœ¨å›¾çš„æœ«ç«¯ï¼Œæˆ‘ä»¬å¾—åˆ°äº†ä¸€ä¸ªåŒ…å«ä¸‰æ¡æ¶ˆæ¯çš„æœ€ç»ˆçŠ¶æ€ { â€œxâ€: â€œ10â€ }, { â€œxâ€: â€œ11â€ }, { â€œyâ€: â€œ9â€ }ã€‚\\*\\*ä»å¼€å‘çš„è§’åº¦æ¥çœ‹ï¼Œ`State`å®é™…ä¸Šæ˜¯ä¸€ä¸ªå…±äº«çš„æ•°æ®ç»“æ„ã€‚å¦‚ä¸Šå›¾æ‰€ç¤ºï¼ŒçŠ¶æ€è¡¨ç°ä¸ºä¸€ä¸ªç®€å•çš„å­—å…¸ã€‚é€šè¿‡å¯¹è¿™ä¸ªå­—å…¸è¿›è¡Œè¯»å†™æ“ä½œï¼Œå¯ä»¥å®ç°è‡ªå·¦è€Œå³çš„æ•°æ®æµåŠ¨ï¼Œä»è€Œæ„å»ºä¸€ä¸ªå¯è¿è¡Œçš„å›¾ç»“æ„ã€‚é‚£ä¹ˆæ ¹æ®å‰é¢å­¦ä¹ çš„å†…å®¹ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨è¿™ä¸ªæµç¨‹æ¥å¤ç°å¹¶ç†è§£å›¾ä¸­çš„åŠ¨æ€æ•°æ®äº¤æ¢ï¼Œæ•´ä½“çš„è®¾è®¡å¦‚ä¸‹ï¼š  \n![](https://i-blog.csdnimg.cn/direct/b1915967b7c94b3eaefa582db0168e2f.png)\n\n![](https://i-blog.csdnimg.cn/direct/323b3953781743a8971e9cb44390bfb8.png)\n`LangGraph`\n`State`\n![](https://i-blog.csdnimg.cn/direct/b1915967b7c94b3eaefa582db0168e2f.png)\n\n### 4 å®æˆ˜æ­¥éª¤\n\n#### 4.1 ç¯å¢ƒå‡†å¤‡\n\nåœ¨å¼€å§‹ä»£ç å®ç°å‰ï¼Œç¡®ä¿å®‰è£…äº†æ ¸å¿ƒä¾èµ–ï¼š\n\n`pip install langgraph==1.0.5 typing-extensions==4.15.0`\n\n![](https://i-blog.csdnimg.cn/direct/2cee626b5bfb44018d727bf4e1467419.png)\n\n![](https://i-blog.csdnimg.cn/direct/2cee626b5bfb44018d727bf4e1467419.png)\n\n#### 4.2 ä»£ç å®ç°\n\næˆ‘ä»¬é€šè¿‡ä¸¤ä¸ªç¤ºä¾‹å¯¹æ¯”â€œå­—å…¸æ¨¡å¼â€ä¸â€œTypedDictæ¨¡å¼â€ã€‚ä»£ç ä¿å­˜åœ¨ `02-state-schema.py`ã€‚\n\n`02-state-schema.py`\n`import operator\nfrom typing import Annotated\nfrom langgraph.graph import StateGraph, START, END\nfrom typing_extensions import TypedDict\n# 1. ä½¿ç”¨å­—å…¸ç±»å‹å®šä¹‰çŠ¶æ€ (çµæ´»ä½†ç¼ºä¹çº¦æŸ)\ndef test_dict_state():\n# åˆå§‹åŒ–ä¸€ä¸ªä»¥å­—å…¸ä¸ºçŠ¶æ€æ¨¡å¼çš„å›¾\nbuilder = StateGraph(dict)\ndef addition(state):\n# èŠ‚ç‚¹ä»…è¿”å›éœ€è¦æ›´æ–°çš„éƒ¨åˆ†ï¼ŒLangGraph å†…éƒ¨ä¼šè‡ªåŠ¨åˆå¹¶\nreturn {"x": state["x"] + 1}\ndef subtraction(state):\n# æ–°å¢ä¸€ä¸ªé”® y\nreturn {"y": state["x"] - 2}\nbuilder.add_node("addition", addition)\nbuilder.add_node("subtraction", subtraction)\nbuilder.add_edge(START, "addition")\nbuilder.add_edge("addition", "subtraction")\nbuilder.add_edge("subtraction", END)\ngraph = builder.compile()\nresult = graph.invoke({"x": 10})\nprint(f"å­—å…¸çŠ¶æ€æ‰§è¡Œç»“æœ: {result}")\n# 2. ä½¿ç”¨ TypedDict å®šä¹‰çŠ¶æ€ (æ¨èï¼šå¼ºç±»å‹çº¦æŸ)\nclass State(TypedDict):\nx: int\ny: int\ndef test_typeddict_state():\nbuilder = StateGraph(State)\ndef addition(state: State):\n# å…³é”®é€»è¾‘ï¼šè¯»å–å½“å‰çŠ¶æ€ x å¹¶åŠ  1\nreturn {"x": state["x"] + 1}\ndef subtraction(state: State):\n# å…³é”®é€»è¾‘ï¼šåŸºäºæ›´æ–°åçš„ x è®¡ç®— y\nreturn {"y": state["x"] - 2}\nbuilder.add_node("addition", addition)\nbuilder.add_node("subtraction", subtraction)\nbuilder.add_edge(START, "addition")\nbuilder.add_edge("addition", "subtraction")\nbuilder.add_edge("subtraction", END)\ngraph = builder.compile()\nresult = graph.invoke({"x": 10})\nprint(f"TypedDictçŠ¶æ€æ‰§è¡Œç»“æœ: {result}")\n# 3. ä½¿ç”¨ Reducer å®ç°åˆ—è¡¨è¿½åŠ  (è¿›é˜¶ï¼šè§£å†³çŠ¶æ€è¦†ç›–é—®é¢˜)\nclass ReducerState(TypedDict):\n# ä½¿ç”¨ Annotated æ ‡æ³¨è¯¥å­—æ®µçš„æ›´æ–°æ–¹å¼ä¸º operator.add (è¿½åŠ è€Œéè¦†ç›–)\nmessages: Annotated[list[str], operator.add]\ndef test_reducer_state():\nbuilder = StateGraph(ReducerState)\ndef node_1(state: ReducerState):\n# èŠ‚ç‚¹ 1 è¿”å›ç¬¬ä¸€æ¡æ¶ˆæ¯\nreturn {"messages": ["è¿™æ˜¯æ¥è‡ªèŠ‚ç‚¹1çš„æ¶ˆæ¯"]}\ndef node_2(state: ReducerState):\n# èŠ‚ç‚¹ 2 è¿”å›ç¬¬äºŒæ¡æ¶ˆæ¯\nreturn {"messages": ["è¿™æ˜¯æ¥è‡ªèŠ‚ç‚¹2çš„æ¶ˆæ¯"]}\nbuilder.add_node("node_1", node_1)\nbuilder.add_node("node_2", node_2)\nbuilder.add_edge(START, "node_1")\nbuilder.add_edge("node_1", "node_2")\nbuilder.add_edge("node_2", END)\ngraph = builder.compile()\n# åˆå§‹çŠ¶æ€å¸¦æœ‰ä¸€æ¡æ¶ˆæ¯\nresult = graph.invoke({"messages": ["åˆå§‹æ¶ˆæ¯"]})\nprint(f"Reducer(è¿½åŠ æ¨¡å¼)æ‰§è¡Œç»“æœ: {result}")\nif __name__ == "__main__":\ntest_dict_state()\ntest_typeddict_state()\ntest_reducer_state()`\n\n#### 4.3 åŠŸèƒ½æµ‹è¯•\n\nè¿è¡Œè„šæœ¬ï¼Œè§‚å¯Ÿä¸¤ç§æ¨¡å¼ä¸‹çŠ¶æ€æ˜¯å¦‚ä½•åœ¨èŠ‚ç‚¹é—´ä¼ é€’å¹¶å®Œæˆè®¡ç®—çš„ã€‚\n\n![](https://i-blog.csdnimg.cn/direct/a2d34962ffad4d9aaa0fd6228ce69f64.png)\n\n![](https://i-blog.csdnimg.cn/direct/a2d34962ffad4d9aaa0fd6228ce69f64.png)\n\n### 5 æ ¸å¿ƒä»£ç è§£æ\n\n#### 5.1 StateGraph(dict) çµæ´»æ¨¡å¼\n\n`builder = StateGraph(dict)`\n\n#### 5.2 TypedDict å¼ºçº¦æŸæ¨¡å¼\n\n**åˆ’é‡ç‚¹**ï¼šè¿™æ˜¯å·¥ä¸šçº§å¼€å‘çš„æ ‡å‡†é€‰æ‹©ã€‚\n\n`class State(TypedDict):\nx: int\ny: int`\n`StateGraph(State)`\n\n#### 5.3 Annotated ä¸ Reducer æœºåˆ¶\n\n**åˆ’é‡ç‚¹**ï¼šè¿™æ˜¯å®ç°å¯¹è¯è®°å¿†ï¼ˆMemoryï¼‰çš„åº•å±‚æŠ€æœ¯ã€‚\n\n`messages: Annotated[list[str], operator.add]`\n`messages`\n`add`\n\n### 6 æ•ˆæœéªŒè¯\n\né€šè¿‡ `graph.invoke()` ä¼ é€’åˆå§‹çŠ¶æ€åï¼Œç³»ç»Ÿä¼šé¡ºåºæ‰§è¡Œå„èŠ‚ç‚¹ï¼Œå¹¶è¿”å›åˆå¹¶åçš„æœ€ç»ˆçŠ¶æ€å­—å…¸ã€‚\n\n`graph.invoke()`\n\n`ã€å›¾ç‰‡å ä½ç¬¦ï¼šæ ¸å¿ƒåŠŸèƒ½è¿è¡Œæ•ˆæœæˆªå›¾ - ç»ˆç«¯æ˜¾ç¤º x ä¸ y çš„æœ€ç»ˆåˆå¹¶ç»“æœã€‘`\n\n`ã€å›¾ç‰‡å ä½ç¬¦ï¼šæ ¸å¿ƒåŠŸèƒ½è¿è¡Œæ•ˆæœæˆªå›¾ - ç»ˆç«¯æ˜¾ç¤º x ä¸ y çš„æœ€ç»ˆåˆå¹¶ç»“æœã€‘`\n\n### 7 è¸©å‘è®°å½•\n\n#### 7.1 KeyDoesNotExist é”™è¯¯\n\n`KeyError: \'x\'`\n`state["x"]`\n`invoke`\n`TypedDict`\n`total=False`\n\n#### 7.2 èŠ‚ç‚¹è¿”å›å€¼ç±»å‹ä¸åŒ¹é…\n\n`int`\n`str`\n`TypedDict`\n`Pydantic`\n\n#### 7.3 çŠ¶æ€è¦†ç›–é—®é¢˜\n\n`Annotated`\n`operator.add`\n\n### 8 æ€»ç»“ä¸æ‰©å±•\n\næŒæ¡ **State çš„å®šä¹‰æ¨¡å¼** æ˜¯å¼€å¯ LangGraph é«˜é˜¶å¼€å‘çš„å¤§é—¨ã€‚é€šè¿‡ `TypedDict` æˆ‘ä»¬å»ºç«‹äº†ä¸€å¥—å¯é¢„æµ‹çš„æ•°æ®å¥‘çº¦ã€‚**åˆ’é‡ç‚¹**ï¼šçŠ¶æ€åœ¨ä»»ä½•ç»™å®šæ—¶é—´åªåŒ…å«æ¥è‡ªä¸€ä¸ªèŠ‚ç‚¹çš„æ›´æ–°ä¿¡æ¯ï¼Œä½† LangGraph å†…éƒ¨çš„åˆå¹¶æœºåˆ¶è®©å®ƒçœ‹èµ·æ¥åƒä¸€ä¸ªå…¨å±€å…±äº«æ± ã€‚ä¸‹ä¸€æ­¥ï¼Œæˆ‘ä»¬å°†ç ”ç©¶å¦‚ä½•é€šè¿‡ `Annotated` ä¸ `add_messages` å®ç°å¯¹è¯å†å²çš„è‡ªåŠ¨è¿½æº¯ã€‚\n\n`TypedDict`\n`Annotated`\n`add_messages`\n\næ¬¢è¿è¯„è®ºåŒºç•™è¨€è®¨è®ºæ ¸å¿ƒä¸»é¢˜ç›¸å…³çš„é—®é¢˜~\n\n![](https://img2024.cnblogs.com/blog/35695/202512/35695-20251205171919392-144975027.jpg)\n\n![](//assets.cnblogs.com/images/ghs.png)æµ™å…¬ç½‘å®‰å¤‡ 33010602011771å·', 'doi': '', 'published_date': None, 'pdf_url': '', 'url': 'https://www.cnblogs.com/gccbuaa/p/19616522', 'source': 'tavily', 'categories': ['web_search'], 'keywords': [], 'citations': 0, 'references': [], 'extra': {'score': 0.99996674, 'saved_path': None}}
2026-02-21 20:11:32,548 - __main__ - INFO - call_tool: name=exa_context_download, args={'papers': [{'paper_id': '', 'title': 'Multi-Agentç³»ç»Ÿæ„å»ºåˆæ¢ï¼šåŸºäºLangGraphçš„é•¿çŸ­æœŸè®°å¿†ç®¡ç†å®è·µæŒ‡å—', 'authors': [], 'abstract': 'Multi-Agentç³»ç»Ÿæ„å»ºåˆæ¢ï¼šåŸºäºLangGraphçš„é•¿çŸ­æœŸè®°å¿†ç®¡ç†å®è·µæŒ‡å— - çŸ¥ä¹[] \n\u200b[ç›´ç­”] \nåˆ‡æ¢æ¨¡å¼ç™»å½•/æ³¨å†Œ\n# Multi-Agentç³»ç»Ÿæ„å»ºåˆæ¢ï¼šåŸºäºLangGraphçš„é•¿çŸ­æœŸè®°å¿†ç®¡ç†å®è·µæŒ‡å—\n[![è…¾è®¯æŠ€æœ¯å·¥ç¨‹]] \n[è…¾è®¯æŠ€æœ¯å·¥ç¨‹] [\u200b![]] \nç¼–ç¨‹è¯é¢˜ä¸‹çš„ä¼˜ç§€ç­”ä¸»ä½œè€…ï¼šadacyang\n> å¦‚ä½•è®©AIæ™ºèƒ½ä½“ï¼ˆAgentï¼‰åƒäººç±»ä¸€æ ·æ‹¥æœ‰æŒä¹…çš„è®°å¿†ï¼Œä»è€Œåœ¨å¤æ‚çš„è¿ç»­ä»»åŠ¡ä¸­ä¿æŒä¸Šä¸‹æ–‡æ„ŸçŸ¥å’Œæ·±åº¦ç†è§£ï¼Ÿè¿™å·²æˆä¸ºæ„å»ºé«˜çº§æ™ºèƒ½ä½“çš„æ ¸å¿ƒæŒ‘æˆ˜ã€‚æœ¬æ–‡å°†æ·±å…¥æ¢è®¨Agent Memoryçš„æ ¸å¿ƒæ¦‚å¿µï¼Œå¹¶èšç„¦äº\n> LangGraph\n> æ¡†æ¶ä¸‹çš„é•¿çŸ­æœŸè®°å¿†å®ç°ï¼Œè¯¦è§£çŸ­æœŸä¼šè¯ä¸é•¿æœŸçŸ¥è¯†çš„å­˜å‚¨ã€ç®¡ç†ã€è¯­ä¹‰æ£€ç´¢ç­‰æŠ€å·§ã€‚æ›´è¿›ä¸€æ­¥åœ°ï¼Œæˆ‘ä»¬å°†é€šè¿‡ä¸€ä¸ªå¼•å…¥> MCPåè®®\n> çš„å®æˆ˜æ¡ˆä¾‹ï¼Œæ‰‹æŠŠæ‰‹å¸¦ä½ æ„å»ºä¸€ä¸ªçœŸå®çš„èåˆé•¿è®°å¿†æœºåˆ¶çš„Multi-Agentç³»ç»Ÿï¼Œç›´è§‚å±•ç¤ºä¸­æ–­ã€è®°å¿†ä¸åä½œçš„èåˆã€‚\nåŸºäºå¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰çš„æ™ºèƒ½ä½“ï¼ˆAgentï¼‰ç³»ç»Ÿä¸­ï¼Œè®°å¿†æœºåˆ¶æ˜¯å®ç°æŒç»­ã€è¿è´¯å’Œä¸ªæ€§åŒ–äº¤äº’çš„æ ¸å¿ƒåŸºçŸ³ï¼Œé€šè¿‡è®°å¿†ï¼Œå¯ä»¥è®©Agentè®°ä½è¿‡å¾€çš„äº¤äº’ï¼Œä¿æŒä¸Šä¸‹æ–‡çš„ä¸€è‡´æ€§ï¼Œå¹¶èƒ½ä»åé¦ˆä¸­å­¦ä¹ ï¼Œé€‚åº”ç”¨æˆ·çš„åå¥½ã€‚\n**æœ¬æ–‡æ ¸å¿ƒè¦ç‚¹æ¦‚è¿°ï¼š**\n1.ä»‹ç»Agent Memoryçš„åŸºæœ¬æƒ…å†µ\n2.LangGraphé•¿çŸ­æœŸè®°å¿†è¯¦è§£åŠæ¡ˆä¾‹è¯´æ˜ï¼šåŒ…å«çŸ­æœŸè®°å¿†å®ç°ã€ç®¡ç†æ–¹æ³•ï¼Œé•¿æœŸè®°å¿†çš„å®ç°æ–¹æ³•ï¼Œä»¥åŠæ­å»ºäº†èåˆpostgresæ•°æ®åº“ã€é›†æˆEmbeddingæœåŠ¡è¿›è¡Œè¯­ä¹‰æœç´¢ç­‰å¯ç”¨äºç”Ÿäº§ç¯å¢ƒçš„çœŸå®æ¡ˆä¾‹ã€‚\n3.å¼•å…¥MCPåè®®æ„å»ºçœŸå®çš„Agenté•¿è®°å¿†åº”ç”¨ï¼šæ­å»ºä¸€ä¸ªåŸºäºsupervisoræ¶æ„ï¼Œé›†æˆä¸­æ–­æœºåˆ¶ã€é•¿çŸ­æœŸè®°å¿†æœºåˆ¶çš„multi-agentç³»ç»Ÿã€‚\n### **è®°å¿†æœºåˆ¶ä»‹ç»**\n### **Agent Memoryæ˜¯ä»€ä¹ˆï¼Ÿ**\n![] \nä¸Šå›¾ä¸­ï¼ˆæ¥æºäºMem0[1]ï¼‰ï¼Œå·¦è¾¹æ˜¯æ²¡æœ‰Memoryçš„agentï¼Œå³è¾¹æ˜¯æœ‰Memoryçš„agentï¼Œåè€…å¯ä»¥æ ¹æ®ç”¨æˆ·çš„è¿‡å¾€ä¿¡æ¯ï¼ˆç´ é£Ÿä¸»ä¹‰è€…ã€ä¸å–œæ¬¢ä¹³åˆ¶å“ï¼‰ç»™å‡ºæ›´åˆç†çš„å“åº”ï¼ˆä¸å«ä¹³åˆ¶å“çš„ç´ é£Ÿèœå•ï¼‰ï¼Œè€Œå‰è€…çš„å›ç­”æ˜¾ç„¶æ˜¯ä¸åˆé€‚çš„ã€‚\nç®€å•æ¥è¯´ï¼ŒMemoryæ˜¯èµ‹äºˆAgentè®°å¿†èƒ½åŠ›çš„æŠ€æœ¯å’Œæ¶æ„ï¼Œèƒ½å¤Ÿè®©Agentåƒäººä¸€æ ·è®°ä½è¿‡å»çš„äº¤äº’ã€å­¦åˆ°çš„çŸ¥è¯†ã€æ‰§è¡Œè¿‡çš„ä»»åŠ¡åŠæœªæ¥çš„è®¡åˆ’ï¼Œæ˜¯å°†ä¸€ä¸ªLLMè½¬å˜ä¸ºèƒ½å¤Ÿæ‰§è¡Œå¤æ‚ã€é•¿æœŸä»»åŠ¡çš„çœŸæ­£â€æ™ºèƒ½ä½“â€œçš„æ ¸å¿ƒæ‰€åœ¨ã€‚\n### **å…³äºAgent Memoryæˆ‘ä»¬éœ€è¦è€ƒè™‘ä»€ä¹ˆï¼Ÿ**\nå¦‚ä½•è·å–è®°å¿†ï¼šé€šè¿‡å’Œç”¨æˆ·äº¤äº’ã€ç¯å¢ƒäº¤äº’...\næ€ä¹ˆç»„ç»‡è®°å¿†ï¼šæ¨¡å‹å‚æ•°ã€æ¨¡å‹ä¸Šä¸‹æ–‡ã€æ•°æ®åº“æ€ä¹ˆåˆ©ç”¨è®°å¿†ï¼šRAGã€Few-shot...\n### **æœ‰å“ªäº›Memoryç±»å‹ï¼Ÿ**\nå…³äºMemoryçš„åˆ†ç±»ï¼Œæœ‰è®¸å¤šç§åˆ†ç±»ä½“ç³»ï¼Œè¿™é‡Œæˆ‘ä»¬åªè®¨è®ºæœ€å¸¸è§åŠæœ€æ˜“äºç†è§£çš„ã€‚\næ­£å¦‚äººç±»åˆ©ç”¨é•¿çŸ­æœŸè®°å¿†è¿›è¡Œæœ‰æ•ˆçš„äº¤äº’å’Œå­¦ä¹ ä¸€æ ·ï¼ŒAgentçš„è®°å¿†æœºåˆ¶é€šå¸¸åˆ’åˆ†ä¸ºçŸ­æœŸè®°å¿†ï¼ˆshort-term memoryï¼‰å’Œé•¿æœŸè®°å¿†(long-term memory)ï¼ŒçŸ­æœŸè®°å¿†å†³å®šäº†Agentåœ¨å¾®è§‚ä»»åŠ¡ä¸Šçš„å³æ—¶è¡¨ç°ï¼Œè€Œé•¿æœŸè®°å¿†åˆ™ä½œä¸ºæŒä¹…çŸ¥è¯†åº“ï¼Œå†³å®šäº†Agentåœ¨å®è§‚æ—¶é—´å°ºåº¦ä¸Šçš„æ™ºèƒ½æ·±åº¦å’Œä¸ªæ€§åŒ–æ°´å¹³ï¼Œé€šè¿‡ä¸¤è€…é…åˆï¼ŒAgentæ‰èƒ½è¡¨ç°å‡ºè¿è´¯æ€§ã€ä¸Šä¸‹æ–‡æ„ŸçŸ¥èƒ½åŠ›ï¼Œæ‰ä¼šæ˜¾å¾—æ›´æ™ºèƒ½ã€‚\n### **Agent Memoryå¦‚ä½•å·¥ä½œï¼Ÿ**\nAgenté€šå¸¸é€šè¿‡ä»¥ä¸‹å‡ æ­¥æ¥æœ‰æ•ˆåœ°ç®¡ç†è®°å¿†ï¼Œä½¿å¾—æ¯æ¬¡äºç”¨æˆ·çš„äº¤äº’éƒ½æ›´åŠ ç²¾å‡†æ™ºèƒ½ï¼š\n1. è®°å¿†å­˜å‚¨ï¼šé€šè¿‡è®¾è®¡ä¸€ç³»åˆ—ç­–ç•¥æ¥å­˜å‚¨é‡è¦çš„äº¤äº’ä¿¡æ¯ï¼Œè¿™äº›ä¿¡æ¯å¯èƒ½æ¥æºäºå¯¹è¯å†…å®¹ã€å†å²æ•°æ®æˆ–ä»»åŠ¡è¦æ±‚ç­‰ç­‰ã€‚2. è®°å¿†æ›´æ–°ï¼šè®°å¿†ä¼šéšç€äº¤äº’çš„å‘ç”Ÿï¼Œä¸æ–­åœ°è¿›è¡Œæ›´æ–°ï¼Œä¾‹å¦‚ç”¨æˆ·çš„åå¥½ã€æœ€æ–°çš„è¿‘å†µç­‰ç­‰ã€‚è®°å¿†æ›´æ–°ä½¿å¾—Agentèƒ½å¤Ÿä¸æ–­ä¼˜åŒ–å…¶å“åº”ã€‚\n3. è®°å¿†æ£€ç´¢ï¼šAgentæ ¹æ®å½“ä¸‹çš„éœ€æ±‚ï¼Œå»è®°å¿†ä¸­æ£€ç´¢éœ€è¦çš„è®°å¿†å†…å®¹ï¼Œä»è€Œæä¾›æ›´åŠ æ™ºèƒ½çš„å›å¤ã€‚### **Agent Memoryæ€ä¹ˆå®ç°ï¼Ÿ**\n1. ç‰©ç†å¤–æŒ‚ï¼šå³å¤–ç½®æ•°æ®åº“å’ŒRAGï¼Œéœ€è¦æ£€ç´¢å½“å‰queryç›¸å…³çš„å†…å®¹ï¼Œä¾‹å¦‚ï¼šMem0ã€ACEã€‚å¥½å¤„æ˜¯å³æ’å³ç”¨ï¼Œåå¤„æ˜¯ä¸å¤Ÿend-to-end\n2. Memory as Reasoning / Toolï¼šé€šè¿‡è®­ç»ƒReasoningæˆ–Toolçš„æ–¹å¼åŠ¨æ€æ›´æ–°contextï¼Œä¾‹å¦‚ï¼šMemAgentã€memory-R1ã€‚å¥½å¤„æ˜¯æ›´æ¥è¿‘end-to-endï¼Œä½†ä¸æ˜¯å¾ˆçµæ´»ã€‚\n3.å‚æ•°æ›´æ–°ï¼šLLMæœ¬èº«å°±æ˜¯ä¸€ä¸ªMemoryä½“ï¼Œæ‰€æœ‰å‚æ•°éƒ½æ˜¯å®ƒçš„Memoryï¼Œé€šè¿‡æ›´æ–°å‚æ•°æ¥æ›´æ–°è®°å¿†ï¼Œè¿™ç§æ–¹å¼æ˜¯æœ€æœ¬è´¨çš„ï¼Œä½†ä¹Ÿæ˜¯æœ€éš¾å®ç°çš„ã€‚\n### **LangGraphä¸­çš„è®°å¿†ç®¡ç†**\nLangGraph[2]ä½œä¸ºä¸€æ¬¾é¢å‘å¤šæ™ºèƒ½ä½“åä½œä¸çŠ¶æ€ç®¡ç†çš„æ¡†æ¶ï¼Œå…¶è®¾è®¡äº†å·§å¦™çš„è®°å¿†ç®¡ç†ç³»ç»Ÿï¼Œæ—¨åœ¨ä¸ºAgentæä¾›åœ¨ä¸åŒäº¤äº’ä¸­å­˜å‚¨ã€æ£€ç´¢å’Œåˆ©ç”¨ä¿¡æ¯çš„èƒ½åŠ›ã€‚å®ƒåŒºåˆ†äº†ä¸¤ç§ä¸»è¦çš„è®°å¿†ç±»å‹ï¼šçŸ­æœŸè®°å¿†å’Œé•¿æœŸè®°å¿†ã€‚åœ¨å®é™…ä½¿ç”¨ä¸­ï¼Œé€šè¿‡è¿™ä¸¤ç§è®°å¿†ååŒï¼Œæ—¢èƒ½ä¿éšœå®æ—¶ä»»åŠ¡çš„é«˜æ•ˆæ‰§è¡Œï¼Œåˆæ”¯æŒäº†è·¨ä»»åŠ¡ã€è·¨å‘¨æœŸçš„ç»éªŒå¤ç”¨ã€‚\nâ—short-term memoryï¼ˆé€šè¿‡Checkpointerå®ç°ï¼‰ï¼šé’ˆå¯¹å•ä¸ªå¯¹è¯çº¿ç¨‹ï¼Œæ ¸å¿ƒä»·å€¼åœ¨äºä¿éšœå¯¹è¯çš„ä¸´æ—¶æ€§ï¼Œä½¿å¾—Agentèƒ½å¤Ÿè·Ÿè¸ªä¼šè¯ä¸­çš„å¤šè½®å¯¹è¯ï¼Œå¯ä»¥åœ¨è¯¥çº¿ç¨‹å†…çš„ä»»ä½•æ—¶åˆ»è¢«å›å¿†ã€‚\nâ—long-term memoryï¼ˆé€šè¿‡Storeå®ç°ï¼‰ï¼šå¯ä»¥è·¨å¯¹è¯çº¿ç¨‹å…±äº«ï¼Œå¯ä»¥åœ¨ä»»ä½•æ—¶é—´ï¼Œä»»ä½•çº¿ç¨‹ä¸­è¢«å›å¿†ï¼Œè€Œä¸åƒçŸ­æœŸè®°å¿†å±€é™äºå•ä¸ªå¯¹è¯ã€‚\n![] \né€šè¿‡ä¸‹è¡¨ï¼Œå¯ä»¥æ›´æ¸…æ™°çš„çœ‹åˆ°ä¸¤è€…çš„åŒºåˆ«ï¼š||short-term memory|long-term memory|\nç›®çš„|ç»´æŒå¯¹è¯ä¸Šä¸‹æ–‡|å­˜å‚¨è·¨ä¼šè¯çš„æŒä¹…åŒ–äº‹å®ã€åå¥½å’ŒçŸ¥è¯†|\næŒä¹…æ€§|ä¼šè¯çº§åˆ«ï¼ˆå¯ä»¥ä¸´æ—¶ï¼Œå¯ä»¥æŒä¹…ï¼‰|åº”ç”¨çº§åˆ«ï¼ˆå§‹ç»ˆæŒä¹…ï¼‰|\nä½œç”¨åŸŸ|å•ä¸€ä¼šè¯|è·¨ä¼šè¯ã€è·¨ç”¨æˆ·|\næŒä¹…åŒ–æ–¹å¼|æ£€æŸ¥ç‚¹ï¼ˆcheckpointï¼‰|å­˜å‚¨ï¼ˆStoreï¼‰|\næ›´æ–°æœºåˆ¶|è‡ªåŠ¨ï¼ˆåœ¨æ¯ä¸ªå›¾æ­¥éª¤åä¿å­˜çŠ¶æ€ï¼‰|æ‰‹åŠ¨/æ˜¾å¼|\nå…¸å‹ç”¨é€”|å¯¹è¯å†å²ã€ä¸­é—´çŠ¶æ€|ç”¨æˆ·åå¥½ã€çŸ¥è¯†åº“ã€è¯­ä¹‰è®°å¿†|\n![] ### **LangGraphè®°å¿†çš„æ¶æ„åŸºç¡€**\nè¦æƒ³æ›´å¥½çš„ç†è§£LangGraphä¸­çš„è®°å¿†æœºåˆ¶ï¼Œé¦–å…ˆéœ€è¦ç†è§£å…¶æ”¯æŒåŒè½¨è®°å¿†ç³»ç»Ÿçš„æ ¸å¿ƒæ¦‚å¿µã€‚\n### **Checkpointer**\nLangGraphæœ‰ä¸€ä¸ªå†…ç½®çš„æŒä¹…åŒ–ï¼ˆPersistenceï¼‰å±‚ï¼Œé€šè¿‡checkpointerå®ç°ï¼Œèƒ½å¤ŸæŒä¹…åŒ–å­˜å‚¨å›¾çŠ¶æ€ï¼Œè¿™ä½¿å¾—å¼€å‘è®°å¿†åŠŸèƒ½å’Œäººç±»å¹²é¢„åŠŸèƒ½æˆä¸ºå¯èƒ½ã€‚\nå½“ä½¿ç”¨æ£€æŸ¥ç‚¹ç¼–è¯‘ä¸€ä¸ªå›¾æ—¶ï¼Œæ£€æŸ¥ç‚¹ä¼šåœ¨æ¯ä¸ªsuper-stepä¿å­˜å›¾çŠ¶æ€çš„checkpointï¼Œè¿™äº›checkpointè¢«ä¿å­˜åˆ°ä¸€ä¸ªthreadä¸­ï¼Œå¯ä»¥åœ¨å›¾æ‰§è¡Œåè®¿é—®ã€‚å› ä¸ºthreadså…è®¸åœ¨æ‰§è¡Œåè®¿é—®å›¾çš„çŠ¶æ€ï¼Œæ‰€ä»¥å¯ä»¥å®ç°è®°å¿†ã€äººæœºåä½œã€æ—¶é—´æ—…è¡Œã€å®¹é”™ç­‰å¤šç§å¼ºå¤§çš„åŠŸèƒ½ã€‚\n![] \nå·¥ä½œæµç¨‹ï¼š```\n`ç”¨æˆ·è¾“å…¥ â†’[èŠ‚ç‚¹ 1] â†’ğŸ’¾ä¿å­˜çŠ¶æ€â†’[èŠ‚ç‚¹ 2] â†’ğŸ’¾ä¿å­˜çŠ¶æ€â†’è¾“å‡ºâ†“â†“Checkpoint 1 Checkpoint 2`\n```\n### **Thread**\nä¸ºäº†ç®¡ç†å¤šä¸ªç‹¬ç«‹çš„å¯¹è¯ï¼ŒLangGraphä½¿ç”¨äº†threadçš„æ¦‚å¿µã€‚thread\\_idæ˜¯ç”±checkpointerä¿å­˜çš„æ¯ä¸ªcheckpointçš„å”¯ä¸€idï¼Œæ˜¯æ¿€æ´»å’ŒåŒºåˆ†ä¸åŒå¯¹è¯çº¿ç¨‹çš„å”¯ä¸€keyã€‚åœ¨è°ƒç”¨å›¾çš„invokeæˆ–streamæ–¹æ³•æ—¶ï¼Œé€šè¿‡configurableå­—å…¸ä¼ å…¥ä¸€ä¸ªthread\\_idï¼Œå°±ä»£è¡¨è¿™æ¬¡æ“ä½œå±äºthread\\_idè¿™ä¸ªç‰¹å®šçš„å¯¹è¯ã€‚\n### **Store**\nå¦‚ä¸Šæ‰€è¿°ï¼Œå›¾çŠ¶æ€å¯ä»¥ç”±checkpointeråœ¨æ¯ä¸ªsuper-stepå†™å…¥çº¿ç¨‹ï¼Œä»è€Œå®ç°çŠ¶æ€çš„æŒä¹…åŒ–ã€‚ä½†æ˜¯ï¼Œå¦‚æœæƒ³åœ¨å¤šä¸ªçº¿ç¨‹ä¹‹é—´ä¿ç•™ä¸€äº›ä¿¡æ¯çš„è¯ï¼Œé‚£ä¹ˆå°±éœ€è¦ç”¨åˆ°Storeã€‚Storeæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªæš´éœ²ç»™å›¾èŠ‚ç‚¹å’Œå·¥å…·çš„é”®å€¼æ•°æ®åº“ï¼Œä¸checkpointerçš„è‡ªåŠ¨åŒ–å¿«ç…§ä¸åŒï¼ŒStoreéœ€è¦æ˜¾å¼å’Œä¸»åŠ¨çš„è¿›è¡Œæ“ä½œã€‚\n![]<image_link>### **Namespace**\nStoreä¸­çš„æ•°æ®é€šå¸¸é€šè¿‡æ›´æŒä¹…çš„æ ‡è¯†æ¥ç»„ç»‡ã€‚user\\_idæ˜¯æœ€å¸¸è§çš„ï¼Œç”¨äºå…³è”ç”¨æˆ·çš„æ‰€æœ‰ä¿¡æ¯ï¼Œæ­¤å¤–ï¼Œnamespaceæä¾›äº†ä¸€ç§æ•°æ®éš”ç¦»æœºåˆ¶ï¼Œä¾‹å¦‚ï¼Œä½¿ç”¨ä½¿ç”¨ (â€œmemoriesâ€, user\\_id) è¿™æ ·çš„å…ƒç»„ä½œä¸ºå‘½åç©ºé—´ï¼Œå¯ä»¥å°†ç”¨æˆ·çš„è®°å¿†ä¸å…¶ä»–ç±»å‹çš„æ•°æ®ï¼ˆå¦‚ç”¨æˆ·åå¥½(â€œpreferencesâ€, user\\_id)ï¼‰æ¸…æ™°åœ°åˆ†ç¦»å¼€æ¥ï¼Œé¿å…æ•°æ®å†²çªï¼Œä¿æŒçŸ¥è¯†åº“çš„æ•´æ´æœ‰åºã€‚\n### **çŸ­æœŸè®°å¿†è¯¦è§£**\n### **InMemorySaverå†…å­˜ä¼šè¯ä¸´æ—¶å­˜å‚¨**\nå¯¹äºå¼€å‘ã€åŸå‹è®¾è®¡å’Œæµ‹è¯•é˜¶æ®µï¼Œæœ€ç®€å•å¿«æ·çš„æ–¹å¼æ˜¯ä½¿ç”¨InMemorySaverã€‚å®ƒå°†æ‰€æœ‰çš„å¯¹è¯çŠ¶æ€å­˜å‚¨åœ¨å†…å­˜ä¸­çš„ä¸€ä¸ªPythonå­—å…¸é‡Œã€‚\n1.**è®¾ç½®è®°å¿†ç®¡ç†æ£€æŸ¥ç‚¹**\n```\n`from langchain\\_openai import ChatOpenAI\nfrom langchain.chat\\_models import init\\_chat\\_model\nfrom langgraph.checkpoint.memory import InMemorySaver\nfrom langgraph.prebuilt import create\\_react\\_agent\n# åˆå§‹åŒ–æ£€æŸ¥ç‚¹ä¿å­˜å™¨checkpointer = InMemorySaver()`\n```\n2.**å®šä¹‰å¤§æ¨¡å‹å¹¶åˆ›å»ºagent**\n```\n`BASE\\_URL=&#34;&#34;&#34;&#34; TOKEN=&#34;&#34;&#34;&#34;\nMODEL\\_NAME=&#34;&#34;&#34;&#34;\nmodel = init\\_chat\\_model(\nmodel=MODEL\\_NAME,\nmodel\\_provider=&#34;&#34;openai&#34;&#34;, base\\_url=BASE\\_URL,\napi\\_key=TOKEN,\ntemperature=0,\n)\nagent = create\\_react\\_agent(\nmodel=model,\ntools=[],\n# ä¼ å…¥æ£€æŸ¥ç‚¹ï¼Œæ˜¯å°†æŒä¹…åŒ–èƒ½åŠ›â€œæ³¨å…¥â€å›¾çš„å…³é”®æ­¥éª¤ã€‚ç¼–è¯‘åçš„graphå¯¹è±¡ç°åœ¨å…·å¤‡äº†çŠ¶æ€ç®¡ç†çš„èƒ½åŠ›ã€‚\ncheckpointer=checkpointer\n)`\n```\nå¦‚æœæ˜¯åº•å±‚è‡ªå®šä¹‰apiåœ¨å›¾æ„å»ºé˜¶æ®µä¼ å…¥æ£€æŸ¥ç‚¹çš„ä»£ç æ˜¯graph = builder.compile(checkpointer=checkpointer)ã€‚\n3.**çŸ­æœŸè®°å¿†-å†…å­˜åç«¯**\n```\n`config = {&#34;&#34;configurable&#34;&#34;: {&#34;&#34;thread\\_id&#34;&#34;: &#34;&#34;1&#34;&#34;}} # æ¿€æ´»è®°å¿†æœºåˆ¶çš„æ ¸å¿ƒã€‚å¦‚æœæ²¡æœ‰æä¾›thread\\_idï¼Œæ¯æ¬¡invokeè°ƒç”¨éƒ½å°†æ˜¯æ— çŠ¶æ€çš„ï¼Œåªè¦ä½¿ç”¨ç›¸åŒçš„thread\\_idï¼ŒLangGraphå°±ä¼šåœ¨å¤šæ¬¡è°ƒç”¨ä¹‹é—´ç»´æŒå¯¹è¯çŠ¶æ€\nresponse = agent.invoke(\n{&#34;&#34;messages&#34;&#34;: [{&#34;&#34;role&#34;&#34;: &#34;&#34;user&#34;&#34;, &#34;&#34;content&#34;&#34;: &#34;&#34;ä½ å¥½ï¼Œæˆ‘å«adaï¼&#34;&#34;}]},\nconfig\n)\nprint(f&#34;&#34;thread1\\_bot\\_answerï¼š{response[&#39;&#39;messages&#39;&#39;][-1].content}&#34;&#34;)\nresponse = agent.invoke(\n{&#34;&#34;messages&#34;&#34;: [{&#34;&#34;role&#34;&#34;: &#34;&#34;user&#34;&#34;, &#34;&#34;content&#34;&#34;: &#34;&#34;ä½ å¥½ï¼Œè¯·é—®ä½ è¿˜è®°å¾—æˆ‘å«ä»€ä¹ˆåå­—ä¹ˆï¼Ÿ&#34;&#34;}]},\nconfig\n)\nprint(&#39;&#39;------------çº¿ç¨‹1------------------&#39;&#39;)\nprint(f&#34;&#34;thread1\\_bot\\_answerï¼š{response[&#39;&#39;messages&#39;&#39;][-1].content}&#34;&#34;)\nnew\\_config = {&#34;&#34;configurable&#34;&#34;: {&#34;&#34;thread\\_id&#34;&#34;: &#34;&#34;2&#34;&#34;}}\nresponse = agent.invoke(\n{&#34;&#34;messages&#34;&#34;: [{&#34;&#34;role&#34;&#34;: &#34;&#34;user&#34;&#34;, &#34;&#34;content&#34;&#34;: &#34;&#34;ä½ å¥½ï¼Œè¯·é—®ä½ è¿˜è®°å¾—æˆ‘å«ä»€ä¹ˆåå­—ä¹ˆï¼Ÿ&#34;&#34;}]},\nnew\\_config\n)\nprint(&#39;&#39;------------çº¿ç¨‹2------------------&#39;&#39;)\nprint(f&#34;&#34;thread2\\_bot\\_answerï¼š{response[&#39;&#39;messages&#39;&#39;][-1].content}&#34;&#34;)`\n```\næ‰§è¡Œä¸Šé¢ä»£ç ï¼Œå¯ä»¥çœ‹åˆ°è¾“å‡ºå¦‚ä¸‹ï¼š```\n`thread1\\_bot\\_answerï¼šä½ å¥½ï¼ŒAdaï¼å¾ˆé«˜å…´è®¤è¯†ä½ ï¼ğŸ˜Š\nè¿™æ˜¯ä¸€ä¸ªå¾ˆç¾çš„åå­—å‘¢ï¼æœ‰ä»€ä¹ˆæˆ‘å¯ä»¥å¸®åŠ©ä½ çš„å—ï¼Ÿæ— è®ºæ˜¯æƒ³èŠèŠå¤©ï¼Œè¿˜æ˜¯æœ‰ä»»ä½•é—®é¢˜éœ€è¦è§£ç­”ï¼Œæˆ‘éƒ½å¾ˆä¹æ„ä¸ºä½ æä¾›å¸®åŠ©ã€‚------------çº¿ç¨‹1------------------\nthread1\\_bot\\_answerï¼šå½“ç„¶è®°å¾—ï¼ä½ åˆšæ‰å‘Šè¯‰æˆ‘ä½ å« Adaï½å¾ˆé«˜å…´å†æ¬¡å’Œä½ æ‰“æ‹›å‘¼ï¼ğŸ˜Š\n------------çº¿ç¨‹2------------------\nthread2\\_bot\\_answerï¼šä½ å¥½ï¼å¾ˆæŠ±æ­‰ï¼Œæˆ‘æ— æ³•è®°ä½ä¹‹å‰å¯¹è¯ä¸­çš„ä¸ªäººä¿¡æ¯ï¼Œæ¯”å¦‚ä½ çš„åå­—ã€‚è¿™æ˜¯ä¸ºäº†ä¿æŠ¤ä½ çš„éšç§ï¼Œæ‰€ä»¥æˆ‘ä¸ä¼šä¿ç•™è¿™ç±»æ•°æ®ã€‚ä½ å¯ä»¥å‘Šè¯‰æˆ‘ä½ çš„åå­—ï¼Œæˆ–è€…ä»»ä½•ä½ æƒ³è®©æˆ‘ç§°å‘¼ä½ çš„æ–¹å¼ï¼Œæˆ‘ä¼šå¾ˆä¹æ„åœ¨è¿™æ¬¡çš„å¯¹è¯ä¸­ä½¿ç”¨å®ƒï¼ğŸ˜Š`\n```\n**çŸ­æœŸè®°å¿†ä¸çº¿ç¨‹ç›¸å…³ï¼Œåœ¨å¯¹è¯æ—¶ï¼Œéœ€è¦åœ¨é…ç½®ä¸­ä¼ å…¥thread\\_id**ã€‚é€šè¿‡ä¸Šé¢çš„ç»“æœæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œå½“æˆ‘ä»¬ä¼ å…¥ç›¸åŒçš„thread\\_idæ—¶ï¼Œagentå°±å¯ä»¥è®°ä½ç”¨æˆ·çš„åå­—ï¼Œç„¶è€Œå½“æˆ‘ä»¬æ›´æ¢thread\\_idæ—¶ï¼Œagentå°±ä¸è®°å¾—ç”¨æˆ·çš„åå­—äº†ã€‚\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ**InMemorySaverå°†æ‰€æœ‰çŠ¶æ€éƒ½ä¿å­˜åœ¨å†…å­˜ä¸­**ï¼Œä¸€æ—¦ç¨‹åºç»ˆæ­¢ï¼Œé‚£ä¹ˆæ‰€æœ‰å¯¹è¯å†å²éƒ½ä¼šæ¶ˆå¤±ã€‚\n### **æ•°æ®åº“æŒä¹…åŒ–å­˜å‚¨**\nå¯ä»¥å‘ç°ï¼Œä¸Šé¢ä¸€å°èŠ‚çš„ä»£ç åœ¨åº”ç”¨ç¨‹åºç»“æŸåå†å¯åŠ¨ï¼Œè®°å¿†å°±åˆæ¶ˆå¤±äº†ã€‚è¿™æ˜¯å› ä¸ºInMemorySaverä»…ä»…æ˜¯æŠŠè®°å¿†ä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œåº”ç”¨ç¨‹åºç»“æŸåé‡Šæ”¾å†…å­˜è®°å¿†å°±æ¶ˆå¤±äº†ã€‚åœ¨ç”Ÿäº§ç¯å¢ƒä¸­å¸¸å¸¸ä½¿ç”¨æ•°æ®åº“æ”¯æŒçš„æ£€æŸ¥ç‚¹è®°å½•å™¨æŒä¹…åŒ–ä¿å­˜è®°å¿†ï¼Œä»¥ä¿è¯æ•°æ®çš„å¯é æ€§å’ŒæœåŠ¡çš„è¿ç»­æ€§ã€‚\nè¿™é‡Œæˆ‘ä»¬ä»¥postgresæ•°æ®åº“ä¸ºä¾‹æ¥è¯´æ˜ï¼Œæ€ä¹ˆæŒä¹…åŒ–åœ°ä¿å­˜è®°å¿†æ•°æ®ã€‚\n1.é¦–å…ˆå®‰è£…ä»¥ä¸‹ä¾èµ–ï¼š\n```\n`pip install -U &#34;psycopg[binary,pool]&#34; langgraph-checkpoint-postgres`\n```\n2.å®‰è£…postgresæ•°æ®åº“ï¼Œå…·ä½“çš„å®‰è£…æ–¹æ³•å¯ä»¥å‚è€ƒï¼š[Linuxä¸‹å®‰è£…PostgreSQL\\_linuxå®‰è£…postgresql-CSDNåšå®¢] ã€‚è¿™é‡Œé€‰æ‹©ä»¥æºç çš„æ–¹å¼è¿›è¡Œå®‰è£…ï¼Œå®‰è£…åŒ…ä»å®˜ç½‘ï¼ˆ[PostgreSQL: Downloads] ï¼‰ä¸‹è½½ï¼Œé€‰æ‹©æœ€æ–°çš„postgresql-18.0.tar.gzã€‚\n3.å®‰è£…æ•°æ®åº“æˆåŠŸåï¼Œç¼–ç å¦‚ä¸‹ä»£ç ã€‚\nDB\\_URIæ˜¯æ•°æ®åº“è¿æ¥çš„URLã€‚æƒ³è¦è‡ªåŠ¨ä¿å­˜åœ¨æ•°æ®åº“ä¸­çš„Stateéœ€è¦åœ¨PostgresSaver.from\\_conn\\_string(DB\\_URI)ä¸Šä¸‹æ–‡ä¸­æ“ä½œã€‚\n```\n`from langchain.chat\\_models import init\\_chat\\_model\nfrom langgraph.graph import StateGraph, MessagesState, START\nfrom langgraph.checkpoint.postgres import PostgresSaver\nBASE\\_URL=&#34;&#34;&#34;&#34; TOKEN=&#34;&#34;&#34;&#34;\nMODEL\\_NAME=&#34;&#34;&#34;&#34;\nmodel = init\\_chat\\_model(\nmodel=MODEL\\_NAME,\nmodel\\_provider=&#34;&#34;openai&#34;&#34;, base\\_url=BASE\\_URL,\napi\\_key=TOKEN,\ntemperature=0,\n)\nDB\\_URI = &#34;&#34;postgresql://postgres:postgres@localhost:5432/postgres?sslmode=disable&#34;&#34;\nwith PostgresSaver.from\\_conn\\_string(DB\\_URI) as checkpointer:\ncheckpointer.setup() # ç¬¬ä¸€æ¬¡è°ƒç”¨æ—¶å¿…é¡»è¦setup()\ndef call\\_model(state: MessagesState):\nresponse = model.invoke(state[&#34;&#34;messages&#34;&#34;])\nreturn {&#34;&#34;messages&#34;&#34;: response}\nbuilder = StateGraph(MessagesState)\nbuilder.add\\_node(call\\_model)\nbuilder.add\\_edge(START, &#34;&#34;call\\_model&#34;&#34;)\ngraph = builder.compile(checkpointer=checkpointer)\nconfig = {\n&#34;&#34;configurable&#34;&#34;: {\n&#34;&#34;thread\\_id&#34;&#34;: &#34;&#34;1&#34;&#34;\n}\n}\nresponse = graph.invoke(\n{&#34;&#34;messages&#34;&#34;: [{&#34;&#34;role&#34;&#34;: &#34;&#34;user&#34;&#34;, &#34;&#34;content&#34;&#34;: &#34;&#34;ä½ å¥½ï¼Œæˆ‘å«adaï¼&#34;&#34;}]},\nconfig\n)\nprint(response[&#39;&#39;messages&#39;&#39;][-1].content)\nresponse = graph.invoke(\n{&#34;&#34;messages&#34;&#34;: [{&#34;&#34;role&#34;&#34;: &#34;&#34;user&#34;&#34;, &#34;&#34;content&#34;&#34;: &#34;&#34;ä½ å¥½ï¼Œè¯·é—®ä½ è¿˜è®°å¾—æˆ‘å«ä»€ä¹ˆåå­—ä¹ˆï¼Ÿ&#34;&#34;}]},\nconfig\n)\nprint(response[&#39;&#39;messages&#39;&#39;][-1].content)`\n```\nè¿è¡Œä¸€æ¬¡ä¸Šè¿°ä»£ç åï¼Œå…³é—­åº”ç”¨ç¨‹åºåé‡å¯ï¼Œå†æ¬¡è¿è¡Œä¸Šè¿°ä»£ç ï¼Œprintç»“æœå¦‚ä¸‹ï¼š\n```\n`bot\\_answer\\_1ï¼šä½ å¥½ï¼ŒAdaï¼å¾ˆé«˜å…´å†æ¬¡è§åˆ°ä½ ï¼ğŸ˜Š\nä½ çš„åå­—çœŸåŠ¨å¬ï¼ä»Šå¤©æœ‰ä»€ä¹ˆæˆ‘å¯ä»¥å¸®ä½ è§£ç­”æˆ–è€…æƒ³èŠçš„è¯é¢˜å—ï¼Ÿbot\\_answer\\_2ï¼šå½“ç„¶è®°å¾—ï¼ä½ å‘Šè¯‰æˆ‘ä½ å« \\*\\*Ada\\*\\*ã€‚å¾ˆé«˜å…´å†æ¬¡å’Œä½ æ‰“æ‹›å‘¼ï¼ğŸ˜Š`\n```\nå¯ä»¥çœ‹åˆ°ï¼Œè®°å¿†å·²ç»è¢«ä¿å­˜äº†ã€‚æˆ‘ä»¬æ£€æŸ¥æ•°æ®åº“å¯ä»¥å‘ç°ï¼Œpostgresæ•°æ®åº“ä¸­å‡ºç°äº†å››ä¸ªè¡¨ï¼š\n![] \nä¸Šè¿°è¡¨ä¸­ï¼Œcheckpointsè¡¨æ˜¯â€çŠ¶æ€å¿«ç…§â€œè¡¨ï¼Œæ¯å½“ç¨‹åºæ‰§è¡Œä¸€ä¸ªstepæ—¶ï¼Œå®ƒå°±ä¼šåœ¨è¿™å¼ è¡¨ä¸­åˆ›å»ºä¸€æ¡æ–°è®°å½•ï¼Œè¿™æ¡è®°å½•å°±æ˜¯ä¸€ä¸ªæ£€æŸ¥ç‚¹çš„å¿«ç…§ã€‚æŸ¥è¯¢è¯¥è¡¨ï¼Œå¯ä»¥å¾—åˆ°å¦‚ä¸‹ç»“æœï¼š\n![] \næ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ¥åˆ†ææ¯ä¸€åˆ—çš„å«ä¹‰ï¼š![] |åˆ—å|å«ä¹‰|ä¸¾ä¾‹è¯´æ˜|\nthread\\_id|çº¿ç¨‹ID|ä¸Šè¡¨ä¸­ï¼Œæ‰€æœ‰thread\\_idéƒ½ä¸º1ï¼Œè¡¨ç¤ºè¿™äº›è®°å½•éƒ½å±äºåŒä¸€ä¸ªä¼šè¯æµ|\ncheckpoint\\_ns|æ£€æŸ¥ç‚¹å‘½åç©ºé—´ï¼ˆNamespaceï¼‰ï¼Œç”¨äºå¯¹æ£€æŸ¥ç‚¹è¿›è¡Œåˆ†ç»„æˆ–åˆ†ç±»|ä¸Šè¡¨ä¸­éƒ½æ˜¯ç©ºçš„ï¼Œè¡¨ç¤ºæœªä½¿ç”¨æˆ–ä½¿ç”¨äº†é»˜è®¤çš„å‘½åç©ºé—´|\ncheckpoint\\_id|æ£€æŸ¥ç‚¹çš„å”¯ä¸€æ ‡è¯†ç¬¦ï¼Œè¯¥è®°å½•çš„ä¸»é”®||\nparent\\_checkpoint\\_id|çˆ¶æ£€æŸ¥ç‚¹çš„IDï¼Œå®ƒå°†æ£€æŸ¥ç‚¹é“¾æ¥èµ·æ¥|ç¬¬ä¸€æ¡è®°å½•çš„parent\\_checkpoint\\_idæ˜¯ç©ºçš„ï¼Œä»£è¡¨æ˜¯æ•´ä¸ªæµç¨‹çš„èµ·ç‚¹ã€‚|\ncheckpoint|æ ¸å¿ƒçŠ¶æ€æ•°æ®ï¼Œæ˜¯ä¸€ä¸ªjsonå¯¹è±¡ã€‚|tsä»£è¡¨æ—¶é—´æˆ³ï¼›channel\\_valuesä»£è¡¨é€šé“å€¼ï¼Œå¯ä»¥ç†è§£ä¸ºå·¥ä½œæµä¸­çš„å˜é‡å€¼ï¼›updated\\_channelsä»£è¡¨åœ¨å½“å‰è¿™æ­¥ä¸­è¢«ä¿®æ”¹è¿‡çš„é€šé“|\nmetadata|è¯¥æ£€æŸ¥ç‚¹æœ¬èº«çš„å…ƒæ•°æ®|stepè¡¨ç¤ºè¿™æ˜¯å·¥ä½œæµçš„ç¬¬å‡ æ­¥ï¼›sourceè¡¨æ¥æºï¼Œ&#34;input&#34;æŒ‡å¤–å¤–éƒ¨è¾“å…¥ï¼Œ&#34;loop&#34;æŒ‡å·¥ä½œæµå†…éƒ¨å¾ªç¯æˆ–æŸä¸ªèŠ‚ç‚¹æ‰§è¡Œçš„ç»“æœ|\nç†è§£äº†ä¸Šé¢checkpointsè¡¨åï¼Œé‚£ä¹ˆä¸ç¦ä¼šé—®ï¼ŒçœŸæ­£çš„æ¶ˆæ¯å†…å®¹è¢«å­˜åˆ°äº†å“ªé‡Œå‘¢ï¼ŸçœŸæ­£çš„æ¶ˆæ¯å†…å®¹å­˜å‚¨åœ¨checkpoint\\_writesè¡¨ä¸­ï¼Œå¦‚ä¸‹ï¼š\n![] \né™¤äº†PostgreSQLä¹‹å¤–ï¼ŒLangGraphè¿˜æ”¯æŒMongoDBã€Redisç­‰æ•°æ®åº“ã€‚\n### **å­å›¾ä¸­çš„è®°å¿†**\nå½“æ„å»ºå¤æ‚çš„ã€ç”±å¤šä¸ªå­å›¾åµŒå¥—è€Œæˆçš„åº”ç”¨æ—¶ï¼Œéœ€è¦æ›´çµæ´»çš„è®°å¿†ç®¡ç†ç­–ç•¥ã€‚â—è®°å¿†ç»§æ‰¿ï¼ˆé»˜è®¤ï¼‰ï¼šé»˜è®¤æƒ…å†µä¸‹ï¼Œå­å›¾ä¼šç»§æ‰¿å…¶çˆ¶å›¾çš„checkpointerã€‚è¿™æ„å‘³ç€æ•´ä¸ªåµŒå¥—å›¾å…±äº«åŒä¸€ä¸ªå¯¹è¯çŠ¶æ€ï¼Œæ•°æ®å¯ä»¥åœ¨çˆ¶å­å›¾ä¹‹é—´æ— ç¼æµåŠ¨ã€‚è¿™å¯¹äºå°†ä¸€ä¸ªå¤§å‹ä»»åŠ¡åˆ†è§£ä¸ºå¤šä¸ªæ¨¡å—åŒ–å­ä»»åŠ¡éå¸¸æœ‰ç”¨ã€‚\nâ—è®°å¿†éš”ç¦»ï¼šåœ¨æŸäº›åœºæ™¯ä¸‹ï¼Œä¾‹å¦‚æ„å»ºå¤šæ™ºèƒ½ä½“ç³»ç»Ÿï¼Œå¸Œæœ›æ¯ä¸ªæ™ºèƒ½ä½“ï¼ˆç”±ä¸€ä¸ªå­å›¾è¡¨ç¤ºï¼‰æ‹¥æœ‰è‡ªå·±ç‹¬ç«‹çš„å†…å­˜ç©ºé—´ï¼Œäº’ä¸å¹²æ‰°ã€‚æ­¤æ—¶ï¼Œå¯ä»¥åœ¨ç¼–è¯‘å­å›¾æ—¶è®¾ç½®checkpointer=Trueã€‚\nå¦‚ä¸‹ä»£ç ï¼Œå¯ä»¥åœ¨å­å›¾ä¸­ç›´æ¥ä½¿ç”¨çˆ¶å›¾çš„çŸ­æœŸè®°å¿†ï¼š```\n`from langgraph.graph import START, StateGraph\nfrom langgraph.checkpoint.memory import InMemorySaver\nfrom typing import TypedDict\nclass State(TypedDict):\nfoo: str\n# å­å›¾def subgraph\\_node\\_1(state: State):\nreturn {&#34;&#34;foo&#34;&#34;: state[&#34;&#34;foo&#34;&#34;] + &#34;&#34;bar&#34;&#34;}\nsubgraph\\_builder = StateGraph(State)\nsubgraph\\_builder.add\\_node(subgraph\\_node\\_1)\nsubgraph\\_builder.add\\_edge(START, &#34;&#34;subgraph\\_node\\_1&#34;&#34;', 'doi': '', 'published_date': '2025-12-08T00:00:00+00:00', 'pdf_url': '', 'url': 'https://zhuanlan.zhihu.com/p/1981392181592871894', 'source': 'exa_context', 'categories': [], 'keywords': [], 'citations': 0, 'references': [], 'extra': {}}], 'save_path': '/home/qinshan/widthresearch/data/downloads'}
2026-02-21 20:11:32,548 - __main__ - INFO - handle_download: searcher=ExaSearcherContext, input_papers=1, save_path=/home/qinshan/widthresearch/data/downloads
2026-02-21 20:11:32,549 - __main__ - INFO - handle_download: downloaded=1
2026-02-21 20:11:32,549 - __main__ - INFO - call_tool payload: source_tool=exa_context_download, result_type=papers, count=1
2026-02-21 20:11:32,549 - __main__ - INFO - call_tool: name=exa_context_download, result_type=papers, count=1
2026-02-21 20:11:32,550 - __main__ - DEBUG - call_tool payload sample: {'paper_id': '', 'title': 'Multi-Agentç³»ç»Ÿæ„å»ºåˆæ¢ï¼šåŸºäºLangGraphçš„é•¿çŸ­æœŸè®°å¿†ç®¡ç†å®è·µæŒ‡å—', 'authors': [], 'abstract': 'Multi-Agentç³»ç»Ÿæ„å»ºåˆæ¢ï¼šåŸºäºLangGraphçš„é•¿çŸ­æœŸè®°å¿†ç®¡ç†å®è·µæŒ‡å— - çŸ¥ä¹[] \n\u200b[ç›´ç­”] \nåˆ‡æ¢æ¨¡å¼ç™»å½•/æ³¨å†Œ\n# Multi-Agentç³»ç»Ÿæ„å»ºåˆæ¢ï¼šåŸºäºLangGraphçš„é•¿çŸ­æœŸè®°å¿†ç®¡ç†å®è·µæŒ‡å—\n[![è…¾è®¯æŠ€æœ¯å·¥ç¨‹]] \n[è…¾è®¯æŠ€æœ¯å·¥ç¨‹] [\u200b![]] \nç¼–ç¨‹è¯é¢˜ä¸‹çš„ä¼˜ç§€ç­”ä¸»ä½œè€…ï¼šadacyang\n> å¦‚ä½•è®©AIæ™ºèƒ½ä½“ï¼ˆAgentï¼‰åƒäººç±»ä¸€æ ·æ‹¥æœ‰æŒä¹…çš„è®°å¿†ï¼Œä»è€Œåœ¨å¤æ‚çš„è¿ç»­ä»»åŠ¡ä¸­ä¿æŒä¸Šä¸‹æ–‡æ„ŸçŸ¥å’Œæ·±åº¦ç†è§£ï¼Ÿè¿™å·²æˆä¸ºæ„å»ºé«˜çº§æ™ºèƒ½ä½“çš„æ ¸å¿ƒæŒ‘æˆ˜ã€‚æœ¬æ–‡å°†æ·±å…¥æ¢è®¨Agent Memoryçš„æ ¸å¿ƒæ¦‚å¿µï¼Œå¹¶èšç„¦äº\n> LangGraph\n> æ¡†æ¶ä¸‹çš„é•¿çŸ­æœŸè®°å¿†å®ç°ï¼Œè¯¦è§£çŸ­æœŸä¼šè¯ä¸é•¿æœŸçŸ¥è¯†çš„å­˜å‚¨ã€ç®¡ç†ã€è¯­ä¹‰æ£€ç´¢ç­‰æŠ€å·§ã€‚æ›´è¿›ä¸€æ­¥åœ°ï¼Œæˆ‘ä»¬å°†é€šè¿‡ä¸€ä¸ªå¼•å…¥> MCPåè®®\n> çš„å®æˆ˜æ¡ˆä¾‹ï¼Œæ‰‹æŠŠæ‰‹å¸¦ä½ æ„å»ºä¸€ä¸ªçœŸå®çš„èåˆé•¿è®°å¿†æœºåˆ¶çš„Multi-Agentç³»ç»Ÿï¼Œç›´è§‚å±•ç¤ºä¸­æ–­ã€è®°å¿†ä¸åä½œçš„èåˆã€‚\nåŸºäºå¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰çš„æ™ºèƒ½ä½“ï¼ˆAgentï¼‰ç³»ç»Ÿä¸­ï¼Œè®°å¿†æœºåˆ¶æ˜¯å®ç°æŒç»­ã€è¿è´¯å’Œä¸ªæ€§åŒ–äº¤äº’çš„æ ¸å¿ƒåŸºçŸ³ï¼Œé€šè¿‡è®°å¿†ï¼Œå¯ä»¥è®©Agentè®°ä½è¿‡å¾€çš„äº¤äº’ï¼Œä¿æŒä¸Šä¸‹æ–‡çš„ä¸€è‡´æ€§ï¼Œå¹¶èƒ½ä»åé¦ˆä¸­å­¦ä¹ ï¼Œé€‚åº”ç”¨æˆ·çš„åå¥½ã€‚\n**æœ¬æ–‡æ ¸å¿ƒè¦ç‚¹æ¦‚è¿°ï¼š**\n1.ä»‹ç»Agent Memoryçš„åŸºæœ¬æƒ…å†µ\n2.LangGraphé•¿çŸ­æœŸè®°å¿†è¯¦è§£åŠæ¡ˆä¾‹è¯´æ˜ï¼šåŒ…å«çŸ­æœŸè®°å¿†å®ç°ã€ç®¡ç†æ–¹æ³•ï¼Œé•¿æœŸè®°å¿†çš„å®ç°æ–¹æ³•ï¼Œä»¥åŠæ­å»ºäº†èåˆpostgresæ•°æ®åº“ã€é›†æˆEmbeddingæœåŠ¡è¿›è¡Œè¯­ä¹‰æœç´¢ç­‰å¯ç”¨äºç”Ÿäº§ç¯å¢ƒçš„çœŸå®æ¡ˆä¾‹ã€‚\n3.å¼•å…¥MCPåè®®æ„å»ºçœŸå®çš„Agenté•¿è®°å¿†åº”ç”¨ï¼šæ­å»ºä¸€ä¸ªåŸºäºsupervisoræ¶æ„ï¼Œé›†æˆä¸­æ–­æœºåˆ¶ã€é•¿çŸ­æœŸè®°å¿†æœºåˆ¶çš„multi-agentç³»ç»Ÿã€‚\n### **è®°å¿†æœºåˆ¶ä»‹ç»**\n### **Agent Memoryæ˜¯ä»€ä¹ˆï¼Ÿ**\n![] \nä¸Šå›¾ä¸­ï¼ˆæ¥æºäºMem0[1]ï¼‰ï¼Œå·¦è¾¹æ˜¯æ²¡æœ‰Memoryçš„agentï¼Œå³è¾¹æ˜¯æœ‰Memoryçš„agentï¼Œåè€…å¯ä»¥æ ¹æ®ç”¨æˆ·çš„è¿‡å¾€ä¿¡æ¯ï¼ˆç´ é£Ÿä¸»ä¹‰è€…ã€ä¸å–œæ¬¢ä¹³åˆ¶å“ï¼‰ç»™å‡ºæ›´åˆç†çš„å“åº”ï¼ˆä¸å«ä¹³åˆ¶å“çš„ç´ é£Ÿèœå•ï¼‰ï¼Œè€Œå‰è€…çš„å›ç­”æ˜¾ç„¶æ˜¯ä¸åˆé€‚çš„ã€‚\nç®€å•æ¥è¯´ï¼ŒMemoryæ˜¯èµ‹äºˆAgentè®°å¿†èƒ½åŠ›çš„æŠ€æœ¯å’Œæ¶æ„ï¼Œèƒ½å¤Ÿè®©Agentåƒäººä¸€æ ·è®°ä½è¿‡å»çš„äº¤äº’ã€å­¦åˆ°çš„çŸ¥è¯†ã€æ‰§è¡Œè¿‡çš„ä»»åŠ¡åŠæœªæ¥çš„è®¡åˆ’ï¼Œæ˜¯å°†ä¸€ä¸ªLLMè½¬å˜ä¸ºèƒ½å¤Ÿæ‰§è¡Œå¤æ‚ã€é•¿æœŸä»»åŠ¡çš„çœŸæ­£â€æ™ºèƒ½ä½“â€œçš„æ ¸å¿ƒæ‰€åœ¨ã€‚\n### **å…³äºAgent Memoryæˆ‘ä»¬éœ€è¦è€ƒè™‘ä»€ä¹ˆï¼Ÿ**\nå¦‚ä½•è·å–è®°å¿†ï¼šé€šè¿‡å’Œç”¨æˆ·äº¤äº’ã€ç¯å¢ƒäº¤äº’...\næ€ä¹ˆç»„ç»‡è®°å¿†ï¼šæ¨¡å‹å‚æ•°ã€æ¨¡å‹ä¸Šä¸‹æ–‡ã€æ•°æ®åº“æ€ä¹ˆåˆ©ç”¨è®°å¿†ï¼šRAGã€Few-shot...\n### **æœ‰å“ªäº›Memoryç±»å‹ï¼Ÿ**\nå…³äºMemoryçš„åˆ†ç±»ï¼Œæœ‰è®¸å¤šç§åˆ†ç±»ä½“ç³»ï¼Œè¿™é‡Œæˆ‘ä»¬åªè®¨è®ºæœ€å¸¸è§åŠæœ€æ˜“äºç†è§£çš„ã€‚\næ­£å¦‚äººç±»åˆ©ç”¨é•¿çŸ­æœŸè®°å¿†è¿›è¡Œæœ‰æ•ˆçš„äº¤äº’å’Œå­¦ä¹ ä¸€æ ·ï¼ŒAgentçš„è®°å¿†æœºåˆ¶é€šå¸¸åˆ’åˆ†ä¸ºçŸ­æœŸè®°å¿†ï¼ˆshort-term memoryï¼‰å’Œé•¿æœŸè®°å¿†(long-term memory)ï¼ŒçŸ­æœŸè®°å¿†å†³å®šäº†Agentåœ¨å¾®è§‚ä»»åŠ¡ä¸Šçš„å³æ—¶è¡¨ç°ï¼Œè€Œé•¿æœŸè®°å¿†åˆ™ä½œä¸ºæŒä¹…çŸ¥è¯†åº“ï¼Œå†³å®šäº†Agentåœ¨å®è§‚æ—¶é—´å°ºåº¦ä¸Šçš„æ™ºèƒ½æ·±åº¦å’Œä¸ªæ€§åŒ–æ°´å¹³ï¼Œé€šè¿‡ä¸¤è€…é…åˆï¼ŒAgentæ‰èƒ½è¡¨ç°å‡ºè¿è´¯æ€§ã€ä¸Šä¸‹æ–‡æ„ŸçŸ¥èƒ½åŠ›ï¼Œæ‰ä¼šæ˜¾å¾—æ›´æ™ºèƒ½ã€‚\n### **Agent Memoryå¦‚ä½•å·¥ä½œï¼Ÿ**\nAgenté€šå¸¸é€šè¿‡ä»¥ä¸‹å‡ æ­¥æ¥æœ‰æ•ˆåœ°ç®¡ç†è®°å¿†ï¼Œä½¿å¾—æ¯æ¬¡äºç”¨æˆ·çš„äº¤äº’éƒ½æ›´åŠ ç²¾å‡†æ™ºèƒ½ï¼š\n1. è®°å¿†å­˜å‚¨ï¼šé€šè¿‡è®¾è®¡ä¸€ç³»åˆ—ç­–ç•¥æ¥å­˜å‚¨é‡è¦çš„äº¤äº’ä¿¡æ¯ï¼Œè¿™äº›ä¿¡æ¯å¯èƒ½æ¥æºäºå¯¹è¯å†…å®¹ã€å†å²æ•°æ®æˆ–ä»»åŠ¡è¦æ±‚ç­‰ç­‰ã€‚2. è®°å¿†æ›´æ–°ï¼šè®°å¿†ä¼šéšç€äº¤äº’çš„å‘ç”Ÿï¼Œä¸æ–­åœ°è¿›è¡Œæ›´æ–°ï¼Œä¾‹å¦‚ç”¨æˆ·çš„åå¥½ã€æœ€æ–°çš„è¿‘å†µç­‰ç­‰ã€‚è®°å¿†æ›´æ–°ä½¿å¾—Agentèƒ½å¤Ÿä¸æ–­ä¼˜åŒ–å…¶å“åº”ã€‚\n3. è®°å¿†æ£€ç´¢ï¼šAgentæ ¹æ®å½“ä¸‹çš„éœ€æ±‚ï¼Œå»è®°å¿†ä¸­æ£€ç´¢éœ€è¦çš„è®°å¿†å†…å®¹ï¼Œä»è€Œæä¾›æ›´åŠ æ™ºèƒ½çš„å›å¤ã€‚### **Agent Memoryæ€ä¹ˆå®ç°ï¼Ÿ**\n1. ç‰©ç†å¤–æŒ‚ï¼šå³å¤–ç½®æ•°æ®åº“å’ŒRAGï¼Œéœ€è¦æ£€ç´¢å½“å‰queryç›¸å…³çš„å†…å®¹ï¼Œä¾‹å¦‚ï¼šMem0ã€ACEã€‚å¥½å¤„æ˜¯å³æ’å³ç”¨ï¼Œåå¤„æ˜¯ä¸å¤Ÿend-to-end\n2. Memory as Reasoning / Toolï¼šé€šè¿‡è®­ç»ƒReasoningæˆ–Toolçš„æ–¹å¼åŠ¨æ€æ›´æ–°contextï¼Œä¾‹å¦‚ï¼šMemAgentã€memory-R1ã€‚å¥½å¤„æ˜¯æ›´æ¥è¿‘end-to-endï¼Œä½†ä¸æ˜¯å¾ˆçµæ´»ã€‚\n3.å‚æ•°æ›´æ–°ï¼šLLMæœ¬èº«å°±æ˜¯ä¸€ä¸ªMemoryä½“ï¼Œæ‰€æœ‰å‚æ•°éƒ½æ˜¯å®ƒçš„Memoryï¼Œé€šè¿‡æ›´æ–°å‚æ•°æ¥æ›´æ–°è®°å¿†ï¼Œè¿™ç§æ–¹å¼æ˜¯æœ€æœ¬è´¨çš„ï¼Œä½†ä¹Ÿæ˜¯æœ€éš¾å®ç°çš„ã€‚\n### **LangGraphä¸­çš„è®°å¿†ç®¡ç†**\nLangGraph[2]ä½œä¸ºä¸€æ¬¾é¢å‘å¤šæ™ºèƒ½ä½“åä½œä¸çŠ¶æ€ç®¡ç†çš„æ¡†æ¶ï¼Œå…¶è®¾è®¡äº†å·§å¦™çš„è®°å¿†ç®¡ç†ç³»ç»Ÿï¼Œæ—¨åœ¨ä¸ºAgentæä¾›åœ¨ä¸åŒäº¤äº’ä¸­å­˜å‚¨ã€æ£€ç´¢å’Œåˆ©ç”¨ä¿¡æ¯çš„èƒ½åŠ›ã€‚å®ƒåŒºåˆ†äº†ä¸¤ç§ä¸»è¦çš„è®°å¿†ç±»å‹ï¼šçŸ­æœŸè®°å¿†å’Œé•¿æœŸè®°å¿†ã€‚åœ¨å®é™…ä½¿ç”¨ä¸­ï¼Œé€šè¿‡è¿™ä¸¤ç§è®°å¿†ååŒï¼Œæ—¢èƒ½ä¿éšœå®æ—¶ä»»åŠ¡çš„é«˜æ•ˆæ‰§è¡Œï¼Œåˆæ”¯æŒäº†è·¨ä»»åŠ¡ã€è·¨å‘¨æœŸçš„ç»éªŒå¤ç”¨ã€‚\nâ—short-term memoryï¼ˆé€šè¿‡Checkpointerå®ç°ï¼‰ï¼šé’ˆå¯¹å•ä¸ªå¯¹è¯çº¿ç¨‹ï¼Œæ ¸å¿ƒä»·å€¼åœ¨äºä¿éšœå¯¹è¯çš„ä¸´æ—¶æ€§ï¼Œä½¿å¾—Agentèƒ½å¤Ÿè·Ÿè¸ªä¼šè¯ä¸­çš„å¤šè½®å¯¹è¯ï¼Œå¯ä»¥åœ¨è¯¥çº¿ç¨‹å†…çš„ä»»ä½•æ—¶åˆ»è¢«å›å¿†ã€‚\nâ—long-term memoryï¼ˆé€šè¿‡Storeå®ç°ï¼‰ï¼šå¯ä»¥è·¨å¯¹è¯çº¿ç¨‹å…±äº«ï¼Œå¯ä»¥åœ¨ä»»ä½•æ—¶é—´ï¼Œä»»ä½•çº¿ç¨‹ä¸­è¢«å›å¿†ï¼Œè€Œä¸åƒçŸ­æœŸè®°å¿†å±€é™äºå•ä¸ªå¯¹è¯ã€‚\n![] \né€šè¿‡ä¸‹è¡¨ï¼Œå¯ä»¥æ›´æ¸…æ™°çš„çœ‹åˆ°ä¸¤è€…çš„åŒºåˆ«ï¼š||short-term memory|long-term memory|\nç›®çš„|ç»´æŒå¯¹è¯ä¸Šä¸‹æ–‡|å­˜å‚¨è·¨ä¼šè¯çš„æŒä¹…åŒ–äº‹å®ã€åå¥½å’ŒçŸ¥è¯†|\næŒä¹…æ€§|ä¼šè¯çº§åˆ«ï¼ˆå¯ä»¥ä¸´æ—¶ï¼Œå¯ä»¥æŒä¹…ï¼‰|åº”ç”¨çº§åˆ«ï¼ˆå§‹ç»ˆæŒä¹…ï¼‰|\nä½œç”¨åŸŸ|å•ä¸€ä¼šè¯|è·¨ä¼šè¯ã€è·¨ç”¨æˆ·|\næŒä¹…åŒ–æ–¹å¼|æ£€æŸ¥ç‚¹ï¼ˆcheckpointï¼‰|å­˜å‚¨ï¼ˆStoreï¼‰|\næ›´æ–°æœºåˆ¶|è‡ªåŠ¨ï¼ˆåœ¨æ¯ä¸ªå›¾æ­¥éª¤åä¿å­˜çŠ¶æ€ï¼‰|æ‰‹åŠ¨/æ˜¾å¼|\nå…¸å‹ç”¨é€”|å¯¹è¯å†å²ã€ä¸­é—´çŠ¶æ€|ç”¨æˆ·åå¥½ã€çŸ¥è¯†åº“ã€è¯­ä¹‰è®°å¿†|\n![] ### **LangGraphè®°å¿†çš„æ¶æ„åŸºç¡€**\nè¦æƒ³æ›´å¥½çš„ç†è§£LangGraphä¸­çš„è®°å¿†æœºåˆ¶ï¼Œé¦–å…ˆéœ€è¦ç†è§£å…¶æ”¯æŒåŒè½¨è®°å¿†ç³»ç»Ÿçš„æ ¸å¿ƒæ¦‚å¿µã€‚\n### **Checkpointer**\nLangGraphæœ‰ä¸€ä¸ªå†…ç½®çš„æŒä¹…åŒ–ï¼ˆPersistenceï¼‰å±‚ï¼Œé€šè¿‡checkpointerå®ç°ï¼Œèƒ½å¤ŸæŒä¹…åŒ–å­˜å‚¨å›¾çŠ¶æ€ï¼Œè¿™ä½¿å¾—å¼€å‘è®°å¿†åŠŸèƒ½å’Œäººç±»å¹²é¢„åŠŸèƒ½æˆä¸ºå¯èƒ½ã€‚\nå½“ä½¿ç”¨æ£€æŸ¥ç‚¹ç¼–è¯‘ä¸€ä¸ªå›¾æ—¶ï¼Œæ£€æŸ¥ç‚¹ä¼šåœ¨æ¯ä¸ªsuper-stepä¿å­˜å›¾çŠ¶æ€çš„checkpointï¼Œè¿™äº›checkpointè¢«ä¿å­˜åˆ°ä¸€ä¸ªthreadä¸­ï¼Œå¯ä»¥åœ¨å›¾æ‰§è¡Œåè®¿é—®ã€‚å› ä¸ºthreadså…è®¸åœ¨æ‰§è¡Œåè®¿é—®å›¾çš„çŠ¶æ€ï¼Œæ‰€ä»¥å¯ä»¥å®ç°è®°å¿†ã€äººæœºåä½œã€æ—¶é—´æ—…è¡Œã€å®¹é”™ç­‰å¤šç§å¼ºå¤§çš„åŠŸèƒ½ã€‚\n![] \nå·¥ä½œæµç¨‹ï¼š```\n`ç”¨æˆ·è¾“å…¥ â†’[èŠ‚ç‚¹ 1] â†’ğŸ’¾ä¿å­˜çŠ¶æ€â†’[èŠ‚ç‚¹ 2] â†’ğŸ’¾ä¿å­˜çŠ¶æ€â†’è¾“å‡ºâ†“â†“Checkpoint 1 Checkpoint 2`\n```\n### **Thread**\nä¸ºäº†ç®¡ç†å¤šä¸ªç‹¬ç«‹çš„å¯¹è¯ï¼ŒLangGraphä½¿ç”¨äº†threadçš„æ¦‚å¿µã€‚thread\\_idæ˜¯ç”±checkpointerä¿å­˜çš„æ¯ä¸ªcheckpointçš„å”¯ä¸€idï¼Œæ˜¯æ¿€æ´»å’ŒåŒºåˆ†ä¸åŒå¯¹è¯çº¿ç¨‹çš„å”¯ä¸€keyã€‚åœ¨è°ƒç”¨å›¾çš„invokeæˆ–streamæ–¹æ³•æ—¶ï¼Œé€šè¿‡configurableå­—å…¸ä¼ å…¥ä¸€ä¸ªthread\\_idï¼Œå°±ä»£è¡¨è¿™æ¬¡æ“ä½œå±äºthread\\_idè¿™ä¸ªç‰¹å®šçš„å¯¹è¯ã€‚\n### **Store**\nå¦‚ä¸Šæ‰€è¿°ï¼Œå›¾çŠ¶æ€å¯ä»¥ç”±checkpointeråœ¨æ¯ä¸ªsuper-stepå†™å…¥çº¿ç¨‹ï¼Œä»è€Œå®ç°çŠ¶æ€çš„æŒä¹…åŒ–ã€‚ä½†æ˜¯ï¼Œå¦‚æœæƒ³åœ¨å¤šä¸ªçº¿ç¨‹ä¹‹é—´ä¿ç•™ä¸€äº›ä¿¡æ¯çš„è¯ï¼Œé‚£ä¹ˆå°±éœ€è¦ç”¨åˆ°Storeã€‚Storeæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªæš´éœ²ç»™å›¾èŠ‚ç‚¹å’Œå·¥å…·çš„é”®å€¼æ•°æ®åº“ï¼Œä¸checkpointerçš„è‡ªåŠ¨åŒ–å¿«ç…§ä¸åŒï¼ŒStoreéœ€è¦æ˜¾å¼å’Œä¸»åŠ¨çš„è¿›è¡Œæ“ä½œã€‚\n![]<image_link>### **Namespace**\nStoreä¸­çš„æ•°æ®é€šå¸¸é€šè¿‡æ›´æŒä¹…çš„æ ‡è¯†æ¥ç»„ç»‡ã€‚user\\_idæ˜¯æœ€å¸¸è§çš„ï¼Œç”¨äºå…³è”ç”¨æˆ·çš„æ‰€æœ‰ä¿¡æ¯ï¼Œæ­¤å¤–ï¼Œnamespaceæä¾›äº†ä¸€ç§æ•°æ®éš”ç¦»æœºåˆ¶ï¼Œä¾‹å¦‚ï¼Œä½¿ç”¨ä½¿ç”¨ (â€œmemoriesâ€, user\\_id) è¿™æ ·çš„å…ƒç»„ä½œä¸ºå‘½åç©ºé—´ï¼Œå¯ä»¥å°†ç”¨æˆ·çš„è®°å¿†ä¸å…¶ä»–ç±»å‹çš„æ•°æ®ï¼ˆå¦‚ç”¨æˆ·åå¥½(â€œpreferencesâ€, user\\_id)ï¼‰æ¸…æ™°åœ°åˆ†ç¦»å¼€æ¥ï¼Œé¿å…æ•°æ®å†²çªï¼Œä¿æŒçŸ¥è¯†åº“çš„æ•´æ´æœ‰åºã€‚\n### **çŸ­æœŸè®°å¿†è¯¦è§£**\n### **InMemorySaverå†…å­˜ä¼šè¯ä¸´æ—¶å­˜å‚¨**\nå¯¹äºå¼€å‘ã€åŸå‹è®¾è®¡å’Œæµ‹è¯•é˜¶æ®µï¼Œæœ€ç®€å•å¿«æ·çš„æ–¹å¼æ˜¯ä½¿ç”¨InMemorySaverã€‚å®ƒå°†æ‰€æœ‰çš„å¯¹è¯çŠ¶æ€å­˜å‚¨åœ¨å†…å­˜ä¸­çš„ä¸€ä¸ªPythonå­—å…¸é‡Œã€‚\n1.**è®¾ç½®è®°å¿†ç®¡ç†æ£€æŸ¥ç‚¹**\n```\n`from langchain\\_openai import ChatOpenAI\nfrom langchain.chat\\_models import init\\_chat\\_model\nfrom langgraph.checkpoint.memory import InMemorySaver\nfrom langgraph.prebuilt import create\\_react\\_agent\n# åˆå§‹åŒ–æ£€æŸ¥ç‚¹ä¿å­˜å™¨checkpointer = InMemorySaver()`\n```\n2.**å®šä¹‰å¤§æ¨¡å‹å¹¶åˆ›å»ºagent**\n```\n`BASE\\_URL=&#34;&#34;&#34;&#34; TOKEN=&#34;&#34;&#34;&#34;\nMODEL\\_NAME=&#34;&#34;&#34;&#34;\nmodel = init\\_chat\\_model(\nmodel=MODEL\\_NAME,\nmodel\\_provider=&#34;&#34;openai&#34;&#34;, base\\_url=BASE\\_URL,\napi\\_key=TOKEN,\ntemperature=0,\n)\nagent = create\\_react\\_agent(\nmodel=model,\ntools=[],\n# ä¼ å…¥æ£€æŸ¥ç‚¹ï¼Œæ˜¯å°†æŒä¹…åŒ–èƒ½åŠ›â€œæ³¨å…¥â€å›¾çš„å…³é”®æ­¥éª¤ã€‚ç¼–è¯‘åçš„graphå¯¹è±¡ç°åœ¨å…·å¤‡äº†çŠ¶æ€ç®¡ç†çš„èƒ½åŠ›ã€‚\ncheckpointer=checkpointer\n)`\n```\nå¦‚æœæ˜¯åº•å±‚è‡ªå®šä¹‰apiåœ¨å›¾æ„å»ºé˜¶æ®µä¼ å…¥æ£€æŸ¥ç‚¹çš„ä»£ç æ˜¯graph = builder.compile(checkpointer=checkpointer)ã€‚\n3.**çŸ­æœŸè®°å¿†-å†…å­˜åç«¯**\n```\n`config = {&#34;&#34;configurable&#34;&#34;: {&#34;&#34;thread\\_id&#34;&#34;: &#34;&#34;1&#34;&#34;}} # æ¿€æ´»è®°å¿†æœºåˆ¶çš„æ ¸å¿ƒã€‚å¦‚æœæ²¡æœ‰æä¾›thread\\_idï¼Œæ¯æ¬¡invokeè°ƒç”¨éƒ½å°†æ˜¯æ— çŠ¶æ€çš„ï¼Œåªè¦ä½¿ç”¨ç›¸åŒçš„thread\\_idï¼ŒLangGraphå°±ä¼šåœ¨å¤šæ¬¡è°ƒç”¨ä¹‹é—´ç»´æŒå¯¹è¯çŠ¶æ€\nresponse = agent.invoke(\n{&#34;&#34;messages&#34;&#34;: [{&#34;&#34;role&#34;&#34;: &#34;&#34;user&#34;&#34;, &#34;&#34;content&#34;&#34;: &#34;&#34;ä½ å¥½ï¼Œæˆ‘å«adaï¼&#34;&#34;}]},\nconfig\n)\nprint(f&#34;&#34;thread1\\_bot\\_answerï¼š{response[&#39;&#39;messages&#39;&#39;][-1].content}&#34;&#34;)\nresponse = agent.invoke(\n{&#34;&#34;messages&#34;&#34;: [{&#34;&#34;role&#34;&#34;: &#34;&#34;user&#34;&#34;, &#34;&#34;content&#34;&#34;: &#34;&#34;ä½ å¥½ï¼Œè¯·é—®ä½ è¿˜è®°å¾—æˆ‘å«ä»€ä¹ˆåå­—ä¹ˆï¼Ÿ&#34;&#34;}]},\nconfig\n)\nprint(&#39;&#39;------------çº¿ç¨‹1------------------&#39;&#39;)\nprint(f&#34;&#34;thread1\\_bot\\_answerï¼š{response[&#39;&#39;messages&#39;&#39;][-1].content}&#34;&#34;)\nnew\\_config = {&#34;&#34;configurable&#34;&#34;: {&#34;&#34;thread\\_id&#34;&#34;: &#34;&#34;2&#34;&#34;}}\nresponse = agent.invoke(\n{&#34;&#34;messages&#34;&#34;: [{&#34;&#34;role&#34;&#34;: &#34;&#34;user&#34;&#34;, &#34;&#34;content&#34;&#34;: &#34;&#34;ä½ å¥½ï¼Œè¯·é—®ä½ è¿˜è®°å¾—æˆ‘å«ä»€ä¹ˆåå­—ä¹ˆï¼Ÿ&#34;&#34;}]},\nnew\\_config\n)\nprint(&#39;&#39;------------çº¿ç¨‹2------------------&#39;&#39;)\nprint(f&#34;&#34;thread2\\_bot\\_answerï¼š{response[&#39;&#39;messages&#39;&#39;][-1].content}&#34;&#34;)`\n```\næ‰§è¡Œä¸Šé¢ä»£ç ï¼Œå¯ä»¥çœ‹åˆ°è¾“å‡ºå¦‚ä¸‹ï¼š```\n`thread1\\_bot\\_answerï¼šä½ å¥½ï¼ŒAdaï¼å¾ˆé«˜å…´è®¤è¯†ä½ ï¼ğŸ˜Š\nè¿™æ˜¯ä¸€ä¸ªå¾ˆç¾çš„åå­—å‘¢ï¼æœ‰ä»€ä¹ˆæˆ‘å¯ä»¥å¸®åŠ©ä½ çš„å—ï¼Ÿæ— è®ºæ˜¯æƒ³èŠèŠå¤©ï¼Œè¿˜æ˜¯æœ‰ä»»ä½•é—®é¢˜éœ€è¦è§£ç­”ï¼Œæˆ‘éƒ½å¾ˆä¹æ„ä¸ºä½ æä¾›å¸®åŠ©ã€‚------------çº¿ç¨‹1------------------\nthread1\\_bot\\_answerï¼šå½“ç„¶è®°å¾—ï¼ä½ åˆšæ‰å‘Šè¯‰æˆ‘ä½ å« Adaï½å¾ˆé«˜å…´å†æ¬¡å’Œä½ æ‰“æ‹›å‘¼ï¼ğŸ˜Š\n------------çº¿ç¨‹2------------------\nthread2\\_bot\\_answerï¼šä½ å¥½ï¼å¾ˆæŠ±æ­‰ï¼Œæˆ‘æ— æ³•è®°ä½ä¹‹å‰å¯¹è¯ä¸­çš„ä¸ªäººä¿¡æ¯ï¼Œæ¯”å¦‚ä½ çš„åå­—ã€‚è¿™æ˜¯ä¸ºäº†ä¿æŠ¤ä½ çš„éšç§ï¼Œæ‰€ä»¥æˆ‘ä¸ä¼šä¿ç•™è¿™ç±»æ•°æ®ã€‚ä½ å¯ä»¥å‘Šè¯‰æˆ‘ä½ çš„åå­—ï¼Œæˆ–è€…ä»»ä½•ä½ æƒ³è®©æˆ‘ç§°å‘¼ä½ çš„æ–¹å¼ï¼Œæˆ‘ä¼šå¾ˆä¹æ„åœ¨è¿™æ¬¡çš„å¯¹è¯ä¸­ä½¿ç”¨å®ƒï¼ğŸ˜Š`\n```\n**çŸ­æœŸè®°å¿†ä¸çº¿ç¨‹ç›¸å…³ï¼Œåœ¨å¯¹è¯æ—¶ï¼Œéœ€è¦åœ¨é…ç½®ä¸­ä¼ å…¥thread\\_id**ã€‚é€šè¿‡ä¸Šé¢çš„ç»“æœæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œå½“æˆ‘ä»¬ä¼ å…¥ç›¸åŒçš„thread\\_idæ—¶ï¼Œagentå°±å¯ä»¥è®°ä½ç”¨æˆ·çš„åå­—ï¼Œç„¶è€Œå½“æˆ‘ä»¬æ›´æ¢thread\\_idæ—¶ï¼Œagentå°±ä¸è®°å¾—ç”¨æˆ·çš„åå­—äº†ã€‚\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ**InMemorySaverå°†æ‰€æœ‰çŠ¶æ€éƒ½ä¿å­˜åœ¨å†…å­˜ä¸­**ï¼Œä¸€æ—¦ç¨‹åºç»ˆæ­¢ï¼Œé‚£ä¹ˆæ‰€æœ‰å¯¹è¯å†å²éƒ½ä¼šæ¶ˆå¤±ã€‚\n### **æ•°æ®åº“æŒä¹…åŒ–å­˜å‚¨**\nå¯ä»¥å‘ç°ï¼Œä¸Šé¢ä¸€å°èŠ‚çš„ä»£ç åœ¨åº”ç”¨ç¨‹åºç»“æŸåå†å¯åŠ¨ï¼Œè®°å¿†å°±åˆæ¶ˆå¤±äº†ã€‚è¿™æ˜¯å› ä¸ºInMemorySaverä»…ä»…æ˜¯æŠŠè®°å¿†ä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œåº”ç”¨ç¨‹åºç»“æŸåé‡Šæ”¾å†…å­˜è®°å¿†å°±æ¶ˆå¤±äº†ã€‚åœ¨ç”Ÿäº§ç¯å¢ƒä¸­å¸¸å¸¸ä½¿ç”¨æ•°æ®åº“æ”¯æŒçš„æ£€æŸ¥ç‚¹è®°å½•å™¨æŒä¹…åŒ–ä¿å­˜è®°å¿†ï¼Œä»¥ä¿è¯æ•°æ®çš„å¯é æ€§å’ŒæœåŠ¡çš„è¿ç»­æ€§ã€‚\nè¿™é‡Œæˆ‘ä»¬ä»¥postgresæ•°æ®åº“ä¸ºä¾‹æ¥è¯´æ˜ï¼Œæ€ä¹ˆæŒä¹…åŒ–åœ°ä¿å­˜è®°å¿†æ•°æ®ã€‚\n1.é¦–å…ˆå®‰è£…ä»¥ä¸‹ä¾èµ–ï¼š\n```\n`pip install -U &#34;psycopg[binary,pool]&#34; langgraph-checkpoint-postgres`\n```\n2.å®‰è£…postgresæ•°æ®åº“ï¼Œå…·ä½“çš„å®‰è£…æ–¹æ³•å¯ä»¥å‚è€ƒï¼š[Linuxä¸‹å®‰è£…PostgreSQL\\_linuxå®‰è£…postgresql-CSDNåšå®¢] ã€‚è¿™é‡Œé€‰æ‹©ä»¥æºç çš„æ–¹å¼è¿›è¡Œå®‰è£…ï¼Œå®‰è£…åŒ…ä»å®˜ç½‘ï¼ˆ[PostgreSQL: Downloads] ï¼‰ä¸‹è½½ï¼Œé€‰æ‹©æœ€æ–°çš„postgresql-18.0.tar.gzã€‚\n3.å®‰è£…æ•°æ®åº“æˆåŠŸåï¼Œç¼–ç å¦‚ä¸‹ä»£ç ã€‚\nDB\\_URIæ˜¯æ•°æ®åº“è¿æ¥çš„URLã€‚æƒ³è¦è‡ªåŠ¨ä¿å­˜åœ¨æ•°æ®åº“ä¸­çš„Stateéœ€è¦åœ¨PostgresSaver.from\\_conn\\_string(DB\\_URI)ä¸Šä¸‹æ–‡ä¸­æ“ä½œã€‚\n```\n`from langchain.chat\\_models import init\\_chat\\_model\nfrom langgraph.graph import StateGraph, MessagesState, START\nfrom langgraph.checkpoint.postgres import PostgresSaver\nBASE\\_URL=&#34;&#34;&#34;&#34; TOKEN=&#34;&#34;&#34;&#34;\nMODEL\\_NAME=&#34;&#34;&#34;&#34;\nmodel = init\\_chat\\_model(\nmodel=MODEL\\_NAME,\nmodel\\_provider=&#34;&#34;openai&#34;&#34;, base\\_url=BASE\\_URL,\napi\\_key=TOKEN,\ntemperature=0,\n)\nDB\\_URI = &#34;&#34;postgresql://postgres:postgres@localhost:5432/postgres?sslmode=disable&#34;&#34;\nwith PostgresSaver.from\\_conn\\_string(DB\\_URI) as checkpointer:\ncheckpointer.setup() # ç¬¬ä¸€æ¬¡è°ƒç”¨æ—¶å¿…é¡»è¦setup()\ndef call\\_model(state: MessagesState):\nresponse = model.invoke(state[&#34;&#34;messages&#34;&#34;])\nreturn {&#34;&#34;messages&#34;&#34;: response}\nbuilder = StateGraph(MessagesState)\nbuilder.add\\_node(call\\_model)\nbuilder.add\\_edge(START, &#34;&#34;call\\_model&#34;&#34;)\ngraph = builder.compile(checkpointer=checkpointer)\nconfig = {\n&#34;&#34;configurable&#34;&#34;: {\n&#34;&#34;thread\\_id&#34;&#34;: &#34;&#34;1&#34;&#34;\n}\n}\nresponse = graph.invoke(\n{&#34;&#34;messages&#34;&#34;: [{&#34;&#34;role&#34;&#34;: &#34;&#34;user&#34;&#34;, &#34;&#34;content&#34;&#34;: &#34;&#34;ä½ å¥½ï¼Œæˆ‘å«adaï¼&#34;&#34;}]},\nconfig\n)\nprint(response[&#39;&#39;messages&#39;&#39;][-1].content)\nresponse = graph.invoke(\n{&#34;&#34;messages&#34;&#34;: [{&#34;&#34;role&#34;&#34;: &#34;&#34;user&#34;&#34;, &#34;&#34;content&#34;&#34;: &#34;&#34;ä½ å¥½ï¼Œè¯·é—®ä½ è¿˜è®°å¾—æˆ‘å«ä»€ä¹ˆåå­—ä¹ˆï¼Ÿ&#34;&#34;}]},\nconfig\n)\nprint(response[&#39;&#39;messages&#39;&#39;][-1].content)`\n```\nè¿è¡Œä¸€æ¬¡ä¸Šè¿°ä»£ç åï¼Œå…³é—­åº”ç”¨ç¨‹åºåé‡å¯ï¼Œå†æ¬¡è¿è¡Œä¸Šè¿°ä»£ç ï¼Œprintç»“æœå¦‚ä¸‹ï¼š\n```\n`bot\\_answer\\_1ï¼šä½ å¥½ï¼ŒAdaï¼å¾ˆé«˜å…´å†æ¬¡è§åˆ°ä½ ï¼ğŸ˜Š\nä½ çš„åå­—çœŸåŠ¨å¬ï¼ä»Šå¤©æœ‰ä»€ä¹ˆæˆ‘å¯ä»¥å¸®ä½ è§£ç­”æˆ–è€…æƒ³èŠçš„è¯é¢˜å—ï¼Ÿbot\\_answer\\_2ï¼šå½“ç„¶è®°å¾—ï¼ä½ å‘Šè¯‰æˆ‘ä½ å« \\*\\*Ada\\*\\*ã€‚å¾ˆé«˜å…´å†æ¬¡å’Œä½ æ‰“æ‹›å‘¼ï¼ğŸ˜Š`\n```\nå¯ä»¥çœ‹åˆ°ï¼Œè®°å¿†å·²ç»è¢«ä¿å­˜äº†ã€‚æˆ‘ä»¬æ£€æŸ¥æ•°æ®åº“å¯ä»¥å‘ç°ï¼Œpostgresæ•°æ®åº“ä¸­å‡ºç°äº†å››ä¸ªè¡¨ï¼š\n![] \nä¸Šè¿°è¡¨ä¸­ï¼Œcheckpointsè¡¨æ˜¯â€çŠ¶æ€å¿«ç…§â€œè¡¨ï¼Œæ¯å½“ç¨‹åºæ‰§è¡Œä¸€ä¸ªstepæ—¶ï¼Œå®ƒå°±ä¼šåœ¨è¿™å¼ è¡¨ä¸­åˆ›å»ºä¸€æ¡æ–°è®°å½•ï¼Œè¿™æ¡è®°å½•å°±æ˜¯ä¸€ä¸ªæ£€æŸ¥ç‚¹çš„å¿«ç…§ã€‚æŸ¥è¯¢è¯¥è¡¨ï¼Œå¯ä»¥å¾—åˆ°å¦‚ä¸‹ç»“æœï¼š\n![] \næ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ¥åˆ†ææ¯ä¸€åˆ—çš„å«ä¹‰ï¼š![] |åˆ—å|å«ä¹‰|ä¸¾ä¾‹è¯´æ˜|\nthread\\_id|çº¿ç¨‹ID|ä¸Šè¡¨ä¸­ï¼Œæ‰€æœ‰thread\\_idéƒ½ä¸º1ï¼Œè¡¨ç¤ºè¿™äº›è®°å½•éƒ½å±äºåŒä¸€ä¸ªä¼šè¯æµ|\ncheckpoint\\_ns|æ£€æŸ¥ç‚¹å‘½åç©ºé—´ï¼ˆNamespaceï¼‰ï¼Œç”¨äºå¯¹æ£€æŸ¥ç‚¹è¿›è¡Œåˆ†ç»„æˆ–åˆ†ç±»|ä¸Šè¡¨ä¸­éƒ½æ˜¯ç©ºçš„ï¼Œè¡¨ç¤ºæœªä½¿ç”¨æˆ–ä½¿ç”¨äº†é»˜è®¤çš„å‘½åç©ºé—´|\ncheckpoint\\_id|æ£€æŸ¥ç‚¹çš„å”¯ä¸€æ ‡è¯†ç¬¦ï¼Œè¯¥è®°å½•çš„ä¸»é”®||\nparent\\_checkpoint\\_id|çˆ¶æ£€æŸ¥ç‚¹çš„IDï¼Œå®ƒå°†æ£€æŸ¥ç‚¹é“¾æ¥èµ·æ¥|ç¬¬ä¸€æ¡è®°å½•çš„parent\\_checkpoint\\_idæ˜¯ç©ºçš„ï¼Œä»£è¡¨æ˜¯æ•´ä¸ªæµç¨‹çš„èµ·ç‚¹ã€‚|\ncheckpoint|æ ¸å¿ƒçŠ¶æ€æ•°æ®ï¼Œæ˜¯ä¸€ä¸ªjsonå¯¹è±¡ã€‚|tsä»£è¡¨æ—¶é—´æˆ³ï¼›channel\\_valuesä»£è¡¨é€šé“å€¼ï¼Œå¯ä»¥ç†è§£ä¸ºå·¥ä½œæµä¸­çš„å˜é‡å€¼ï¼›updated\\_channelsä»£è¡¨åœ¨å½“å‰è¿™æ­¥ä¸­è¢«ä¿®æ”¹è¿‡çš„é€šé“|\nmetadata|è¯¥æ£€æŸ¥ç‚¹æœ¬èº«çš„å…ƒæ•°æ®|stepè¡¨ç¤ºè¿™æ˜¯å·¥ä½œæµçš„ç¬¬å‡ æ­¥ï¼›sourceè¡¨æ¥æºï¼Œ&#34;input&#34;æŒ‡å¤–å¤–éƒ¨è¾“å…¥ï¼Œ&#34;loop&#34;æŒ‡å·¥ä½œæµå†…éƒ¨å¾ªç¯æˆ–æŸä¸ªèŠ‚ç‚¹æ‰§è¡Œçš„ç»“æœ|\nç†è§£äº†ä¸Šé¢checkpointsè¡¨åï¼Œé‚£ä¹ˆä¸ç¦ä¼šé—®ï¼ŒçœŸæ­£çš„æ¶ˆæ¯å†…å®¹è¢«å­˜åˆ°äº†å“ªé‡Œå‘¢ï¼ŸçœŸæ­£çš„æ¶ˆæ¯å†…å®¹å­˜å‚¨åœ¨checkpoint\\_writesè¡¨ä¸­ï¼Œå¦‚ä¸‹ï¼š\n![] \né™¤äº†PostgreSQLä¹‹å¤–ï¼ŒLangGraphè¿˜æ”¯æŒMongoDBã€Redisç­‰æ•°æ®åº“ã€‚\n### **å­å›¾ä¸­çš„è®°å¿†**\nå½“æ„å»ºå¤æ‚çš„ã€ç”±å¤šä¸ªå­å›¾åµŒå¥—è€Œæˆçš„åº”ç”¨æ—¶ï¼Œéœ€è¦æ›´çµæ´»çš„è®°å¿†ç®¡ç†ç­–ç•¥ã€‚â—è®°å¿†ç»§æ‰¿ï¼ˆé»˜è®¤ï¼‰ï¼šé»˜è®¤æƒ…å†µä¸‹ï¼Œå­å›¾ä¼šç»§æ‰¿å…¶çˆ¶å›¾çš„checkpointerã€‚è¿™æ„å‘³ç€æ•´ä¸ªåµŒå¥—å›¾å…±äº«åŒä¸€ä¸ªå¯¹è¯çŠ¶æ€ï¼Œæ•°æ®å¯ä»¥åœ¨çˆ¶å­å›¾ä¹‹é—´æ— ç¼æµåŠ¨ã€‚è¿™å¯¹äºå°†ä¸€ä¸ªå¤§å‹ä»»åŠ¡åˆ†è§£ä¸ºå¤šä¸ªæ¨¡å—åŒ–å­ä»»åŠ¡éå¸¸æœ‰ç”¨ã€‚\nâ—è®°å¿†éš”ç¦»ï¼šåœ¨æŸäº›åœºæ™¯ä¸‹ï¼Œä¾‹å¦‚æ„å»ºå¤šæ™ºèƒ½ä½“ç³»ç»Ÿï¼Œå¸Œæœ›æ¯ä¸ªæ™ºèƒ½ä½“ï¼ˆç”±ä¸€ä¸ªå­å›¾è¡¨ç¤ºï¼‰æ‹¥æœ‰è‡ªå·±ç‹¬ç«‹çš„å†…å­˜ç©ºé—´ï¼Œäº’ä¸å¹²æ‰°ã€‚æ­¤æ—¶ï¼Œå¯ä»¥åœ¨ç¼–è¯‘å­å›¾æ—¶è®¾ç½®checkpointer=Trueã€‚\nå¦‚ä¸‹ä»£ç ï¼Œå¯ä»¥åœ¨å­å›¾ä¸­ç›´æ¥ä½¿ç”¨çˆ¶å›¾çš„çŸ­æœŸè®°å¿†ï¼š```\n`from langgraph.graph import START, StateGraph\nfrom langgraph.checkpoint.memory import InMemorySaver\nfrom typing import TypedDict\nclass State(TypedDict):\nfoo: str\n# å­å›¾def subgraph\\_node\\_1(state: State):\nreturn {&#34;&#34;foo&#34;&#34;: state[&#34;&#34;foo&#34;&#34;] + &#34;&#34;bar&#34;&#34;}\nsubgraph\\_builder = StateGraph(State)\nsubgraph\\_builder.add\\_node(subgraph\\_node\\_1)\nsubgraph\\_builder.add\\_edge(START, &#34;&#34;subgraph\\_node\\_1&#34;&#34;', 'doi': '', 'published_date': '2025-12-08T00:00:00+00:00', 'pdf_url': '', 'url': 'https://zhuanlan.zhihu.com/p/1981392181592871894', 'source': 'exa_context', 'categories': [], 'keywords': [], 'citations': 0, 'references': [], 'extra': {'saved_path': '/home/qinshan/widthresearch/data/downloads/exa_Multi-Agen.md'}}
2026-02-21 20:11:32,994 - __main__ - INFO - call_tool: name=tavily_download, args={'papers': [{'paper_id': '', 'title': 'åŸºäºLangGraphçš„StateçŠ¶æ€æ¨¡å¼è®¾è®¡- æŒ‡å—- gccbuaa', 'authors': [], 'abstract': '![](https://img2024.cnblogs.com/blog/35695/202506/35695-20250620221146444-645204917.webp)\n![åšå®¢å›­logo](//assets.cnblogs.com/logo.svg)\n![æœç´¢](//assets.cnblogs.com/icons/search.svg)\n![æœç´¢](//assets.cnblogs.com/icons/enter.svg)\n![æœç´¢](//assets.cnblogs.com/icons/search.svg)\n![æœç´¢](//assets.cnblogs.com/icons/search.svg)\n![å†™éšç¬”](//assets.cnblogs.com/icons/newpost.svg)\n![æˆ‘çš„åšå®¢](//assets.cnblogs.com/icons/myblog.svg)\n![çŸ­æ¶ˆæ¯](//assets.cnblogs.com/icons/message.svg)\n![ç®€æ´æ¨¡å¼](//assets.cnblogs.com/icons/lite-mode-on.svg)\n![ç”¨æˆ·å¤´åƒ](//assets.cnblogs.com/icons/avatar-default.svg)\n![è¿”å›ä¸»é¡µ](/skins/custom/images/logo.gif)\n\n# [gccbuaa](https://www.cnblogs.com/gccbuaa)\n\n## \n\n![è®¢é˜…](/skins/coffee/images/xml.gif)\n\n# [langGraphä»å…¥é—¨åˆ°ç²¾é€šï¼ˆå››ï¼‰â€”â€”åŸºäºLangGraphçš„StateçŠ¶æ€æ¨¡å¼è®¾è®¡ - æŒ‡å—](https://www.cnblogs.com/gccbuaa/p/19616522 "å‘å¸ƒäº 2026-02-14 20:02")\n\n### 1 å¯¼è¯­\n\nåœ¨æ„å»ºAI Agentæ—¶ï¼ŒçŠ¶æ€ï¼ˆStateï¼‰æ˜¯è¿æ¥å„ä¸ªèŠ‚ç‚¹çš„çµé­‚ã€‚**LangGraph** é‡‡ç”¨æ¶ˆæ¯ä¼ é€’æœºåˆ¶æ¥é©±åŠ¨ç¨‹åºçš„è¿è¡Œï¼Œè€Œ `State` åˆ™æ˜¯ä¿¡æ¯çš„è½½ä½“ã€‚æœ¬æ–‡å°†æ·±å…¥æ¢è®¨ LangGraph ä¸­æœ€åŸºç¡€ä¹Ÿæœ€æ ¸å¿ƒçš„éƒ¨åˆ†â€”â€”**Stateçš„å®šä¹‰æ¨¡å¼è®¾è®¡**ã€‚é€šè¿‡å­¦ä¹ æœ¬æ–‡ï¼Œä½ å°†æŒæ¡å¦‚ä½•åˆ©ç”¨å­—å…¸å’Œ `TypedDict` æ„å»ºå¯é çš„å›¾çŠ¶æ€ï¼Œç†è§£èŠ‚ç‚¹é—´æ•°æ®æµåŠ¨çš„åº•å±‚é€»è¾‘ï¼Œä¸ºå¼€å‘å¤æ‚å¤šä»£ç†ç³»ç»Ÿæ‰“ä¸‹åšå®åŸºç¡€ã€‚\n\n`State`\n`TypedDict`\n\n### 2 æŠ€æœ¯æ ˆæ¸…å•\n\n### 3 é¡¹ç›®æ ¸å¿ƒåŸç†\n\nLangGraph çš„æ ¸å¿ƒåœ¨äº**çŠ¶æ€ç®¡ç†**ã€‚State æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªå…±äº«çš„æ•°æ®ç»“æ„ï¼Œå®ƒåœ¨å›¾ä¸­ä»å·¦å‘å³æµåŠ¨ã€‚æ¯ä¸ªèŠ‚ç‚¹æ‰§è¡Œå®Œæ¯•åï¼Œä¼šå°†æ›´æ–°çš„éƒ¨åˆ†â€œå¹¿æ’­â€ç»™çŠ¶æ€ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒçŠ¶æ€æ›´æ–°é‡‡ç”¨**è¦†ç›–æœºåˆ¶**ï¼ˆOverwritingï¼‰ï¼Œä½†é€šè¿‡ **Reducer å‡½æ•°**ï¼ˆå¦‚ `operator.add`ï¼‰ï¼Œæˆ‘ä»¬å¯ä»¥å®ç°æ›´å¤æ‚çš„é€»è¾‘ï¼Œä¾‹å¦‚æ¶ˆæ¯çš„**è‡ªåŠ¨è¿½åŠ **ã€‚  \n**åœ¨`AI Agent`åº”ç”¨ç¨‹åºçš„è®¾è®¡ä¸­ï¼Œåœºæ™¯çš„å¤æ‚æ€§ç›´æ¥å†³å®šäº†æ„å»ºå›¾çš„å¤æ‚åº¦ã€‚**ä¾‹å¦‚ï¼Œæœ€ç®€å•çš„åœºæ™¯å¯èƒ½ä»…æ¶‰åŠä¸€ä¸ªå¤§æ¨¡å‹çš„é—®ç­”æµç¨‹ï¼Œå½¢å¼ä¸ºï¼šSTART -> Node -> ENDï¼ˆå…¶ä¸­å¤§æ¨¡å‹çš„äº¤äº’é€»è¾‘è¢«å°è£…åœ¨Nodeä¸­ï¼‰ã€‚è€Œæ›´å¤æ‚çš„åœºæ™¯åˆ™å¯èƒ½æ¶‰åŠå¤šä¸ª`AI Agent`çš„ååŒå·¥ä½œï¼ŒåŒ…æ‹¬å¤šä¸ªåˆ†æ”¯å’Œå¾ªç¯çš„æ„æˆã€‚æ— è®ºæ˜¯ç®€å•è¿˜æ˜¯å¤æ‚çš„å›¾ï¼Œ`LangGraph`çš„ä»·å€¼æ°¸è¿œä¸åœ¨äºå¦‚ä½•å»å®šä¹‰èŠ‚ç‚¹ï¼Œå¦‚ä½•å»å®šä¹‰è¾¹ï¼Œè€Œæ˜¯åœ¨äº**å¦‚ä½•æœ‰æ•ˆç®¡ç†å„ä¸ªèŠ‚ç‚¹çš„è¾“å…¥å’Œè¾“å‡ºï¼Œä»¥ä¿æŒå›¾çš„æŒç»­è¿è¡ŒçŠ¶æ€**ã€‚`LangGraph`çš„**åº•å±‚å›¾ç®—æ³•é‡‡ç”¨æ¶ˆæ¯ä¼ é€’æœºåˆ¶æ¥å®šä¹‰å’Œæ‰§è¡Œè¿™äº›å›¾ä¸­çš„äº¤äº’æµç¨‹ï¼Œå…¶ä¸­çŠ¶æ€ï¼ˆStateï¼‰ç»„ä»¶æ‰®æ¼”ç€å…³é”®çš„è½½ä½“è§’è‰²ï¼Œè´Ÿè´£åœ¨å›¾çš„å„ä¸ªèŠ‚ç‚¹ä¹‹é—´ä¼ é€’ä¿¡æ¯**ã€‚è¿™ä¹Ÿå°±æ„å‘³ç€ï¼Œ`LangGraph`æ¡†æ¶çš„æ ¸å¿ƒåœ¨äº`State`çš„æœ‰æ•ˆä½¿ç”¨å’ŒæŒæ¡ã€‚åœ¨å¤æ‚çš„åº”ç”¨ä¸­ï¼Œ`State`ç»„ä»¶éœ€è¦å­˜å‚¨å’Œç®¡ç†çš„ä¿¡æ¯é‡ä¼šæ˜¾è‘—å¢åŠ ã€‚æ ¸å¿ƒåŠŸèƒ½å¦‚å·¥å…·ä½¿ç”¨ã€è®°å¿†èƒ½åŠ›å’Œäººæœºäº¤äº’ç­‰ï¼Œéƒ½ä¾èµ–`State`æ¥å®ç°å’Œç»´æŠ¤ã€‚æ‰€ä»¥ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å¯¹`LangGragh`æ¡†æ¶çš„æ¢ç´¢ï¼Œéƒ½å°†ç´§å¯†å›´ç»•`State`çš„å®ç°å’Œåº”ç”¨æœºåˆ¶å±•å¼€ï¼Œè¿™åŒ…æ‹¬`LangGraph`å†…ç½®å°è£…å¥½çš„å·¥å…·/æ–¹æ³•çš„ä½¿ç”¨ï¼Œä»¥åŠæˆ‘ä»¬è‡ªå®šä¹‰æ„å»ºåŠŸèƒ½æ—¶çš„å®ç°æ–¹æ³•ã€‚\n\n`operator.add`\n`AI Agent`\n`AI Agent`\n`LangGraph`\n`LangGraph`\n`LangGraph`\n`State`\n`State`\n`State`\n`LangGragh`\n`State`\n`LangGraph`\n\n![](https://i-blog.csdnimg.cn/direct/323b3953781743a8971e9cb44390bfb8.png)  \n`LangGraph`æ„å»ºçš„å›¾ä¸­çš„æ¯ä¸ªèŠ‚ç‚¹éƒ½å…·å¤‡è®¿é—®ã€è¯»å–å’Œå†™å…¥çŠ¶æ€çš„æƒé™ã€‚å½“æŸä¸€ä¸ªèŠ‚ç‚¹å»ä¿®æ”¹çŠ¶æ€æ—¶ï¼Œå®ƒä¼šå°†æ­¤ä¿¡æ¯å¹¿æ’­åˆ°å›¾ä¸­çš„æ‰€æœ‰å…¶ä»–èŠ‚ç‚¹ã€‚è¿™ç§å¹¿æ’­æœºåˆ¶å…è®¸å…¶ä»–èŠ‚ç‚¹å“åº”çŠ¶æ€çš„å˜åŒ–å¹¶ç›¸åº”åœ°è°ƒæ•´å…¶è¡Œä¸ºã€‚å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œä»åˆå§‹çŠ¶æ€ï¼ˆInitial Stateï¼‰å¼€å§‹ï¼Œå…¶ä¸­åŒ…å«äº†ä¸€æ¡æ¶ˆæ¯ { â€œxâ€: â€œ10â€ }ï¼Œéšç€æ¶ˆæ¯åœ¨èŠ‚ç‚¹é—´é€šè¿‡è¾¹ä¼ é€’ï¼Œæ¯ä¸ªèŠ‚ç‚¹æ ¹æ®å…¶é€»è¾‘å¯¹çŠ¶æ€è¿›è¡Œæ›´æ–°ã€‚Node 1 å’Œ Node 2 åˆ†åˆ«å¯¹çŠ¶æ€è¿›è¡Œäº†å¤„ç†å’Œå˜æ›´ï¼Œç»“æœæ˜¯åœ¨å›¾çš„æœ«ç«¯ï¼Œæˆ‘ä»¬å¾—åˆ°äº†ä¸€ä¸ªåŒ…å«ä¸‰æ¡æ¶ˆæ¯çš„æœ€ç»ˆçŠ¶æ€ { â€œxâ€: â€œ10â€ }, { â€œxâ€: â€œ11â€ }, { â€œyâ€: â€œ9â€ }ã€‚\\*\\*ä»å¼€å‘çš„è§’åº¦æ¥çœ‹ï¼Œ`State`å®é™…ä¸Šæ˜¯ä¸€ä¸ªå…±äº«çš„æ•°æ®ç»“æ„ã€‚å¦‚ä¸Šå›¾æ‰€ç¤ºï¼ŒçŠ¶æ€è¡¨ç°ä¸ºä¸€ä¸ªç®€å•çš„å­—å…¸ã€‚é€šè¿‡å¯¹è¿™ä¸ªå­—å…¸è¿›è¡Œè¯»å†™æ“ä½œï¼Œå¯ä»¥å®ç°è‡ªå·¦è€Œå³çš„æ•°æ®æµåŠ¨ï¼Œä»è€Œæ„å»ºä¸€ä¸ªå¯è¿è¡Œçš„å›¾ç»“æ„ã€‚é‚£ä¹ˆæ ¹æ®å‰é¢å­¦ä¹ çš„å†…å®¹ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨è¿™ä¸ªæµç¨‹æ¥å¤ç°å¹¶ç†è§£å›¾ä¸­çš„åŠ¨æ€æ•°æ®äº¤æ¢ï¼Œæ•´ä½“çš„è®¾è®¡å¦‚ä¸‹ï¼š  \n![](https://i-blog.csdnimg.cn/direct/b1915967b7c94b3eaefa582db0168e2f.png)\n\n![](https://i-blog.csdnimg.cn/direct/323b3953781743a8971e9cb44390bfb8.png)\n`LangGraph`\n`State`\n![](https://i-blog.csdnimg.cn/direct/b1915967b7c94b3eaefa582db0168e2f.png)\n\n### 4 å®æˆ˜æ­¥éª¤\n\n#### 4.1 ç¯å¢ƒå‡†å¤‡\n\nåœ¨å¼€å§‹ä»£ç å®ç°å‰ï¼Œç¡®ä¿å®‰è£…äº†æ ¸å¿ƒä¾èµ–ï¼š\n\n`pip install langgraph==1.0.5 typing-extensions==4.15.0`\n\n![](https://i-blog.csdnimg.cn/direct/2cee626b5bfb44018d727bf4e1467419.png)\n\n![](https://i-blog.csdnimg.cn/direct/2cee626b5bfb44018d727bf4e1467419.png)\n\n#### 4.2 ä»£ç å®ç°\n\næˆ‘ä»¬é€šè¿‡ä¸¤ä¸ªç¤ºä¾‹å¯¹æ¯”â€œå­—å…¸æ¨¡å¼â€ä¸â€œTypedDictæ¨¡å¼â€ã€‚ä»£ç ä¿å­˜åœ¨ `02-state-schema.py`ã€‚\n\n`02-state-schema.py`\n`import operator\nfrom typing import Annotated\nfrom langgraph.graph import StateGraph, START, END\nfrom typing_extensions import TypedDict\n# 1. ä½¿ç”¨å­—å…¸ç±»å‹å®šä¹‰çŠ¶æ€ (çµæ´»ä½†ç¼ºä¹çº¦æŸ)\ndef test_dict_state():\n# åˆå§‹åŒ–ä¸€ä¸ªä»¥å­—å…¸ä¸ºçŠ¶æ€æ¨¡å¼çš„å›¾\nbuilder = StateGraph(dict)\ndef addition(state):\n# èŠ‚ç‚¹ä»…è¿”å›éœ€è¦æ›´æ–°çš„éƒ¨åˆ†ï¼ŒLangGraph å†…éƒ¨ä¼šè‡ªåŠ¨åˆå¹¶\nreturn {"x": state["x"] + 1}\ndef subtraction(state):\n# æ–°å¢ä¸€ä¸ªé”® y\nreturn {"y": state["x"] - 2}\nbuilder.add_node("addition", addition)\nbuilder.add_node("subtraction", subtraction)\nbuilder.add_edge(START, "addition")\nbuilder.add_edge("addition", "subtraction")\nbuilder.add_edge("subtraction", END)\ngraph = builder.compile()\nresult = graph.invoke({"x": 10})\nprint(f"å­—å…¸çŠ¶æ€æ‰§è¡Œç»“æœ: {result}")\n# 2. ä½¿ç”¨ TypedDict å®šä¹‰çŠ¶æ€ (æ¨èï¼šå¼ºç±»å‹çº¦æŸ)\nclass State(TypedDict):\nx: int\ny: int\ndef test_typeddict_state():\nbuilder = StateGraph(State)\ndef addition(state: State):\n# å…³é”®é€»è¾‘ï¼šè¯»å–å½“å‰çŠ¶æ€ x å¹¶åŠ  1\nreturn {"x": state["x"] + 1}\ndef subtraction(state: State):\n# å…³é”®é€»è¾‘ï¼šåŸºäºæ›´æ–°åçš„ x è®¡ç®— y\nreturn {"y": state["x"] - 2}\nbuilder.add_node("addition", addition)\nbuilder.add_node("subtraction", subtraction)\nbuilder.add_edge(START, "addition")\nbuilder.add_edge("addition", "subtraction")\nbuilder.add_edge("subtraction", END)\ngraph = builder.compile()\nresult = graph.invoke({"x": 10})\nprint(f"TypedDictçŠ¶æ€æ‰§è¡Œç»“æœ: {result}")\n# 3. ä½¿ç”¨ Reducer å®ç°åˆ—è¡¨è¿½åŠ  (è¿›é˜¶ï¼šè§£å†³çŠ¶æ€è¦†ç›–é—®é¢˜)\nclass ReducerState(TypedDict):\n# ä½¿ç”¨ Annotated æ ‡æ³¨è¯¥å­—æ®µçš„æ›´æ–°æ–¹å¼ä¸º operator.add (è¿½åŠ è€Œéè¦†ç›–)\nmessages: Annotated[list[str], operator.add]\ndef test_reducer_state():\nbuilder = StateGraph(ReducerState)\ndef node_1(state: ReducerState):\n# èŠ‚ç‚¹ 1 è¿”å›ç¬¬ä¸€æ¡æ¶ˆæ¯\nreturn {"messages": ["è¿™æ˜¯æ¥è‡ªèŠ‚ç‚¹1çš„æ¶ˆæ¯"]}\ndef node_2(state: ReducerState):\n# èŠ‚ç‚¹ 2 è¿”å›ç¬¬äºŒæ¡æ¶ˆæ¯\nreturn {"messages": ["è¿™æ˜¯æ¥è‡ªèŠ‚ç‚¹2çš„æ¶ˆæ¯"]}\nbuilder.add_node("node_1", node_1)\nbuilder.add_node("node_2", node_2)\nbuilder.add_edge(START, "node_1")\nbuilder.add_edge("node_1", "node_2")\nbuilder.add_edge("node_2", END)\ngraph = builder.compile()\n# åˆå§‹çŠ¶æ€å¸¦æœ‰ä¸€æ¡æ¶ˆæ¯\nresult = graph.invoke({"messages": ["åˆå§‹æ¶ˆæ¯"]})\nprint(f"Reducer(è¿½åŠ æ¨¡å¼)æ‰§è¡Œç»“æœ: {result}")\nif __name__ == "__main__":\ntest_dict_state()\ntest_typeddict_state()\ntest_reducer_state()`\n\n#### 4.3 åŠŸèƒ½æµ‹è¯•\n\nè¿è¡Œè„šæœ¬ï¼Œè§‚å¯Ÿä¸¤ç§æ¨¡å¼ä¸‹çŠ¶æ€æ˜¯å¦‚ä½•åœ¨èŠ‚ç‚¹é—´ä¼ é€’å¹¶å®Œæˆè®¡ç®—çš„ã€‚\n\n![](https://i-blog.csdnimg.cn/direct/a2d34962ffad4d9aaa0fd6228ce69f64.png)\n\n![](https://i-blog.csdnimg.cn/direct/a2d34962ffad4d9aaa0fd6228ce69f64.png)\n\n### 5 æ ¸å¿ƒä»£ç è§£æ\n\n#### 5.1 StateGraph(dict) çµæ´»æ¨¡å¼\n\n`builder = StateGraph(dict)`\n\n#### 5.2 TypedDict å¼ºçº¦æŸæ¨¡å¼\n\n**åˆ’é‡ç‚¹**ï¼šè¿™æ˜¯å·¥ä¸šçº§å¼€å‘çš„æ ‡å‡†é€‰æ‹©ã€‚\n\n`class State(TypedDict):\nx: int\ny: int`\n`StateGraph(State)`\n\n#### 5.3 Annotated ä¸ Reducer æœºåˆ¶\n\n**åˆ’é‡ç‚¹**ï¼šè¿™æ˜¯å®ç°å¯¹è¯è®°å¿†ï¼ˆMemoryï¼‰çš„åº•å±‚æŠ€æœ¯ã€‚\n\n`messages: Annotated[list[str], operator.add]`\n`messages`\n`add`\n\n### 6 æ•ˆæœéªŒè¯\n\né€šè¿‡ `graph.invoke()` ä¼ é€’åˆå§‹çŠ¶æ€åï¼Œç³»ç»Ÿä¼šé¡ºåºæ‰§è¡Œå„èŠ‚ç‚¹ï¼Œå¹¶è¿”å›åˆå¹¶åçš„æœ€ç»ˆçŠ¶æ€å­—å…¸ã€‚\n\n`graph.invoke()`\n\n`ã€å›¾ç‰‡å ä½ç¬¦ï¼šæ ¸å¿ƒåŠŸèƒ½è¿è¡Œæ•ˆæœæˆªå›¾ - ç»ˆç«¯æ˜¾ç¤º x ä¸ y çš„æœ€ç»ˆåˆå¹¶ç»“æœã€‘`\n\n`ã€å›¾ç‰‡å ä½ç¬¦ï¼šæ ¸å¿ƒåŠŸèƒ½è¿è¡Œæ•ˆæœæˆªå›¾ - ç»ˆç«¯æ˜¾ç¤º x ä¸ y çš„æœ€ç»ˆåˆå¹¶ç»“æœã€‘`\n\n### 7 è¸©å‘è®°å½•\n\n#### 7.1 KeyDoesNotExist é”™è¯¯\n\n`KeyError: \'x\'`\n`state["x"]`\n`invoke`\n`TypedDict`\n`total=False`\n\n#### 7.2 èŠ‚ç‚¹è¿”å›å€¼ç±»å‹ä¸åŒ¹é…\n\n`int`\n`str`\n`TypedDict`\n`Pydantic`\n\n#### 7.3 çŠ¶æ€è¦†ç›–é—®é¢˜\n\n`Annotated`\n`operator.add`\n\n### 8 æ€»ç»“ä¸æ‰©å±•\n\næŒæ¡ **State çš„å®šä¹‰æ¨¡å¼** æ˜¯å¼€å¯ LangGraph é«˜é˜¶å¼€å‘çš„å¤§é—¨ã€‚é€šè¿‡ `TypedDict` æˆ‘ä»¬å»ºç«‹äº†ä¸€å¥—å¯é¢„æµ‹çš„æ•°æ®å¥‘çº¦ã€‚**åˆ’é‡ç‚¹**ï¼šçŠ¶æ€åœ¨ä»»ä½•ç»™å®šæ—¶é—´åªåŒ…å«æ¥è‡ªä¸€ä¸ªèŠ‚ç‚¹çš„æ›´æ–°ä¿¡æ¯ï¼Œä½† LangGraph å†…éƒ¨çš„åˆå¹¶æœºåˆ¶è®©å®ƒçœ‹èµ·æ¥åƒä¸€ä¸ªå…¨å±€å…±äº«æ± ã€‚ä¸‹ä¸€æ­¥ï¼Œæˆ‘ä»¬å°†ç ”ç©¶å¦‚ä½•é€šè¿‡ `Annotated` ä¸ `add_messages` å®ç°å¯¹è¯å†å²çš„è‡ªåŠ¨è¿½æº¯ã€‚\n\n`TypedDict`\n`Annotated`\n`add_messages`\n\næ¬¢è¿è¯„è®ºåŒºç•™è¨€è®¨è®ºæ ¸å¿ƒä¸»é¢˜ç›¸å…³çš„é—®é¢˜~\n\n![](https://img2024.cnblogs.com/blog/35695/202512/35695-20251205171919392-144975027.jpg)\n\n![](//assets.cnblogs.com/images/ghs.png)æµ™å…¬ç½‘å®‰å¤‡ 33010602011771å·', 'doi': '', 'published_date': None, 'pdf_url': '', 'url': 'https://www.cnblogs.com/gccbuaa/p/19616522', 'source': 'tavily', 'categories': ['web_search'], 'keywords': [], 'citations': 0, 'references': [], 'extra': {'score': 0.99996674, 'saved_path': None}}], 'save_path': '/home/qinshan/widthresearch/data/downloads'}
2026-02-21 20:11:32,995 - __main__ - INFO - handle_download: searcher=TavilySearch, input_papers=1, save_path=/home/qinshan/widthresearch/data/downloads
2026-02-21 20:11:32,995 - __main__ - INFO - handle_download: downloaded=1
2026-02-21 20:11:32,995 - __main__ - INFO - call_tool payload: source_tool=tavily_download, result_type=papers, count=1
2026-02-21 20:11:32,995 - __main__ - INFO - call_tool: name=tavily_download, result_type=papers, count=1
2026-02-21 20:11:32,996 - __main__ - DEBUG - call_tool payload sample: {'paper_id': '', 'title': 'åŸºäºLangGraphçš„StateçŠ¶æ€æ¨¡å¼è®¾è®¡- æŒ‡å—- gccbuaa', 'authors': [], 'abstract': '![](https://img2024.cnblogs.com/blog/35695/202506/35695-20250620221146444-645204917.webp)\n![åšå®¢å›­logo](//assets.cnblogs.com/logo.svg)\n![æœç´¢](//assets.cnblogs.com/icons/search.svg)\n![æœç´¢](//assets.cnblogs.com/icons/enter.svg)\n![æœç´¢](//assets.cnblogs.com/icons/search.svg)\n![æœç´¢](//assets.cnblogs.com/icons/search.svg)\n![å†™éšç¬”](//assets.cnblogs.com/icons/newpost.svg)\n![æˆ‘çš„åšå®¢](//assets.cnblogs.com/icons/myblog.svg)\n![çŸ­æ¶ˆæ¯](//assets.cnblogs.com/icons/message.svg)\n![ç®€æ´æ¨¡å¼](//assets.cnblogs.com/icons/lite-mode-on.svg)\n![ç”¨æˆ·å¤´åƒ](//assets.cnblogs.com/icons/avatar-default.svg)\n![è¿”å›ä¸»é¡µ](/skins/custom/images/logo.gif)\n\n# [gccbuaa](https://www.cnblogs.com/gccbuaa)\n\n## \n\n![è®¢é˜…](/skins/coffee/images/xml.gif)\n\n# [langGraphä»å…¥é—¨åˆ°ç²¾é€šï¼ˆå››ï¼‰â€”â€”åŸºäºLangGraphçš„StateçŠ¶æ€æ¨¡å¼è®¾è®¡ - æŒ‡å—](https://www.cnblogs.com/gccbuaa/p/19616522 "å‘å¸ƒäº 2026-02-14 20:02")\n\n### 1 å¯¼è¯­\n\nåœ¨æ„å»ºAI Agentæ—¶ï¼ŒçŠ¶æ€ï¼ˆStateï¼‰æ˜¯è¿æ¥å„ä¸ªèŠ‚ç‚¹çš„çµé­‚ã€‚**LangGraph** é‡‡ç”¨æ¶ˆæ¯ä¼ é€’æœºåˆ¶æ¥é©±åŠ¨ç¨‹åºçš„è¿è¡Œï¼Œè€Œ `State` åˆ™æ˜¯ä¿¡æ¯çš„è½½ä½“ã€‚æœ¬æ–‡å°†æ·±å…¥æ¢è®¨ LangGraph ä¸­æœ€åŸºç¡€ä¹Ÿæœ€æ ¸å¿ƒçš„éƒ¨åˆ†â€”â€”**Stateçš„å®šä¹‰æ¨¡å¼è®¾è®¡**ã€‚é€šè¿‡å­¦ä¹ æœ¬æ–‡ï¼Œä½ å°†æŒæ¡å¦‚ä½•åˆ©ç”¨å­—å…¸å’Œ `TypedDict` æ„å»ºå¯é çš„å›¾çŠ¶æ€ï¼Œç†è§£èŠ‚ç‚¹é—´æ•°æ®æµåŠ¨çš„åº•å±‚é€»è¾‘ï¼Œä¸ºå¼€å‘å¤æ‚å¤šä»£ç†ç³»ç»Ÿæ‰“ä¸‹åšå®åŸºç¡€ã€‚\n\n`State`\n`TypedDict`\n\n### 2 æŠ€æœ¯æ ˆæ¸…å•\n\n### 3 é¡¹ç›®æ ¸å¿ƒåŸç†\n\nLangGraph çš„æ ¸å¿ƒåœ¨äº**çŠ¶æ€ç®¡ç†**ã€‚State æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªå…±äº«çš„æ•°æ®ç»“æ„ï¼Œå®ƒåœ¨å›¾ä¸­ä»å·¦å‘å³æµåŠ¨ã€‚æ¯ä¸ªèŠ‚ç‚¹æ‰§è¡Œå®Œæ¯•åï¼Œä¼šå°†æ›´æ–°çš„éƒ¨åˆ†â€œå¹¿æ’­â€ç»™çŠ¶æ€ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒçŠ¶æ€æ›´æ–°é‡‡ç”¨**è¦†ç›–æœºåˆ¶**ï¼ˆOverwritingï¼‰ï¼Œä½†é€šè¿‡ **Reducer å‡½æ•°**ï¼ˆå¦‚ `operator.add`ï¼‰ï¼Œæˆ‘ä»¬å¯ä»¥å®ç°æ›´å¤æ‚çš„é€»è¾‘ï¼Œä¾‹å¦‚æ¶ˆæ¯çš„**è‡ªåŠ¨è¿½åŠ **ã€‚  \n**åœ¨`AI Agent`åº”ç”¨ç¨‹åºçš„è®¾è®¡ä¸­ï¼Œåœºæ™¯çš„å¤æ‚æ€§ç›´æ¥å†³å®šäº†æ„å»ºå›¾çš„å¤æ‚åº¦ã€‚**ä¾‹å¦‚ï¼Œæœ€ç®€å•çš„åœºæ™¯å¯èƒ½ä»…æ¶‰åŠä¸€ä¸ªå¤§æ¨¡å‹çš„é—®ç­”æµç¨‹ï¼Œå½¢å¼ä¸ºï¼šSTART -> Node -> ENDï¼ˆå…¶ä¸­å¤§æ¨¡å‹çš„äº¤äº’é€»è¾‘è¢«å°è£…åœ¨Nodeä¸­ï¼‰ã€‚è€Œæ›´å¤æ‚çš„åœºæ™¯åˆ™å¯èƒ½æ¶‰åŠå¤šä¸ª`AI Agent`çš„ååŒå·¥ä½œï¼ŒåŒ…æ‹¬å¤šä¸ªåˆ†æ”¯å’Œå¾ªç¯çš„æ„æˆã€‚æ— è®ºæ˜¯ç®€å•è¿˜æ˜¯å¤æ‚çš„å›¾ï¼Œ`LangGraph`çš„ä»·å€¼æ°¸è¿œä¸åœ¨äºå¦‚ä½•å»å®šä¹‰èŠ‚ç‚¹ï¼Œå¦‚ä½•å»å®šä¹‰è¾¹ï¼Œè€Œæ˜¯åœ¨äº**å¦‚ä½•æœ‰æ•ˆç®¡ç†å„ä¸ªèŠ‚ç‚¹çš„è¾“å…¥å’Œè¾“å‡ºï¼Œä»¥ä¿æŒå›¾çš„æŒç»­è¿è¡ŒçŠ¶æ€**ã€‚`LangGraph`çš„**åº•å±‚å›¾ç®—æ³•é‡‡ç”¨æ¶ˆæ¯ä¼ é€’æœºåˆ¶æ¥å®šä¹‰å’Œæ‰§è¡Œè¿™äº›å›¾ä¸­çš„äº¤äº’æµç¨‹ï¼Œå…¶ä¸­çŠ¶æ€ï¼ˆStateï¼‰ç»„ä»¶æ‰®æ¼”ç€å…³é”®çš„è½½ä½“è§’è‰²ï¼Œè´Ÿè´£åœ¨å›¾çš„å„ä¸ªèŠ‚ç‚¹ä¹‹é—´ä¼ é€’ä¿¡æ¯**ã€‚è¿™ä¹Ÿå°±æ„å‘³ç€ï¼Œ`LangGraph`æ¡†æ¶çš„æ ¸å¿ƒåœ¨äº`State`çš„æœ‰æ•ˆä½¿ç”¨å’ŒæŒæ¡ã€‚åœ¨å¤æ‚çš„åº”ç”¨ä¸­ï¼Œ`State`ç»„ä»¶éœ€è¦å­˜å‚¨å’Œç®¡ç†çš„ä¿¡æ¯é‡ä¼šæ˜¾è‘—å¢åŠ ã€‚æ ¸å¿ƒåŠŸèƒ½å¦‚å·¥å…·ä½¿ç”¨ã€è®°å¿†èƒ½åŠ›å’Œäººæœºäº¤äº’ç­‰ï¼Œéƒ½ä¾èµ–`State`æ¥å®ç°å’Œç»´æŠ¤ã€‚æ‰€ä»¥ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å¯¹`LangGragh`æ¡†æ¶çš„æ¢ç´¢ï¼Œéƒ½å°†ç´§å¯†å›´ç»•`State`çš„å®ç°å’Œåº”ç”¨æœºåˆ¶å±•å¼€ï¼Œè¿™åŒ…æ‹¬`LangGraph`å†…ç½®å°è£…å¥½çš„å·¥å…·/æ–¹æ³•çš„ä½¿ç”¨ï¼Œä»¥åŠæˆ‘ä»¬è‡ªå®šä¹‰æ„å»ºåŠŸèƒ½æ—¶çš„å®ç°æ–¹æ³•ã€‚\n\n`operator.add`\n`AI Agent`\n`AI Agent`\n`LangGraph`\n`LangGraph`\n`LangGraph`\n`State`\n`State`\n`State`\n`LangGragh`\n`State`\n`LangGraph`\n\n![](https://i-blog.csdnimg.cn/direct/323b3953781743a8971e9cb44390bfb8.png)  \n`LangGraph`æ„å»ºçš„å›¾ä¸­çš„æ¯ä¸ªèŠ‚ç‚¹éƒ½å…·å¤‡è®¿é—®ã€è¯»å–å’Œå†™å…¥çŠ¶æ€çš„æƒé™ã€‚å½“æŸä¸€ä¸ªèŠ‚ç‚¹å»ä¿®æ”¹çŠ¶æ€æ—¶ï¼Œå®ƒä¼šå°†æ­¤ä¿¡æ¯å¹¿æ’­åˆ°å›¾ä¸­çš„æ‰€æœ‰å…¶ä»–èŠ‚ç‚¹ã€‚è¿™ç§å¹¿æ’­æœºåˆ¶å…è®¸å…¶ä»–èŠ‚ç‚¹å“åº”çŠ¶æ€çš„å˜åŒ–å¹¶ç›¸åº”åœ°è°ƒæ•´å…¶è¡Œä¸ºã€‚å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œä»åˆå§‹çŠ¶æ€ï¼ˆInitial Stateï¼‰å¼€å§‹ï¼Œå…¶ä¸­åŒ…å«äº†ä¸€æ¡æ¶ˆæ¯ { â€œxâ€: â€œ10â€ }ï¼Œéšç€æ¶ˆæ¯åœ¨èŠ‚ç‚¹é—´é€šè¿‡è¾¹ä¼ é€’ï¼Œæ¯ä¸ªèŠ‚ç‚¹æ ¹æ®å…¶é€»è¾‘å¯¹çŠ¶æ€è¿›è¡Œæ›´æ–°ã€‚Node 1 å’Œ Node 2 åˆ†åˆ«å¯¹çŠ¶æ€è¿›è¡Œäº†å¤„ç†å’Œå˜æ›´ï¼Œç»“æœæ˜¯åœ¨å›¾çš„æœ«ç«¯ï¼Œæˆ‘ä»¬å¾—åˆ°äº†ä¸€ä¸ªåŒ…å«ä¸‰æ¡æ¶ˆæ¯çš„æœ€ç»ˆçŠ¶æ€ { â€œxâ€: â€œ10â€ }, { â€œxâ€: â€œ11â€ }, { â€œyâ€: â€œ9â€ }ã€‚\\*\\*ä»å¼€å‘çš„è§’åº¦æ¥çœ‹ï¼Œ`State`å®é™…ä¸Šæ˜¯ä¸€ä¸ªå…±äº«çš„æ•°æ®ç»“æ„ã€‚å¦‚ä¸Šå›¾æ‰€ç¤ºï¼ŒçŠ¶æ€è¡¨ç°ä¸ºä¸€ä¸ªç®€å•çš„å­—å…¸ã€‚é€šè¿‡å¯¹è¿™ä¸ªå­—å…¸è¿›è¡Œè¯»å†™æ“ä½œï¼Œå¯ä»¥å®ç°è‡ªå·¦è€Œå³çš„æ•°æ®æµåŠ¨ï¼Œä»è€Œæ„å»ºä¸€ä¸ªå¯è¿è¡Œçš„å›¾ç»“æ„ã€‚é‚£ä¹ˆæ ¹æ®å‰é¢å­¦ä¹ çš„å†…å®¹ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨è¿™ä¸ªæµç¨‹æ¥å¤ç°å¹¶ç†è§£å›¾ä¸­çš„åŠ¨æ€æ•°æ®äº¤æ¢ï¼Œæ•´ä½“çš„è®¾è®¡å¦‚ä¸‹ï¼š  \n![](https://i-blog.csdnimg.cn/direct/b1915967b7c94b3eaefa582db0168e2f.png)\n\n![](https://i-blog.csdnimg.cn/direct/323b3953781743a8971e9cb44390bfb8.png)\n`LangGraph`\n`State`\n![](https://i-blog.csdnimg.cn/direct/b1915967b7c94b3eaefa582db0168e2f.png)\n\n### 4 å®æˆ˜æ­¥éª¤\n\n#### 4.1 ç¯å¢ƒå‡†å¤‡\n\nåœ¨å¼€å§‹ä»£ç å®ç°å‰ï¼Œç¡®ä¿å®‰è£…äº†æ ¸å¿ƒä¾èµ–ï¼š\n\n`pip install langgraph==1.0.5 typing-extensions==4.15.0`\n\n![](https://i-blog.csdnimg.cn/direct/2cee626b5bfb44018d727bf4e1467419.png)\n\n![](https://i-blog.csdnimg.cn/direct/2cee626b5bfb44018d727bf4e1467419.png)\n\n#### 4.2 ä»£ç å®ç°\n\næˆ‘ä»¬é€šè¿‡ä¸¤ä¸ªç¤ºä¾‹å¯¹æ¯”â€œå­—å…¸æ¨¡å¼â€ä¸â€œTypedDictæ¨¡å¼â€ã€‚ä»£ç ä¿å­˜åœ¨ `02-state-schema.py`ã€‚\n\n`02-state-schema.py`\n`import operator\nfrom typing import Annotated\nfrom langgraph.graph import StateGraph, START, END\nfrom typing_extensions import TypedDict\n# 1. ä½¿ç”¨å­—å…¸ç±»å‹å®šä¹‰çŠ¶æ€ (çµæ´»ä½†ç¼ºä¹çº¦æŸ)\ndef test_dict_state():\n# åˆå§‹åŒ–ä¸€ä¸ªä»¥å­—å…¸ä¸ºçŠ¶æ€æ¨¡å¼çš„å›¾\nbuilder = StateGraph(dict)\ndef addition(state):\n# èŠ‚ç‚¹ä»…è¿”å›éœ€è¦æ›´æ–°çš„éƒ¨åˆ†ï¼ŒLangGraph å†…éƒ¨ä¼šè‡ªåŠ¨åˆå¹¶\nreturn {"x": state["x"] + 1}\ndef subtraction(state):\n# æ–°å¢ä¸€ä¸ªé”® y\nreturn {"y": state["x"] - 2}\nbuilder.add_node("addition", addition)\nbuilder.add_node("subtraction", subtraction)\nbuilder.add_edge(START, "addition")\nbuilder.add_edge("addition", "subtraction")\nbuilder.add_edge("subtraction", END)\ngraph = builder.compile()\nresult = graph.invoke({"x": 10})\nprint(f"å­—å…¸çŠ¶æ€æ‰§è¡Œç»“æœ: {result}")\n# 2. ä½¿ç”¨ TypedDict å®šä¹‰çŠ¶æ€ (æ¨èï¼šå¼ºç±»å‹çº¦æŸ)\nclass State(TypedDict):\nx: int\ny: int\ndef test_typeddict_state():\nbuilder = StateGraph(State)\ndef addition(state: State):\n# å…³é”®é€»è¾‘ï¼šè¯»å–å½“å‰çŠ¶æ€ x å¹¶åŠ  1\nreturn {"x": state["x"] + 1}\ndef subtraction(state: State):\n# å…³é”®é€»è¾‘ï¼šåŸºäºæ›´æ–°åçš„ x è®¡ç®— y\nreturn {"y": state["x"] - 2}\nbuilder.add_node("addition", addition)\nbuilder.add_node("subtraction", subtraction)\nbuilder.add_edge(START, "addition")\nbuilder.add_edge("addition", "subtraction")\nbuilder.add_edge("subtraction", END)\ngraph = builder.compile()\nresult = graph.invoke({"x": 10})\nprint(f"TypedDictçŠ¶æ€æ‰§è¡Œç»“æœ: {result}")\n# 3. ä½¿ç”¨ Reducer å®ç°åˆ—è¡¨è¿½åŠ  (è¿›é˜¶ï¼šè§£å†³çŠ¶æ€è¦†ç›–é—®é¢˜)\nclass ReducerState(TypedDict):\n# ä½¿ç”¨ Annotated æ ‡æ³¨è¯¥å­—æ®µçš„æ›´æ–°æ–¹å¼ä¸º operator.add (è¿½åŠ è€Œéè¦†ç›–)\nmessages: Annotated[list[str], operator.add]\ndef test_reducer_state():\nbuilder = StateGraph(ReducerState)\ndef node_1(state: ReducerState):\n# èŠ‚ç‚¹ 1 è¿”å›ç¬¬ä¸€æ¡æ¶ˆæ¯\nreturn {"messages": ["è¿™æ˜¯æ¥è‡ªèŠ‚ç‚¹1çš„æ¶ˆæ¯"]}\ndef node_2(state: ReducerState):\n# èŠ‚ç‚¹ 2 è¿”å›ç¬¬äºŒæ¡æ¶ˆæ¯\nreturn {"messages": ["è¿™æ˜¯æ¥è‡ªèŠ‚ç‚¹2çš„æ¶ˆæ¯"]}\nbuilder.add_node("node_1", node_1)\nbuilder.add_node("node_2", node_2)\nbuilder.add_edge(START, "node_1")\nbuilder.add_edge("node_1", "node_2")\nbuilder.add_edge("node_2", END)\ngraph = builder.compile()\n# åˆå§‹çŠ¶æ€å¸¦æœ‰ä¸€æ¡æ¶ˆæ¯\nresult = graph.invoke({"messages": ["åˆå§‹æ¶ˆæ¯"]})\nprint(f"Reducer(è¿½åŠ æ¨¡å¼)æ‰§è¡Œç»“æœ: {result}")\nif __name__ == "__main__":\ntest_dict_state()\ntest_typeddict_state()\ntest_reducer_state()`\n\n#### 4.3 åŠŸèƒ½æµ‹è¯•\n\nè¿è¡Œè„šæœ¬ï¼Œè§‚å¯Ÿä¸¤ç§æ¨¡å¼ä¸‹çŠ¶æ€æ˜¯å¦‚ä½•åœ¨èŠ‚ç‚¹é—´ä¼ é€’å¹¶å®Œæˆè®¡ç®—çš„ã€‚\n\n![](https://i-blog.csdnimg.cn/direct/a2d34962ffad4d9aaa0fd6228ce69f64.png)\n\n![](https://i-blog.csdnimg.cn/direct/a2d34962ffad4d9aaa0fd6228ce69f64.png)\n\n### 5 æ ¸å¿ƒä»£ç è§£æ\n\n#### 5.1 StateGraph(dict) çµæ´»æ¨¡å¼\n\n`builder = StateGraph(dict)`\n\n#### 5.2 TypedDict å¼ºçº¦æŸæ¨¡å¼\n\n**åˆ’é‡ç‚¹**ï¼šè¿™æ˜¯å·¥ä¸šçº§å¼€å‘çš„æ ‡å‡†é€‰æ‹©ã€‚\n\n`class State(TypedDict):\nx: int\ny: int`\n`StateGraph(State)`\n\n#### 5.3 Annotated ä¸ Reducer æœºåˆ¶\n\n**åˆ’é‡ç‚¹**ï¼šè¿™æ˜¯å®ç°å¯¹è¯è®°å¿†ï¼ˆMemoryï¼‰çš„åº•å±‚æŠ€æœ¯ã€‚\n\n`messages: Annotated[list[str], operator.add]`\n`messages`\n`add`\n\n### 6 æ•ˆæœéªŒè¯\n\né€šè¿‡ `graph.invoke()` ä¼ é€’åˆå§‹çŠ¶æ€åï¼Œç³»ç»Ÿä¼šé¡ºåºæ‰§è¡Œå„èŠ‚ç‚¹ï¼Œå¹¶è¿”å›åˆå¹¶åçš„æœ€ç»ˆçŠ¶æ€å­—å…¸ã€‚\n\n`graph.invoke()`\n\n`ã€å›¾ç‰‡å ä½ç¬¦ï¼šæ ¸å¿ƒåŠŸèƒ½è¿è¡Œæ•ˆæœæˆªå›¾ - ç»ˆç«¯æ˜¾ç¤º x ä¸ y çš„æœ€ç»ˆåˆå¹¶ç»“æœã€‘`\n\n`ã€å›¾ç‰‡å ä½ç¬¦ï¼šæ ¸å¿ƒåŠŸèƒ½è¿è¡Œæ•ˆæœæˆªå›¾ - ç»ˆç«¯æ˜¾ç¤º x ä¸ y çš„æœ€ç»ˆåˆå¹¶ç»“æœã€‘`\n\n### 7 è¸©å‘è®°å½•\n\n#### 7.1 KeyDoesNotExist é”™è¯¯\n\n`KeyError: \'x\'`\n`state["x"]`\n`invoke`\n`TypedDict`\n`total=False`\n\n#### 7.2 èŠ‚ç‚¹è¿”å›å€¼ç±»å‹ä¸åŒ¹é…\n\n`int`\n`str`\n`TypedDict`\n`Pydantic`\n\n#### 7.3 çŠ¶æ€è¦†ç›–é—®é¢˜\n\n`Annotated`\n`operator.add`\n\n### 8 æ€»ç»“ä¸æ‰©å±•\n\næŒæ¡ **State çš„å®šä¹‰æ¨¡å¼** æ˜¯å¼€å¯ LangGraph é«˜é˜¶å¼€å‘çš„å¤§é—¨ã€‚é€šè¿‡ `TypedDict` æˆ‘ä»¬å»ºç«‹äº†ä¸€å¥—å¯é¢„æµ‹çš„æ•°æ®å¥‘çº¦ã€‚**åˆ’é‡ç‚¹**ï¼šçŠ¶æ€åœ¨ä»»ä½•ç»™å®šæ—¶é—´åªåŒ…å«æ¥è‡ªä¸€ä¸ªèŠ‚ç‚¹çš„æ›´æ–°ä¿¡æ¯ï¼Œä½† LangGraph å†…éƒ¨çš„åˆå¹¶æœºåˆ¶è®©å®ƒçœ‹èµ·æ¥åƒä¸€ä¸ªå…¨å±€å…±äº«æ± ã€‚ä¸‹ä¸€æ­¥ï¼Œæˆ‘ä»¬å°†ç ”ç©¶å¦‚ä½•é€šè¿‡ `Annotated` ä¸ `add_messages` å®ç°å¯¹è¯å†å²çš„è‡ªåŠ¨è¿½æº¯ã€‚\n\n`TypedDict`\n`Annotated`\n`add_messages`\n\næ¬¢è¿è¯„è®ºåŒºç•™è¨€è®¨è®ºæ ¸å¿ƒä¸»é¢˜ç›¸å…³çš„é—®é¢˜~\n\n![](https://img2024.cnblogs.com/blog/35695/202512/35695-20251205171919392-144975027.jpg)\n\n![](//assets.cnblogs.com/images/ghs.png)æµ™å…¬ç½‘å®‰å¤‡ 33010602011771å·', 'doi': '', 'published_date': None, 'pdf_url': '', 'url': 'https://www.cnblogs.com/gccbuaa/p/19616522', 'source': 'tavily', 'categories': ['web_search'], 'keywords': [], 'citations': 0, 'references': [], 'extra': {'score': 0.99996674, 'saved_path': '/home/qinshan/widthresearch/data/downloads/tavily_åŸºäºLangGrap.md'}}
2026-02-21 20:11:33,013 - __main__ - INFO - call_tool: name=exa_context_download, args={'papers': [{'paper_id': '', 'title': "LangGraphæœ€ä½³å®è·µï¼šæ„å»ºå¯é æœ‰çŠ¶æ€AIä»£ç†çš„å…³é”®ç­–ç•¥ | Ningto's Blog", 'authors': [], 'abstract': 'LangGraphæœ€ä½³å®è·µï¼šæ„å»ºå¯é æœ‰çŠ¶æ€AIä»£ç†çš„å…³é”®ç­–ç•¥ | Ningto\'s Blog\n\nç›®å½•\n\n- å‚è€ƒèµ„æ–™\n- å››ã€æ€»ç»“\n- ä¸‰ã€å®æˆ˜æ¡ˆä¾‹ï¼šæ„å»ºæœ‰çŠ¶æ€å¯¹è¯ä»£ç†\n- 6. ä¼˜åŒ–æ¨¡å‹ä¸å·¥å…·è°ƒç”¨\n- 5. ç”¨LangSmithå®ç°å¯è§†åŒ–è°ƒè¯•\n- 4. ä¸¥æ ¼æ§åˆ¶äººæœºåä½œï¼ˆHuman-in-the-Loopï¼‰\n- 3. åˆ©ç”¨å­å›¾ï¼ˆSubgraphï¼‰å®ç°æ¨¡å—åŒ–\n- 2. å¼ºåˆ¶ä½¿ç”¨æ£€æŸ¥ç‚¹ï¼ˆCheckpointï¼‰\n- 1. è®¾è®¡æ¸…æ™°çš„çŠ¶æ€ç»“æ„ï¼ˆState Designï¼‰\n- äºŒã€æ ¸å¿ƒæœ€ä½³å®è·µ\n- ä¸€ã€å‰è¨€\n- LangGraphæœ€ä½³å®è·µï¼šæ„å»ºå¯é æœ‰çŠ¶æ€AIä»£ç†çš„å…³é”®ç­–ç•¥\n\n# LangGraphæœ€ä½³å®è·µï¼šæ„å»ºå¯é æœ‰çŠ¶æ€AIä»£ç†çš„å…³é”®ç­–ç•¥\n\n## ä¸€ã€å‰è¨€\n\nLangGraphä½œä¸ºä¸“æ³¨äºé•¿æœŸè¿è¡Œã€æœ‰çŠ¶æ€AIä»£ç†çš„ä½çº§åˆ«ç¼–æ’æ¡†æ¶ï¼Œå…¶æ ¸å¿ƒä»·å€¼åœ¨äºè§£å†³ä¼ ç»Ÿæ— çŠ¶æ€ä»£ç†çš„ç—›ç‚¹ï¼ˆå¦‚çŠ¶æ€ä¸¢å¤±ã€è°ƒè¯•å›°éš¾ã€æ— æ³•æŒä¹…åŒ–ç­‰ï¼‰ã€‚è¦å……åˆ†å‘æŒ¥LangGraphçš„ä¼˜åŠ¿ï¼Œéœ€éµå¾ªä¸€ç³»åˆ—æœ€ä½³å®è·µï¼Œæ¶µç›–çŠ¶æ€ç®¡ç†ã€æµç¨‹è®¾è®¡ã€è°ƒè¯•ä¼˜åŒ–ç­‰å¤šä¸ªç»´åº¦ã€‚æœ¬æ–‡ç»“åˆå®˜æ–¹æ–‡æ¡£åŠå®æˆ˜ç»éªŒï¼Œæ€»ç»“äº†LangGraphå¼€å‘çš„å…³é”®ç­–ç•¥ã€‚\n\n## äºŒã€æ ¸å¿ƒæœ€ä½³å®è·µ\n\n### 1. è®¾è®¡æ¸…æ™°çš„çŠ¶æ€ç»“æ„ï¼ˆState Designï¼‰\n\nçŠ¶æ€æ˜¯LangGraphçš„æ ¸å¿ƒï¼Œéœ€ç»“æ„åŒ–ã€å¯æ‰©å±•ï¼Œé¿å…å†—ä½™æˆ–æ¨¡ç³Šã€‚å»ºè®®å°†çŠ¶æ€åˆ†ä¸ºä»¥ä¸‹æ¨¡å—ï¼š\n\n- æ§åˆ¶ä¿¡å·ï¼ˆControl Signalsï¼‰ï¼šç”¨äºæµç¨‹æ§åˆ¶çš„ä¸´æ—¶çŠ¶æ€ï¼ˆå¦‚`{"need_human_approval":true}`ï¼‰ï¼ŒæŒ‡ç¤ºä»£ç†æ˜¯å¦éœ€è¦æš‚åœç­‰å¾…äººç±»ä»‹å…¥ã€‚\n- é•¿æœŸè®°å¿†ï¼ˆLong-term Memoryï¼‰ï¼šä¿å­˜è·¨ä¼šè¯çš„ç”¨æˆ·åå¥½ã€ä»»åŠ¡è¿›åº¦ç­‰ï¼ˆå¦‚`{"user_preference":"å–œæ¬¢ç®€æ´å›ç­”","task_progress":"å®Œæˆæ•°æ®æ”¶é›†"}`ï¼‰ï¼Œéœ€å®šæœŸæŒä¹…åŒ–ï¼ˆå¦‚å­˜å…¥æ•°æ®åº“ï¼‰ã€‚\n- å·¥å…·è°ƒç”¨è®°å½•ï¼ˆTool Callsï¼‰ï¼šå­˜å‚¨ä»£ç†è°ƒç”¨å·¥å…·çš„è¾“å…¥/è¾“å‡ºï¼ˆå¦‚`[{"tool":"get_weather","input":"æ—§é‡‘å±±","output":"æ™´å¤©"}]`ï¼‰ï¼Œä¾¿äºå›æº¯å·¥å…·ä½¿ç”¨æƒ…å†µã€‚\n- å¯¹è¯ä¸Šä¸‹æ–‡ï¼ˆMessagesï¼‰ï¼šä¿å­˜ç”¨æˆ·ä¸ä»£ç†çš„äº¤äº’å†å²ï¼ˆå¦‚`[{"role":"user","content":"..."}]`ï¼‰ï¼Œç”¨äºæ¨¡å‹ç†è§£ä¸Šä¸‹æ–‡ã€‚\n\nç¤ºä¾‹ï¼š\n\n```\nfrom langgraph.schema import StateGraph\nfrom typing import TypedDict, List\nfrom langgraph.schema import Message\n\n# å®šä¹‰å¼ºç±»å‹çŠ¶æ€ç»“æ„\nclass AgentState(TypedDict):\n    messages: List[Message]          # å¯¹è¯å†å²\n    tool_calls: List[dict]           # å·¥å…·è°ƒç”¨è®°å½•\n    long_term_memory: dict           # é•¿æœŸè®°å¿†\n    need_human_approval: bool        # äººæœºåä½œä¿¡å·\n\n```\n\n### 2. å¼ºåˆ¶ä½¿ç”¨æ£€æŸ¥ç‚¹ï¼ˆCheckpointï¼‰\n\næ£€æŸ¥ç‚¹æ˜¯LangGraphæŒä¹…åŒ–æ‰§è¡Œçš„å…³é”®ï¼Œéœ€åœ¨å…³é”®èŠ‚ç‚¹ï¼ˆå¦‚å·¥å…·è°ƒç”¨å‰ã€çŠ¶æ€å˜æ›´åï¼‰ä¿å­˜çŠ¶æ€ï¼Œç¡®ä¿ä»»åŠ¡ä¸­æ–­åå¯æ¢å¤ã€‚\n\næ¨èåœºæ™¯ï¼š\n\n- é«˜é£é™©æ“ä½œï¼ˆå¦‚èµ„é‡‘è½¬è´¦ã€å†…å®¹ç”Ÿæˆï¼‰ï¼šæ“ä½œå‰ä¿å­˜æ£€æŸ¥ç‚¹ï¼Œé¿å…é”™è¯¯æ— æ³•å›æ»šï¼›\n- é•¿æœŸä»»åŠ¡ï¼ˆå¦‚æ•°æ®çˆ¬å–ã€å¤šè½®å¯¹è¯ï¼‰ï¼šæ¯å®Œæˆä¸€ä¸ªå­ä»»åŠ¡ä¿å­˜ä¸€æ¬¡æ£€æŸ¥ç‚¹ï¼›\n\nç¤ºä¾‹ï¼š\n\n```\nfrom langgraph.checkpoint import LocalCheckpointSaver\n\n# åˆå§‹åŒ–æœ¬åœ°æ£€æŸ¥ç‚¹ä¿å­˜å™¨\ncheckpoint_saver = LocalCheckpointSaver(directory="./langgraph_checkpoints")\n\n# åˆ›å»ºå¸¦æ£€æŸ¥ç‚¹çš„çŠ¶æ€å›¾\nstate_graph = StateGraph(AgentState).with_checkpoint(checkpoint_saver)\n\n```\n\n### 3. åˆ©ç”¨å­å›¾ï¼ˆSubgraphï¼‰å®ç°æ¨¡å—åŒ–\n\nå­å›¾æ˜¯LangGraphä»£ç å¤ç”¨çš„æ ¸å¿ƒæœºåˆ¶ï¼Œå°†å¤æ‚æµç¨‹æ‹†åˆ†ä¸ºç‹¬ç«‹å­æ¨¡å—ï¼ˆå¦‚â€œç”¨æˆ·æ„å›¾è¯†åˆ«â€â€œå·¥å…·è°ƒç”¨â€â€œç»“æœæ•´ç†â€ï¼‰ï¼Œé™ä½ç»´æŠ¤æˆæœ¬ã€‚\n\næ¨èåœºæ™¯ï¼š\n\n- å¯é…ç½®æµç¨‹ï¼ˆå¦‚ä¸åŒç”¨æˆ·è§’è‰²å¯¹åº”ä¸åŒå­å›¾ï¼‰ï¼›\n- é‡å¤æµç¨‹ï¼ˆå¦‚â€œè·å–ç”¨æˆ·ä¿¡æ¯â†’è°ƒç”¨å·¥å…·â†’ç”Ÿæˆå›ç­”â€ï¼‰ï¼›\n\nç¤ºä¾‹ï¼š\n\n```\nfrom langgraph import Subgraph\n\n# å®šä¹‰â€œå·¥å…·è°ƒç”¨â€å­å›¾\nclass ToolSubgraph(Subgraph):\n    def __init__(self):\n        super().__init__()\n        self.add_node("call_tool", self._call_tool)\n        self.add_node("parse_result", self._parse_result)\n        self.add_edge("call_tool", "parse_result")\n\n    def _call_tool(self, state: AgentState) -> AgentState:\n        # å·¥å…·è°ƒç”¨é€»è¾‘\n        return state\n\n    def _parse_result(self, state: AgentState) -> AgentState:\n        # ç»“æœè§£æé€»è¾‘\n        return state\n\n# å°†å­å›¾åµŒå…¥ä¸»å›¾\nmain_graph = StateGraph(AgentState)\nmain_graph.add_subgraph(ToolSubgraph(), name="tool_flow")\n\n```\n\n### 4. ä¸¥æ ¼æ§åˆ¶äººæœºåä½œï¼ˆHuman-in-the-Loopï¼‰\n\nLangGraphæ”¯æŒäººç±»åœ¨ä»»æ„èŠ‚ç‚¹ä»‹å…¥ï¼Œéœ€åˆç†è®¾è®¡ä»‹å…¥æ—¶æœºï¼Œé¿å…è¿‡åº¦ä¾èµ–äººç±»æˆ–å¿½ç•¥é£é™©ã€‚\n\næ¨èåœºæ™¯ï¼š\n\n- æ¨¡ç³ŠæŸ¥è¯¢ï¼ˆå¦‚ç”¨æˆ·æ„å›¾ä¸æ˜ç¡®ï¼‰ï¼šè¯·æ±‚äººç±»è¡¥å……ä¿¡æ¯ï¼›\n- é«˜é£é™©å†³ç­–ï¼ˆå¦‚å†…å®¹å®¡æ ¸ã€èµ„é‡‘æ“ä½œï¼‰ï¼šåœ¨å†³ç­–å‰æš‚åœï¼Œç­‰å¾…äººç±»ç¡®è®¤ï¼›\n\nç¤ºä¾‹ï¼š\n\n```\nfrom langgraph import HumanNode\n\n# å®šä¹‰äººç±»å®¡æ‰¹èŠ‚ç‚¹\nhuman_approval_node = HumanNode(\n    input_schema={"approval": bool},  # äººç±»è¾“å…¥ schemaï¼ˆæ˜¯å¦æ‰¹å‡†ï¼‰\n    output_schema={"approved": bool} # è¾“å‡º schemaï¼ˆå®¡æ‰¹ç»“æœï¼‰\n)\n\n# åœ¨æµç¨‹ä¸­æ’å…¥äººç±»èŠ‚ç‚¹\nstate_graph.add_edge("decide", human_approval_node)\nstate_graph.add_edge(human_approval_node, "execute_action")\n\n```\n\n### 5. ç”¨LangSmithå®ç°å¯è§†åŒ–è°ƒè¯•\n\nLangSmithæ˜¯LangGraphçš„è°ƒè¯•åˆ©å™¨ï¼Œéœ€å…¨ç¨‹ä½¿ç”¨å…¶è®°å½•æ‰§è¡Œè½¨è¿¹ã€çŠ¶æ€å˜åŒ–ã€å·¥å…·è°ƒç”¨ç­‰ä¿¡æ¯ï¼Œå¿«é€Ÿå®šä½é—®é¢˜ã€‚\n\nå…³é”®åŠŸèƒ½ï¼š\n\n- é”™è¯¯å®šä½ï¼šæ ‡è®°æ‰§è¡Œä¸­çš„é”™è¯¯ï¼ˆå¦‚å·¥å…·è°ƒç”¨å¤±è´¥ã€çŠ¶æ€å¼‚å¸¸ï¼‰ï¼›\n- æ€§èƒ½åˆ†æï¼šç»Ÿè®¡æ¯ä¸€æ­¥çš„æ‰§è¡Œæ—¶é—´ï¼ˆå¦‚æ¨¡å‹è°ƒç”¨è€—æ—¶ã€å·¥å…·è°ƒç”¨è€—æ—¶ï¼‰ï¼›\n- è½¨è¿¹å›æ”¾ï¼šæŸ¥çœ‹ä»£ç†æ¯ä¸€æ­¥çš„çŠ¶æ€å˜åŒ–ï¼ˆå¦‚`messages`æ–°å¢ã€`tool_calls`æ›´æ–°ï¼‰ï¼›\n\nç¤ºä¾‹ï¼š\n\n```\nfrom langsmith import Client\n\n# åˆå§‹åŒ–LangSmithå®¢æˆ·ç«¯ï¼ˆéœ€è®¾ç½®ç¯å¢ƒå˜é‡LANGSMITH_API_KEYï¼‰\nlangsmith_client = Client()\n\n# åˆ›å»ºä»£ç†æ—¶å…³è”LangSmith\nagent = create_react_agent(\n    model="anthropic:claude-3-7-sonnet-latest",\n    tools=[get_weather],\n    prompt="ä½ æ˜¯ä¸€ä¸ªhelpfulçš„åŠ©ç†",\n    langsmith_client=langsmith_client\n)\n\n```\n\n### 6. ä¼˜åŒ–æ¨¡å‹ä¸å·¥å…·è°ƒç”¨\n\nå·¥å…·è°ƒç”¨ç­–ç•¥ï¼š\n\n- ç¼“å­˜ç»“æœï¼šå¯¹é¢‘ç¹è°ƒç”¨çš„å·¥å…·ï¼ˆå¦‚å›ºå®šæ•°æ®æŸ¥è¯¢ï¼‰ç¼“å­˜ç»“æœï¼Œæé«˜æ•ˆç‡ï¼›\n- æ‰¹é‡è°ƒç”¨ï¼šå°†å¤šä¸ªå·¥å…·è°ƒç”¨åˆå¹¶ä¸ºä¸€æ¬¡ï¼ˆå¦‚åŒæ—¶è·å–å¤©æ°”å’Œæ–°é—»ï¼‰ï¼Œå‡å°‘æ¨¡å‹è°ƒç”¨æ¬¡æ•°ï¼›\n\n## ä¸‰ã€å®æˆ˜æ¡ˆä¾‹ï¼šæ„å»ºæœ‰çŠ¶æ€å¯¹è¯ä»£ç†\n\nä»¥ä¸‹æ˜¯ä¸€ä¸ªç»“åˆä¸Šè¿°æœ€ä½³å®è·µçš„å¯¹è¯ä»£ç†ç¤ºä¾‹ï¼š\n\n```\nfrom langgraph import StateGraph, HumanNode\nfrom langgraph.schema import Message\nfrom langgraph.checkpoint import LocalCheckpointSaver\nfrom langsmith import Client\nfrom typing import TypedDict, List\n\n# å®šä¹‰çŠ¶æ€ç»“æ„\nclass ConversationState(TypedDict):\n    messages: List[Message]\n    tool_calls: List[dict]\n    user_preference: dict\n    need_human_approval: bool\n\n# åˆå§‹åŒ–ä¾èµ–\ncheckpoint_saver = LocalCheckpointSaver(directory="./checkpoints")\nlangsmith_client = Client()\n\n# å®šä¹‰èŠ‚ç‚¹å‡½æ•°\ndef decide_next_step(state: ConversationState) -> str:\n    """å†³å®šä¸‹ä¸€æ­¥æ“ä½œ"""\n    last_msg = state["messages"][-1]\n    if "å¤©æ°”" in last_msg.content:\n        return "call_weather_tool"\n    elif "æ•æ„Ÿå†…å®¹" in last_msg.content:\n        state["need_human_approval"] = True\n        return "human_approval"\n    else:\n        return "direct_answer"\n\ndef call_weather_tool(state: ConversationState) -> ConversationState:\n    """è°ƒç”¨å¤©æ°”å·¥å…·"""\n    city = last_msg.content.split("å¤©æ°”")[0].strip()\n    weather = get_weather(city)  # å‡è®¾get_weatheræ˜¯å·¥å…·å‡½æ•°\n    state["tool_calls"].append({"tool": "get_weather", "input": city, "output": weather})\n    state["messages"].append(Message(role="assistant", content=f"å¤©æ°”ç»“æœï¼š{weather}"))\n    return state\n\n# åˆ›å»ºçŠ¶æ€å›¾\ngraph = StateGraph(ConversationState)\n\n# æ·»åŠ èŠ‚ç‚¹\ngraph.add_node("decide", decide_next_step)\ngraph.add_node("call_weather_tool", call_weather_tool)\ngraph.add_node("human_approval", HumanNode(input_schema={"approval": bool}))\ngraph.add_node("direct_answer", lambda state: state)\n\n# æ·»åŠ è¾¹\ngraph.add_edge("decide", "call_weather_tool")\ngraph.add_edge("decide", "human_approval")\ngraph.add_edge("decide", "direct_answer")\ngraph.add_edge("human_approval", "direct_answer")\ngraph.add_edge("call_weather_tool", "direct_answer")\n\n# è®¾ç½®å…¥å£èŠ‚ç‚¹\ngraph.set_entry_point("decide")\n\n# ç¼–è¯‘å›¾ï¼ˆå¸¦æ£€æŸ¥ç‚¹ä¸LangSmithï¼‰\ncompiled_graph = graph.compile(\n    checkpoint_saver=checkpoint_saver,\n    langsmith_client=langsmith_client\n)\n\n# è¿è¡Œä»£ç†\ninitial_state = {\n    "messages": [Message(role="user", content="åŒ—äº¬çš„å¤©æ°”æ€ä¹ˆæ ·ï¼Ÿ")],\n    "tool_calls": [],\n    "user_preference": {},\n    "need_human_approval": False\n}\nresult = compiled_graph.invoke(initial_state)\n\nprint(result["messages"][-1].content)\n\n```\n\n## å››ã€æ€»ç»“\n\nLangGraphçš„æœ€ä½³å®è·µå›´ç»•â€œæœ‰çŠ¶æ€ã€å¯æŒä¹…åŒ–ã€å¯è°ƒè¯•â€å±•å¼€ï¼Œæ ¸å¿ƒæ˜¯è®¾è®¡æ¸…æ™°çš„çŠ¶æ€ç»“æ„ã€å¼ºåˆ¶ä½¿ç”¨æ£€æŸ¥ç‚¹ã€åˆ©ç”¨å­å›¾æ¨¡å—åŒ–ã€åˆç†å¼•å…¥äººæœºåä½œåŠç”¨LangSmithè°ƒè¯•ã€‚è¿™äº›ç­–ç•¥èƒ½å¸®åŠ©å¼€å‘è€…æ„å»ºå¯é ã€å¯æ‰©å±•çš„AIä»£ç†ï¼Œé€‚ç”¨äºé•¿æœŸå¯¹è¯ã€æ•°æ®å¤„ç†ã€æ™ºèƒ½åŠ©æ‰‹ç­‰åœºæ™¯ã€‚\n\n## å‚è€ƒèµ„æ–™\n\n- LangGraphå®æˆ˜ç¤ºä¾‹ï¼š [https://github.com/langchain-ai/langgraph/tree/main/examples] \n- LangSmithè°ƒè¯•æŒ‡å—ï¼š [https://docs.smith.langchain.com/] \n- LangGraphå®˜æ–¹æ–‡æ¡£ï¼š [https://langgraph.ai/docs/] \n- é”™è¯¯å¤„ç†ï¼šå·¥å…·è°ƒç”¨å¤±è´¥æ—¶ï¼ˆå¦‚APIè¶…æ—¶ï¼‰ï¼Œéœ€é‡è¯•æˆ– fallback åˆ°é»˜è®¤å€¼ï¼Œå¹¶è®°å½•é”™è¯¯ä¿¡æ¯ï¼ˆå¦‚`{"tool_error":"API timeout","timestamp":"2024-05-01 10:00:00"}`ï¼‰ã€‚\n\n## ä¸Šä¸€ç¯‡æ–‡ç« \n\n[Docker & Docker Composeéƒ¨ç½²ä¸æ’æŸ¥å¸¸ç”¨å‘½ä»¤æ€»ç»“] \n\n## ä¸‹ä¸€ç¯‡æ–‡ç« \n\n[LangGraphå…¥é—¨æŒ‡å—ï¼šæ„å»ºé•¿æœŸè¿è¡Œçš„æœ‰çŠ¶æ€AIä»£ç†] \n\n[â† è¿”å›åšå®¢åˆ—è¡¨]', 'doi': '', 'published_date': '2025-09-10T00:00:00+00:00', 'pdf_url': '', 'url': 'https://www.ningto.com/blog/2025/langGraph-best-practices-strategies-for-reliable-stateful-ai-agents-2025-09-10', 'source': 'exa_context', 'categories': [], 'keywords': [], 'citations': 0, 'references': [], 'extra': {}}], 'save_path': '/home/qinshan/widthresearch/data/downloads'}
2026-02-21 20:11:33,013 - __main__ - INFO - handle_download: searcher=ExaSearcherContext, input_papers=1, save_path=/home/qinshan/widthresearch/data/downloads
2026-02-21 20:11:33,014 - __main__ - INFO - handle_download: downloaded=1
2026-02-21 20:11:33,014 - __main__ - INFO - call_tool payload: source_tool=exa_context_download, result_type=papers, count=1
2026-02-21 20:11:33,014 - __main__ - INFO - call_tool: name=exa_context_download, result_type=papers, count=1
2026-02-21 20:11:33,014 - __main__ - DEBUG - call_tool payload sample: {'paper_id': '', 'title': "LangGraphæœ€ä½³å®è·µï¼šæ„å»ºå¯é æœ‰çŠ¶æ€AIä»£ç†çš„å…³é”®ç­–ç•¥ | Ningto's Blog", 'authors': [], 'abstract': 'LangGraphæœ€ä½³å®è·µï¼šæ„å»ºå¯é æœ‰çŠ¶æ€AIä»£ç†çš„å…³é”®ç­–ç•¥ | Ningto\'s Blog\n\nç›®å½•\n\n- å‚è€ƒèµ„æ–™\n- å››ã€æ€»ç»“\n- ä¸‰ã€å®æˆ˜æ¡ˆä¾‹ï¼šæ„å»ºæœ‰çŠ¶æ€å¯¹è¯ä»£ç†\n- 6. ä¼˜åŒ–æ¨¡å‹ä¸å·¥å…·è°ƒç”¨\n- 5. ç”¨LangSmithå®ç°å¯è§†åŒ–è°ƒè¯•\n- 4. ä¸¥æ ¼æ§åˆ¶äººæœºåä½œï¼ˆHuman-in-the-Loopï¼‰\n- 3. åˆ©ç”¨å­å›¾ï¼ˆSubgraphï¼‰å®ç°æ¨¡å—åŒ–\n- 2. å¼ºåˆ¶ä½¿ç”¨æ£€æŸ¥ç‚¹ï¼ˆCheckpointï¼‰\n- 1. è®¾è®¡æ¸…æ™°çš„çŠ¶æ€ç»“æ„ï¼ˆState Designï¼‰\n- äºŒã€æ ¸å¿ƒæœ€ä½³å®è·µ\n- ä¸€ã€å‰è¨€\n- LangGraphæœ€ä½³å®è·µï¼šæ„å»ºå¯é æœ‰çŠ¶æ€AIä»£ç†çš„å…³é”®ç­–ç•¥\n\n# LangGraphæœ€ä½³å®è·µï¼šæ„å»ºå¯é æœ‰çŠ¶æ€AIä»£ç†çš„å…³é”®ç­–ç•¥\n\n## ä¸€ã€å‰è¨€\n\nLangGraphä½œä¸ºä¸“æ³¨äºé•¿æœŸè¿è¡Œã€æœ‰çŠ¶æ€AIä»£ç†çš„ä½çº§åˆ«ç¼–æ’æ¡†æ¶ï¼Œå…¶æ ¸å¿ƒä»·å€¼åœ¨äºè§£å†³ä¼ ç»Ÿæ— çŠ¶æ€ä»£ç†çš„ç—›ç‚¹ï¼ˆå¦‚çŠ¶æ€ä¸¢å¤±ã€è°ƒè¯•å›°éš¾ã€æ— æ³•æŒä¹…åŒ–ç­‰ï¼‰ã€‚è¦å……åˆ†å‘æŒ¥LangGraphçš„ä¼˜åŠ¿ï¼Œéœ€éµå¾ªä¸€ç³»åˆ—æœ€ä½³å®è·µï¼Œæ¶µç›–çŠ¶æ€ç®¡ç†ã€æµç¨‹è®¾è®¡ã€è°ƒè¯•ä¼˜åŒ–ç­‰å¤šä¸ªç»´åº¦ã€‚æœ¬æ–‡ç»“åˆå®˜æ–¹æ–‡æ¡£åŠå®æˆ˜ç»éªŒï¼Œæ€»ç»“äº†LangGraphå¼€å‘çš„å…³é”®ç­–ç•¥ã€‚\n\n## äºŒã€æ ¸å¿ƒæœ€ä½³å®è·µ\n\n### 1. è®¾è®¡æ¸…æ™°çš„çŠ¶æ€ç»“æ„ï¼ˆState Designï¼‰\n\nçŠ¶æ€æ˜¯LangGraphçš„æ ¸å¿ƒï¼Œéœ€ç»“æ„åŒ–ã€å¯æ‰©å±•ï¼Œé¿å…å†—ä½™æˆ–æ¨¡ç³Šã€‚å»ºè®®å°†çŠ¶æ€åˆ†ä¸ºä»¥ä¸‹æ¨¡å—ï¼š\n\n- æ§åˆ¶ä¿¡å·ï¼ˆControl Signalsï¼‰ï¼šç”¨äºæµç¨‹æ§åˆ¶çš„ä¸´æ—¶çŠ¶æ€ï¼ˆå¦‚`{"need_human_approval":true}`ï¼‰ï¼ŒæŒ‡ç¤ºä»£ç†æ˜¯å¦éœ€è¦æš‚åœç­‰å¾…äººç±»ä»‹å…¥ã€‚\n- é•¿æœŸè®°å¿†ï¼ˆLong-term Memoryï¼‰ï¼šä¿å­˜è·¨ä¼šè¯çš„ç”¨æˆ·åå¥½ã€ä»»åŠ¡è¿›åº¦ç­‰ï¼ˆå¦‚`{"user_preference":"å–œæ¬¢ç®€æ´å›ç­”","task_progress":"å®Œæˆæ•°æ®æ”¶é›†"}`ï¼‰ï¼Œéœ€å®šæœŸæŒä¹…åŒ–ï¼ˆå¦‚å­˜å…¥æ•°æ®åº“ï¼‰ã€‚\n- å·¥å…·è°ƒç”¨è®°å½•ï¼ˆTool Callsï¼‰ï¼šå­˜å‚¨ä»£ç†è°ƒç”¨å·¥å…·çš„è¾“å…¥/è¾“å‡ºï¼ˆå¦‚`[{"tool":"get_weather","input":"æ—§é‡‘å±±","output":"æ™´å¤©"}]`ï¼‰ï¼Œä¾¿äºå›æº¯å·¥å…·ä½¿ç”¨æƒ…å†µã€‚\n- å¯¹è¯ä¸Šä¸‹æ–‡ï¼ˆMessagesï¼‰ï¼šä¿å­˜ç”¨æˆ·ä¸ä»£ç†çš„äº¤äº’å†å²ï¼ˆå¦‚`[{"role":"user","content":"..."}]`ï¼‰ï¼Œç”¨äºæ¨¡å‹ç†è§£ä¸Šä¸‹æ–‡ã€‚\n\nç¤ºä¾‹ï¼š\n\n```\nfrom langgraph.schema import StateGraph\nfrom typing import TypedDict, List\nfrom langgraph.schema import Message\n\n# å®šä¹‰å¼ºç±»å‹çŠ¶æ€ç»“æ„\nclass AgentState(TypedDict):\n    messages: List[Message]          # å¯¹è¯å†å²\n    tool_calls: List[dict]           # å·¥å…·è°ƒç”¨è®°å½•\n    long_term_memory: dict           # é•¿æœŸè®°å¿†\n    need_human_approval: bool        # äººæœºåä½œä¿¡å·\n\n```\n\n### 2. å¼ºåˆ¶ä½¿ç”¨æ£€æŸ¥ç‚¹ï¼ˆCheckpointï¼‰\n\næ£€æŸ¥ç‚¹æ˜¯LangGraphæŒä¹…åŒ–æ‰§è¡Œçš„å…³é”®ï¼Œéœ€åœ¨å…³é”®èŠ‚ç‚¹ï¼ˆå¦‚å·¥å…·è°ƒç”¨å‰ã€çŠ¶æ€å˜æ›´åï¼‰ä¿å­˜çŠ¶æ€ï¼Œç¡®ä¿ä»»åŠ¡ä¸­æ–­åå¯æ¢å¤ã€‚\n\næ¨èåœºæ™¯ï¼š\n\n- é«˜é£é™©æ“ä½œï¼ˆå¦‚èµ„é‡‘è½¬è´¦ã€å†…å®¹ç”Ÿæˆï¼‰ï¼šæ“ä½œå‰ä¿å­˜æ£€æŸ¥ç‚¹ï¼Œé¿å…é”™è¯¯æ— æ³•å›æ»šï¼›\n- é•¿æœŸä»»åŠ¡ï¼ˆå¦‚æ•°æ®çˆ¬å–ã€å¤šè½®å¯¹è¯ï¼‰ï¼šæ¯å®Œæˆä¸€ä¸ªå­ä»»åŠ¡ä¿å­˜ä¸€æ¬¡æ£€æŸ¥ç‚¹ï¼›\n\nç¤ºä¾‹ï¼š\n\n```\nfrom langgraph.checkpoint import LocalCheckpointSaver\n\n# åˆå§‹åŒ–æœ¬åœ°æ£€æŸ¥ç‚¹ä¿å­˜å™¨\ncheckpoint_saver = LocalCheckpointSaver(directory="./langgraph_checkpoints")\n\n# åˆ›å»ºå¸¦æ£€æŸ¥ç‚¹çš„çŠ¶æ€å›¾\nstate_graph = StateGraph(AgentState).with_checkpoint(checkpoint_saver)\n\n```\n\n### 3. åˆ©ç”¨å­å›¾ï¼ˆSubgraphï¼‰å®ç°æ¨¡å—åŒ–\n\nå­å›¾æ˜¯LangGraphä»£ç å¤ç”¨çš„æ ¸å¿ƒæœºåˆ¶ï¼Œå°†å¤æ‚æµç¨‹æ‹†åˆ†ä¸ºç‹¬ç«‹å­æ¨¡å—ï¼ˆå¦‚â€œç”¨æˆ·æ„å›¾è¯†åˆ«â€â€œå·¥å…·è°ƒç”¨â€â€œç»“æœæ•´ç†â€ï¼‰ï¼Œé™ä½ç»´æŠ¤æˆæœ¬ã€‚\n\næ¨èåœºæ™¯ï¼š\n\n- å¯é…ç½®æµç¨‹ï¼ˆå¦‚ä¸åŒç”¨æˆ·è§’è‰²å¯¹åº”ä¸åŒå­å›¾ï¼‰ï¼›\n- é‡å¤æµç¨‹ï¼ˆå¦‚â€œè·å–ç”¨æˆ·ä¿¡æ¯â†’è°ƒç”¨å·¥å…·â†’ç”Ÿæˆå›ç­”â€ï¼‰ï¼›\n\nç¤ºä¾‹ï¼š\n\n```\nfrom langgraph import Subgraph\n\n# å®šä¹‰â€œå·¥å…·è°ƒç”¨â€å­å›¾\nclass ToolSubgraph(Subgraph):\n    def __init__(self):\n        super().__init__()\n        self.add_node("call_tool", self._call_tool)\n        self.add_node("parse_result", self._parse_result)\n        self.add_edge("call_tool", "parse_result")\n\n    def _call_tool(self, state: AgentState) -> AgentState:\n        # å·¥å…·è°ƒç”¨é€»è¾‘\n        return state\n\n    def _parse_result(self, state: AgentState) -> AgentState:\n        # ç»“æœè§£æé€»è¾‘\n        return state\n\n# å°†å­å›¾åµŒå…¥ä¸»å›¾\nmain_graph = StateGraph(AgentState)\nmain_graph.add_subgraph(ToolSubgraph(), name="tool_flow")\n\n```\n\n### 4. ä¸¥æ ¼æ§åˆ¶äººæœºåä½œï¼ˆHuman-in-the-Loopï¼‰\n\nLangGraphæ”¯æŒäººç±»åœ¨ä»»æ„èŠ‚ç‚¹ä»‹å…¥ï¼Œéœ€åˆç†è®¾è®¡ä»‹å…¥æ—¶æœºï¼Œé¿å…è¿‡åº¦ä¾èµ–äººç±»æˆ–å¿½ç•¥é£é™©ã€‚\n\næ¨èåœºæ™¯ï¼š\n\n- æ¨¡ç³ŠæŸ¥è¯¢ï¼ˆå¦‚ç”¨æˆ·æ„å›¾ä¸æ˜ç¡®ï¼‰ï¼šè¯·æ±‚äººç±»è¡¥å……ä¿¡æ¯ï¼›\n- é«˜é£é™©å†³ç­–ï¼ˆå¦‚å†…å®¹å®¡æ ¸ã€èµ„é‡‘æ“ä½œï¼‰ï¼šåœ¨å†³ç­–å‰æš‚åœï¼Œç­‰å¾…äººç±»ç¡®è®¤ï¼›\n\nç¤ºä¾‹ï¼š\n\n```\nfrom langgraph import HumanNode\n\n# å®šä¹‰äººç±»å®¡æ‰¹èŠ‚ç‚¹\nhuman_approval_node = HumanNode(\n    input_schema={"approval": bool},  # äººç±»è¾“å…¥ schemaï¼ˆæ˜¯å¦æ‰¹å‡†ï¼‰\n    output_schema={"approved": bool} # è¾“å‡º schemaï¼ˆå®¡æ‰¹ç»“æœï¼‰\n)\n\n# åœ¨æµç¨‹ä¸­æ’å…¥äººç±»èŠ‚ç‚¹\nstate_graph.add_edge("decide", human_approval_node)\nstate_graph.add_edge(human_approval_node, "execute_action")\n\n```\n\n### 5. ç”¨LangSmithå®ç°å¯è§†åŒ–è°ƒè¯•\n\nLangSmithæ˜¯LangGraphçš„è°ƒè¯•åˆ©å™¨ï¼Œéœ€å…¨ç¨‹ä½¿ç”¨å…¶è®°å½•æ‰§è¡Œè½¨è¿¹ã€çŠ¶æ€å˜åŒ–ã€å·¥å…·è°ƒç”¨ç­‰ä¿¡æ¯ï¼Œå¿«é€Ÿå®šä½é—®é¢˜ã€‚\n\nå…³é”®åŠŸèƒ½ï¼š\n\n- é”™è¯¯å®šä½ï¼šæ ‡è®°æ‰§è¡Œä¸­çš„é”™è¯¯ï¼ˆå¦‚å·¥å…·è°ƒç”¨å¤±è´¥ã€çŠ¶æ€å¼‚å¸¸ï¼‰ï¼›\n- æ€§èƒ½åˆ†æï¼šç»Ÿè®¡æ¯ä¸€æ­¥çš„æ‰§è¡Œæ—¶é—´ï¼ˆå¦‚æ¨¡å‹è°ƒç”¨è€—æ—¶ã€å·¥å…·è°ƒç”¨è€—æ—¶ï¼‰ï¼›\n- è½¨è¿¹å›æ”¾ï¼šæŸ¥çœ‹ä»£ç†æ¯ä¸€æ­¥çš„çŠ¶æ€å˜åŒ–ï¼ˆå¦‚`messages`æ–°å¢ã€`tool_calls`æ›´æ–°ï¼‰ï¼›\n\nç¤ºä¾‹ï¼š\n\n```\nfrom langsmith import Client\n\n# åˆå§‹åŒ–LangSmithå®¢æˆ·ç«¯ï¼ˆéœ€è®¾ç½®ç¯å¢ƒå˜é‡LANGSMITH_API_KEYï¼‰\nlangsmith_client = Client()\n\n# åˆ›å»ºä»£ç†æ—¶å…³è”LangSmith\nagent = create_react_agent(\n    model="anthropic:claude-3-7-sonnet-latest",\n    tools=[get_weather],\n    prompt="ä½ æ˜¯ä¸€ä¸ªhelpfulçš„åŠ©ç†",\n    langsmith_client=langsmith_client\n)\n\n```\n\n### 6. ä¼˜åŒ–æ¨¡å‹ä¸å·¥å…·è°ƒç”¨\n\nå·¥å…·è°ƒç”¨ç­–ç•¥ï¼š\n\n- ç¼“å­˜ç»“æœï¼šå¯¹é¢‘ç¹è°ƒç”¨çš„å·¥å…·ï¼ˆå¦‚å›ºå®šæ•°æ®æŸ¥è¯¢ï¼‰ç¼“å­˜ç»“æœï¼Œæé«˜æ•ˆç‡ï¼›\n- æ‰¹é‡è°ƒç”¨ï¼šå°†å¤šä¸ªå·¥å…·è°ƒç”¨åˆå¹¶ä¸ºä¸€æ¬¡ï¼ˆå¦‚åŒæ—¶è·å–å¤©æ°”å’Œæ–°é—»ï¼‰ï¼Œå‡å°‘æ¨¡å‹è°ƒç”¨æ¬¡æ•°ï¼›\n\n## ä¸‰ã€å®æˆ˜æ¡ˆä¾‹ï¼šæ„å»ºæœ‰çŠ¶æ€å¯¹è¯ä»£ç†\n\nä»¥ä¸‹æ˜¯ä¸€ä¸ªç»“åˆä¸Šè¿°æœ€ä½³å®è·µçš„å¯¹è¯ä»£ç†ç¤ºä¾‹ï¼š\n\n```\nfrom langgraph import StateGraph, HumanNode\nfrom langgraph.schema import Message\nfrom langgraph.checkpoint import LocalCheckpointSaver\nfrom langsmith import Client\nfrom typing import TypedDict, List\n\n# å®šä¹‰çŠ¶æ€ç»“æ„\nclass ConversationState(TypedDict):\n    messages: List[Message]\n    tool_calls: List[dict]\n    user_preference: dict\n    need_human_approval: bool\n\n# åˆå§‹åŒ–ä¾èµ–\ncheckpoint_saver = LocalCheckpointSaver(directory="./checkpoints")\nlangsmith_client = Client()\n\n# å®šä¹‰èŠ‚ç‚¹å‡½æ•°\ndef decide_next_step(state: ConversationState) -> str:\n    """å†³å®šä¸‹ä¸€æ­¥æ“ä½œ"""\n    last_msg = state["messages"][-1]\n    if "å¤©æ°”" in last_msg.content:\n        return "call_weather_tool"\n    elif "æ•æ„Ÿå†…å®¹" in last_msg.content:\n        state["need_human_approval"] = True\n        return "human_approval"\n    else:\n        return "direct_answer"\n\ndef call_weather_tool(state: ConversationState) -> ConversationState:\n    """è°ƒç”¨å¤©æ°”å·¥å…·"""\n    city = last_msg.content.split("å¤©æ°”")[0].strip()\n    weather = get_weather(city)  # å‡è®¾get_weatheræ˜¯å·¥å…·å‡½æ•°\n    state["tool_calls"].append({"tool": "get_weather", "input": city, "output": weather})\n    state["messages"].append(Message(role="assistant", content=f"å¤©æ°”ç»“æœï¼š{weather}"))\n    return state\n\n# åˆ›å»ºçŠ¶æ€å›¾\ngraph = StateGraph(ConversationState)\n\n# æ·»åŠ èŠ‚ç‚¹\ngraph.add_node("decide", decide_next_step)\ngraph.add_node("call_weather_tool", call_weather_tool)\ngraph.add_node("human_approval", HumanNode(input_schema={"approval": bool}))\ngraph.add_node("direct_answer", lambda state: state)\n\n# æ·»åŠ è¾¹\ngraph.add_edge("decide", "call_weather_tool")\ngraph.add_edge("decide", "human_approval")\ngraph.add_edge("decide", "direct_answer")\ngraph.add_edge("human_approval", "direct_answer")\ngraph.add_edge("call_weather_tool", "direct_answer")\n\n# è®¾ç½®å…¥å£èŠ‚ç‚¹\ngraph.set_entry_point("decide")\n\n# ç¼–è¯‘å›¾ï¼ˆå¸¦æ£€æŸ¥ç‚¹ä¸LangSmithï¼‰\ncompiled_graph = graph.compile(\n    checkpoint_saver=checkpoint_saver,\n    langsmith_client=langsmith_client\n)\n\n# è¿è¡Œä»£ç†\ninitial_state = {\n    "messages": [Message(role="user", content="åŒ—äº¬çš„å¤©æ°”æ€ä¹ˆæ ·ï¼Ÿ")],\n    "tool_calls": [],\n    "user_preference": {},\n    "need_human_approval": False\n}\nresult = compiled_graph.invoke(initial_state)\n\nprint(result["messages"][-1].content)\n\n```\n\n## å››ã€æ€»ç»“\n\nLangGraphçš„æœ€ä½³å®è·µå›´ç»•â€œæœ‰çŠ¶æ€ã€å¯æŒä¹…åŒ–ã€å¯è°ƒè¯•â€å±•å¼€ï¼Œæ ¸å¿ƒæ˜¯è®¾è®¡æ¸…æ™°çš„çŠ¶æ€ç»“æ„ã€å¼ºåˆ¶ä½¿ç”¨æ£€æŸ¥ç‚¹ã€åˆ©ç”¨å­å›¾æ¨¡å—åŒ–ã€åˆç†å¼•å…¥äººæœºåä½œåŠç”¨LangSmithè°ƒè¯•ã€‚è¿™äº›ç­–ç•¥èƒ½å¸®åŠ©å¼€å‘è€…æ„å»ºå¯é ã€å¯æ‰©å±•çš„AIä»£ç†ï¼Œé€‚ç”¨äºé•¿æœŸå¯¹è¯ã€æ•°æ®å¤„ç†ã€æ™ºèƒ½åŠ©æ‰‹ç­‰åœºæ™¯ã€‚\n\n## å‚è€ƒèµ„æ–™\n\n- LangGraphå®æˆ˜ç¤ºä¾‹ï¼š [https://github.com/langchain-ai/langgraph/tree/main/examples] \n- LangSmithè°ƒè¯•æŒ‡å—ï¼š [https://docs.smith.langchain.com/] \n- LangGraphå®˜æ–¹æ–‡æ¡£ï¼š [https://langgraph.ai/docs/] \n- é”™è¯¯å¤„ç†ï¼šå·¥å…·è°ƒç”¨å¤±è´¥æ—¶ï¼ˆå¦‚APIè¶…æ—¶ï¼‰ï¼Œéœ€é‡è¯•æˆ– fallback åˆ°é»˜è®¤å€¼ï¼Œå¹¶è®°å½•é”™è¯¯ä¿¡æ¯ï¼ˆå¦‚`{"tool_error":"API timeout","timestamp":"2024-05-01 10:00:00"}`ï¼‰ã€‚\n\n## ä¸Šä¸€ç¯‡æ–‡ç« \n\n[Docker & Docker Composeéƒ¨ç½²ä¸æ’æŸ¥å¸¸ç”¨å‘½ä»¤æ€»ç»“] \n\n## ä¸‹ä¸€ç¯‡æ–‡ç« \n\n[LangGraphå…¥é—¨æŒ‡å—ï¼šæ„å»ºé•¿æœŸè¿è¡Œçš„æœ‰çŠ¶æ€AIä»£ç†] \n\n[â† è¿”å›åšå®¢åˆ—è¡¨]', 'doi': '', 'published_date': '2025-09-10T00:00:00+00:00', 'pdf_url': '', 'url': 'https://www.ningto.com/blog/2025/langGraph-best-practices-strategies-for-reliable-stateful-ai-agents-2025-09-10', 'source': 'exa_context', 'categories': [], 'keywords': [], 'citations': 0, 'references': [], 'extra': {'saved_path': '/home/qinshan/widthresearch/data/downloads/exa_LangGraphæœ€.md'}}
2026-02-21 20:11:40,729 - __main__ - INFO - call_tool: name=exa_context_download, args={'papers': [{'paper_id': '', 'title': 'Multi-Agentå…¨é¢çˆ†å‘ï¼ä¸€æ–‡è¯¦è§£å¤šæ™ºèƒ½ä½“æ ¸å¿ƒæ¶æ„åŠLangGraphæ¡†æ¶', 'authors': [], 'abstract': 'Multi-Agentå…¨é¢çˆ†å‘ï¼ä¸€æ–‡è¯¦è§£å¤šæ™ºèƒ½ä½“æ ¸å¿ƒæ¶æ„åŠLangGraphæ¡†æ¶-è…¾è®¯äº‘å¼€å‘è€…ç¤¾åŒº-è…¾è®¯äº‘\n[] \n[è…¾è®¯äº‘å¼€å‘è€…] \n## Multi-Agentå…¨é¢çˆ†å‘ï¼ä¸€æ–‡è¯¦è§£å¤šæ™ºèƒ½ä½“æ ¸å¿ƒæ¶æ„åŠLangGraphæ¡†æ¶\n**å…³æ³¨ä½œè€…\n[*è…¾è®¯äº‘*] \n[*å¼€å‘è€…ç¤¾åŒº*] \n[æ–‡æ¡£] [å»ºè®®åé¦ˆ] [æ§åˆ¶å°] \nç™»å½•/æ³¨å†Œ\n[é¦–é¡µ] \nå­¦ä¹ æ´»åŠ¨ä¸“åŒºåœˆå±‚å·¥å…·[MCPå¹¿åœº![]] \næ–‡ç« /ç­”æ¡ˆ/æŠ€æœ¯å¤§ç‰›æœç´¢**\næœç´¢**å…³é—­**\nå‘å¸ƒè…¾è®¯äº‘å¼€å‘è€…**\n**\n**\n**\n**\n[ç¤¾åŒºé¦–é¡µ] &gt;[ä¸“æ ] &gt;Multi-Agentå…¨é¢çˆ†å‘ï¼ä¸€æ–‡è¯¦è§£å¤šæ™ºèƒ½ä½“æ ¸å¿ƒæ¶æ„åŠLangGraphæ¡†æ¶\n# Multi-Agentå…¨é¢çˆ†å‘ï¼ä¸€æ–‡è¯¦è§£å¤šæ™ºèƒ½ä½“æ ¸å¿ƒæ¶æ„åŠLangGraphæ¡†æ¶\n![ä½œè€…å¤´åƒ] \nè…¾è®¯äº‘å¼€å‘è€…**å…³æ³¨\nå‘å¸ƒäº2025-12-16 14:32:39\nå‘å¸ƒäº2025-12-16 14:32:39\n8991\nä¸¾æŠ¥**æ–‡ç« è¢«æ”¶å½•äºä¸“æ ï¼š[ã€è…¾è®¯äº‘å¼€å‘è€…ã€‘] ã€è…¾è®¯äº‘å¼€å‘è€…ã€‘\néšç€å¤§æ¨¡å‹çš„å¿«é€Ÿå‘å±•ï¼Œæ„å»ºæ™ºèƒ½ä½“å·²æˆä¸ºå¤§æ¨¡å‹åº”ç”¨æœ€åŸºæœ¬çš„èƒ½åŠ›äº†ï¼Œç„¶è€Œï¼Œå•æ™ºèƒ½ä½“åœ¨å¤„ç†å¤æ‚ã€å¤šæ­¥éª¤ä»»åŠ¡æ—¶å¾€å¾€å­˜åœ¨å±€é™æ€§ã€‚ä¸ºäº†åº”å¯¹è¿™ä¸€æŒ‘æˆ˜ï¼Œå¤šæ™ºèƒ½ä½“ç³»ç»Ÿåº”è¿è€Œç”Ÿï¼Œå®ƒé€šè¿‡å¤šä¸ªæ™ºèƒ½ä½“ååŒå·¥ä½œçš„æ–¹å¼ï¼Œå°†å¤æ‚ä»»åŠ¡åˆ†è§£ä¸ºå¤šä¸ªå­ä»»åŠ¡ï¼Œç”±ä¸åŒçš„æ™ºèƒ½ä½“åˆ†åˆ«å¤„ç†ï¼Œæœ€ç»ˆåˆå¹¶ç»“æœå¹¶è¿”å›ã€‚LangGraphä½œä¸ºLangChainç”Ÿæ€ç³»ç»Ÿçš„é‡è¦æ‰©å±•ï¼Œé€šè¿‡å¼•å…¥æœ‰å‘å›¾æ¨¡å‹é‡æ„äº†ä¼ ç»Ÿæ™ºèƒ½ä½“çš„å·¥ä½œæµæ¶æ„ï¼Œå°†å¤æ‚çš„å¤šæ­¥éª¤äº¤äº’å’Œå†³ç­–è¿‡ç¨‹æ¨¡å—åŒ–ï¼Œæ˜¯ç›®å‰ä¸»æµçš„å¤šæ™ºèƒ½ä½“é›†æˆæ¡†æ¶ä¹‹ä¸€ã€‚\nå…³æ³¨è…¾è®¯äº‘å¼€å‘è€…ï¼Œä¸€æ‰‹æŠ€æœ¯å¹²è´§æå‰è§£é”ğŸ‘‡![] \næœ¬æ–‡ä¸»è¦ä»‹ç»å¤šæ™ºèƒ½ä½“é›†æˆæ¡†æ¶LangGraphçš„ç›¸å…³æ¦‚å¿µåŠä½¿ç”¨ï¼Œå…³äºå¤§æ¨¡å‹åº”ç”¨å¼€å‘çš„åŸºæœ¬çš„æµç¨‹å¯ä»¥é˜…è¯»ï¼š[ã€Š] [GitHub 12w Starç¥å™¨ï¼ä¸€æ–‡è¯¦è§£å¤§æ¨¡å‹é›†æˆæ¡†æ¶LangChain] [ã€‹] ï¼Œè¯¦ç»†ä»‹ç»äº†æ„å»ºå¤§æ¨¡å‹åº”ç”¨çš„æ­¥éª¤åŠæ¦‚å¿µï¼ˆæç¤ºè¯æ¨¡ç‰ˆã€è¾“å‡ºè§£æå™¨ã€è®°å¿†ã€å·¥å…·ã€Agentã€RAGç­‰ï¼‰\n## **01ã€LangGraphæ¦‚è¿°**\n1.1 ä»€ä¹ˆæ˜¯LangGraph\nLangGraph æ˜¯LangChain ç”Ÿæ€çš„ä¸€éƒ¨åˆ†ï¼Œä¸“é—¨ç”¨äºæ„å»ºåŸºäºå¤§æ¨¡å‹ï¼ˆLLMï¼‰çš„å¤æ‚ã€æœ‰çŠ¶æ€ã€å¤šæ™ºèƒ½ä½“åº”ç”¨çš„æ¡†æ¶ï¼Œæ ¸å¿ƒæ€æƒ³æ˜¯**å°†åº”ç”¨çš„å·¥ä½œæµç¨‹æŠ½è±¡ä¸ºä¸€ä¸ªæœ‰å‘å›¾ç»“æ„ï¼Œé€šè¿‡èŠ‚ç‚¹å’Œè¾¹æ¥å®šä¹‰ä»»åŠ¡çš„æ‰§è¡Œæ­¥éª¤å’Œé€»è¾‘æµï¼Œ**ä»è€Œæä¾›äº†è¿œè¶…ä¼ ç»Ÿçº¿æ€§é“¾å¼è°ƒç”¨çš„çµæ´»æ€§å’Œæ§åˆ¶åŠ›ã€‚ç›¸æ¯”ä¼ ç»Ÿçš„çº¿æ€§æ‰§è¡Œæ¨¡å¼ï¼Œ**LangGraph æ”¯æŒæ¡ä»¶åˆ†æ”¯ã€å¾ªç¯ã€å¹¶è¡Œç­‰å¤æ‚æ§åˆ¶æµï¼Œèƒ½å¤Ÿå®ç°çŠ¶æ€æŒä¹…åŒ–ã€æ–­ç‚¹ç»­è·‘ã€æ—¶é—´æ—…è¡Œã€äººæœºåä½œç­‰é«˜çº§åŠŸèƒ½ï¼Œå¹¶æä¾›äº†å¤šæ™ºèƒ½ä½“åä½œã€å±‚çº§æ¶æ„ç­‰å¤šç§æ¶æ„æ¨¡å¼ã€‚**åœ¨å®é™…åº”ç”¨ä¸­ï¼ŒLangGraphå·²æˆåŠŸåº”ç”¨äºæ™ºèƒ½å®¢æœã€è‡ªåŠ¨åŒ–è¿ç»´ã€ç ”ç©¶ Agent ç­‰åœºæ™¯ï¼Œå±•ç°å‡ºå“è¶Šçš„é€‚åº”æ€§å’Œæ‰©å±•æ€§ã€‚**LangGraphåœ¨Githubä¸Šçš„çƒ­åº¦å˜åŒ–**\n![] \n1.2 ä¸ºä»€ä¹ˆä½¿ç”¨LangGraph\nLangGraph ç›¸æ¯”ä¼ ç»Ÿçš„çº¿æ€§æ‰§è¡Œæ¨¡å¼å…·æœ‰æ˜¾è‘—çš„æŠ€æœ¯ä¼˜åŠ¿ã€‚1. LangGraph æä¾›äº†å¼ºå¤§çš„çŠ¶æ€ç®¡ç†æœºåˆ¶ï¼Œå…è®¸Agent åœ¨ä¸åŒèŠ‚ç‚¹ä¹‹é—´ä¼ é€’å’Œç»´æŠ¤ä¿¡æ¯ï¼Œä»è€Œå®ç°é•¿æœŸçš„è®°å¿†å’Œå¤šè½®å¯¹è¯èƒ½åŠ›ã€‚è¿™ç§é›†ä¸­å¼çš„çŠ¶æ€ç®¡ç†é¿å…äº†ä¼ ç»Ÿæ–¹æ³•ä¸­çŠ¶æ€åˆ†æ•£åœ¨å¤šä¸ªå˜é‡ä¸­çš„é—®é¢˜ï¼Œæé«˜äº†ç³»ç»Ÿçš„å¯ç»´æŠ¤æ€§å’Œå¯è§‚æµ‹æ€§ã€‚2. é€šè¿‡å®šä¹‰èŠ‚ç‚¹å’Œè¾¹ï¼Œå¯ä»¥ç²¾ç¡®æ§åˆ¶Agent çš„æ‰§è¡Œé€»è¾‘ï¼ŒåŒ…æ‹¬æ¡ä»¶åˆ†æ”¯ã€å¾ªç¯å’Œå¹¶è¡Œæ‰§è¡Œç­‰3. LangGraph èƒ½å¤Ÿæ— ç¼é›†æˆå„ç§å¤–éƒ¨å·¥å…·ï¼ˆå¦‚æœç´¢å¼•æ“ã€æ•°æ®åº“ã€API ç­‰ï¼‰ï¼Œè®©Agent èƒ½å¤Ÿè·å–å®æ—¶ä¿¡æ¯ã€æ‰§è¡Œç‰¹å®šæ“ä½œï¼Œæå¤§åœ°æ‰©å±•äº†LLM çš„èƒ½åŠ›è¾¹ç•Œã€‚4. å›¾ç»“æ„ä½¿å¾—Agent çš„è¿è¡Œè·¯å¾„æ¸…æ™°å¯è§ï¼Œä¾¿äºç†è§£Agent çš„å†³ç­–è¿‡ç¨‹ï¼Œå¹¶åœ¨å‡ºç°é—®é¢˜æ—¶è¿›è¡Œå¿«é€Ÿå®šä½å’Œè°ƒè¯•ã€‚5. æ¨¡å—åŒ–ä¸å¯å¤ç”¨æ€§ã€‚æ¯ä¸ªèŠ‚ç‚¹éƒ½å¯ä»¥æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„ã€å¯å¤ç”¨çš„ç»„ä»¶ï¼Œç»´æŠ¤æ€§é«˜ä¸”æ˜“äºæ‰©å±•ã€‚é€šè¿‡å­å›¾æœºåˆ¶ï¼Œå¤æ‚çš„å·¥ä½œæµå¯ä»¥è¢«åˆ†è§£ä¸ºå¤šä¸ªå¯ç‹¬ç«‹å¼€å‘å’Œæµ‹è¯•çš„æ¨¡å—ï¼Œæé«˜äº†å¼€å‘å’Œæµ‹è¯•æ•ˆç‡ã€‚1.3 å®‰è£…ä½¿ç”¨å®‰è£…LangGraph\nä»£ç è¯­è¨€ï¼šjavascript\nå¤åˆ¶```\n`pip install -U langgraph`\n```\nä½¿ç”¨LangGraphåˆ›å»ºä¸€ä¸ªç®€å•çš„Agent\nä»£ç è¯­è¨€ï¼šjavascript\nå¤åˆ¶```\n`def get\\_weather(city: str) -&gt;&gt; str:\n&quot;&quot;&quot;&quot;&quot;&quot;è·å–æŒ‡å®šåŸå¸‚çš„å¤©æ°”ä¿¡æ¯ã€‚\nArgs:\ncity: åŸå¸‚åç§°Returns:\nè¿”å›è¯¥åŸå¸‚çš„å¤©æ°”æè¿°&quot;&quot;&quot;&quot;&quot;&quot;\nreturn f&quot;&quot;ä»Šå¤©{city}æ˜¯æ™´å¤©&quot;&quot;\n# åˆ›å»ºæ¨¡å‹model = ChatOpenAI(\nmodel\\_name=model\\_name,\nbase\\_url=base\\_url,\napi\\_key=api\\_key\n)\n# ä½¿ç”¨LangGraphæä¾›çš„APIåˆ›å»ºAgent\nagent = create\\_react\\_agent(\nmodel=model, # æ·»åŠ æ¨¡å‹tools=[get\\_weather], # æ·»åŠ å·¥å…·prompt=&quot;&quot;ä½ æ˜¯ä¸€ä¸ªå¤©æ°”åŠ©æ‰‹&quot;&quot;\n)\nhuman\\_message = HumanMessage(content=&quot;&quot;ä»Šå¤©æ·±åœ³å¤©æ°”æ€ä¹ˆæ ·ï¼Ÿ&quot;&quot;)\nresponse = agent.invoke(\n{&quot;&quot;messages&quot;&quot;: [human\\_message]}\n)\nprint(response)`\n```\n![] \n**è¿è¡Œæ¨¡å¼ï¼š**Agentå¯ä»¥é€šè¿‡ä¸¤ç§ä¸»è¦æ¨¡å¼æ‰§è¡Œ\n1. **åŒæ­¥ï¼š**ä½¿ç”¨ .invoke() æˆ–.stream()\n2. **å¼‚æ­¥ï¼š**ä½¿ç”¨ await .ainvoke() æˆ–async for é…åˆ.astream()\n**æœ€å¤§è¿­ä»£æ¬¡æ•°ï¼š**ä¸ºäº†é¿å…Agentæ— é™å¾ªç¯æ‰§è¡Œï¼Œå¯ä»¥è®¾ç½®ä¸€ä¸ªé€’å½’é™åˆ¶\nä»£ç è¯­è¨€ï¼šjavascript\nå¤åˆ¶```\n`response = agent.invoke(\n{&quot;&quot;messages&quot;&quot;: [{&quot;&quot;role&quot;&quot;: &quot;&quot;user&quot;&quot;, &quot;&quot;content&quot;&quot;: &quot;&quot;é¢„å®šä¸€ä¸ªæ·±åœ³åˆ°åŒ—äº¬çš„æœºç¥¨&quot;&quot;}]},\n{&quot;&quot;recursion\\_limit&quot;&quot;: 10} # æŒ‡å®šæœ€å¤§è¿­ä»£æ¬¡æ•°)`\n```\n## **02ã€LangGraphæ ¸å¿ƒ**\n2.1 Graphï¼ˆå›¾ï¼‰\n![]<image_link>\nå›¾æ˜¯ä¸€ç§ç”±èŠ‚ç‚¹å’Œè¾¹ç»„æˆçš„ç”¨äºæè¿°èŠ‚ç‚¹ä¹‹é—´å…³ç³»çš„æ•°æ®ç»“æ„ï¼Œåˆ†ä¸ºæ— å‘å›¾å’Œæœ‰å‘å›¾ï¼Œæœ‰å‘å›¾æ˜¯å¸¦æœ‰æ–¹å‘çš„å›¾ã€‚LangGraphé€šè¿‡æœ‰å‘å›¾å®šä¹‰AIå·¥ä½œæµä¸­çš„æ‰§è¡Œæ­¥éª¤å’Œæ‰§è¡Œé¡ºåºï¼Œä»è€Œå®ç°å¤æ‚ã€æœ‰çŠ¶æ€ã€å¯å¾ªç¯çš„åº”ç”¨ç¨‹åºé€»è¾‘ã€‚\n2.2 LangGraphæ ¸å¿ƒè¦ç´ ï¼ˆStateã€Edgeã€Nodeï¼‰\n**1ã€Stateï¼ˆçŠ¶æ€ï¼‰**\nåœ¨LangGraphä¸­ï¼Œ**Stateæ˜¯ä¸€ä¸ªè´¯ç©¿æ•´ä¸ªå·¥ä½œæµæ‰§è¡Œè¿‡ç¨‹ä¸­çš„å…±äº«æ•°æ®çš„ç»“æ„**ï¼Œä»£è¡¨å½“å‰å¿«ç…§ï¼Œå®ƒå­˜å‚¨äº†ä»å·¥ä½œæµå¼€å§‹åˆ°ç»“æŸçš„æ‰€æœ‰å¿…è¦çš„ä¿¡æ¯ï¼ˆå†å²å¯¹è¯ã€æ£€ç´¢åˆ°çš„æ–‡æ¡£ã€å·¥å…·æ‰§è¡Œç»“æœç­‰ï¼‰ï¼Œåœ¨å„ä¸ªèŠ‚ç‚¹ä¸­å…±äº«ï¼Œä¸”æ¯ä¸ªèŠ‚ç‚¹éƒ½å¯ä»¥ä¿®æ”¹ã€‚Stateå¯ä»¥æ˜¯TypedDictç±»å‹ï¼Œä¹Ÿå¯ä»¥æ˜¯pydanticä¸­çš„BaseModelç±»å‹ã€‚\nä»£ç è¯­è¨€ï¼šjavascript\nå¤åˆ¶```\n`# å®šä¹‰çŠ¶æ€class GraphState(TypedDict):\nprocess\\_data: dict # é»˜è®¤æ›´æ–°ç­–ç•¥ä¸ºæ›¿æ¢ï¼ˆåç»­ä¼šè®²æ›´æ–°ç­–ç•¥ï¼‰# åˆ›å»ºä¸€ä¸ªçŠ¶æ€å›¾ï¼Œå¹¶æŒ‡å®šçŠ¶æ€graph = StateGraph(GraphState)`\n```\n**2ã€Nodeï¼ˆèŠ‚ç‚¹ï¼‰**\nNodeæ˜¯LangGraphä¸­çš„ä¸€ä¸ªåŸºæœ¬å¤„ç†å•å…ƒï¼Œä»£è¡¨å·¥ä½œæµä¸­çš„ä¸€ä¸ªæ“ä½œæ­¥éª¤ï¼Œå¯ä»¥æ˜¯ä¸€ä¸ªAgentã€è°ƒç”¨å¤§æ¨¡å‹ã€å·¥å…·æˆ–ä¸€ä¸ªå‡½æ•°ï¼ˆè¯´ç™½äº†å°±æ˜¯ç»‘å®šä¸€ä¸ªå‡½æ•°ï¼Œå…·ä½“é€»è¾‘å¯ä»¥å¹²ä»»ä½•äº‹æƒ…ï¼‰ã€‚\n**Nodeçš„è®¾è®¡åŸåˆ™ï¼š**\n* **å•ä¸€èŒè´£åŸåˆ™ï¼š**æ¯ä¸ªèŠ‚ç‚¹åº”è¯¥åªè´Ÿè´£ä¸€é¡¹èŒè´£ï¼Œé¿å…åŠŸèƒ½è¿‡äºå¤æ‚\n* **æ— çŠ¶æ€è®¾è®¡ï¼š**èŠ‚ç‚¹æœ¬èº«ä¸åº”è¯¥ä¿å­˜çŠ¶æ€ï¼Œæ‰€æœ‰æ•°æ®éƒ½é€šè¿‡è¾“å…¥çŠ¶æ€ä¼ é€’\n* **å¹‚ç­‰æ€§ï¼š**ç›¸åŒçš„è¾“å…¥åº”è¯¥äº§ç”Ÿç›¸åŒçš„è¾“å‡ºï¼Œç¡®ä¿å¯é‡è¯•æ€§\n* **å¯æµ‹è¯•æ€§ï¼š**èŠ‚ç‚¹é€»è¾‘åº”è¯¥æ˜“äºå•å…ƒæµ‹è¯•\nå¦‚ä¸‹æ˜¯æ·»åŠ ä¸€ä¸ªèŠ‚ç‚¹çš„ä¾‹å­ï¼šä»£ç è¯­è¨€ï¼šjavascript\nå¤åˆ¶```\n`# å®šä¹‰ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå…¥å‚ä¸ºstate\ndef input\\_node(state: GraphState) -&gt;&gt; GraphState:\nprint(state)\nreturn {&quot;&quot;process\\_data&quot;&quot;: {&quot;&quot;input&quot;&quot;: &quot;&quot;input\\_value&quot;&quot;}}\n# å®šä¹‰å¸¦å‚æ•°çš„nodeèŠ‚ç‚¹\ndef process\\_node(state: dict, param1: int, param2: str) -&gt;&gt; dict:\nprint(state, param1, param2)\nreturn {&quot;&quot;process\\_data&quot;&quot;: {&quot;&quot;process&quot;&quot;: &quot;&quot;process\\_value&quot;&quot;}}\ngraph = StateGraph(GraphState)\n# æ·»åŠ inpuèŠ‚ç‚¹\ngraph.add\\_node(&quot;&quot;input&quot;&quot;, input\\_node)\n# ç»™process\\_nodeèŠ‚ç‚¹ç»‘å®šå‚æ•°\nprocess\\_with\\_params = partial(process\\_node, param1=100, param2=&quot;&quot;test&quot;&quot;)\n# æ·»åŠ å¸¦å‚æ•°çš„nodeèŠ‚ç‚¹\ngraph.add\\_node(&quot;&quot;process&quot;&quot;, process\\_with\\_params)`\n```\n**ç‰¹æ®ŠèŠ‚ç‚¹ï¼š**\nåœ¨LangGraphä¸­æœ‰ä¸¤ä¸ªç‰¹æ®Šçš„èŠ‚ç‚¹ \\_\\_START\\_\\_ ï¼ˆå¼€å§‹èŠ‚ç‚¹ï¼‰å’Œ\\_\\_END\\_\\_ï¼ˆç»“æŸèŠ‚ç‚¹ï¼‰\n**\\_\\_START\\_\\_èŠ‚ç‚¹ï¼š**å¼€å§‹èŠ‚ç‚¹ï¼Œç¡®å®šåº”è¯¥é¦–å…ˆè°ƒç”¨å“ªäº›èŠ‚ç‚¹ã€‚\nä»£ç è¯­è¨€ï¼šjavascript\nå¤åˆ¶```\n`from langgraph.graph import START\n# ç¬¬ä¸€ä¸ªæ‰§è¡Œçš„èŠ‚ç‚¹æ˜¯node\\_start\ngraph.add\\_edge(START, &quot;&quot;node\\_start&quot;&quot;)`\n```\nä¹Ÿå¯ä»¥é€šè¿‡graph.set\\_entry\\_point(&quot;&quot;node\\_start&quot;&quot;) å‡½æ•°è®¾ç½®èµ·å§‹èŠ‚ç‚¹ï¼Œç­‰ä»·äºgraph.add\\_edge(START, &quot;&quot;node\\_start&quot;&quot;)\n**\\_\\_END\\_\\_èŠ‚ç‚¹ï¼š**ç»ˆæ­¢èŠ‚ç‚¹ï¼Œè¡¨ç¤ºåç»­æ²¡æœ‰å…¶ä»–èŠ‚ç‚¹å¯ä»¥ç»§ç»­æ‰§è¡Œäº†ï¼ˆéå¿…é¡»ï¼‰ã€‚\nä»£ç è¯­è¨€ï¼šjavascript\nå¤åˆ¶```\n`from langgraph.graph import END\n# node\\_end èŠ‚ç‚¹æ‰§è¡Œåï¼Œæ²¡æœ‰åç»­èŠ‚ç‚¹äº†graph.add\\_edge(&quot;&quot;node\\_a&quot;&quot;, END)`\n```\nä¹Ÿå¯ä»¥é€šè¿‡graph.set\\_finish\\_point(&quot;&quot;node\\_end&quot;&quot;) å‡½æ•°è®¾ç½®ç»“æŸèŠ‚ç‚¹ï¼Œç­‰ä»·äºgraph.add\\_edge(&quot;&quot;node\\_start&quot;&quot;ï¼Œ END)\n**é”™è¯¯å¤„ç†å’Œé‡è¯•æœºåˆ¶ï¼š**\nLangGraphè¿˜æä¾›äº†é”™è¯¯å¤„ç†å’Œé‡è¯•æœºåˆ¶æ¥æŒ‡å®šé‡è¯•æ¬¡æ•°ã€é‡è¯•é—´éš”ã€é‡è¯•å¼‚å¸¸ç­‰ï¼Œç”¨äºä¿è¯ç³»ç»Ÿçš„å¯é æ€§ã€‚\nä»£ç è¯­è¨€ï¼šjavascript\nå¤åˆ¶```\n`# é‡è¯•ç­–ç•¥retry\\_policy = RetryPolicy(\nmax\\_attempts=3, # æœ€å¤§é‡è¯•æ¬¡æ•°initial\\_interval=1, # åˆå§‹é—´éš”jitter=True, # æŠ–åŠ¨ï¼ˆæ·»åŠ éšæœºæ€§é¿å…é‡è¯•é£æš´ï¼‰backoff\\_factor=2, # é€€é¿ä¹˜æ•°ï¼ˆæ¯æ¬¡é‡è¯•é—´éš”æ—¶é—´çš„å¢é•¿å€æ•°ï¼‰retry\\_on=[RequestException, Timeout] # åªé‡è¯•è¿™äº›å¼‚å¸¸)\ngraph.add\\_node(&quot;&quot;process&quot;&quot;, process\\_node, retry=retry\\_policy)`\n```\n**èŠ‚ç‚¹ç¼“å­˜ï¼š**\nLangGraph æ”¯æŒæ ¹æ®èŠ‚ç‚¹è¾“å…¥å¯¹èŠ‚ç‚¹è¿›è¡Œç¼“å­˜ï¼Œç”¨äºåŠ å¿«èŠ‚ç‚¹çš„å“åº”é€Ÿåº¦1. **ç¼“å­˜é”®ä¸å‘½ä¸­ï¼š**å½“ä¸€ä¸ªèŠ‚ç‚¹å¼€å§‹æ‰§è¡Œæ—¶ï¼Œç³»ç»Ÿä¼šä½¿ç”¨å…¶é…ç½®çš„ key\\_func æ ¹æ®å½“å‰èŠ‚ç‚¹çš„è¾“å…¥æ•°æ®ç”Ÿæˆä¸€ä¸ªå”¯ä¸€çš„é”®ã€‚LangGraph ä¼šæ£€æŸ¥ç¼“å­˜ä¸­æ˜¯å¦å­˜åœ¨è¿™ä¸ªé”®ã€‚å¦‚æœå­˜åœ¨ï¼ˆç¼“å­˜å‘½ä¸­ï¼‰ï¼Œåˆ™ç›´æ¥è¿”å›ä¹‹å‰å­˜å‚¨çš„ç»“æœï¼Œè·³è¿‡è¯¥èŠ‚ç‚¹çš„å®é™…æ‰§è¡Œã€‚å¦‚æœä¸å­˜åœ¨ï¼ˆç¼“å­˜æœªå‘½ä¸­ï¼‰ï¼Œåˆ™æ­£å¸¸æ‰§è¡ŒèŠ‚ç‚¹å‡½æ•°ï¼Œå¹¶å°†ç»“æœä¸ç¼“å­˜é”®å…³è”åå­˜å…¥ç¼“å­˜ã€‚2. **ç¼“å­˜æœ‰æ•ˆæœŸï¼š**ttl å‚æ•°èƒ½æ§åˆ¶ç¼“å­˜çš„æœ‰æ•ˆæœŸã€‚ä¾‹å¦‚ï¼Œå¯¹äºä¾èµ–å®æ—¶æ•°æ®çš„å¤©æ°”æŸ¥è¯¢èŠ‚ç‚¹ï¼Œå¯ä»¥è®¾ç½®è¾ƒçŸ­çš„ttlï¼ˆå¦‚60ç§’ï¼‰ã€‚è€Œå¯¹äºå¤„ç†é™æ€ä¿¡æ¯æˆ–å˜åŒ–ä¸é¢‘ç¹æ•°æ®çš„èŠ‚ç‚¹ï¼Œåˆ™å¯ä»¥è®¾ç½®è¾ƒé•¿çš„ ttlç”šè‡³ä¸è®¾ç½®ï¼ˆNoneï¼‰ï¼Œè®©ç¼“å­˜æ°¸ä¹…æœ‰æ•ˆï¼Œç›´åˆ°æ‰‹åŠ¨æ¸…é™¤\nä»£ç è¯­è¨€ï¼šjavascript\nå¤åˆ¶```\n`class State(TypedDict):\nx: int\nresult: int\nbuilder = StateGraph(State)\ndef expensive\\_node(state: State) -&gt;&gt; dict[str, int]:\n# æ¨¡æ‹Ÿè€—æ—¶time.sleep(2)\nreturn {&quot;&quot;result&quot;&quot;: state[&quot;&quot;x&quot;&quot;] \\* 2}\n#æ·»åŠ èŠ‚ç‚¹ï¼Œå¹¶æŒ‡å®šç¼“å­˜ç­–ç•¥\nbuilder.add\\_node(&quot;&quot;expensive\\_node&quot;&quot;, expensive\\_node, cache\\_policy=CachePolicy(ttl=3))\nbuilder.set\\_entry\\_point(&quot;&quot;expensive\\_node&quot;&quot;)\nbuilder.set\\_finish\\_point(&quot;&quot;expensive\\_node&quot;&quot;)\ngraph = builder.compile(cache=InMemoryCache())`\n```\n**3ã€Edgeï¼ˆè¾¹ï¼‰**\nEdgeå®šä¹‰äº†èŠ‚ç‚¹ä¹‹é—´çš„è¿æ¥å’Œæ‰§è¡Œé¡ºåºï¼Œä»¥åŠä¸åŒèŠ‚ç‚¹ä¹‹é—´æ˜¯å¦‚ä½•é€šè®¯çš„ï¼Œä¸€ä¸ªèŠ‚ç‚¹å¯ä»¥æœ‰å¤šä¸ªå‡ºè¾¹ï¼ˆæŒ‡å‘å¤šä¸ªèŠ‚ç‚¹ï¼‰ï¼Œå¤šä¸ªèŠ‚ç‚¹ä¹Ÿå¯ä»¥æŒ‡å‘åŒä¸€ä¸ªèŠ‚ç‚¹ï¼ˆMap-Reduceï¼‰ï¼Œå¦‚ä¸‹æ˜¯æ·»åŠ è¾¹çš„ä»£ç ï¼š\nä»£ç è¯­è¨€ï¼šjavascript\nå¤åˆ¶```\n`# æ·»åŠ å›ºå®šè¾¹ï¼Œæ‰§è¡Œé¡ºåºï¼šstart -&gt;&gt; input -&gt;&gt; process -&gt;&gt; output -&gt;&gt; end\ngraph.add\\_edge(START, &quot;&quot;input&quot;&quot;)\ngraph.add\\_edge(&quot;&quot;input&quot;&quot;, &quot;&quot;process&quot;&quot;)\ngraph.add\\_edge(&quot;&quot;process&quot;&quot;, &quot;&quot;output&quot;&quot;)\ngraph.add\\_edge(&quot;&quot;output&quot;&quot;, END)\n# ç¼–è¯‘å›¾ï¼Œä¿è¯ç”Ÿæˆçš„å›¾æ˜¯æ­£ç¡®çš„ï¼Œå¦‚æœæ·»åŠ äº†è¾¹ï¼Œæ²¡æ·»åŠ èŠ‚ç‚¹ï¼Œä¼šæŠ¥é”™app = graph.compile()\napp.invoke({})`\n```\n**4ã€æ„å»ºä¸€ä¸ªå®Œæ•´çš„å›¾**\nå›¾çš„æ„å»ºæµç¨‹ï¼š1ã€åˆå§‹åŒ–ä¸€ä¸ªStateGraphå®ä¾‹ã€‚2ã€æ·»åŠ èŠ‚ç‚¹ã€‚3ã€å®šä¹‰è¾¹ï¼Œå°†æ‰€æœ‰çš„èŠ‚ç‚¹è¿æ¥èµ·æ¥ã€‚4ã€è®¾ç½®ç‰¹æ®ŠèŠ‚ç‚¹ï¼Œå…¥å£å’Œå‡ºå£ï¼ˆå¯é€‰ï¼‰ã€‚5ã€ç¼–è¯‘å›¾ã€‚6ã€æ‰§è¡Œå·¥ä½œæµã€‚\nä»£ç è¯­è¨€ï¼šjavascript\nå¤åˆ¶```\n`# å®šä¹‰çŠ¶æ€class GraphState(TypedDict):\nprocess\\_data: dict\ndef input\\_node(state: GraphState) -&gt;&gt; GraphState:\nprint(state)\nreturn {&quot;&quot;process\\_data&quot;&quot;: {&quot;&quot;input&quot;&quot;: &quot;&quot;input\\_value&quot;&quot;}}\ndef output\\_node(state: GraphState) -&gt;&gt; GraphState:\nprint(state)\nreturn {&quot;&quot;process\\_data&quot;&quot;: {&quot;&quot;output&quot;&quot;: &quot;&quot;output\\_value&quot;&quot;}}\ndef process\\_node(state: dict) -&gt;&gt; dict:\nprint(state)\nreturn {&quot;&quot;process\\_data&quot;&quot;: {&quot;&quot;process&quot;&quot;: &quot;&quot;process\\_value&quot;&quot;}}\n# åˆ›å»ºä¸€ä¸ªçŠ¶æ€å›¾ï¼Œå¹¶æŒ‡å®šçŠ¶æ€graph = StateGraph(GraphState)\n# æ·»åŠ inputã€processã€outputèŠ‚ç‚¹\ngraph.add\\_node(&quot;&quot;input&quot;&quot;, input\\_node)\ngraph.add\\_node(&quot;&quot;process&quot;&quot;, process\\_node)\ngraph.add\\_node(&quot;&quot;output&quot;&quot;, output\\_node)\n# æ·»åŠ å›ºå®šè¾¹ï¼Œæ‰§è¡Œé¡ºåºï¼šstart -&gt;&gt; input -&gt;&gt; process -&gt;&gt; output -&gt;&gt; end\ngraph.add\\_edge(START, &quot;&quot;input&quot;&quot;)\ngraph.add\\_edge(&quot;&quot;input&quot;&quot;, &quot;&quot;process&quot;&quot;)\ngraph.add\\_edge(&quot;&quot;process&quot;&quot;, &quot;&quot;output&quot;&quot;)\ngraph.add\\_edge(&quot;&quot;output&quot;&quot;, END)\n# ç¼–è¯‘å›¾ï¼Œä¿è¯ç”Ÿæˆçš„å›¾æ˜¯æ­£ç¡®çš„ï¼Œå¦‚æœæ·»åŠ äº†è¾¹ï¼Œæ²¡æ·»åŠ èŠ‚ç‚¹ï¼Œä¼šæŠ¥é”™app = graph.compile()# æ‰§è¡Œapp.invoke({})`\n```\n![]<image_link>\n2.3 çŠ¶æ€åˆå¹¶ç­–ç•¥ï¼ˆReducersï¼‰\nLangGraphå·¥ä½œæµä¸­ï¼ŒStateä½œä¸ºè´¯ç©¿æ•´ä¸ªèŠ‚ç‚¹ä¹‹é—´å…±äº«æ•°æ®çš„ç»“æ„ï¼Œæ¯ä¸€ä¸ªèŠ‚ç‚¹éƒ½å¯ä»¥è¯»å–å½“å‰Stateçš„æ•°æ®ï¼Œå¹¶ä¸”å¯ä»¥æ›´æ–°ã€‚**Reduceræ˜¯å®šä¹‰å¤šä¸ªèŠ‚ç‚¹ä¹‹é—´Stateå¦‚ä½•æ›´æ–°çš„ï¼ˆè¦†ç›–ã€åˆå¹¶ã€æ·»åŠ ç­‰ï¼‰ã€‚**\n**1ã€ç›´æ¥è¦†ç›–ï¼š**å¦‚æœæ²¡æœ‰ä¸ºçŠ¶æ€å­—æ®µæŒ‡å®š Reducerï¼Œé»˜è®¤ä¼šè¦†ç›–æ›´æ–°ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåæ‰§è¡Œçš„èŠ‚ç‚¹è¿”å›çš„å€¼ä¼šç›´æ¥è¦†ç›–å…ˆæ‰§è¡ŒèŠ‚ç‚¹çš„å€¼ï¼Œå³ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„Stateæ•°æ®æ˜¯ä¸Šä¸€ä¸ªèŠ‚ç‚¹çš„è¿”å›ã€‚\nä»£ç è¯­è¨€ï¼šjavascript\nå¤åˆ¶```\n`class OverrideState(TypedDict):\nprocess\\_data : dict # æœªæŒ‡å®šåˆå¹¶ç­–ç•¥ï¼Œé»˜è®¤è¦†ç›–ï¼Œä¸Šä¸€ä¸ªèŠ‚ç‚¹çš„è¿”å›æ˜¯ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„å€¼`\n```\n**2ã€Annotatedï¼šä½¿ç”¨ç±»å‹æ³¨è§£æŒ‡å®šåˆå¹¶ç­–ç•¥**\nä»£ç è¯­è¨€ï¼šjavascript\nå¤åˆ¶```\n`class AddState(TypedDict):\ndata\\_int: Annotated[int, add] # æ•°å­—ç›¸åŠ data\\_list: Annotated[list, add] # åˆå¹¶ä¸¤ä¸ªåˆ—è¡¨data\\_str: Annotated[str, add] # å­—ç¬¦ä¸²æ‹¼æ¥def add\\_node1(state: AddState) -&gt;&gt; AddState:\nprint(state)\nreturn {&quot;&quot;data\\_int&quot;&quot;: 1, &quot;&quot;data\\_list&quot;&quot;: [1], &quot;&quot;data\\_str&quot;&quot;: &quot;&quot;hello &quot;&quot;}\ndef add\\_node2(state: AddState) -&gt;&gt; AddState:\nprint(state)\nreturn {&quot;&quot;data\\_int&quot;&quot;: 2, &quot;&quot;data\\_list&quot;&quot;: [2], &quot;&quot;data\\_str&quot;&quot;: &quot;&quot;world&quot;&quot;}`\n```\n**3ã€å†…ç½®Reducerï¼šadd\\_messagesï¼ˆæ¶ˆæ¯åˆ—è¡¨åˆå¹¶ï¼‰**\nLangGraphæä¾›çš„ä¸“ç”¨Reducerå‡½æ•°ï¼Œèƒ½æ™ºèƒ½çš„åˆå¹¶æ¶ˆæ¯åˆ—è¡¨ï¼Œä¸åªæ˜¯ç®€å•çš„è¿½åŠ ï¼Œadd\\_messagesèƒ½å¤Ÿä¿è¯æ¶ˆæ¯åˆ—è¡¨æ­£ç¡®è¢«ç´¯è®¡ï¼Œå¸¸ç”¨åœ¨å¤šè½®å¯¹è¯ç³»ç»Ÿä¸­ï¼Œä¸»è¦é€»è¾‘åŒ…æ‹¬ï¼š\n* **è¿½åŠ æ–°æ¶ˆæ¯ï¼š**å¦‚æœæ–°æ¶ˆæ¯çš„ ID ä¸åœ¨ç°æœ‰åˆ—è¡¨ä¸­ï¼Œåˆ™å°†å…¶è¿½åŠ åˆ°åˆ—è¡¨æœ«å°¾ã€‚* **è¦†ç›–æ—§æ¶ˆæ¯ï¼š**å¦‚æœæ–°æ¶ˆæ¯çš„ ID ä¸åˆ—è¡¨ä¸­æŸæ¡ç°æœ‰æ¶ˆæ¯çš„ID ç›¸åŒï¼Œåˆ™ç”¨æ–°æ¶ˆæ¯æ›¿æ¢æ‰æ—§æ¶ˆæ¯ã€‚ç”¨äºå¤„ç†å·¥å…·è°ƒç”¨ä¸­é—´ç»“æœæˆ–æ›´æ–°æµå¼ç”Ÿæˆçš„ä¸´æ—¶æ¶ˆæ¯ã€‚* **è‡ªåŠ¨ç±»å‹è½¬æ¢ï¼š**å¦‚æœä¼ å…¥ä¸€ä¸ªå­—ç¬¦ä¸²ï¼ˆå¦‚ &quot;&quot;Hello World&quot;&quot;ï¼‰ï¼Œadd\\_messagesä¼šè‡ªåŠ¨å°†å…¶è½¬æ¢ä¸ºHumanMessageï¼ˆç”¨æˆ·æ¶ˆæ¯ï¼‰\nä»£ç è¯­è¨€ï¼šjavascript\nå¤åˆ¶```\n`class MessageState(TypedDict):\n# æ¶ˆæ¯åˆ—è¡¨,ä½¿ç”¨add\\_messagesåˆå¹¶æ¶ˆæ¯åˆ—è¡¨\nmessages: Annotated[list,', 'doi': '', 'published_date': '2025-12-16T00:00:00+00:00', 'pdf_url': '', 'url': 'https://cloud.tencent.com/developer/article/2601752', 'source': 'exa_context', 'categories': [], 'keywords': [], 'citations': 0, 'references': [], 'extra': {}}], 'save_path': '/home/qinshan/widthresearch/data/downloads'}
2026-02-21 20:11:40,730 - __main__ - INFO - handle_download: searcher=ExaSearcherContext, input_papers=1, save_path=/home/qinshan/widthresearch/data/downloads
2026-02-21 20:11:40,730 - __main__ - WARNING - handle_download: downloaded=0
2026-02-21 20:11:40,730 - __main__ - INFO - call_tool payload: source_tool=exa_context_download, result_type=papers, count=0
2026-02-21 20:11:40,730 - __main__ - INFO - call_tool: name=exa_context_download, result_type=papers, count=0
